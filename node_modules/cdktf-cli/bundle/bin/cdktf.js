"use strict";var W1=Object.create;var Sd=Object.defineProperty;var w1=Object.getOwnPropertyDescriptor;var N1=Object.getOwnPropertyNames;var T1=Object.getPrototypeOf,H1=Object.prototype.hasOwnProperty;var Xe=(e,t)=>()=>(e&&(t=e(e=0)),t);var g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ft=(e,t)=>{for(var n in t)Sd(e,n,{get:t[n],enumerable:!0})},UZ=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of N1(t))!H1.call(e,i)&&i!==n&&Sd(e,i,{get:()=>t[i],enumerable:!(r=w1(t,i))||r.enumerable});return e};var w=(e,t,n)=>(n=e!=null?W1(T1(e)):{},UZ(t||!e||!e.__esModule?Sd(n,"default",{value:e,enumerable:!0}):n,e)),St=e=>UZ(Sd({},"__esModule",{value:!0}),e);var Gt=g(hh=>{"use strict";hh.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,n)=>{arguments[arguments.length]=(r,i)=>{if(r)return n(r);t(i)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};hh.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(n=>t(null,n),t)},"name",{value:e.name})}});var LZ=g((DZe,KZ)=>{var ti=require("constants"),k1=process.cwd,Gd=null,V1=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Gd||(Gd=k1.call(process)),Gd};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Ih=process.chdir,process.chdir=function(e){Gd=null,Ih.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ih));var Ih;KZ.exports=Y1;function Y1(e){ti.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||n(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(l,d,p){p&&process.nextTick(p)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(l,d,p,m){m&&process.nextTick(m)},e.lchownSync=function(){}),V1==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(l){function d(p,m,f){var h=Date.now(),I=0;l(p,m,function b(R){if(R&&(R.code==="EACCES"||R.code==="EPERM"||R.code==="EBUSY")&&Date.now()-h<6e4){setTimeout(function(){e.stat(m,function(W,F){W&&W.code==="ENOENT"?l(p,m,b):f(R)})},I),I<100&&(I+=10);return}f&&f(R)})}return Object.setPrototypeOf&&Object.setPrototypeOf(d,l),d}(e.rename)),e.read=typeof e.read!="function"?e.read:function(l){function d(p,m,f,h,I,b){var R;if(b&&typeof b=="function"){var W=0;R=function(F,H,x){if(F&&F.code==="EAGAIN"&&W<10)return W++,l.call(e,p,m,f,h,I,R);b.apply(this,arguments)}}return l.call(e,p,m,f,h,I,R)}return Object.setPrototypeOf&&Object.setPrototypeOf(d,l),d}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(l){return function(d,p,m,f,h){for(var I=0;;)try{return l.call(e,d,p,m,f,h)}catch(b){if(b.code==="EAGAIN"&&I<10){I++;continue}throw b}}}(e.readSync);function t(l){l.lchmod=function(d,p,m){l.open(d,ti.O_WRONLY|ti.O_SYMLINK,p,function(f,h){if(f){m&&m(f);return}l.fchmod(h,p,function(I){l.close(h,function(b){m&&m(I||b)})})})},l.lchmodSync=function(d,p){var m=l.openSync(d,ti.O_WRONLY|ti.O_SYMLINK,p),f=!0,h;try{h=l.fchmodSync(m,p),f=!1}finally{if(f)try{l.closeSync(m)}catch{}else l.closeSync(m)}return h}}function n(l){ti.hasOwnProperty("O_SYMLINK")&&l.futimes?(l.lutimes=function(d,p,m,f){l.open(d,ti.O_SYMLINK,function(h,I){if(h){f&&f(h);return}l.futimes(I,p,m,function(b){l.close(I,function(R){f&&f(b||R)})})})},l.lutimesSync=function(d,p,m){var f=l.openSync(d,ti.O_SYMLINK),h,I=!0;try{h=l.futimesSync(f,p,m),I=!1}finally{if(I)try{l.closeSync(f)}catch{}else l.closeSync(f)}return h}):l.futimes&&(l.lutimes=function(d,p,m,f){f&&process.nextTick(f)},l.lutimesSync=function(){})}function r(l){return l&&function(d,p,m){return l.call(e,d,p,function(f){u(f)&&(f=null),m&&m.apply(this,arguments)})}}function i(l){return l&&function(d,p){try{return l.call(e,d,p)}catch(m){if(!u(m))throw m}}}function s(l){return l&&function(d,p,m,f){return l.call(e,d,p,m,function(h){u(h)&&(h=null),f&&f.apply(this,arguments)})}}function o(l){return l&&function(d,p,m){try{return l.call(e,d,p,m)}catch(f){if(!u(f))throw f}}}function a(l){return l&&function(d,p,m){typeof p=="function"&&(m=p,p=null);function f(h,I){I&&(I.uid<0&&(I.uid+=4294967296),I.gid<0&&(I.gid+=4294967296)),m&&m.apply(this,arguments)}return p?l.call(e,d,p,f):l.call(e,d,f)}}function c(l){return l&&function(d,p){var m=p?l.call(e,d,p):l.call(e,d);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function u(l){if(!l||l.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(l.code==="EINVAL"||l.code==="EPERM"))}}});var PZ=g((OZe,qZ)=>{var MZ=require("stream").Stream;qZ.exports=F1;function F1(e){return{ReadStream:t,WriteStream:n};function t(r,i){if(!(this instanceof t))return new t(r,i);MZ.call(this);var s=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,c=o.length;a<c;a++){var u=o[a];this[u]=i[u]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(l,d){if(l){s.emit("error",l),s.readable=!1;return}s.fd=d,s.emit("open",d),s._read()})}function n(r,i){if(!(this instanceof n))return new n(r,i);MZ.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var c=s[o];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var jZ=g((UZe,zZ)=>{"use strict";zZ.exports=X1;var x1=Object.getPrototypeOf||function(e){return e.__proto__};function X1(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:x1(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}});var N=g((KZe,bh)=>{var oe=require("fs"),J1=LZ(),D1=PZ(),O1=jZ(),Bd=require("util"),Je,Zd;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Je=Symbol.for("graceful-fs.queue"),Zd=Symbol.for("graceful-fs.previous")):(Je="___graceful-fs.queue",Zd="___graceful-fs.previous");function U1(){}function eE(e,t){Object.defineProperty(e,Je,{get:function(){return t}})}var os=U1;Bd.debuglog?os=Bd.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(os=function(){var e=Bd.format.apply(Bd,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});oe[Je]||(QZ=global[Je]||[],eE(oe,QZ),oe.close=function(e){function t(n,r){return e.call(oe,n,function(i){i||$Z(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(t,Zd,{value:e}),t}(oe.close),oe.closeSync=function(e){function t(n){e.apply(oe,arguments),$Z()}return Object.defineProperty(t,Zd,{value:e}),t}(oe.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){os(oe[Je]),require("assert").equal(oe[Je].length,0)}));var QZ;global[Je]||eE(global,oe[Je]);bh.exports=Ch(O1(oe));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!oe.__patched&&(bh.exports=Ch(oe),oe.__patched=!0);function Ch(e){J1(e),e.gracefulify=Ch,e.createReadStream=H,e.createWriteStream=x;var t=e.readFile;e.readFile=n;function n(T,J,D){return typeof J=="function"&&(D=J,J=null),Be(T,J,D);function Be(ve,Ie,S,E){return t(ve,Ie,function(G){G&&(G.code==="EMFILE"||G.code==="ENFILE")?So([Be,[ve,Ie,S],G,E||Date.now(),Date.now()]):typeof S=="function"&&S.apply(this,arguments)})}}var r=e.writeFile;e.writeFile=i;function i(T,J,D,Be){return typeof D=="function"&&(Be=D,D=null),ve(T,J,D,Be);function ve(Ie,S,E,G,U){return r(Ie,S,E,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?So([ve,[Ie,S,E,G],k,U||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=o);function o(T,J,D,Be){return typeof D=="function"&&(Be=D,D=null),ve(T,J,D,Be);function ve(Ie,S,E,G,U){return s(Ie,S,E,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?So([ve,[Ie,S,E,G],k,U||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=c);function c(T,J,D,Be){return typeof D=="function"&&(Be=D,D=0),ve(T,J,D,Be);function ve(Ie,S,E,G,U){return a(Ie,S,E,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?So([ve,[Ie,S,E,G],k,U||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var u=e.readdir;e.readdir=d;var l=/^v[0-5]\./;function d(T,J,D){typeof J=="function"&&(D=J,J=null);var Be=l.test(process.version)?function(S,E,G,U){return u(S,ve(S,E,G,U))}:function(S,E,G,U){return u(S,E,ve(S,E,G,U))};return Be(T,J,D);function ve(Ie,S,E,G){return function(U,k){U&&(U.code==="EMFILE"||U.code==="ENFILE")?So([Be,[Ie,S,E],U,G||Date.now(),Date.now()]):(k&&k.sort&&k.sort(),typeof E=="function"&&E.call(this,U,k))}}}if(process.version.substr(0,4)==="v0.8"){var p=D1(e);b=p.ReadStream,W=p.WriteStream}var m=e.ReadStream;m&&(b.prototype=Object.create(m.prototype),b.prototype.open=R);var f=e.WriteStream;f&&(W.prototype=Object.create(f.prototype),W.prototype.open=F),Object.defineProperty(e,"ReadStream",{get:function(){return b},set:function(T){b=T},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return W},set:function(T){W=T},enumerable:!0,configurable:!0});var h=b;Object.defineProperty(e,"FileReadStream",{get:function(){return h},set:function(T){h=T},enumerable:!0,configurable:!0});var I=W;Object.defineProperty(e,"FileWriteStream",{get:function(){return I},set:function(T){I=T},enumerable:!0,configurable:!0});function b(T,J){return this instanceof b?(m.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}function R(){var T=this;ce(T.path,T.flags,T.mode,function(J,D){J?(T.autoClose&&T.destroy(),T.emit("error",J)):(T.fd=D,T.emit("open",D),T.read())})}function W(T,J){return this instanceof W?(f.apply(this,arguments),this):W.apply(Object.create(W.prototype),arguments)}function F(){var T=this;ce(T.path,T.flags,T.mode,function(J,D){J?(T.destroy(),T.emit("error",J)):(T.fd=D,T.emit("open",D))})}function H(T,J){return new e.ReadStream(T,J)}function x(T,J){return new e.WriteStream(T,J)}var ne=e.open;e.open=ce;function ce(T,J,D,Be){return typeof D=="function"&&(Be=D,D=null),ve(T,J,D,Be);function ve(Ie,S,E,G,U){return ne(Ie,S,E,function(k,ei){k&&(k.code==="EMFILE"||k.code==="ENFILE")?So([ve,[Ie,S,E,G],k,U||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}return e}function So(e){os("ENQUEUE",e[0].name,e[1]),oe[Je].push(e),yh()}var vd;function $Z(){for(var e=Date.now(),t=0;t<oe[Je].length;++t)oe[Je][t].length>2&&(oe[Je][t][3]=e,oe[Je][t][4]=e);yh()}function yh(){if(clearTimeout(vd),vd=void 0,oe[Je].length!==0){var e=oe[Je].shift(),t=e[0],n=e[1],r=e[2],i=e[3],s=e[4];if(i===void 0)os("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-i>=6e4){os("TIMEOUT",t.name,n);var o=n.pop();typeof o=="function"&&o.call(null,r)}else{var a=Date.now()-s,c=Math.max(s-i,1),u=Math.min(c*1.2,100);a>=u?(os("RETRY",t.name,n),t.apply(null,n.concat([i]))):oe[Je].push(e)}vd===void 0&&(vd=setTimeout(yh,0))}}});var Ah=g(as=>{"use strict";var tE=Gt().fromCallback,zt=N(),K1=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof zt[e]=="function");Object.keys(zt).forEach(e=>{e!=="promises"&&(as[e]=zt[e])});K1.forEach(e=>{as[e]=tE(zt[e])});as.exists=function(e,t){return typeof t=="function"?zt.exists(e,t):new Promise(n=>zt.exists(e,n))};as.read=function(e,t,n,r,i,s){return typeof s=="function"?zt.read(e,t,n,r,i,s):new Promise((o,a)=>{zt.read(e,t,n,r,i,(c,u,l)=>{if(c)return a(c);o({bytesRead:u,buffer:l})})})};as.write=function(e,t,...n){return typeof n[n.length-1]=="function"?zt.write(e,t,...n):new Promise((r,i)=>{zt.write(e,t,...n,(s,o,a)=>{if(s)return i(s);r({bytesWritten:o,buffer:a})})})};typeof zt.realpath.native=="function"&&(as.realpath.native=tE(zt.realpath.native))});var Sh=g((MZe,rE)=>{"use strict";var _h=require("path");function nE(e){return e=_h.normalize(_h.resolve(e)).split(_h.sep),e.length>0?e[0]:null}var L1=/[<>:"|?*]/;function M1(e){let t=nE(e);return e=e.replace(t,""),L1.test(e)}rE.exports={getRootPath:nE,invalidWin32Path:M1}});var sE=g((qZe,iE)=>{"use strict";var q1=N(),Gh=require("path"),P1=Sh().invalidWin32Path,z1=parseInt("0777",8);function Bh(e,t,n,r){if(typeof t=="function"?(n=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&P1(e)){let o=new Error(e+" contains invalid WIN32 path characters.");return o.code="EINVAL",n(o)}let i=t.mode,s=t.fs||q1;i===void 0&&(i=z1&~process.umask()),r||(r=null),n=n||function(){},e=Gh.resolve(e),s.mkdir(e,i,o=>{if(!o)return r=r||e,n(null,r);switch(o.code){case"ENOENT":if(Gh.dirname(e)===e)return n(o);Bh(Gh.dirname(e),t,(a,c)=>{a?n(a,c):Bh(e,t,n,c)});break;default:s.stat(e,(a,c)=>{a||!c.isDirectory()?n(o,r):n(null,r)});break}})}iE.exports=Bh});var aE=g((PZe,oE)=>{"use strict";var j1=N(),vh=require("path"),Q1=Sh().invalidWin32Path,$1=parseInt("0777",8);function Zh(e,t,n){(!t||typeof t!="object")&&(t={mode:t});let r=t.mode,i=t.fs||j1;if(process.platform==="win32"&&Q1(e)){let s=new Error(e+" contains invalid WIN32 path characters.");throw s.code="EINVAL",s}r===void 0&&(r=$1&~process.umask()),n||(n=null),e=vh.resolve(e);try{i.mkdirSync(e,r),n=n||e}catch(s){if(s.code==="ENOENT"){if(vh.dirname(e)===e)throw s;n=Zh(vh.dirname(e),t,n),Zh(e,t,n)}else{let o;try{o=i.statSync(e)}catch{throw s}if(!o.isDirectory())throw s}}return n}oE.exports=Zh});var xt=g((zZe,cE)=>{"use strict";var eP=Gt().fromCallback,Eh=eP(sE()),Rh=aE();cE.exports={mkdirs:Eh,mkdirsSync:Rh,mkdirp:Eh,mkdirpSync:Rh,ensureDir:Eh,ensureDirSync:Rh}});var Wh=g((jZe,lE)=>{"use strict";var ze=N(),uE=require("os"),Ed=require("path");function tP(){let e=Ed.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=Ed.join(uE.tmpdir(),e);let t=new Date(1435410243862);ze.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let n=ze.openSync(e,"r+");return ze.futimesSync(n,t,t),ze.closeSync(n),ze.statSync(e).mtime>1435410243e3}function nP(e){let t=Ed.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=Ed.join(uE.tmpdir(),t);let n=new Date(1435410243862);ze.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",r=>{if(r)return e(r);ze.open(t,"r+",(i,s)=>{if(i)return e(i);ze.futimes(s,n,n,o=>{if(o)return e(o);ze.close(s,a=>{if(a)return e(a);ze.stat(t,(c,u)=>{if(c)return e(c);e(null,u.mtime>1435410243e3)})})})})})}function rP(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function iP(e,t,n,r){ze.open(e,"r+",(i,s)=>{if(i)return r(i);ze.futimes(s,t,n,o=>{ze.close(s,a=>{r&&r(o||a)})})})}function sP(e,t,n){let r=ze.openSync(e,"r+");return ze.futimesSync(r,t,n),ze.closeSync(r)}lE.exports={hasMillisRes:nP,hasMillisResSync:tP,timeRemoveMillis:rP,utimesMillis:iP,utimesMillisSync:sP}});var yc=g((QZe,hE)=>{"use strict";var jt=N(),Bt=require("path"),dE=10,gE=5,oP=0,Nh=process.versions.node.split("."),pE=Number.parseInt(Nh[0],10),mE=Number.parseInt(Nh[1],10),aP=Number.parseInt(Nh[2],10);function Ic(){if(pE>dE)return!0;if(pE===dE){if(mE>gE)return!0;if(mE===gE&&aP>=oP)return!0}return!1}function cP(e,t,n){Ic()?jt.stat(e,{bigint:!0},(r,i)=>{if(r)return n(r);jt.stat(t,{bigint:!0},(s,o)=>s?s.code==="ENOENT"?n(null,{srcStat:i,destStat:null}):n(s):n(null,{srcStat:i,destStat:o}))}):jt.stat(e,(r,i)=>{if(r)return n(r);jt.stat(t,(s,o)=>s?s.code==="ENOENT"?n(null,{srcStat:i,destStat:null}):n(s):n(null,{srcStat:i,destStat:o}))})}function uP(e,t){let n,r;Ic()?n=jt.statSync(e,{bigint:!0}):n=jt.statSync(e);try{Ic()?r=jt.statSync(t,{bigint:!0}):r=jt.statSync(t)}catch(i){if(i.code==="ENOENT")return{srcStat:n,destStat:null};throw i}return{srcStat:n,destStat:r}}function lP(e,t,n,r){cP(e,t,(i,s)=>{if(i)return r(i);let{srcStat:o,destStat:a}=s;return a&&a.ino&&a.dev&&a.ino===o.ino&&a.dev===o.dev?r(new Error("Source and destination must not be the same.")):o.isDirectory()&&Th(e,t)?r(new Error(Cc(e,t,n))):r(null,{srcStat:o,destStat:a})})}function dP(e,t,n){let{srcStat:r,destStat:i}=uP(e,t);if(i&&i.ino&&i.dev&&i.ino===r.ino&&i.dev===r.dev)throw new Error("Source and destination must not be the same.");if(r.isDirectory()&&Th(e,t))throw new Error(Cc(e,t,n));return{srcStat:r,destStat:i}}function wh(e,t,n,r,i){let s=Bt.resolve(Bt.dirname(e)),o=Bt.resolve(Bt.dirname(n));if(o===s||o===Bt.parse(o).root)return i();Ic()?jt.stat(o,{bigint:!0},(a,c)=>a?a.code==="ENOENT"?i():i(a):c.ino&&c.dev&&c.ino===t.ino&&c.dev===t.dev?i(new Error(Cc(e,n,r))):wh(e,t,o,r,i)):jt.stat(o,(a,c)=>a?a.code==="ENOENT"?i():i(a):c.ino&&c.dev&&c.ino===t.ino&&c.dev===t.dev?i(new Error(Cc(e,n,r))):wh(e,t,o,r,i))}function fE(e,t,n,r){let i=Bt.resolve(Bt.dirname(e)),s=Bt.resolve(Bt.dirname(n));if(s===i||s===Bt.parse(s).root)return;let o;try{Ic()?o=jt.statSync(s,{bigint:!0}):o=jt.statSync(s)}catch(a){if(a.code==="ENOENT")return;throw a}if(o.ino&&o.dev&&o.ino===t.ino&&o.dev===t.dev)throw new Error(Cc(e,n,r));return fE(e,t,s,r)}function Th(e,t){let n=Bt.resolve(e).split(Bt.sep).filter(i=>i),r=Bt.resolve(t).split(Bt.sep).filter(i=>i);return n.reduce((i,s,o)=>i&&r[o]===s,!0)}function Cc(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}hE.exports={checkPaths:lP,checkPathsSync:dP,checkParentPaths:wh,checkParentPathsSync:fE,isSrcSubdir:Th}});var CE=g(($Ze,IE)=>{"use strict";IE.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch{return new Buffer(e)}return new Buffer(e)}});var SE=g((eEe,_E)=>{"use strict";var re=N(),bc=require("path"),gP=xt().mkdirsSync,pP=Wh().utimesMillisSync,Ac=yc();function mP(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:r,destStat:i}=Ac.checkPathsSync(e,t,"copy");return Ac.checkParentPathsSync(e,r,t,"copy"),fP(i,e,t,n)}function fP(e,t,n,r){if(r.filter&&!r.filter(t,n))return;let i=bc.dirname(n);return re.existsSync(i)||gP(i),yE(e,t,n,r)}function yE(e,t,n,r){if(!(r.filter&&!r.filter(t,n)))return hP(e,t,n,r)}function hP(e,t,n,r){let s=(r.dereference?re.statSync:re.lstatSync)(t);if(s.isDirectory())return bP(s,e,t,n,r);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return IP(s,e,t,n,r);if(s.isSymbolicLink())return SP(e,t,n,r)}function IP(e,t,n,r,i){return t?CP(e,n,r,i):bE(e,n,r,i)}function CP(e,t,n,r){if(r.overwrite)return re.unlinkSync(n),bE(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}function bE(e,t,n,r){return typeof re.copyFileSync=="function"?(re.copyFileSync(t,n),re.chmodSync(n,e.mode),r.preserveTimestamps?pP(n,e.atime,e.mtime):void 0):yP(e,t,n,r)}function yP(e,t,n,r){let s=CE()(65536),o=re.openSync(t,"r"),a=re.openSync(n,"w",e.mode),c=0;for(;c<e.size;){let u=re.readSync(o,s,0,65536,c);re.writeSync(a,s,0,u),c+=u}r.preserveTimestamps&&re.futimesSync(a,e.atime,e.mtime),re.closeSync(o),re.closeSync(a)}function bP(e,t,n,r,i){if(!t)return AP(e,n,r,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`);return AE(n,r,i)}function AP(e,t,n,r){return re.mkdirSync(n),AE(t,n,r),re.chmodSync(n,e.mode)}function AE(e,t,n){re.readdirSync(e).forEach(r=>_P(r,e,t,n))}function _P(e,t,n,r){let i=bc.join(t,e),s=bc.join(n,e),{destStat:o}=Ac.checkPathsSync(i,s,"copy");return yE(o,i,s,r)}function SP(e,t,n,r){let i=re.readlinkSync(t);if(r.dereference&&(i=bc.resolve(process.cwd(),i)),e){let s;try{s=re.readlinkSync(n)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return re.symlinkSync(i,n);throw o}if(r.dereference&&(s=bc.resolve(process.cwd(),s)),Ac.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(re.statSync(n).isDirectory()&&Ac.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return GP(i,n)}else return re.symlinkSync(i,n)}function GP(e,t){return re.unlinkSync(t),re.symlinkSync(e,t)}_E.exports=mP});var Hh=g((tEe,GE)=>{"use strict";GE.exports={copySync:SE()}});var Vn=g((nEe,vE)=>{"use strict";var BP=Gt().fromPromise,BE=Ah();function vP(e){return BE.access(e).then(()=>!0).catch(()=>!1)}vE.exports={pathExists:BP(vP),pathExistsSync:BE.existsSync}});var kE=g((rEe,HE)=>{"use strict";var De=N(),_c=require("path"),ZP=xt().mkdirs,EP=Vn().pathExists,RP=Wh().utimesMillis,Sc=yc();function WP(e,t,n,r){typeof n=="function"&&!r?(r=n,n={}):typeof n=="function"&&(n={filter:n}),r=r||function(){},n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),Sc.checkPaths(e,t,"copy",(i,s)=>{if(i)return r(i);let{srcStat:o,destStat:a}=s;Sc.checkParentPaths(e,o,t,"copy",c=>c?r(c):n.filter?RE(ZE,a,e,t,n,r):ZE(a,e,t,n,r))})}function ZE(e,t,n,r,i){let s=_c.dirname(n);EP(s,(o,a)=>{if(o)return i(o);if(a)return kh(e,t,n,r,i);ZP(s,c=>c?i(c):kh(e,t,n,r,i))})}function RE(e,t,n,r,i,s){Promise.resolve(i.filter(n,r)).then(o=>o?e(t,n,r,i,s):s(),o=>s(o))}function kh(e,t,n,r,i){return r.filter?RE(EE,e,t,n,r,i):EE(e,t,n,r,i)}function EE(e,t,n,r,i){(r.dereference?De.stat:De.lstat)(t,(o,a)=>{if(o)return i(o);if(a.isDirectory())return HP(a,e,t,n,r,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return wP(a,e,t,n,r,i);if(a.isSymbolicLink())return YP(e,t,n,r,i)})}function wP(e,t,n,r,i,s){return t?NP(e,n,r,i,s):WE(e,n,r,i,s)}function NP(e,t,n,r,i){if(r.overwrite)De.unlink(n,s=>s?i(s):WE(e,t,n,r,i));else return r.errorOnExist?i(new Error(`'${n}' already exists`)):i()}function WE(e,t,n,r,i){return typeof De.copyFile=="function"?De.copyFile(t,n,s=>s?i(s):wE(e,n,r,i)):TP(e,t,n,r,i)}function TP(e,t,n,r,i){let s=De.createReadStream(t);s.on("error",o=>i(o)).once("open",()=>{let o=De.createWriteStream(n,{mode:e.mode});o.on("error",a=>i(a)).on("open",()=>s.pipe(o)).once("close",()=>wE(e,n,r,i))})}function wE(e,t,n,r){De.chmod(t,e.mode,i=>i?r(i):n.preserveTimestamps?RP(t,e.atime,e.mtime,r):r())}function HP(e,t,n,r,i,s){return t?t&&!t.isDirectory()?s(new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`)):NE(n,r,i,s):kP(e,n,r,i,s)}function kP(e,t,n,r,i){De.mkdir(n,s=>{if(s)return i(s);NE(t,n,r,o=>o?i(o):De.chmod(n,e.mode,i))})}function NE(e,t,n,r){De.readdir(e,(i,s)=>i?r(i):TE(s,e,t,n,r))}function TE(e,t,n,r,i){let s=e.pop();return s?VP(e,s,t,n,r,i):i()}function VP(e,t,n,r,i,s){let o=_c.join(n,t),a=_c.join(r,t);Sc.checkPaths(o,a,"copy",(c,u)=>{if(c)return s(c);let{destStat:l}=u;kh(l,o,a,i,d=>d?s(d):TE(e,n,r,i,s))})}function YP(e,t,n,r,i){De.readlink(t,(s,o)=>{if(s)return i(s);if(r.dereference&&(o=_c.resolve(process.cwd(),o)),e)De.readlink(n,(a,c)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?De.symlink(o,n,i):i(a):(r.dereference&&(c=_c.resolve(process.cwd(),c)),Sc.isSrcSubdir(o,c)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${c}'.`)):e.isDirectory()&&Sc.isSrcSubdir(c,o)?i(new Error(`Cannot overwrite '${c}' with '${o}'.`)):FP(o,n,i)));else return De.symlink(o,n,i)})}function FP(e,t,n){De.unlink(t,r=>r?n(r):De.symlink(e,t,n))}HE.exports=WP});var Vh=g((iEe,VE)=>{"use strict";var xP=Gt().fromCallback;VE.exports={copy:xP(kE())}});var KE=g((sEe,UE)=>{"use strict";var YE=N(),JE=require("path"),P=require("assert"),Gc=process.platform==="win32";function DE(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{e[n]=e[n]||YE[n],n=n+"Sync",e[n]=e[n]||YE[n]}),e.maxBusyTries=e.maxBusyTries||3}function Yh(e,t,n){let r=0;typeof t=="function"&&(n=t,t={}),P(e,"rimraf: missing path"),P.strictEqual(typeof e,"string","rimraf: path should be a string"),P.strictEqual(typeof n,"function","rimraf: callback function required"),P(t,"rimraf: invalid options argument provided"),P.strictEqual(typeof t,"object","rimraf: options should be object"),DE(t),FE(e,t,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&r<t.maxBusyTries){r++;let o=r*100;return setTimeout(()=>FE(e,t,i),o)}s.code==="ENOENT"&&(s=null)}n(s)})}function FE(e,t,n){P(e),P(t),P(typeof n=="function"),t.lstat(e,(r,i)=>{if(r&&r.code==="ENOENT")return n(null);if(r&&r.code==="EPERM"&&Gc)return xE(e,t,r,n);if(i&&i.isDirectory())return Rd(e,t,r,n);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return n(null);if(s.code==="EPERM")return Gc?xE(e,t,s,n):Rd(e,t,s,n);if(s.code==="EISDIR")return Rd(e,t,s,n)}return n(s)})})}function xE(e,t,n,r){P(e),P(t),P(typeof r=="function"),n&&P(n instanceof Error),t.chmod(e,438,i=>{i?r(i.code==="ENOENT"?null:n):t.stat(e,(s,o)=>{s?r(s.code==="ENOENT"?null:n):o.isDirectory()?Rd(e,t,n,r):t.unlink(e,r)})})}function XE(e,t,n){let r;P(e),P(t),n&&P(n instanceof Error);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw n}try{r=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw n}r.isDirectory()?Wd(e,t,n):t.unlinkSync(e)}function Rd(e,t,n,r){P(e),P(t),n&&P(n instanceof Error),P(typeof r=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?XP(e,t,r):i&&i.code==="ENOTDIR"?r(n):r(i)})}function XP(e,t,n){P(e),P(t),P(typeof n=="function"),t.readdir(e,(r,i)=>{if(r)return n(r);let s=i.length,o;if(s===0)return t.rmdir(e,n);i.forEach(a=>{Yh(JE.join(e,a),t,c=>{if(!o){if(c)return n(o=c);--s===0&&t.rmdir(e,n)}})})})}function OE(e,t){let n;t=t||{},DE(t),P(e,"rimraf: missing path"),P.strictEqual(typeof e,"string","rimraf: path should be a string"),P(t,"rimraf: missing options"),P.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&Gc&&XE(e,t,r)}try{n&&n.isDirectory()?Wd(e,t,null):t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return Gc?XE(e,t,r):Wd(e,t,r);if(r.code!=="EISDIR")throw r;Wd(e,t,r)}}function Wd(e,t,n){P(e),P(t),n&&P(n instanceof Error);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR")throw n;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")JP(e,t);else if(r.code!=="ENOENT")throw r}}function JP(e,t){if(P(e),P(t),t.readdirSync(e).forEach(n=>OE(JE.join(e,n),t)),Gc){let n=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-n<500)}else return t.rmdirSync(e,t)}UE.exports=Yh;Yh.sync=OE});var Bc=g((oEe,ME)=>{"use strict";var DP=Gt().fromCallback,LE=KE();ME.exports={remove:DP(LE),removeSync:LE.sync}});var t0=g((aEe,e0)=>{"use strict";var OP=Gt().fromCallback,zE=N(),jE=require("path"),QE=xt(),$E=Bc(),qE=OP(function(t,n){n=n||function(){},zE.readdir(t,(r,i)=>{if(r)return QE.mkdirs(t,n);i=i.map(o=>jE.join(t,o)),s();function s(){let o=i.pop();if(!o)return n();$E.remove(o,a=>{if(a)return n(a);s()})}})});function PE(e){let t;try{t=zE.readdirSync(e)}catch{return QE.mkdirsSync(e)}t.forEach(n=>{n=jE.join(e,n),$E.removeSync(n)})}e0.exports={emptyDirSync:PE,emptydirSync:PE,emptyDir:qE,emptydir:qE}});var s0=g((cEe,i0)=>{"use strict";var UP=Gt().fromCallback,n0=require("path"),vc=N(),r0=xt(),KP=Vn().pathExists;function LP(e,t){function n(){vc.writeFile(e,"",r=>{if(r)return t(r);t()})}vc.stat(e,(r,i)=>{if(!r&&i.isFile())return t();let s=n0.dirname(e);KP(s,(o,a)=>{if(o)return t(o);if(a)return n();r0.mkdirs(s,c=>{if(c)return t(c);n()})})})}function MP(e){let t;try{t=vc.statSync(e)}catch{}if(t&&t.isFile())return;let n=n0.dirname(e);vc.existsSync(n)||r0.mkdirsSync(n),vc.writeFileSync(e,"")}i0.exports={createFile:UP(LP),createFileSync:MP}});var l0=g((uEe,u0)=>{"use strict";var qP=Gt().fromCallback,a0=require("path"),cs=N(),c0=xt(),o0=Vn().pathExists;function PP(e,t,n){function r(i,s){cs.link(i,s,o=>{if(o)return n(o);n(null)})}o0(t,(i,s)=>{if(i)return n(i);if(s)return n(null);cs.lstat(e,o=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);let a=a0.dirname(t);o0(a,(c,u)=>{if(c)return n(c);if(u)return r(e,t);c0.mkdirs(a,l=>{if(l)return n(l);r(e,t)})})})})}function zP(e,t){if(cs.existsSync(t))return;try{cs.lstatSync(e)}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let r=a0.dirname(t);return cs.existsSync(r)||c0.mkdirsSync(r),cs.linkSync(e,t)}u0.exports={createLink:qP(PP),createLinkSync:zP}});var g0=g((lEe,d0)=>{"use strict";var ni=require("path"),Zc=N(),jP=Vn().pathExists;function QP(e,t,n){if(ni.isAbsolute(e))return Zc.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),n(r)):n(null,{toCwd:e,toDst:e}));{let r=ni.dirname(t),i=ni.join(r,e);return jP(i,(s,o)=>s?n(s):o?n(null,{toCwd:i,toDst:e}):Zc.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),n(a)):n(null,{toCwd:e,toDst:ni.relative(r,e)})))}}function $P(e,t){let n;if(ni.isAbsolute(e)){if(n=Zc.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let r=ni.dirname(t),i=ni.join(r,e);if(n=Zc.existsSync(i),n)return{toCwd:i,toDst:e};if(n=Zc.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:ni.relative(r,e)}}}d0.exports={symlinkPaths:QP,symlinkPathsSync:$P}});var f0=g((dEe,m0)=>{"use strict";var p0=N();function ez(e,t,n){if(n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,t)return n(null,t);p0.lstat(e,(r,i)=>{if(r)return n(null,"file");t=i&&i.isDirectory()?"dir":"file",n(null,t)})}function tz(e,t){let n;if(t)return t;try{n=p0.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}m0.exports={symlinkType:ez,symlinkTypeSync:tz}});var _0=g((gEe,A0)=>{"use strict";var nz=Gt().fromCallback,I0=require("path"),Go=N(),C0=xt(),rz=C0.mkdirs,iz=C0.mkdirsSync,y0=g0(),sz=y0.symlinkPaths,oz=y0.symlinkPathsSync,b0=f0(),az=b0.symlinkType,cz=b0.symlinkTypeSync,h0=Vn().pathExists;function uz(e,t,n,r){r=typeof n=="function"?n:r,n=typeof n=="function"?!1:n,h0(t,(i,s)=>{if(i)return r(i);if(s)return r(null);sz(e,t,(o,a)=>{if(o)return r(o);e=a.toDst,az(a.toCwd,n,(c,u)=>{if(c)return r(c);let l=I0.dirname(t);h0(l,(d,p)=>{if(d)return r(d);if(p)return Go.symlink(e,t,u,r);rz(l,m=>{if(m)return r(m);Go.symlink(e,t,u,r)})})})})})}function lz(e,t,n){if(Go.existsSync(t))return;let i=oz(e,t);e=i.toDst,n=cz(i.toCwd,n);let s=I0.dirname(t);return Go.existsSync(s)||iz(s),Go.symlinkSync(e,t,n)}A0.exports={createSymlink:nz(uz),createSymlinkSync:lz}});var G0=g((pEe,S0)=>{"use strict";var wd=s0(),Nd=l0(),Td=_0();S0.exports={createFile:wd.createFile,createFileSync:wd.createFileSync,ensureFile:wd.createFile,ensureFileSync:wd.createFileSync,createLink:Nd.createLink,createLinkSync:Nd.createLinkSync,ensureLink:Nd.createLink,ensureLinkSync:Nd.createLinkSync,createSymlink:Td.createSymlink,createSymlinkSync:Td.createSymlinkSync,ensureSymlink:Td.createSymlink,ensureSymlinkSync:Td.createSymlinkSync}});var E0=g((mEe,Z0)=>{var Bo;try{Bo=N()}catch{Bo=require("fs")}function dz(e,t,n){n==null&&(n=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var r=t.fs||Bo,i=!0;"throws"in t&&(i=t.throws),r.readFile(e,t,function(s,o){if(s)return n(s);o=v0(o);var a;try{a=JSON.parse(o,t?t.reviver:null)}catch(c){return i?(c.message=e+": "+c.message,n(c)):n(null,null)}n(null,a)})}function gz(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var n=t.fs||Bo,r=!0;"throws"in t&&(r=t.throws);try{var i=n.readFileSync(e,t);return i=v0(i),JSON.parse(i,t.reviver)}catch(s){if(r)throw s.message=e+": "+s.message,s;return null}}function B0(e,t){var n,r=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(n=t.spaces),t.EOL&&(r=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,n);return i.replace(/\n/g,r)+r}function pz(e,t,n,r){r==null&&(r=n,n={}),n=n||{};var i=n.fs||Bo,s="";try{s=B0(t,n)}catch(o){r&&r(o,null);return}i.writeFile(e,s,n,r)}function mz(e,t,n){n=n||{};var r=n.fs||Bo,i=B0(t,n);return r.writeFileSync(e,i,n)}function v0(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var fz={readFile:dz,readFileSync:gz,writeFile:pz,writeFileSync:mz};Z0.exports=fz});var kd=g((fEe,W0)=>{"use strict";var R0=Gt().fromCallback,Hd=E0();W0.exports={readJson:R0(Hd.readFile),readJsonSync:Hd.readFileSync,writeJson:R0(Hd.writeFile),writeJsonSync:Hd.writeFileSync}});var T0=g((hEe,N0)=>{"use strict";var hz=require("path"),Iz=xt(),Cz=Vn().pathExists,w0=kd();function yz(e,t,n,r){typeof n=="function"&&(r=n,n={});let i=hz.dirname(e);Cz(i,(s,o)=>{if(s)return r(s);if(o)return w0.writeJson(e,t,n,r);Iz.mkdirs(i,a=>{if(a)return r(a);w0.writeJson(e,t,n,r)})})}N0.exports=yz});var k0=g((IEe,H0)=>{"use strict";var bz=N(),Az=require("path"),_z=xt(),Sz=kd();function Gz(e,t,n){let r=Az.dirname(e);bz.existsSync(r)||_z.mkdirsSync(r),Sz.writeJsonSync(e,t,n)}H0.exports=Gz});var Y0=g((CEe,V0)=>{"use strict";var Bz=Gt().fromCallback,ut=kd();ut.outputJson=Bz(T0());ut.outputJsonSync=k0();ut.outputJSON=ut.outputJson;ut.outputJSONSync=ut.outputJsonSync;ut.writeJSON=ut.writeJson;ut.writeJSONSync=ut.writeJsonSync;ut.readJSON=ut.readJson;ut.readJSONSync=ut.readJsonSync;V0.exports=ut});var O0=g((yEe,D0)=>{"use strict";var X0=N(),vz=require("path"),Zz=Hh().copySync,J0=Bc().removeSync,Ez=xt().mkdirpSync,F0=yc();function Rz(e,t,n){n=n||{};let r=n.overwrite||n.clobber||!1,{srcStat:i}=F0.checkPathsSync(e,t,"move");return F0.checkParentPathsSync(e,i,t,"move"),Ez(vz.dirname(t)),Wz(e,t,r)}function Wz(e,t,n){if(n)return J0(t),x0(e,t,n);if(X0.existsSync(t))throw new Error("dest already exists.");return x0(e,t,n)}function x0(e,t,n){try{X0.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return wz(e,t,n)}}function wz(e,t,n){return Zz(e,t,{overwrite:n,errorOnExist:!0}),J0(e)}D0.exports=Rz});var K0=g((bEe,U0)=>{"use strict";U0.exports={moveSync:O0()}});var z0=g((AEe,P0)=>{"use strict";var Nz=N(),Tz=require("path"),Hz=Vh().copy,q0=Bc().remove,kz=xt().mkdirp,Vz=Vn().pathExists,L0=yc();function Yz(e,t,n,r){typeof n=="function"&&(r=n,n={});let i=n.overwrite||n.clobber||!1;L0.checkPaths(e,t,"move",(s,o)=>{if(s)return r(s);let{srcStat:a}=o;L0.checkParentPaths(e,a,t,"move",c=>{if(c)return r(c);kz(Tz.dirname(t),u=>u?r(u):Fz(e,t,i,r))})})}function Fz(e,t,n,r){if(n)return q0(t,i=>i?r(i):M0(e,t,n,r));Vz(t,(i,s)=>i?r(i):s?r(new Error("dest already exists.")):M0(e,t,n,r))}function M0(e,t,n,r){Nz.rename(e,t,i=>i?i.code!=="EXDEV"?r(i):xz(e,t,n,r):r())}function xz(e,t,n,r){Hz(e,t,{overwrite:n,errorOnExist:!0},s=>s?r(s):q0(e,r))}P0.exports=Yz});var Q0=g((_Ee,j0)=>{"use strict";var Xz=Gt().fromCallback;j0.exports={move:Xz(z0())}});var nR=g((SEe,tR)=>{"use strict";var Jz=Gt().fromCallback,Ec=N(),$0=require("path"),eR=xt(),Dz=Vn().pathExists;function Oz(e,t,n,r){typeof n=="function"&&(r=n,n="utf8");let i=$0.dirname(e);Dz(i,(s,o)=>{if(s)return r(s);if(o)return Ec.writeFile(e,t,n,r);eR.mkdirs(i,a=>{if(a)return r(a);Ec.writeFile(e,t,n,r)})})}function Uz(e,...t){let n=$0.dirname(e);if(Ec.existsSync(n))return Ec.writeFileSync(e,...t);eR.mkdirsSync(n),Ec.writeFileSync(e,...t)}tR.exports={outputFile:Jz(Oz),outputFileSync:Uz}});var Vd=g((GEe,Fh)=>{"use strict";Fh.exports=Object.assign({},Ah(),Hh(),Vh(),t0(),G0(),Y0(),xt(),K0(),Q0(),nR(),Vn(),Bc());var rR=require("fs");Object.getOwnPropertyDescriptor(rR,"promises")&&Object.defineProperty(Fh.exports,"promises",{get(){return rR.promises}})});var yn=g(je=>{Object.defineProperty(je,"__esModule",{value:!0});var iR=Object.prototype.toString;function Kz(e){switch(iR.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Yd(e,Error)}}function vo(e,t){return iR.call(e)===`[object ${t}]`}function Lz(e){return vo(e,"ErrorEvent")}function Mz(e){return vo(e,"DOMError")}function qz(e){return vo(e,"DOMException")}function Pz(e){return vo(e,"String")}function zz(e){return e===null||typeof e!="object"&&typeof e!="function"}function sR(e){return vo(e,"Object")}function jz(e){return typeof Event<"u"&&Yd(e,Event)}function Qz(e){return typeof Element<"u"&&Yd(e,Element)}function $z(e){return vo(e,"RegExp")}function e3(e){return Boolean(e&&e.then&&typeof e.then=="function")}function t3(e){return sR(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function n3(e){return typeof e=="number"&&e!==e}function Yd(e,t){try{return e instanceof t}catch{return!1}}je.isDOMError=Mz;je.isDOMException=qz;je.isElement=Qz;je.isError=Kz;je.isErrorEvent=Lz;je.isEvent=jz;je.isInstanceOf=Yd;je.isNaN=n3;je.isPlainObject=sR;je.isPrimitive=zz;je.isRegExp=$z;je.isString=Pz;je.isSyntheticEvent=t3;je.isThenable=e3});var Rc=g(us=>{Object.defineProperty(us,"__esModule",{value:!0});var xh=yn();function r3(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function i3(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let i=Math.max(t-60,0);i<5&&(i=0);let s=Math.min(i+140,r);return s>r-5&&(s=r),s===r&&(i=Math.max(s-140,0)),n=n.slice(i,s),i>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function s3(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let i=e[r];try{n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function oR(e,t,n=!1){return xh.isString(e)?xh.isRegExp(t)?t.test(e):xh.isString(t)?n?e===t:e.includes(t):!1:!1}function o3(e,t=[],n=!1){return t.some(r=>oR(e,r,n))}us.isMatchingPattern=oR;us.safeJoin=s3;us.snipLine=i3;us.stringMatchesSomePattern=o3;us.truncate=r3});var uR=g(Dh=>{Object.defineProperty(Dh,"__esModule",{value:!0});var Xh=yn(),a3=Rc();function c3(e,t,n=250,r,i,s,o){if(!s.exception||!s.exception.values||!o||!Xh.isInstanceOf(o.originalException,Error))return;let a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=u3(Jh(e,t,i,o.originalException,r,s.exception.values,a,0),n))}function Jh(e,t,n,r,i,s,o,a){if(s.length>=n+1)return s;let c=[...s];if(Xh.isInstanceOf(r[i],Error)){aR(o,a);let u=e(t,r[i]),l=c.length;cR(u,i,l,a),c=Jh(e,t,n,r[i],i,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(Xh.isInstanceOf(u,Error)){aR(o,a);let d=e(t,u),p=c.length;cR(d,`errors[${l}]`,p,a),c=Jh(e,t,n,u,i,[d,...c],d,p)}}),c}function aR(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function cR(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function u3(e,t){return e.map(n=>(n.value&&(n.value=a3.truncate(n.value,t)),n))}Dh.applyAggregateErrorsToEvent=c3});var hr=g(Wc=>{Object.defineProperty(Wc,"__esModule",{value:!0});function Fd(e){return e&&e.Math==Math?e:void 0}var Oh=typeof globalThis=="object"&&Fd(globalThis)||typeof window=="object"&&Fd(window)||typeof self=="object"&&Fd(self)||typeof global=="object"&&Fd(global)||function(){return this}()||{};function l3(){return Oh}function d3(e,t,n){let r=n||Oh,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}Wc.GLOBAL_OBJ=Oh;Wc.getGlobalObject=l3;Wc.getGlobalSingleton=d3});var Uh=g(wc=>{Object.defineProperty(wc,"__esModule",{value:!0});var g3=yn(),p3=hr(),xd=p3.getGlobalObject(),m3=80;function f3(e,t={}){try{let n=e,r=5,i=[],s=0,o=0,a=" > ",c=a.length,u,l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||m3;for(;n&&s++<r&&(u=h3(n,l),!(u==="html"||s>1&&o+i.length*c+u.length>=d));)i.push(u),o+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function h3(e,t){let n=e,r=[],i,s,o,a,c;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());let u=t&&t.length?t.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(u&&u.length)u.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&g3.isString(i))for(s=i.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);let l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)o=l[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function I3(){try{return xd.document.location.href}catch{return""}}function C3(e){return xd.document&&xd.document.querySelector?xd.document.querySelector(e):null}wc.getDomElement=C3;wc.getLocationHref=I3;wc.htmlTreeAsString=f3});var Zo=g(ls=>{Object.defineProperty(ls,"__esModule",{value:!0});var Xd=hr(),y3="Sentry Logger ",Jd=["debug","info","warn","error","log","assert","trace"];function dR(e){if(!("console"in Xd.GLOBAL_OBJ))return e();let t=Xd.GLOBAL_OBJ.console,n={};Jd.forEach(r=>{let i=t[r]&&t[r].__sentry_original__;r in t&&i&&(n[r]=t[r],t[r]=i)});try{return e()}finally{Object.keys(n).forEach(r=>{t[r]=n[r]})}}function lR(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Jd.forEach(n=>{t[n]=(...r)=>{e&&dR(()=>{Xd.GLOBAL_OBJ.console[n](`${y3}[${n}]:`,...r)})}}):Jd.forEach(n=>{t[n]=()=>{}}),t}ls.logger=void 0;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?ls.logger=Xd.getGlobalSingleton("logger",lR):ls.logger=lR();ls.CONSOLE_LEVELS=Jd;ls.consoleSandbox=dR});var Kh=g(Nc=>{Object.defineProperty(Nc,"__esModule",{value:!0});var Dd=Zo(),b3=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function A3(e){return e==="http"||e==="https"}function _3(e,t=!1){let{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function gR(e){let t=b3.exec(e);if(!t){console.error(`Invalid Sentry Dsn: ${e}`);return}let[n,r,i="",s,o="",a]=t.slice(1),c="",u=a,l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){let d=u.match(/^\d+/);d&&(u=d[0])}return pR({host:s,pass:i,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function pR(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function S3(e){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(Dd.logger.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?A3(r)?t&&isNaN(parseInt(t,10))?(Dd.logger.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Dd.logger.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(Dd.logger.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function G3(e){let t=typeof e=="string"?gR(e):pR(e);if(!(!t||!S3(t)))return t}Nc.dsnFromString=gR;Nc.dsnToString=_3;Nc.makeDsn=G3});var qh=g(Mh=>{Object.defineProperty(Mh,"__esModule",{value:!0});var Lh=class extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}};Mh.SentryError=Lh});var Ro=g(bn=>{Object.defineProperty(bn,"__esModule",{value:!0});var B3=Uh(),Eo=yn(),mR=Rc();function v3(e,t,n){if(!(t in e))return;let r=e[t],i=n(r);if(typeof i=="function")try{CR(i,r)}catch{}e[t]=i}function IR(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function CR(e,t){let n=t.prototype||{};e.prototype=t.prototype=n,IR(e,"__sentry_original__",t)}function Z3(e){return e.__sentry_original__}function E3(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function yR(e){if(Eo.isError(e))return{message:e.message,name:e.name,stack:e.stack,...hR(e)};if(Eo.isEvent(e)){let t={type:e.type,target:fR(e.target),currentTarget:fR(e.currentTarget),...hR(e)};return typeof CustomEvent<"u"&&Eo.isInstanceOf(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function fR(e){try{return Eo.isElement(e)?B3.htmlTreeAsString(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function hR(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function R3(e,t=40){let n=Object.keys(yR(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return mR.truncate(n[0],t);for(let r=n.length;r>0;r--){let i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:mR.truncate(i,t)}return""}function W3(e){return Ph(e,new Map)}function Ph(e,t){if(Eo.isPlainObject(e)){let n=t.get(e);if(n!==void 0)return n;let r={};t.set(e,r);for(let i of Object.keys(e))typeof e[i]<"u"&&(r[i]=Ph(e[i],t));return r}if(Array.isArray(e)){let n=t.get(e);if(n!==void 0)return n;let r=[];return t.set(e,r),e.forEach(i=>{r.push(Ph(i,t))}),r}return e}function w3(e){let t;switch(!0){case e==null:t=new String(e);break;case(typeof e=="symbol"||typeof e=="bigint"):t=Object(e);break;case Eo.isPrimitive(e):t=new e.constructor(e);break;default:t=e;break}return t}bn.addNonEnumerableProperty=IR;bn.convertToPlainObject=yR;bn.dropUndefinedKeys=W3;bn.extractExceptionKeysForMessage=R3;bn.fill=v3;bn.getOriginalFunction=Z3;bn.markFunctionWrapped=CR;bn.objectify=w3;bn.urlEncode=E3});var bR=g(zh=>{Object.defineProperty(zh,"__esModule",{value:!0});function N3(e){let t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return r=>{let i=r.match(n);if(i){let s,o,a,c,u;if(i[1]){a=i[1];let f=a.lastIndexOf(".");if(a[f-1]==="."&&f--,f>0){s=a.slice(0,f),o=a.slice(f+1);let h=s.indexOf(".Module");h>0&&(a=a.slice(h+1),s=s.slice(0,h))}c=void 0}o&&(c=s,u=o),o==="<anonymous>"&&(u=void 0,a=void 0),a===void 0&&(u=u||"<anonymous>",a=c?`${c}.${u}`:u);let l=i[2]&&i[2].startsWith("file://")?i[2].slice(7):i[2],d=i[5]==="native";!l&&i[5]&&!d&&(l=i[5]);let m=!(d||l&&!l.startsWith("/")&&!l.includes(":\\")&&!l.startsWith(".")&&!l.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&l!==void 0&&!l.includes("node_modules/");return{filename:l,module:e?e(l):void 0,function:a,lineno:parseInt(i[3],10)||void 0,colno:parseInt(i[4],10)||void 0,in_app:m}}if(r.match(t))return{filename:r}}}zh.node=N3});var Od=g(ds=>{Object.defineProperty(ds,"__esModule",{value:!0});var T3=bR(),SR=50,AR=/\(error: (.*)\)/,_R=/captureMessage|captureException/;function GR(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{let i=[],s=n.split(`
`);for(let o=r;o<s.length;o++){let a=s[o];if(a.length>1024)continue;let c=AR.test(a)?a.replace(AR,"$1"):a;if(!c.match(/\S*Error: /)){for(let u of t){let l=u(c);if(l){i.push(l);break}}if(i.length>=SR)break}}return BR(i)}}function H3(e){return Array.isArray(e)?GR(...e):e}function BR(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),_R.test(t[t.length-1].function||"")&&(t.pop(),_R.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,SR).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}var jh="<anonymous>";function k3(e){try{return!e||typeof e!="function"?jh:e.name||jh}catch{return jh}}function V3(e){return[90,T3.node(e)]}ds.createStackParser=GR;ds.getFunctionName=k3;ds.nodeStackLineParser=V3;ds.stackParserFromStackParserOptions=H3;ds.stripSentryFramesAndReverse=BR});var eI=g(Yn=>{Object.defineProperty(Yn,"__esModule",{value:!0});var Y3=Zo(),F3=hr(),Ud=F3.getGlobalObject();function x3(){try{return new ErrorEvent(""),!0}catch{return!1}}function X3(){try{return new DOMError(""),!0}catch{return!1}}function J3(){try{return new DOMException(""),!0}catch{return!1}}function $h(){if(!("fetch"in Ud))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Qh(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function D3(){if(!$h())return!1;if(Qh(Ud.fetch))return!0;let e=!1,t=Ud.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Qh(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Y3.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function O3(){return"ReportingObserver"in Ud}function U3(){if(!$h())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}Yn.isNativeFetch=Qh;Yn.supportsDOMError=X3;Yn.supportsDOMException=J3;Yn.supportsErrorEvent=x3;Yn.supportsFetch=$h;Yn.supportsNativeFetch=D3;Yn.supportsReferrerPolicy=U3;Yn.supportsReportingObserver=O3});var nI=g(tI=>{Object.defineProperty(tI,"__esModule",{value:!0});var K3=hr(),Kd=K3.getGlobalObject();function L3(){let e=Kd.chrome,t=e&&e.app&&e.app.runtime,n="history"in Kd&&!!Kd.history.pushState&&!!Kd.history.replaceState;return!t&&n}tI.supportsHistory=L3});var wR=g(kc=>{Object.defineProperty(kc,"__esModule",{value:!0});var vR=yn(),iI=Zo(),Fn=Ro(),M3=Od(),q3=eI(),P3=hr(),z3=nI(),ie=P3.getGlobalObject(),Tc="__sentry_xhr_v2__",Hc={},ZR={};function j3(e){if(!ZR[e])switch(ZR[e]=!0,e){case"console":$3();break;case"dom":o5();break;case"xhr":t5();break;case"fetch":e5();break;case"history":n5();break;case"error":a5();break;case"unhandledrejection":c5();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&iI.logger.warn("unknown instrumentation type:",e);return}}function Q3(e,t){Hc[e]=Hc[e]||[],Hc[e].push(t),j3(e)}function An(e,t){if(!(!e||!Hc[e]))for(let n of Hc[e]||[])try{n(t)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&iI.logger.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${M3.getFunctionName(n)}
Error:`,r)}}function $3(){"console"in ie&&iI.CONSOLE_LEVELS.forEach(function(e){e in ie.console&&Fn.fill(ie.console,e,function(t){return function(...n){An("console",{args:n,level:e}),t&&t.apply(ie.console,n)}})})}function e5(){!q3.supportsNativeFetch()||Fn.fill(ie,"fetch",function(e){return function(...t){let{method:n,url:r}=WR(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return An("fetch",{...i}),e.apply(ie,t).then(s=>(An("fetch",{...i,endTimestamp:Date.now(),response:s}),s),s=>{throw An("fetch",{...i,endTimestamp:Date.now(),error:s}),s})}})}function rI(e,t){return!!e&&typeof e=="object"&&!!e[t]}function ER(e){return typeof e=="string"?e:e?rI(e,"url")?e.url:e.toString?e.toString():"":""}function WR(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:ER(n),method:rI(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:ER(t),method:rI(t,"method")?String(t.method).toUpperCase():"GET"}}function t5(){if(!("XMLHttpRequest"in ie))return;let e=XMLHttpRequest.prototype;Fn.fill(e,"open",function(t){return function(...n){let r=n[1],i=this[Tc]={method:vR.isString(n[0])?n[0].toUpperCase():n[0],url:n[1],request_headers:{}};vR.isString(r)&&i.method==="POST"&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0);let s=()=>{let o=this[Tc];if(!!o&&this.readyState===4){try{o.status_code=this.status}catch{}An("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?Fn.fill(this,"onreadystatechange",function(o){return function(...a){return s(),o.apply(this,a)}}):this.addEventListener("readystatechange",s),Fn.fill(this,"setRequestHeader",function(o){return function(...a){let[c,u]=a,l=this[Tc];return l&&(l.request_headers[c.toLowerCase()]=u),o.apply(this,a)}}),t.apply(this,n)}}),Fn.fill(e,"send",function(t){return function(...n){let r=this[Tc];return r&&n[0]!==void 0&&(r.body=n[0]),An("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),t.apply(this,n)}})}var Ld;function n5(){if(!z3.supportsHistory())return;let e=ie.onpopstate;ie.onpopstate=function(...n){let r=ie.location.href,i=Ld;if(Ld=r,An("history",{from:i,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){let i=r.length>2?r[2]:void 0;if(i){let s=Ld,o=String(i);Ld=o,An("history",{from:s,to:o})}return n.apply(this,r)}}Fn.fill(ie.history,"pushState",t),Fn.fill(ie.history,"replaceState",t)}var r5=1e3,Md,qd;function i5(e,t){if(!e||e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch{}return!1}function s5(e){if(e.type!=="keypress")return!1;try{let t=e.target;if(!t||!t.tagName)return!0;if(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)return!1}catch{}return!0}function RR(e,t=!1){return n=>{if(!n||qd===n||s5(n))return;let r=n.type==="keypress"?"input":n.type;Md===void 0?(e({event:n,name:r,global:t}),qd=n):i5(qd,n)&&(e({event:n,name:r,global:t}),qd=n),clearTimeout(Md),Md=ie.setTimeout(()=>{Md=void 0},r5)}}function o5(){if(!("document"in ie))return;let e=An.bind(null,"dom"),t=RR(e,!0);ie.document.addEventListener("click",t,!1),ie.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let r=ie[n]&&ie[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(Fn.fill(r,"addEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},l=u[s]=u[s]||{refCount:0};if(!l.handler){let d=RR(e);l.handler=d,i.call(this,s,d,a)}l.refCount++}catch{}return i.call(this,s,o,a)}}),Fn.fill(r,"removeEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__||{},l=u[s];l&&(l.refCount--,l.refCount<=0&&(i.call(this,s,l.handler,a),l.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,o,a)}}))})}var Pd=null;function a5(){Pd=ie.onerror,ie.onerror=function(e,t,n,r,i){return An("error",{column:r,error:i,line:n,msg:e,url:t}),Pd&&!Pd.__SENTRY_LOADER__?Pd.apply(this,arguments):!1},ie.onerror.__SENTRY_INSTRUMENTED__=!0}var zd=null;function c5(){zd=ie.onunhandledrejection,ie.onunhandledrejection=function(e){return An("unhandledrejection",e),zd&&!zd.__SENTRY_LOADER__?zd.apply(this,arguments):!0},ie.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}kc.SENTRY_XHR_DATA_KEY=Tc;kc.addInstrumentationHandler=Q3;kc.parseFetchArgs=WR});var oI=g(sI=>{Object.defineProperty(sI,"__esModule",{value:!0});function u5(){let e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let s=0;s<t.length;s++)if(t[s]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let s=0;s<t.length;s++)if(t[s]===i){t.splice(s,1);break}}return[n,r]}sI.memoBuilder=u5});var cI=g(xn=>{Object.defineProperty(xn,"__esModule",{value:!0});var l5=Ro(),aI=Rc(),d5=hr();function g5(){let e=d5.GLOBAL_OBJ,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");let n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function NR(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function p5(e){let{message:t,event_id:n}=e;if(t)return t;let r=NR(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function m5(e,t,n){let r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function f5(e,t){let n=NR(e);if(!n)return;let r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){let s={...i&&i.data,...t.data};n.mechanism.data=s}}var h5=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function I5(e){let t=e.match(h5)||[],n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(i)?void 0:i,prerelease:t[4]}}function C5(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,i=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,i-n),i).map(s=>aI.snipLine(s,0)),t.context_line=aI.snipLine(e[Math.min(r-1,i)],t.colno||0),t.post_context=e.slice(Math.min(i+1,r),i+1+n).map(s=>aI.snipLine(s,0))}function y5(e){if(e&&e.__sentry_captured__)return!0;try{l5.addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch{}return!1}function b5(e){return Array.isArray(e)?e:[e]}xn.addContextToFrame=C5;xn.addExceptionMechanism=f5;xn.addExceptionTypeValue=m5;xn.arrayify=b5;xn.checkOrSetAlreadyCaught=y5;xn.getEventDescription=p5;xn.parseSemver=I5;xn.uuid4=g5});var uI=g(jd=>{Object.defineProperty(jd,"__esModule",{value:!0});function A5(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function _5(){return"npm"}jd.getSDKSource=_5;jd.isBrowserBundle=A5});var lI=g((Vc,$d)=>{Object.defineProperty(Vc,"__esModule",{value:!0});var S5=uI();function G5(){return!S5.isBrowserBundle()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Qd(e,t){return e.require(t)}function B5(e){let t;try{t=Qd($d,e)}catch{}try{let{cwd:n}=Qd($d,"process");t=Qd($d,`${n()}/node_modules/${e}`)}catch{}return t}Vc.dynamicRequire=Qd;Vc.isNodeEnv=G5;Vc.loadModule=B5});var tg=g(Yc=>{Object.defineProperty(Yc,"__esModule",{value:!0});var TR=yn(),v5=oI(),Z5=Ro(),E5=Od();function HR(e,t=100,n=1/0){try{return eg("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function kR(e,t=3,n=100*1024){let r=HR(e,t);return N5(r)>n?kR(e,t-1,n):r}function eg(e,t,n=1/0,r=1/0,i=v5.memoBuilder()){let[s,o]=i;if(t==null||["number","boolean","string"].includes(typeof t)&&!TR.isNaN(t))return t;let a=R5(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(s(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let m=u.toJSON();return eg("",m,c-1,r,i)}catch{}let l=Array.isArray(t)?[]:{},d=0,p=Z5.convertToPlainObject(t);for(let m in p){if(!Object.prototype.hasOwnProperty.call(p,m))continue;if(d>=r){l[m]="[MaxProperties ~]";break}let f=p[m];l[m]=eg(m,f,c-1,r,i),d++}return o(t),l}function R5(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(TR.isSyntheticEvent(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${E5.getFunctionName(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=W5(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function W5(e){let t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function w5(e){return~-encodeURI(e).split(/%..|./).length}function N5(e){return w5(JSON.stringify(e))}Yc.normalize=HR;Yc.normalizeToSize=kR;Yc.walk=eg});var JR=g(Ir=>{Object.defineProperty(Ir,"__esModule",{value:!0});function YR(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let i=e[r];i==="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var T5=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function FR(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=T5.exec(t);return n?n.slice(1):[]}function dI(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:"/";!i||(t=`${i}/${t}`,n=i.charAt(0)==="/")}return t=YR(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function VR(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function H5(e,t){e=dI(e).slice(1),t=dI(t).slice(1);let n=VR(e.split("/")),r=VR(t.split("/")),i=Math.min(n.length,r.length),s=i;for(let a=0;a<i;a++)if(n[a]!==r[a]){s=a;break}let o=[];for(let a=s;a<n.length;a++)o.push("..");return o=o.concat(r.slice(s)),o.join("/")}function xR(e){let t=XR(e),n=e.slice(-1)==="/",r=YR(e.split("/").filter(i=>!!i),!t).join("/");return!r&&!t&&(r="."),r&&n&&(r+="/"),(t?"/":"")+r}function XR(e){return e.charAt(0)==="/"}function k5(...e){return xR(e.join("/"))}function V5(e){let t=FR(e),n=t[0],r=t[1];return!n&&!r?".":(r&&(r=r.slice(0,r.length-1)),n+r)}function Y5(e,t){let n=FR(e)[2];return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}Ir.basename=Y5;Ir.dirname=V5;Ir.isAbsolute=XR;Ir.join=k5;Ir.normalizePath=xR;Ir.relative=H5;Ir.resolve=dI});var gI=g(Fc=>{Object.defineProperty(Fc,"__esModule",{value:!0});var F5=yn(),Cr;(function(e){e[e.PENDING=0]="PENDING";let n=1;e[e.RESOLVED=n]="RESOLVED";let r=2;e[e.REJECTED=r]="REJECTED"})(Cr||(Cr={}));function x5(e){return new Qt(t=>{t(e)})}function X5(e){return new Qt((t,n)=>{n(e)})}var Qt=class{constructor(t){Qt.prototype.__init.call(this),Qt.prototype.__init2.call(this),Qt.prototype.__init3.call(this),Qt.prototype.__init4.call(this),this._state=Cr.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new Qt((r,i)=>{this._handlers.push([!1,s=>{if(!t)r(s);else try{r(t(s))}catch(o){i(o)}},s=>{if(!n)i(s);else try{r(n(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Qt((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,t&&t()},o=>{s=!0,i=o,t&&t()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=t=>{this._setResult(Cr.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Cr.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Cr.PENDING){if(F5.isThenable(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Cr.PENDING)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Cr.RESOLVED&&n[1](this._value),this._state===Cr.REJECTED&&n[2](this._value),n[0]=!0)})}}};Fc.SyncPromise=Qt;Fc.rejectedSyncPromise=X5;Fc.resolvedSyncPromise=x5});var DR=g(mI=>{Object.defineProperty(mI,"__esModule",{value:!0});var J5=qh(),pI=gI();function D5(e){let t=[];function n(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]}function i(o){if(!n())return pI.rejectedSyncPromise(new J5.SentryError("Not adding Promise because buffer limit was reached."));let a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new pI.SyncPromise((a,c)=>{let u=t.length;if(!u)return a(!0);let l=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{pI.resolvedSyncPromise(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:t,add:i,drain:s}}mI.makePromiseBuffer=D5});var fI=g(Wo=>{Object.defineProperty(Wo,"__esModule",{value:!0});function O5(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function U5(e){return e.split(/[\?#]/,1)[0]}function K5(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function L5(e){let{protocol:t,host:n,path:r}=e,i=n&&n.replace(/^.*@/,"[filtered]:[filtered]@").replace(":80","").replace(":443","")||"";return`${t?`${t}://`:""}${i}${r}`}Wo.getNumberOfUrlSegments=K5;Wo.getSanitizedUrlString=L5;Wo.parseUrl=O5;Wo.stripUrlQueryAndFragment=U5});var KR=g(wo=>{Object.defineProperty(wo,"__esModule",{value:!0});var OR=yn(),M5=tg(),q5=fI(),P5={ip:!1,request:!0,transaction:!0,user:!0},z5=["cookies","data","headers","method","query_string","url"],j5=["id","username","email"];function Q5(e,t,n){!e||((!e.metadata.source||e.metadata.source==="url")&&e.setName(...ng(t,{path:!0,method:!0})),e.setData("url",t.originalUrl||t.url),t.baseUrl&&e.setData("baseUrl",t.baseUrl),e.setData("query",UR(t,n)))}function ng(e,t={}){let n=e.method&&e.method.toUpperCase(),r="",i="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,i="route"):(e.originalUrl||e.url)&&(r=q5.stripUrlQueryAndFragment(e.originalUrl||e.url||""));let s="";return t.method&&n&&(s+=n),t.method&&t.path&&(s+=" "),t.path&&r&&(s+=r),[s,i]}function $5(e,t){switch(t){case"path":return ng(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";case"methodPath":default:return ng(e,{path:!0,method:!0})[0]}}function ej(e,t){let n={};return(Array.isArray(t)?t:j5).forEach(i=>{e&&i in e&&(n[i]=e[i])}),n}function hI(e,t){let{include:n=z5,deps:r}=t||{},i={},s=e.headers||{},o=e.method,a=e.hostname||e.host||s.host||"<no host>",c=e.protocol==="https"||e.socket&&e.socket.encrypted?"https":"http",u=e.originalUrl||e.url||"",l=`${c}://${a}${u}`;return n.forEach(d=>{switch(d){case"headers":{i.headers=s;break}case"method":{i.method=o;break}case"url":{i.url=l;break}case"cookies":{i.cookies=e.cookies||s.cookie&&r&&r.cookie&&r.cookie.parse(s.cookie)||{};break}case"query_string":{i.query_string=UR(e,r);break}case"data":{if(o==="GET"||o==="HEAD")break;e.body!==void 0&&(i.data=OR.isString(e.body)?e.body:JSON.stringify(M5.normalize(e.body)));break}default:({}).hasOwnProperty.call(e,d)&&(i[d]=e[d])}}),i}function tj(e,t,n){let r={...P5,...n&&n.include};if(r.request){let i=Array.isArray(r.request)?hI(t,{include:r.request,deps:n&&n.deps}):hI(t,{deps:n&&n.deps});e.request={...e.request,...i}}if(r.user){let i=t.user&&OR.isPlainObject(t.user)?ej(t.user,r.user):{};Object.keys(i).length&&(e.user={...e.user,...i})}if(r.ip){let i=t.ip||t.socket&&t.socket.remoteAddress;i&&(e.user={...e.user,ip_address:i})}return r.transaction&&!e.transaction&&(e.transaction=$5(t,r.transaction)),e}function UR(e,t){let n=e.originalUrl||e.url||"";if(!!n)return n.startsWith("/")&&(n=`http://dogs.are.great${n}`),e.query||typeof URL!==void 0&&new URL(n).search.replace("?","")||t&&t.url&&t.url.parse(n).query||void 0}wo.addRequestDataToEvent=tj;wo.addRequestDataToTransaction=Q5;wo.extractPathForTransaction=ng;wo.extractRequestData=hI});var qR=g(xc=>{Object.defineProperty(xc,"__esModule",{value:!0});var LR=["fatal","error","warning","log","info","debug"];function nj(e){return MR(e)}function MR(e){return e==="warn"?"warning":LR.includes(e)?e:"log"}xc.severityFromString=nj;xc.severityLevelFromString=MR;xc.validSeverityLevels=LR});var CI=g(($t,$R)=>{Object.defineProperty($t,"__esModule",{value:!0});var zR=lI(),rj=hr(),jR=rj.getGlobalObject(),II={nowSeconds:()=>Date.now()/1e3};function ij(){let{performance:e}=jR;if(!e||!e.now)return;let t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}function sj(){try{return zR.dynamicRequire($R,"perf_hooks").performance}catch{return}}var rg=zR.isNodeEnv()?sj():ij(),PR=rg===void 0?II:{nowSeconds:()=>(rg.timeOrigin+rg.now())/1e3},oj=II.nowSeconds.bind(II),QR=PR.nowSeconds.bind(PR),aj=QR,cj=rg!==void 0;$t._browserPerformanceTimeOriginMode=void 0;var uj=(()=>{let{performance:e}=jR;if(!e||!e.now){$t._browserPerformanceTimeOriginMode="none";return}let t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=i<t,o=e.timing&&e.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,u=c<t;return s||u?i<=c?($t._browserPerformanceTimeOriginMode="timeOrigin",e.timeOrigin):($t._browserPerformanceTimeOriginMode="navigationStart",o):($t._browserPerformanceTimeOriginMode="dateNow",r)})();$t.browserPerformanceTimeOrigin=uj;$t.dateTimestampInSeconds=oj;$t.timestampInSeconds=QR;$t.timestampWithMs=aj;$t.usingPerformanceAPI=cj});var bI=g(ri=>{Object.defineProperty(ri,"__esModule",{value:!0});var lj=yn(),dj=Zo(),gj="baggage",yI="sentry-",tW=/^sentry-/,nW=8192;function pj(e){if(!lj.isString(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,i)=>{let s=eW(i);return{...r,...s}},{});else{if(!e)return;t=eW(e)}let n=Object.entries(t).reduce((r,[i,s])=>{if(i.match(tW)){let o=i.slice(yI.length);r[o]=s}return r},{});if(Object.keys(n).length>0)return n}function mj(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,i])=>(i&&(n[`${yI}${r}`]=i),n),{});return fj(t)}function eW(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function fj(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],i)=>{let s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=i===0?s:`${t},${s}`;return o.length>nW?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&dj.logger.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}ri.BAGGAGE_HEADER_NAME=gj;ri.MAX_BAGGAGE_STRING_LENGTH=nW;ri.SENTRY_BAGGAGE_KEY_PREFIX=yI;ri.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=tW;ri.baggageHeaderToDynamicSamplingContext=pj;ri.dynamicSamplingContextToSentryBaggageHeader=mj});var sW=g(No=>{Object.defineProperty(No,"__esModule",{value:!0});var hj=bI(),ig=cI(),rW=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function iW(e){if(!e)return;let t=e.match(rW);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Ij(e,t){let n=iW(e),r=hj.baggageHeaderToDynamicSamplingContext(t),{traceId:i,parentSpanId:s,parentSampled:o}=n||{},a={traceId:i||ig.uuid4(),spanId:ig.uuid4().substring(16),sampled:o===void 0?!1:o};return s&&(a.parentSpanId=s),r&&(a.dsc=r),{traceparentData:n,dynamicSamplingContext:r,propagationContext:a}}function Cj(e=ig.uuid4(),t=ig.uuid4().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}No.TRACEPARENT_REGEXP=rW;No.extractTraceparentData=iW;No.generateSentryTraceHeader=Cj;No.tracingContextFromHeaders=Ij});var _I=g(en=>{Object.defineProperty(en,"__esModule",{value:!0});var yj=Kh(),bj=tg(),oW=Ro();function Aj(e,t=[]){return[e,t]}function _j(e,t){let[n,r]=e;return[n,[...r,t]]}function aW(e,t){let n=e[1];for(let r of n){let i=r[0].type;if(t(r,i))return!0}return!1}function Sj(e,t){return aW(e,(n,r)=>t.includes(r))}function AI(e,t){return(t||new TextEncoder).encode(e)}function Gj(e,t){let[n,r]=e,i=JSON.stringify(n);function s(o){typeof i=="string"?i=typeof o=="string"?i+o:[AI(i,t),o]:i.push(typeof o=="string"?AI(o,t):o)}for(let o of r){let[a,c]=o;if(s(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)s(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(bj.normalize(c))}s(u)}}return typeof i=="string"?i:Bj(i)}function Bj(e){let t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t),r=0;for(let i of e)n.set(i,r),r+=i.length;return n}function vj(e,t,n){let r=typeof e=="string"?t.encode(e):e;function i(c){let u=r.subarray(0,c);return r=r.subarray(c+1),u}function s(){let c=r.indexOf(10);return c<0&&(c=r.length),JSON.parse(n.decode(i(c)))}let o=s(),a=[];for(;r.length;){let c=s(),u=typeof c.length=="number"?c.length:void 0;a.push([c,u?i(u):s()])}return[o,a]}function Zj(e,t){let n=typeof e.data=="string"?AI(e.data,t):e.data;return[oW.dropUndefinedKeys({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}var Ej={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function Rj(e){return Ej[e]}function Wj(e){if(!e||!e.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function wj(e,t,n,r){let i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&{dsn:yj.dsnToString(r)},...i&&{trace:oW.dropUndefinedKeys({...i})}}}en.addItemToEnvelope=_j;en.createAttachmentEnvelopeItem=Zj;en.createEnvelope=Aj;en.createEventEnvelopeHeaders=wj;en.envelopeContainsItemType=Sj;en.envelopeItemTypeToDataCategory=Rj;en.forEachEnvelopeItem=aW;en.getSdkMetadataForEnvelopeHeader=Wj;en.parseEnvelope=vj;en.serializeEnvelope=Gj});var cW=g(SI=>{Object.defineProperty(SI,"__esModule",{value:!0});var Nj=_I(),Tj=CI();function Hj(e,t,n){let r=[{type:"client_report"},{timestamp:n||Tj.dateTimestampInSeconds(),discarded_events:e}];return Nj.createEnvelope(t?{dsn:t}:{},[r])}SI.createClientReportEnvelope=Hj});var gW=g(gs=>{Object.defineProperty(gs,"__esModule",{value:!0});var uW=60*1e3;function lW(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?uW:r-t}function dW(e,t){return e[t]||e.all||0}function kj(e,t,n=Date.now()){return dW(e,t)>n}function Vj(e,{statusCode:t,headers:n},r=Date.now()){let i={...e},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(let a of s.trim().split(",")){let[c,u]=a.split(":",2),l=parseInt(c,10),d=(isNaN(l)?60:l)*1e3;if(!u)i.all=r+d;else for(let p of u.split(";"))i[p]=r+d}else o?i.all=r+lW(o,r):t===429&&(i.all=r+60*1e3);return i}gs.DEFAULT_RETRY_AFTER=uW;gs.disabledUntil=dW;gs.isRateLimited=kj;gs.parseRetryAfterHeader=lW;gs.updateRateLimits=Vj});var fW=g(GI=>{Object.defineProperty(GI,"__esModule",{value:!0});function pW(e,t,n){let r=t.match(/([a-z_]+)\.(.*)/i);if(r===null)e[t]=n;else{let i=e[r[1]];pW(i,r[2],n)}}function Yj(e,t,n={}){return Array.isArray(t)?mW(e,t,n):Fj(e,t,n)}function mW(e,t,n){let r=t.find(i=>i.name===e.name);if(r){for(let[i,s]of Object.entries(n))pW(r,i,s);return t}return[...t,e]}function Fj(e,t,n){return i=>{let s=t(i);return e.allowExclusionByUser&&!s.find(a=>a.name===e.name)?s:mW(e,s,n)}}GI.addOrUpdateIntegration=Yj});var hW=g(BI=>{Object.defineProperty(BI,"__esModule",{value:!0});function xj(e){let t=[],n={};return{add(r,i){for(;t.length>=e;){let s=t.shift();s!==void 0&&delete n[s]}n[r]&&this.delete(r),t.push(r),n[r]=i},clear(){n={},t=[]},get(r){return n[r]},size(){return t.length},delete(r){if(!n[r])return!1;delete n[r];for(let i=0;i<t.length;i++)if(t[i]===r){t.splice(i,1);break}return!0}}}BI.makeFifoCache=xj});var IW=g(vI=>{Object.defineProperty(vI,"__esModule",{value:!0});function Xj(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}vI.escapeStringForRegex=Xj});var Z=g(y=>{Object.defineProperty(y,"__esModule",{value:!0});var Jj=uR(),ZI=Uh(),EI=Kh(),Dj=qh(),RI=hr(),WI=wR(),vt=yn(),wI=Zo(),Oj=oI(),ii=cI(),NI=lI(),TI=tg(),yr=Ro(),ps=JR(),Uj=DR(),sg=KR(),HI=qR(),Xc=Od(),Jc=Rc(),si=eI(),kI=gI(),To=CI(),og=sW(),CW=uI(),Xn=_I(),Kj=cW(),Dc=gW(),Ho=bI(),ag=fI(),Lj=fW(),Mj=hW(),qj=IW(),Pj=nI();y.applyAggregateErrorsToEvent=Jj.applyAggregateErrorsToEvent;y.getDomElement=ZI.getDomElement;y.getLocationHref=ZI.getLocationHref;y.htmlTreeAsString=ZI.htmlTreeAsString;y.dsnFromString=EI.dsnFromString;y.dsnToString=EI.dsnToString;y.makeDsn=EI.makeDsn;y.SentryError=Dj.SentryError;y.GLOBAL_OBJ=RI.GLOBAL_OBJ;y.getGlobalObject=RI.getGlobalObject;y.getGlobalSingleton=RI.getGlobalSingleton;y.SENTRY_XHR_DATA_KEY=WI.SENTRY_XHR_DATA_KEY;y.addInstrumentationHandler=WI.addInstrumentationHandler;y.parseFetchArgs=WI.parseFetchArgs;y.isDOMError=vt.isDOMError;y.isDOMException=vt.isDOMException;y.isElement=vt.isElement;y.isError=vt.isError;y.isErrorEvent=vt.isErrorEvent;y.isEvent=vt.isEvent;y.isInstanceOf=vt.isInstanceOf;y.isNaN=vt.isNaN;y.isPlainObject=vt.isPlainObject;y.isPrimitive=vt.isPrimitive;y.isRegExp=vt.isRegExp;y.isString=vt.isString;y.isSyntheticEvent=vt.isSyntheticEvent;y.isThenable=vt.isThenable;y.CONSOLE_LEVELS=wI.CONSOLE_LEVELS;y.consoleSandbox=wI.consoleSandbox;Object.defineProperty(y,"logger",{enumerable:!0,get:()=>wI.logger});y.memoBuilder=Oj.memoBuilder;y.addContextToFrame=ii.addContextToFrame;y.addExceptionMechanism=ii.addExceptionMechanism;y.addExceptionTypeValue=ii.addExceptionTypeValue;y.arrayify=ii.arrayify;y.checkOrSetAlreadyCaught=ii.checkOrSetAlreadyCaught;y.getEventDescription=ii.getEventDescription;y.parseSemver=ii.parseSemver;y.uuid4=ii.uuid4;y.dynamicRequire=NI.dynamicRequire;y.isNodeEnv=NI.isNodeEnv;y.loadModule=NI.loadModule;y.normalize=TI.normalize;y.normalizeToSize=TI.normalizeToSize;y.walk=TI.walk;y.addNonEnumerableProperty=yr.addNonEnumerableProperty;y.convertToPlainObject=yr.convertToPlainObject;y.dropUndefinedKeys=yr.dropUndefinedKeys;y.extractExceptionKeysForMessage=yr.extractExceptionKeysForMessage;y.fill=yr.fill;y.getOriginalFunction=yr.getOriginalFunction;y.markFunctionWrapped=yr.markFunctionWrapped;y.objectify=yr.objectify;y.urlEncode=yr.urlEncode;y.basename=ps.basename;y.dirname=ps.dirname;y.isAbsolute=ps.isAbsolute;y.join=ps.join;y.normalizePath=ps.normalizePath;y.relative=ps.relative;y.resolve=ps.resolve;y.makePromiseBuffer=Uj.makePromiseBuffer;y.addRequestDataToEvent=sg.addRequestDataToEvent;y.addRequestDataToTransaction=sg.addRequestDataToTransaction;y.extractPathForTransaction=sg.extractPathForTransaction;y.extractRequestData=sg.extractRequestData;y.severityFromString=HI.severityFromString;y.severityLevelFromString=HI.severityLevelFromString;y.validSeverityLevels=HI.validSeverityLevels;y.createStackParser=Xc.createStackParser;y.getFunctionName=Xc.getFunctionName;y.nodeStackLineParser=Xc.nodeStackLineParser;y.stackParserFromStackParserOptions=Xc.stackParserFromStackParserOptions;y.stripSentryFramesAndReverse=Xc.stripSentryFramesAndReverse;y.isMatchingPattern=Jc.isMatchingPattern;y.safeJoin=Jc.safeJoin;y.snipLine=Jc.snipLine;y.stringMatchesSomePattern=Jc.stringMatchesSomePattern;y.truncate=Jc.truncate;y.isNativeFetch=si.isNativeFetch;y.supportsDOMError=si.supportsDOMError;y.supportsDOMException=si.supportsDOMException;y.supportsErrorEvent=si.supportsErrorEvent;y.supportsFetch=si.supportsFetch;y.supportsNativeFetch=si.supportsNativeFetch;y.supportsReferrerPolicy=si.supportsReferrerPolicy;y.supportsReportingObserver=si.supportsReportingObserver;y.SyncPromise=kI.SyncPromise;y.rejectedSyncPromise=kI.rejectedSyncPromise;y.resolvedSyncPromise=kI.resolvedSyncPromise;Object.defineProperty(y,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>To._browserPerformanceTimeOriginMode});y.browserPerformanceTimeOrigin=To.browserPerformanceTimeOrigin;y.dateTimestampInSeconds=To.dateTimestampInSeconds;y.timestampInSeconds=To.timestampInSeconds;y.timestampWithMs=To.timestampWithMs;y.usingPerformanceAPI=To.usingPerformanceAPI;y.TRACEPARENT_REGEXP=og.TRACEPARENT_REGEXP;y.extractTraceparentData=og.extractTraceparentData;y.generateSentryTraceHeader=og.generateSentryTraceHeader;y.tracingContextFromHeaders=og.tracingContextFromHeaders;y.getSDKSource=CW.getSDKSource;y.isBrowserBundle=CW.isBrowserBundle;y.addItemToEnvelope=Xn.addItemToEnvelope;y.createAttachmentEnvelopeItem=Xn.createAttachmentEnvelopeItem;y.createEnvelope=Xn.createEnvelope;y.createEventEnvelopeHeaders=Xn.createEventEnvelopeHeaders;y.envelopeContainsItemType=Xn.envelopeContainsItemType;y.envelopeItemTypeToDataCategory=Xn.envelopeItemTypeToDataCategory;y.forEachEnvelopeItem=Xn.forEachEnvelopeItem;y.getSdkMetadataForEnvelopeHeader=Xn.getSdkMetadataForEnvelopeHeader;y.parseEnvelope=Xn.parseEnvelope;y.serializeEnvelope=Xn.serializeEnvelope;y.createClientReportEnvelope=Kj.createClientReportEnvelope;y.DEFAULT_RETRY_AFTER=Dc.DEFAULT_RETRY_AFTER;y.disabledUntil=Dc.disabledUntil;y.isRateLimited=Dc.isRateLimited;y.parseRetryAfterHeader=Dc.parseRetryAfterHeader;y.updateRateLimits=Dc.updateRateLimits;y.BAGGAGE_HEADER_NAME=Ho.BAGGAGE_HEADER_NAME;y.MAX_BAGGAGE_STRING_LENGTH=Ho.MAX_BAGGAGE_STRING_LENGTH;y.SENTRY_BAGGAGE_KEY_PREFIX=Ho.SENTRY_BAGGAGE_KEY_PREFIX;y.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=Ho.SENTRY_BAGGAGE_KEY_PREFIX_REGEX;y.baggageHeaderToDynamicSamplingContext=Ho.baggageHeaderToDynamicSamplingContext;y.dynamicSamplingContextToSentryBaggageHeader=Ho.dynamicSamplingContextToSentryBaggageHeader;y.getNumberOfUrlSegments=ag.getNumberOfUrlSegments;y.getSanitizedUrlString=ag.getSanitizedUrlString;y.parseUrl=ag.parseUrl;y.stripUrlQueryAndFragment=ag.stripUrlQueryAndFragment;y.addOrUpdateIntegration=Lj.addOrUpdateIntegration;y.makeFifoCache=Mj.makeFifoCache;y.escapeStringForRegex=qj.escapeStringForRegex;y.supportsHistory=Pj.supportsHistory});var Oc=g(VI=>{Object.defineProperty(VI,"__esModule",{value:!0});var zj="production";VI.DEFAULT_ENVIRONMENT=zj});var Lc=g(Kc=>{Object.defineProperty(Kc,"__esModule",{value:!0});var Uc=Z();function jj(e){let t=Uc.timestampInSeconds(),n={sid:Uc.uuid4(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>$j(n)};return e&&YI(n,e),n}function YI(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Uc.timestampInSeconds(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Uc.uuid4()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Qj(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),YI(e,n)}function $j(e){return Uc.dropUndefinedKeys({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}Kc.closeSession=Qj;Kc.makeSession=jj;Kc.updateSession=YI});var Mc=g(cg=>{Object.defineProperty(cg,"__esModule",{value:!0});var br=Z(),eQ=Lc(),tQ=100,ms=class{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=yW()}static clone(t){let n=new ms;return t&&(n._breadcrumbs=[...t._breadcrumbs],n._tags={...t._tags},n._extra={...t._extra},n._contexts={...t._contexts},n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=[...t._eventProcessors],n._requestSession=t._requestSession,n._attachments=[...t._attachments],n._sdkProcessingMetadata={...t._sdkProcessingMetadata},n._propagationContext={...t._propagationContext}),n}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&eQ.updateSession(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){let n=t(this);return n instanceof ms?n:this}return t instanceof ms?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):br.isPlainObject(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=yW(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:tQ;if(r<=0)return this;let i={timestamp:br.dateTimestampInSeconds(),...t};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,n={}){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};let r=this._span.transaction;if(r){t.sdkProcessingMetadata={dynamicSamplingContext:r.getDynamicSamplingContext(),...t.sdkProcessingMetadata};let i=r.name;i&&(t.tags={transaction:i,...t.tags})}}return this._applyFingerprint(t),t.breadcrumbs=[...t.breadcrumbs||[],...this._breadcrumbs],t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...bW(),...this._eventProcessors],t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(t,n,r,i=0){return new br.SyncPromise((s,o)=>{let a=t[i];if(n===null||typeof a!="function")s(n);else{let c=a({...n},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&c===null&&br.logger.log(`Event processor "${a.id}" dropped event`),br.isThenable(c)?c.then(u=>this._notifyEventProcessors(t,u,r,i+1).then(s)).then(null,o):this._notifyEventProcessors(t,c,r,i+1).then(s).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?br.arrayify(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}};function bW(){return br.getGlobalSingleton("globalEventProcessors",()=>[])}function nQ(e){bW().push(e)}function yW(){return{traceId:br.uuid4(),spanId:br.uuid4().substring(16),sampled:!1}}cg.Scope=ms;cg.addGlobalEventProcessor=nQ});var _n=g(nn=>{Object.defineProperty(nn,"__esModule",{value:!0});var tn=Z(),rQ=Oc(),xI=Mc(),FI=Lc(),ug=4,iQ=100,ko=class{constructor(t,n=new xI.Scope,r=ug){this._version=r,this._stack=[{scope:n}],t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){let n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){let t=xI.Scope.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){let n=this.pushScope();try{t(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){let r=this._lastEventId=n&&n.event_id?n.event_id:tn.uuid4(),i=new Error("Sentry syntheticException");return this._withClient((s,o)=>{s.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},o)}),r}captureMessage(t,n,r){let i=this._lastEventId=r&&r.event_id?r.event_id:tn.uuid4(),s=new Error(t);return this._withClient((o,a)=>{o.captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i},a)}),i}captureEvent(t,n){let r=n&&n.event_id?n.event_id:tn.uuid4();return t.type||(this._lastEventId=r),this._withClient((i,s)=>{i.captureEvent(t,{...n,event_id:r},s)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){let{scope:r,client:i}=this.getStackTop();if(!i)return;let{beforeBreadcrumb:s=null,maxBreadcrumbs:o=iQ}=i.getOptions&&i.getOptions()||{};if(o<=0)return;let c={timestamp:tn.dateTimestampInSeconds(),...t},u=s?tn.consoleSandbox(()=>s(c,n)):c;u!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,o))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n)}configureScope(t){let{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){let n=XI(this);try{t(this)}finally{XI(n)}}getIntegration(t){let n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&tn.logger.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){let r=this._callExtensionMethod("startTransaction",t,n);return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&!r&&console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){let n=this.getStackTop().scope,r=n.getSession();r&&FI.closeSession(r),this._sendSessionUpdate(),n.setSession()}startSession(t){let{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=rQ.DEFAULT_ENVIRONMENT}=r&&r.getOptions()||{},{userAgent:o}=tn.GLOBAL_OBJ.navigator||{},a=FI.makeSession({release:i,environment:s,user:n.getUser(),...o&&{userAgent:o},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&FI.updateSession(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){let t=this.getClient(),n=t&&t.getOptions();return Boolean(n&&n.sendDefaultPii)}_sendSessionUpdate(){let{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(t){let{scope:n,client:r}=this.getStackTop();r&&t(r,n)}_callExtensionMethod(t,...n){let i=fs().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&tn.logger.warn(`Extension method ${t} couldn't be found, doing nothing.`)}};function fs(){return tn.GLOBAL_OBJ.__SENTRY__=tn.GLOBAL_OBJ.__SENTRY__||{extensions:{},hub:void 0},tn.GLOBAL_OBJ}function XI(e){let t=fs(),n=qc(t);return lg(t,e),n}function sQ(){let e=fs();if(e.__SENTRY__&&e.__SENTRY__.acs){let t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return AW(e)}function AW(e=fs()){return(!_W(e)||qc(e).isOlderThan(ug))&&lg(e,new ko),qc(e)}function oQ(e,t=AW()){if(!_W(e)||qc(e).isOlderThan(ug)){let n=t.getStackTop();lg(e,new ko(n.client,xI.Scope.clone(n.scope)))}}function aQ(e){let t=fs();t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.acs=e}function cQ(e,t={}){let n=fs();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function _W(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function qc(e){return tn.getGlobalSingleton("hub",()=>new ko,e)}function lg(e,t){if(!e)return!1;let n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}nn.API_VERSION=ug;nn.Hub=ko;nn.ensureHubOnCarrier=oQ;nn.getCurrentHub=sQ;nn.getHubFromCarrier=qc;nn.getMainCarrier=fs;nn.makeMain=XI;nn.runWithAsyncContext=cQ;nn.setAsyncContextStrategy=aQ;nn.setHubOnCarrier=lg});var dg=g(JI=>{Object.defineProperty(JI,"__esModule",{value:!0});var uQ=_n();function lQ(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=uQ.getCurrentHub().getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}JI.hasTracingEnabled=lQ});var gg=g(Vo=>{Object.defineProperty(Vo,"__esModule",{value:!0});var dQ=_n(),DI=Z();function gQ(e){return(e||dQ.getCurrentHub()).getScope().getTransaction()}Vo.TRACEPARENT_REGEXP=DI.TRACEPARENT_REGEXP;Vo.extractTraceparentData=DI.extractTraceparentData;Vo.stripUrlQueryAndFragment=DI.stripUrlQueryAndFragment;Vo.getActiveTransaction=gQ});var GW=g(KI=>{Object.defineProperty(KI,"__esModule",{value:!0});var OI=Z(),pQ=gg(),SW=!1;function mQ(){SW||(SW=!0,OI.addInstrumentationHandler("error",UI),OI.addInstrumentationHandler("unhandledrejection",UI))}function UI(){let e=pQ.getActiveTransaction();if(e){let t="internal_error";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&OI.logger.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}UI.tag="sentry_tracingErrorCallback";KI.registerErrorInstrumentation=mQ});var pg=g(zc=>{Object.defineProperty(zc,"__esModule",{value:!0});var Jn=Z(),LI=class{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}},Pc=class{constructor(t){if(this.traceId=Jn.uuid4(),this.spanId=Jn.uuid4().substring(16),this.startTimestamp=Jn.timestampInSeconds(),this.tags={},this.data={},this.instrumenter="sentry",!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.name&&(this.description=t.name),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp),t.instrumenter&&(this.instrumenter=t.instrumenter)}startChild(t){let n=new Pc({...t,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&n.transaction){let r=t&&t.op||"< unknown op >",i=n.transaction.name||"< unknown name >",s=n.transaction.spanId,o=`[Tracing] Starting '${r}' span on transaction '${i}' (${s}).`;n.transaction.metadata.spanMetadata[n.spanId]={logMessage:o},Jn.logger.log(o)}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t)),this.setData("http.response.status_code",t);let n=BW(t);return n!=="unknown_error"&&this.setStatus(n),this}setName(t){this.description=t}isSuccess(){return this.status==="ok"}finish(t){if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){let{logMessage:n}=this.transaction.metadata.spanMetadata[this.spanId];n&&Jn.logger.log(n.replace("Starting","Finishing"))}this.endTimestamp=typeof t=="number"?t:Jn.timestampInSeconds()}toTraceparent(){return Jn.generateSentryTraceHeader(this.traceId,this.spanId,this.sampled)}toContext(){return Jn.dropUndefinedKeys({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=t.data||{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=t.spanId||this.spanId,this.startTimestamp=t.startTimestamp||this.startTimestamp,this.status=t.status,this.tags=t.tags||{},this.traceId=t.traceId||this.traceId,this}getTraceContext(){return Jn.dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return Jn.dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}};function BW(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}zc.Span=Pc;zc.SpanRecorder=LI;zc.spanStatusfromHttpCode=BW});var mg=g(MI=>{Object.defineProperty(MI,"__esModule",{value:!0});var fQ=Z(),hQ=Oc();function IQ(e,t,n){let r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},o=fQ.dropUndefinedKeys({environment:r.environment||hQ.DEFAULT_ENVIRONMENT,release:r.release,user_segment:s,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",o),o}MI.getDynamicSamplingContextFromClient=IQ});var fg=g(PI=>{Object.defineProperty(PI,"__esModule",{value:!0});var jc=Z(),vW=_n(),CQ=mg(),ZW=pg(),qI=class extends ZW.Span{constructor(t,n){super(t),delete this.description,this._measurements={},this._contexts={},this._hub=n||vW.getCurrentHub(),this._name=t.name||"",this.metadata={source:"custom",...t.metadata,spanMetadata:{}},this._trimEnd=t.trimEnd,this.transaction=this;let r=this.metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}setName(t,n="custom"){this._name=t,this.metadata.source=n}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new ZW.SpanRecorder(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this.metadata={...this.metadata,...t}}finish(t){if(this.endTimestamp!==void 0)return;this.name||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&jc.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(t);let n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this.sampled!==!0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&jc.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}let r=this.spanRecorder?this.spanRecorder.spans.filter(a=>a!==this&&a.endTimestamp):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((a,c)=>a.endTimestamp&&c.endTimestamp?a.endTimestamp>c.endTimestamp?a:c:a).endTimestamp);let i=this.metadata,s={contexts:{...this._contexts,trace:this.getTraceContext()},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...i,dynamicSamplingContext:this.getDynamicSamplingContext()},...i.source&&{transaction_info:{source:i.source}}};return Object.keys(this._measurements).length>0&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&jc.logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),s.measurements=this._measurements),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&jc.logger.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(s)}toContext(){let t=super.toContext();return jc.dropUndefinedKeys({...t,name:this.name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this.name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;let t=this._hub||vW.getCurrentHub(),n=t.getClient();if(!n)return{};let r=t.getScope(),i=CQ.getDynamicSamplingContextFromClient(this.traceId,n,r),s=this.metadata.sampleRate;s!==void 0&&(i.sample_rate=`${s}`);let o=this.metadata.source;return o&&o!=="url"&&(i.transaction=this.name),this.sampled!==void 0&&(i.sampled=String(this.sampled)),i}setHub(t){this._hub=t}};PI.Transaction=qI});var jI=g(Qc=>{Object.defineProperty(Qc,"__esModule",{value:!0});var Oe=Z(),yQ=pg(),bQ=fg(),hg={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},AQ="finishReason",Yo=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"],Ig=class extends yQ.SpanRecorder{constructor(t,n,r,i){super(i),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=r}add(t){t.spanId!==this.transactionSpanId&&(t.finish=n=>{t.endTimestamp=typeof n=="number"?n:Oe.timestampInSeconds(),this._popActivity(t.spanId)},t.endTimestamp===void 0&&this._pushActivity(t.spanId)),super.add(t)}},zI=class extends bQ.Transaction{constructor(t,n,r=hg.idleTimeout,i=hg.finalTimeout,s=hg.heartbeatInterval,o=!1){super(t,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=i,this._heartbeatInterval=s,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Yo[4],o&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),n.configureScope(a=>a.setSpan(this))),this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Yo[3],this.finish())},this._finalTimeout)}finish(t=Oe.timestampInSeconds()){if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setTag(AQ,this._finishReason),this.spanRecorder){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log("[Tracing] finishing IdleTransaction",new Date(t*1e3).toISOString(),this.op);for(let n of this._beforeFinishCallbacks)n(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(n=>{if(n.spanId===this.spanId)return!0;n.endTimestamp||(n.endTimestamp=t,n.setStatus("cancelled"),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(n,void 0,2)));let r=n.startTimestamp<t,i=(this._finalTimeout+this._idleTimeout)/1e3,s=n.endTimestamp-this.startTimestamp<i;if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){let o=JSON.stringify(n,void 0,2);r?s||Oe.logger.log("[Tracing] discarding Span since it finished after Transaction final timeout",o):Oe.logger.log("[Tracing] discarding Span since it happened after Transaction was finished",o)}return r&&s}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log("[Tracing] flushing IdleTransaction")}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log("[Tracing] No active IdleTransaction");if(this._onScope){let n=this._idleHub.getScope();n.getTransaction()===this&&n.setSpan(void 0)}return super.finish(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){let n=i=>{this._finished||this._pushActivity(i)},r=i=>{this._finished||this._popActivity(i)};this.spanRecorder=new Ig(n,r,this.spanId,t),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Yo[5],this.finish(t)))}setFinishReason(t){this._finishReason=t}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Yo[1],this.finish(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log(`[Tracing] popActivity ${t}`),delete this.activities[t],(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){let n=Oe.timestampInSeconds();this._idleTimeoutCanceledPermanently?(this._finishReason=Yo[5],this.finish(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;let t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Yo[0],this.finish()):this._pingHeartbeat()}_pingHeartbeat(){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oe.logger.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}};Qc.IdleTransaction=zI;Qc.IdleTransactionSpanRecorder=Ig;Qc.TRACING_DEFAULTS=hg});var RW=g(Cg=>{Object.defineProperty(Cg,"__esModule",{value:!0});var oi=Z(),_Q=_n(),SQ=dg(),GQ=GW(),BQ=jI(),vQ=fg();function ZQ(){let t=this.getScope().getSpan();return t?{"sentry-trace":t.toTraceparent()}:{}}function EW(e,t,n){if(!SQ.hasTracingEnabled(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setMetadata({sampleRate:Number(r)})):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setMetadata({sampleRate:Number(r)})):(r=1,e.setMetadata({sampleRate:r})),EQ(r)?r?(e.sampled=Math.random()<r,e.sampled?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&oi.logger.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&oi.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&oi.logger.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&oi.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function EQ(e){return oi.isNaN(e)||!(typeof e=="number"||typeof e=="boolean")?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&oi.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&oi.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function RQ(e,t){let n=this.getClient(),r=n&&n.getOptions()||{},i=r.instrumenter||"sentry",s=e.instrumenter||"sentry";i!==s&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&oi.logger.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${i}\` instrumenter.
The transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),e.sampled=!1);let o=new vQ.Transaction(e,this);return o=EW(o,r,{parentSampled:e.parentSampled,transactionContext:e,...t}),o.sampled&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function WQ(e,t,n,r,i,s,o){let a=e.getClient(),c=a&&a.getOptions()||{},u=new BQ.IdleTransaction(t,e,n,r,o,i);return u=EW(u,c,{parentSampled:t.parentSampled,transactionContext:t,...s}),u.sampled&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",u),u}function wQ(){let e=_Q.getMainCarrier();!e.__SENTRY__||(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=RQ),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=ZQ),GQ.registerErrorInstrumentation())}Cg.addTracingExtensions=wQ;Cg.startIdleTransaction=WQ});var WW=g($c=>{Object.defineProperty($c,"__esModule",{value:!0});$c.SpanStatus=void 0;(function(e){let t="ok";e.Ok=t;let n="deadline_exceeded";e.DeadlineExceeded=n;let r="unauthenticated";e.Unauthenticated=r;let i="permission_denied";e.PermissionDenied=i;let s="not_found";e.NotFound=s;let o="resource_exhausted";e.ResourceExhausted=o;let a="invalid_argument";e.InvalidArgument=a;let c="unimplemented";e.Unimplemented=c;let u="unavailable";e.Unavailable=u;let l="internal_error";e.InternalError=l;let d="unknown_error";e.UnknownError=d;let p="cancelled";e.Cancelled=p;let m="already_exists";e.AlreadyExists=m;let f="failed_precondition";e.FailedPrecondition=f;let h="aborted";e.Aborted=h;let I="out_of_range";e.OutOfRange=I;let b="data_loss";e.DataLoss=b})($c.SpanStatus||($c.SpanStatus={}))});var wW=g(QI=>{Object.defineProperty(QI,"__esModule",{value:!0});var NQ=Z(),TQ=_n(),HQ=dg();function kQ(e,t,n=()=>{}){let r={...e};r.name!==void 0&&r.description===void 0&&(r.description=r.name);let i=TQ.getCurrentHub(),s=i.getScope(),o=s.getSpan();function a(){if(!!HQ.hasTracingEnabled())return o?o.startChild(r):i.startTransaction(r)}let c=a();s.setSpan(c);function u(){c&&c.finish(),i.getScope().setSpan(o)}let l;try{l=t(c)}catch(d){throw c&&c.setStatus("internal_error"),n(d),u(),d}return NQ.isThenable(l)?Promise.resolve(l).then(()=>{u()},d=>{c&&c.setStatus("internal_error"),n(d),u()}):u(),l}QI.trace=kQ});var NW=g($I=>{Object.defineProperty($I,"__esModule",{value:!0});var VQ=gg();function YQ(e,t,n){let r=VQ.getActiveTransaction();r&&r.setMeasurement(e,t,n)}$I.setMeasurement=YQ});var TW=g(Ze=>{Object.defineProperty(Ze,"__esModule",{value:!0});var eu=Z(),Ue=_n();function FQ(e,t){return Ue.getCurrentHub().captureException(e,{captureContext:t})}function xQ(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return Ue.getCurrentHub().captureMessage(e,n,r)}function XQ(e,t){return Ue.getCurrentHub().captureEvent(e,t)}function JQ(e){Ue.getCurrentHub().configureScope(e)}function DQ(e){Ue.getCurrentHub().addBreadcrumb(e)}function OQ(e,t){Ue.getCurrentHub().setContext(e,t)}function UQ(e){Ue.getCurrentHub().setExtras(e)}function KQ(e,t){Ue.getCurrentHub().setExtra(e,t)}function LQ(e){Ue.getCurrentHub().setTags(e)}function MQ(e,t){Ue.getCurrentHub().setTag(e,t)}function qQ(e){Ue.getCurrentHub().setUser(e)}function PQ(e){Ue.getCurrentHub().withScope(e)}function zQ(e,t){return Ue.getCurrentHub().startTransaction({...e},t)}function jQ(e,t){let n=Ue.getCurrentHub(),r=n.getScope(),i=n.getClient();if(!i)(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&eu.logger.warn("Cannot capture check-in. No client defined.");else if(!i.captureCheckIn)(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&eu.logger.warn("Cannot capture check-in. Client does not support sending check-ins.");else return i.captureCheckIn(e,t,r);return eu.uuid4()}async function QQ(e){let t=Ue.getCurrentHub().getClient();return t?t.flush(e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&eu.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function $Q(e){let t=Ue.getCurrentHub().getClient();return t?t.close(e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&eu.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function e4(){return Ue.getCurrentHub().lastEventId()}Ze.addBreadcrumb=DQ;Ze.captureCheckIn=jQ;Ze.captureEvent=XQ;Ze.captureException=FQ;Ze.captureMessage=xQ;Ze.close=$Q;Ze.configureScope=JQ;Ze.flush=QQ;Ze.lastEventId=e4;Ze.setContext=OQ;Ze.setExtra=KQ;Ze.setExtras=UQ;Ze.setTag=MQ;Ze.setTags=LQ;Ze.setUser=qQ;Ze.startTransaction=zQ;Ze.withScope=PQ});var HW=g(tC=>{Object.defineProperty(tC,"__esModule",{value:!0});var t4=Z(),n4=_n(),eC=class{constructor(t,n){this._client=t,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1e3),this._sessionAttrs=n}flush(){let t=this.getSessionAggregates();t.aggregates.length!==0&&(this._pendingAggregates={},this._client.sendSession(t))}getSessionAggregates(){let t=Object.keys(this._pendingAggregates).map(r=>this._pendingAggregates[parseInt(r)]),n={attrs:this._sessionAttrs,aggregates:t};return t4.dropUndefinedKeys(n)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;let t=n4.getCurrentHub().getScope(),n=t.getRequestSession();n&&n.status&&(this._incrementSessionStatusCount(n.status,new Date),t.setRequestSession(void 0))}_incrementSessionStatusCount(t,n){let r=new Date(n).setSeconds(0,0);this._pendingAggregates[r]=this._pendingAggregates[r]||{};let i=this._pendingAggregates[r];switch(i.started||(i.started=new Date(r).toISOString()),t){case"errored":return i.errored=(i.errored||0)+1,i.errored;case"ok":return i.exited=(i.exited||0)+1,i.exited;default:return i.crashed=(i.crashed||0)+1,i.crashed}}};tC.SessionFlusher=eC});var bg=g(yg=>{Object.defineProperty(yg,"__esModule",{value:!0});var nC=Z(),r4="7";function kW(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function i4(e){return`${kW(e)}${e.projectId}/envelope/`}function s4(e,t){return nC.urlEncode({sentry_key:e.publicKey,sentry_version:r4,...t&&{sentry_client:`${t.name}/${t.version}`}})}function o4(e,t={}){let n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${i4(e)}?${s4(e,r)}`}function a4(e,t){let n=nC.makeDsn(e);if(!n)return"";let r=`${kW(n)}embed/error-page/`,i=`dsn=${nC.dsnToString(n)}`;for(let s in t)if(s!=="dsn")if(s==="user"){let o=t.user;if(!o)continue;o.name&&(i+=`&name=${encodeURIComponent(o.name)}`),o.email&&(i+=`&email=${encodeURIComponent(o.email)}`)}else i+=`&${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`;return`${r}?${i}`}yg.getEnvelopeEndpointWithUrlEncodedAuth=o4;yg.getReportDialogEndpoint=a4});var VW=g(Ag=>{Object.defineProperty(Ag,"__esModule",{value:!0});var Fo=Z();function c4(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function u4(e,t,n,r){let i=Fo.getSdkMetadataForEnvelopeHeader(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&{dsn:Fo.dsnToString(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Fo.createEnvelope(s,[o])}function l4(e,t,n,r){let i=Fo.getSdkMetadataForEnvelopeHeader(n),s=e.type&&e.type!=="replay_event"?e.type:"event";c4(e,n&&n.sdk);let o=Fo.createEventEnvelopeHeaders(e,i,r,t);delete e.sdkProcessingMetadata;let a=[{type:s},e];return Fo.createEnvelope(o,[a])}Ag.createEventEnvelope=l4;Ag.createSessionEnvelope=u4});var iC=g(xo=>{Object.defineProperty(xo,"__esModule",{value:!0});var YW=Z(),d4=_n(),g4=Mc(),rC=[];function p4(e){let t={};return e.forEach(n=>{let{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function m4(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=YW.arrayify(n(t)):r=t;let i=p4(r),s=h4(i,o=>o.name==="Debug");if(s!==-1){let[o]=i.splice(s,1);i.push(o)}return i}function f4(e){let t={};return e.forEach(n=>{n&&FW(n,t)}),t}function FW(e,t){t[e.name]=e,rC.indexOf(e.name)===-1&&(e.setupOnce(g4.addGlobalEventProcessor,d4.getCurrentHub),rC.push(e.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&YW.logger.log(`Integration installed: ${e.name}`))}function h4(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}xo.getIntegrationsToSetup=m4;xo.installedIntegrations=rC;xo.setupIntegration=FW;xo.setupIntegrations=f4});var sC=g(tu=>{Object.defineProperty(tu,"__esModule",{value:!0});var Xt=Z(),I4=Oc(),C4=Mc();function y4(e,t,n,r){let{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=e,o={...t,event_id:t.event_id||n.event_id||Xt.uuid4(),timestamp:t.timestamp||Xt.dateTimestampInSeconds()},a=n.integrations||e.integrations.map(l=>l.name);b4(o,e),A4(o,a),t.type===void 0&&XW(o,e.stackParser);let c=r;n.captureContext&&(c=C4.Scope.clone(c).update(n.captureContext));let u=Xt.resolvedSyncPromise(o);if(c){if(c.getAttachments){let l=[...n.attachments||[],...c.getAttachments()];l.length&&(n.attachments=l)}u=c.applyToEvent(o,n)}return u.then(l=>(l&&JW(l),typeof i=="number"&&i>0?_4(l,i,s):l))}function b4(e,t){let{environment:n,release:r,dist:i,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:I4.DEFAULT_ENVIRONMENT),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=Xt.truncate(e.message,s));let o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Xt.truncate(o.value,s));let a=e.request;a&&a.url&&(a.url=Xt.truncate(a.url,s))}var xW=new WeakMap;function XW(e,t){let n=Xt.GLOBAL_OBJ._sentryDebugIds;if(!n)return;let r,i=xW.get(t);i?r=i:(r=new Map,xW.set(t,r));let s=Object.keys(n).reduce((o,a)=>{let c,u=r.get(a);u?c=u:(c=t(a),r.set(a,c));for(let l=c.length-1;l>=0;l--){let d=c[l];if(d.filename){o[d.filename]=n[a];break}}return o},{});try{e.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function JW(e){let t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function A4(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function _4(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:Xt.normalize(i.data,t,n)}}))},...e.user&&{user:Xt.normalize(e.user,t,n)},...e.contexts&&{contexts:Xt.normalize(e.contexts,t,n)},...e.extra&&{extra:Xt.normalize(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Xt.normalize(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>(i.data&&(i.data=Xt.normalize(i.data,t,n)),i))),r}tu.applyDebugIds=XW;tu.applyDebugMeta=JW;tu.prepareEvent=y4});var qW=g(aC=>{Object.defineProperty(aC,"__esModule",{value:!0});var K=Z(),S4=bg(),DW=VW(),OW=iC(),UW=Lc(),G4=mg(),B4=sC(),KW="Not capturing exception because it's already been captured.",oC=class{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},t.dsn?this._dsn=K.makeDsn(t.dsn):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&K.logger.warn("No DSN provided, client will not do anything."),this._dsn){let n=S4.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(K.checkOrSetAlreadyCaught(t)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&K.logger.log(KW);return}let i=n&&n.event_id;return this._process(this.eventFromException(t,n).then(s=>this._captureEvent(s,n,r)).then(s=>{i=s})),i}captureMessage(t,n,r,i){let s=r&&r.event_id,o=K.isPrimitive(t)?this.eventFromMessage(String(t),n,r):this.eventFromException(t,r);return this._process(o.then(a=>this._captureEvent(a,r,i)).then(a=>{s=a})),s}captureEvent(t,n,r){if(n&&n.originalException&&K.checkOrSetAlreadyCaught(n.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&K.logger.log(KW);return}let i=n&&n.event_id;return this._process(this._captureEvent(t,n,r).then(s=>{i=s})),i}captureSession(t){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&K.logger.warn("SDK not enabled, will not capture session.");return}typeof t.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&K.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),UW.updateSession(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){let n=this._transport;return n?this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i)):K.resolvedSyncPromise(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,n))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=OW.setupIntegrations(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&K.logger.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){OW.setupIntegration(t,this._integrations)}sendEvent(t,n={}){if(this._dsn){let r=DW.createEventEnvelope(t,this._dsn,this._options._metadata,this._options.tunnel);for(let s of n.attachments||[])r=K.addItemToEnvelope(r,K.createAttachmentEnvelopeItem(s,this._options.transportOptions&&this._options.transportOptions.textEncoder));let i=this._sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",t,s),null)}}sendSession(t){if(this._dsn){let n=DW.createSessionEnvelope(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){let i=`${t}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&K.logger.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_updateSessionFromEvent(t,n){let r=!1,i=!1,s=n.exception&&n.exception.values;if(s){i=!0;for(let c of s){let u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}let o=t.status==="ok";(o&&t.errors===0||o&&r)&&(UW.updateSession(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new K.SyncPromise(n=>{let r=0,i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,t&&r>=t&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(t,n,r){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s.length>0&&(n.integrations=s),B4.prepareEvent(i,t,n,r).then(o=>{if(o===null)return o;let{propagationContext:a}=o.sdkProcessingMetadata||{};if(!(o.contexts&&o.contexts.trace)&&a){let{traceId:u,spanId:l,parentSpanId:d,dsc:p}=a;o.contexts={trace:{trace_id:u,span_id:l,parent_span_id:d},...o.contexts};let m=p||G4.getDynamicSamplingContextFromClient(u,this,r);o.sdkProcessingMetadata={dynamicSamplingContext:m,...o.sdkProcessingMetadata}}return o})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(i=>i.event_id,i=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){let s=i;s.logLevel==="log"?K.logger.log(s.message):K.logger.warn(s)}})}_processEvent(t,n,r){let i=this.getOptions(),{sampleRate:s}=i;if(!this._isEnabled())return K.rejectedSyncPromise(new K.SentryError("SDK not enabled, will not capture event.","log"));let o=MW(t),a=LW(t),c=t.type||"error",u=`before send for type \`${c}\``;if(a&&typeof s=="number"&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",t),K.rejectedSyncPromise(new K.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));let l=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,r).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",l,t),new K.SentryError("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return d;let m=Z4(i,d,n);return v4(m,u)}).then(d=>{if(d===null)throw this.recordDroppedEvent("before_send",l,t),new K.SentryError(`${u} returned \`null\`, will not send event.`,"log");let p=r&&r.getSession();!o&&p&&this._updateSessionFromEvent(p,d);let m=d.transaction_info;if(o&&m&&d.transaction!==t.transaction){let f="custom";d.transaction_info={...m,source:f}}return this.sendEvent(d,n),d}).then(null,d=>{throw d instanceof K.SentryError?d:(this.captureException(d,{data:{__sentry__:!0},originalException:d}),new K.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",t),this._transport.send(t).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&K.logger.error("Error while sending event:",n)});(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&K.logger.error("Transport disabled")}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{let[r,i]=n.split(":");return{reason:r,category:i,quantity:t[n]}})}};function v4(e,t){let n=`${t} must return \`null\` or a valid event.`;if(K.isThenable(e))return e.then(r=>{if(!K.isPlainObject(r)&&r!==null)throw new K.SentryError(n);return r},r=>{throw new K.SentryError(`${t} rejected with ${r}`)});if(!K.isPlainObject(e)&&e!==null)throw new K.SentryError(n);return e}function Z4(e,t,n){let{beforeSend:r,beforeSendTransaction:i}=e;return LW(t)&&r?r(t,n):MW(t)&&i?i(t,n):t}function LW(e){return e.type===void 0}function MW(e){return e.type==="transaction"}aC.BaseClient=oC});var PW=g(cC=>{Object.defineProperty(cC,"__esModule",{value:!0});var E4=Z(),R4=_n();function W4(e,t){t.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?E4.logger.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));let n=R4.getCurrentHub();n.getScope().update(t.initialScope);let i=new e(t);n.bindClient(i)}cC.initAndBind=W4});var QW=g(_g=>{Object.defineProperty(_g,"__esModule",{value:!0});var Zt=Z(),jW=30;function w4(e,t,n=Zt.makePromiseBuffer(e.bufferSize||jW)){let r={},i=o=>n.drain(o);function s(o){let a=[];if(Zt.forEachEnvelopeItem(o,(d,p)=>{let m=Zt.envelopeItemTypeToDataCategory(p);if(Zt.isRateLimited(r,m)){let f=zW(d,p);e.recordDroppedEvent("ratelimit_backoff",m,f)}else a.push(d)}),a.length===0)return Zt.resolvedSyncPromise();let c=Zt.createEnvelope(o[0],a),u=d=>{Zt.forEachEnvelopeItem(c,(p,m)=>{let f=zW(p,m);e.recordDroppedEvent(d,Zt.envelopeItemTypeToDataCategory(m),f)})},l=()=>t({body:Zt.serializeEnvelope(c,e.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Zt.logger.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=Zt.updateRateLimits(r,d),d),d=>{throw u("network_error"),d});return n.add(l).then(d=>d,d=>{if(d instanceof Zt.SentryError)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Zt.logger.error("Skipped sending event because buffer is full."),u("queue_overflow"),Zt.resolvedSyncPromise();throw d})}return s.__sentry__baseTransport__=!0,{send:s,flush:i}}function zW(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}_g.DEFAULT_TRANSPORT_BUFFER_SIZE=jW;_g.createTransport=w4});var ew=g(nu=>{Object.defineProperty(nu,"__esModule",{value:!0});var lC=Z(),$W=100,dC=5e3,N4=36e5;function uC(e,t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&lC.logger.info(`[Offline]: ${e}`,t)}function T4(e){return t=>{let n=e(t),r=t.createStore?t.createStore(t):void 0,i=dC,s;function o(l,d,p){return lC.envelopeContainsItemType(l,["replay_event","replay_recording","client_report"])?!1:t.shouldStore?t.shouldStore(l,d,p):!0}function a(l){!r||(s&&clearTimeout(s),s=setTimeout(async()=>{s=void 0;let d=await r.pop();d&&(uC("Attempting to send previously queued event"),u(d).catch(p=>{uC("Failed to retry sending",p)}))},l),typeof s!="number"&&s.unref&&s.unref())}function c(){s||(a(i),i=Math.min(i*2,N4))}async function u(l){try{let d=await n.send(l),p=$W;if(d){if(d.headers&&d.headers["retry-after"])p=lC.parseRetryAfterHeader(d.headers["retry-after"]);else if((d.statusCode||0)>=400)return d}return a(p),i=dC,d}catch(d){if(r&&await o(l,d,i))return await r.insert(l),c(),uC("Error sending. Event queued",d),{};throw d}}return t.flushAtStartup&&c(),{send:u,flush:l=>n.flush(l)}}}nu.MIN_DELAY=$W;nu.START_DELAY=dC;nu.makeOfflineTransport=T4});var nw=g(Sg=>{Object.defineProperty(Sg,"__esModule",{value:!0});var tw=Z(),H4=bg();function gC(e,t){let n;return tw.forEachEnvelopeItem(e,(r,i)=>(t.includes(i)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function k4(e,t){return n=>{let r=e(n);return{send:async i=>{let s=gC(i,["event","transaction","profile","replay_event"]);return s&&(s.release=t),r.send(i)},flush:i=>r.flush(i)}}}function V4(e,t){return n=>{let r=e(n),i={};function s(c,u){let l=u?`${c}:${u}`:c;if(!i[l]){let d=tw.dsnFromString(c);if(!d)return;let p=H4.getEnvelopeEndpointWithUrlEncodedAuth(d);i[l]=u?k4(e,u)({...n,url:p}):e({...n,url:p})}return i[l]}async function o(c){function u(p){let m=p&&p.length?p:["event"];return gC(c,m)}let l=t({envelope:c,getEvent:u}).map(p=>typeof p=="string"?s(p,void 0):s(p.dsn,p.release)).filter(p=>!!p);return l.length===0&&l.push(r),(await Promise.all(l.map(p=>p.send(c))))[0]}async function a(c){let u=[...Object.keys(i).map(d=>i[d]),r];return(await Promise.all(u.map(d=>d.flush(c)))).every(d=>d)}return{send:o,flush:a}}}Sg.eventFromEnvelope=gC;Sg.makeMultiplexedTransport=V4});var rw=g(pC=>{Object.defineProperty(pC,"__esModule",{value:!0});var Y4="7.64.0";pC.SDK_VERSION=Y4});var fC=g(mC=>{Object.defineProperty(mC,"__esModule",{value:!0});var F4=Z(),iw,Xo=class{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=Xo.id}setupOnce(){iw=Function.prototype.toString;try{Function.prototype.toString=function(...t){let n=F4.getOriginalFunction(this)||this;return iw.apply(n,t)}}catch{}}};Xo.__initStatic();mC.FunctionToString=Xo});var hC=g(ru=>{Object.defineProperty(ru,"__esModule",{value:!0});var He=Z(),x4=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],X4=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/],hs=class{static __initStatic(){this.id="InboundFilters"}constructor(t={}){this.name=hs.id,this._options=t}setupOnce(t,n){let r=i=>{let s=n();if(s){let o=s.getIntegration(hs);if(o){let a=s.getClient(),c=a?a.getOptions():{},u=sw(o._options,c);return ow(i,u)?null:i}}return i};r.id=this.name,t(r)}};hs.__initStatic();function sw(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:x4],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:X4],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function ow(e,t){return t.ignoreInternal&&L4(e)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&He.logger.warn(`Event dropped due to being internal Sentry Error.
Event: ${He.getEventDescription(e)}`),!0):J4(e,t.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&He.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${He.getEventDescription(e)}`),!0):D4(e,t.ignoreTransactions)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&He.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${He.getEventDescription(e)}`),!0):O4(e,t.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&He.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${He.getEventDescription(e)}.
Url: ${Gg(e)}`),!0):U4(e,t.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&He.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${He.getEventDescription(e)}.
Url: ${Gg(e)}`),!0)}function J4(e,t){return e.type||!t||!t.length?!1:K4(e).some(n=>He.stringMatchesSomePattern(n,t))}function D4(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;let n=e.transaction;return n?He.stringMatchesSomePattern(n,t):!1}function O4(e,t){if(!t||!t.length)return!1;let n=Gg(e);return n?He.stringMatchesSomePattern(n,t):!1}function U4(e,t){if(!t||!t.length)return!0;let n=Gg(e);return n?He.stringMatchesSomePattern(n,t):!0}function K4(e){if(e.message)return[e.message];if(e.exception){let{values:t}=e.exception;try{let{type:n="",value:r=""}=t&&t[t.length-1]||{};return[`${r}`,`${n}: ${r}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&He.logger.error(`Cannot extract message for event ${He.getEventDescription(e)}`),[]}}return[]}function L4(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function M4(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Gg(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?M4(t):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&He.logger.error(`Cannot extract url for event ${He.getEventDescription(e)}`),null}}ru.InboundFilters=hs;ru._mergeOptions=sw;ru._shouldDropEvent=ow});var aw=g(Bg=>{Object.defineProperty(Bg,"__esModule",{value:!0});var q4=fC(),P4=hC();Bg.FunctionToString=q4.FunctionToString;Bg.InboundFilters=P4.InboundFilters});var cw=g(CC=>{Object.defineProperty(CC,"__esModule",{value:!0});var IC=Z();function z4(e,t,n,r,i){let s={sent_at:new Date().toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),!!r&&!!i&&(s.dsn=IC.dsnToString(i)),t&&(s.trace=IC.dropUndefinedKeys(t));let o=j4(e);return IC.createEnvelope(s,[o])}function j4(e){return[{type:"check_in"},e]}CC.createCheckInEnvelope=z4});var gw=g(iu=>{Object.defineProperty(iu,"__esModule",{value:!0});var yC=Z(),lw=new Map,uw=new Set;function Q4(e){if(!!yC.GLOBAL_OBJ._sentryModuleMetadata)for(let t of Object.keys(yC.GLOBAL_OBJ._sentryModuleMetadata)){let n=yC.GLOBAL_OBJ._sentryModuleMetadata[t];if(uw.has(t))continue;uw.add(t);let r=e(t);for(let i of r.reverse())if(i.filename){lw.set(i.filename,n);break}}}function dw(e,t){return Q4(e),lw.get(t)}function $4(e,t){try{t.exception.values.forEach(n=>{if(!!n.stacktrace)for(let r of n.stacktrace.frames||[]){if(!r.filename)continue;let i=dw(e,r.filename);i&&(r.module_metadata=i)}})}catch{}}function e$(e){try{e.exception.values.forEach(t=>{if(!!t.stacktrace)for(let n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}iu.addMetadataToStackFrames=$4;iu.getMetadataForUrl=dw;iu.stripMetadataFromStackFrames=e$});var mw=g(bC=>{Object.defineProperty(bC,"__esModule",{value:!0});var t$=Z(),pw=gw(),Jo=class{static __initStatic(){this.id="ModuleMetadata"}constructor(){this.name=Jo.id}setupOnce(t,n){let r=n().getClient();if(!r||typeof r.on!="function")return;r.on("beforeEnvelope",s=>{t$.forEachEnvelopeItem(s,(o,a)=>{if(a==="event"){let c=Array.isArray(o)?o[1]:void 0;c&&(pw.stripMetadataFromStackFrames(c),o[1]=c)}})});let i=r.getOptions().stackParser;t(s=>(pw.addMetadataToStackFrames(i,s),s))}};Jo.__initStatic();bC.ModuleMetadata=Jo});var ae=g(B=>{Object.defineProperty(B,"__esModule",{value:!0});var fw=RW(),hw=jI(),Iw=pg(),n$=fg(),r$=gg(),i$=WW(),s$=wW(),o$=mg(),a$=NW(),Ke=TW(),Ar=_n(),AC=Lc(),c$=HW(),Cw=Mc(),yw=bg(),u$=qW(),l$=PW(),d$=QW(),g$=ew(),p$=nw(),m$=rw(),f$=iC(),h$=aw(),I$=sC(),C$=cw(),y$=dg(),b$=Oc(),A$=mw(),_$=fC(),S$=hC(),G$=Z();B.addTracingExtensions=fw.addTracingExtensions;B.startIdleTransaction=fw.startIdleTransaction;B.IdleTransaction=hw.IdleTransaction;B.TRACING_DEFAULTS=hw.TRACING_DEFAULTS;B.Span=Iw.Span;B.spanStatusfromHttpCode=Iw.spanStatusfromHttpCode;B.Transaction=n$.Transaction;B.getActiveTransaction=r$.getActiveTransaction;Object.defineProperty(B,"SpanStatus",{enumerable:!0,get:()=>i$.SpanStatus});B.trace=s$.trace;B.getDynamicSamplingContextFromClient=o$.getDynamicSamplingContextFromClient;B.setMeasurement=a$.setMeasurement;B.addBreadcrumb=Ke.addBreadcrumb;B.captureCheckIn=Ke.captureCheckIn;B.captureEvent=Ke.captureEvent;B.captureException=Ke.captureException;B.captureMessage=Ke.captureMessage;B.close=Ke.close;B.configureScope=Ke.configureScope;B.flush=Ke.flush;B.lastEventId=Ke.lastEventId;B.setContext=Ke.setContext;B.setExtra=Ke.setExtra;B.setExtras=Ke.setExtras;B.setTag=Ke.setTag;B.setTags=Ke.setTags;B.setUser=Ke.setUser;B.startTransaction=Ke.startTransaction;B.withScope=Ke.withScope;B.Hub=Ar.Hub;B.ensureHubOnCarrier=Ar.ensureHubOnCarrier;B.getCurrentHub=Ar.getCurrentHub;B.getHubFromCarrier=Ar.getHubFromCarrier;B.getMainCarrier=Ar.getMainCarrier;B.makeMain=Ar.makeMain;B.runWithAsyncContext=Ar.runWithAsyncContext;B.setAsyncContextStrategy=Ar.setAsyncContextStrategy;B.setHubOnCarrier=Ar.setHubOnCarrier;B.closeSession=AC.closeSession;B.makeSession=AC.makeSession;B.updateSession=AC.updateSession;B.SessionFlusher=c$.SessionFlusher;B.Scope=Cw.Scope;B.addGlobalEventProcessor=Cw.addGlobalEventProcessor;B.getEnvelopeEndpointWithUrlEncodedAuth=yw.getEnvelopeEndpointWithUrlEncodedAuth;B.getReportDialogEndpoint=yw.getReportDialogEndpoint;B.BaseClient=u$.BaseClient;B.initAndBind=l$.initAndBind;B.createTransport=d$.createTransport;B.makeOfflineTransport=g$.makeOfflineTransport;B.makeMultiplexedTransport=p$.makeMultiplexedTransport;B.SDK_VERSION=m$.SDK_VERSION;B.getIntegrationsToSetup=f$.getIntegrationsToSetup;B.Integrations=h$;B.prepareEvent=I$.prepareEvent;B.createCheckInEnvelope=C$.createCheckInEnvelope;B.hasTracingEnabled=y$.hasTracingEnabled;B.DEFAULT_ENVIRONMENT=b$.DEFAULT_ENVIRONMENT;B.ModuleMetadata=A$.ModuleMetadata;B.FunctionToString=_$.FunctionToString;B.InboundFilters=S$.InboundFilters;B.extractTraceparentData=G$.extractTraceparentData});var SC=g(_C=>{Object.defineProperty(_C,"__esModule",{value:!0});function B$(e,t){return e??t()}_C._nullishCoalesce=B$});var bw=g(GC=>{Object.defineProperty(GC,"__esModule",{value:!0});var v$=SC();async function Z$(e,t){return v$._nullishCoalesce(e,t)}GC._asyncNullishCoalesce=Z$});var vC=g(BC=>{Object.defineProperty(BC,"__esModule",{value:!0});async function E$(e){let t,n=e[0],r=1;for(;r<e.length;){let i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=await s(n)):(i==="call"||i==="optionalCall")&&(n=await s((...o)=>n.call(t,...o)),t=void 0)}return n}BC._asyncOptionalChain=E$});var Aw=g(ZC=>{Object.defineProperty(ZC,"__esModule",{value:!0});var R$=vC();async function W$(e){let t=await R$._asyncOptionalChain(e);return t??!0}ZC._asyncOptionalChainDelete=W$});var _w=g(vg=>{Object.defineProperty(vg,"__esModule",{value:!0});function w$(e,t,n){vg[t]=e[n]}vg._createNamedExportFrom=w$});var Sw=g(su=>{Object.defineProperty(su,"__esModule",{value:!0});function N$(e){Object.keys(e).filter(t=>t!=="default"&&t!=="__esModule"&&!(t in su)).forEach(t=>su[t]=e[t])}su._createStarExport=N$});var Gw=g(EC=>{Object.defineProperty(EC,"__esModule",{value:!0});function T$(e){return e.__esModule?e.default:e}EC._interopDefault=T$});var Bw=g(RC=>{Object.defineProperty(RC,"__esModule",{value:!0});function H$(e){return e.__esModule?e:{...e,default:e}}RC._interopNamespace=H$});var vw=g(WC=>{Object.defineProperty(WC,"__esModule",{value:!0});function k$(e){return{__proto__:null,default:e}}WC._interopNamespaceDefaultOnly=k$});var Zw=g(wC=>{Object.defineProperty(wC,"__esModule",{value:!0});function V$(e){return e.__esModule?e:{default:e}}wC._interopRequireDefault=V$});var Ew=g(NC=>{Object.defineProperty(NC,"__esModule",{value:!0});function Y$(e){return e.__esModule?e:{...e,default:e}}NC._interopRequireWildcard=Y$});var HC=g(TC=>{Object.defineProperty(TC,"__esModule",{value:!0});function F$(e){let t,n=e[0],r=1;for(;r<e.length;){let i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(t,...o)),t=void 0)}return n}TC._optionalChain=F$});var Rw=g(kC=>{Object.defineProperty(kC,"__esModule",{value:!0});var x$=HC();function X$(e){let t=x$._optionalChain(e);return t??!0}kC._optionalChainDelete=X$});var fe=g(lt=>{Object.defineProperty(lt,"__esModule",{value:!0});var J$=bw(),D$=vC(),O$=Aw(),U$=_w(),K$=Sw(),L$=Gw(),M$=Bw(),q$=vw(),P$=Zw(),z$=Ew(),j$=SC(),Q$=HC(),$$=Rw();lt._asyncNullishCoalesce=J$._asyncNullishCoalesce;lt._asyncOptionalChain=D$._asyncOptionalChain;lt._asyncOptionalChainDelete=O$._asyncOptionalChainDelete;lt._createNamedExportFrom=U$._createNamedExportFrom;lt._createStarExport=K$._createStarExport;lt._interopDefault=L$._interopDefault;lt._interopNamespace=M$._interopNamespace;lt._interopNamespaceDefaultOnly=q$._interopNamespaceDefaultOnly;lt._interopRequireDefault=P$._interopRequireDefault;lt._interopRequireWildcard=z$._interopRequireWildcard;lt._nullishCoalesce=j$._nullishCoalesce;lt._optionalChain=Q$._optionalChain;lt._optionalChainDelete=$$._optionalChainDelete});var ai=g(VC=>{var{_optionalChain:Ww}=fe();Object.defineProperty(VC,"__esModule",{value:!0});function e8(e){let t=Ww([e,"call",r=>r(),"access",r=>r.getClient,"call",r=>r(),"optionalAccess",r=>r.getOptions,"call",r=>r()]);return(Ww([t,"optionalAccess",r=>r.instrumenter])||"sentry")!=="sentry"}VC.shouldDisableAutoInstrumentation=e8});var Nw=g(YC=>{var{_optionalChain:ou}=fe();Object.defineProperty(YC,"__esModule",{value:!0});var Sn=Z(),t8=ai(),Do=class{static __initStatic(){this.id="Express"}constructor(t={}){this.name=Do.id,this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}setupOnce(t,n){if(!this._router){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Sn.logger.error("ExpressIntegration is missing an Express instance");return}if(t8.shouldDisableAutoInstrumentation(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Sn.logger.log("Express Integration is skipped because of instrumenter configuration.");return}i8(this._router,this._methods),s8(this._router)}};Do.__initStatic();function ww(e,t){let n=e.length;switch(n){case 2:return function(r,i){let s=i.__sentry_transaction;if(s){let o=s.startChild({description:e.name,op:`middleware.express.${t}`});i.once("finish",()=>{o.finish()})}return e.call(this,r,i)};case 3:return function(r,i,s){let o=i.__sentry_transaction,a=ou([o,"optionalAccess",c=>c.startChild,"call",c=>c({description:e.name,op:`middleware.express.${t}`})]);e.call(this,r,i,function(...c){ou([a,"optionalAccess",u=>u.finish,"call",u=>u()]),s.call(this,...c)})};case 4:return function(r,i,s,o){let a=s.__sentry_transaction,c=ou([a,"optionalAccess",u=>u.startChild,"call",u=>u({description:e.name,op:`middleware.express.${t}`})]);e.call(this,r,i,s,function(...u){ou([c,"optionalAccess",l=>l.finish,"call",l=>l()]),o.call(this,...u)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}function n8(e,t){return e.map(n=>typeof n=="function"?ww(n,t):Array.isArray(n)?n.map(r=>typeof r=="function"?ww(r,t):r):n)}function r8(e,t){let n=e[t];return e[t]=function(...r){return n.call(this,...n8(r,t))},e}function i8(e,t=[]){t.forEach(n=>r8(e,n))}function s8(e){let t="settings"in e;t&&e._router===void 0&&e.lazyrouter&&e.lazyrouter();let n=t?e._router:e;if(!n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Sn.logger.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Sn.logger.debug("Routing instrumentation is currently only supported in Express 4.");return}let r=Object.getPrototypeOf(n),i=r.process_params;r.process_params=function(o,a,c,u,l){c._reconstructedRoute||(c._reconstructedRoute="");let{layerRoutePath:d,isRegex:p,isArray:m,numExtraSegments:f}=o8(o);(d||p||m)&&(c._hasParameters=!0);let I=(d||o.path||"").split("/").filter(W=>W.length>0&&(p||m||!W.includes("*"))).join("/");I&&I.length>0&&(c._reconstructedRoute+=`/${I}${p?"/":""}`);let b=Sn.getNumberOfUrlSegments(c.originalUrl||"")+f,R=Sn.getNumberOfUrlSegments(c._reconstructedRoute);if(b===R){c._hasParameters||c._reconstructedRoute!==c.originalUrl&&(c._reconstructedRoute=c.originalUrl?Sn.stripUrlQueryAndFragment(c.originalUrl):c.originalUrl);let W=u.__sentry_transaction;if(W&&W.metadata.source!=="custom"){let F=c._reconstructedRoute||"/";W.setName(...Sn.extractPathForTransaction(c,{path:!0,method:!0,customRoute:F}))}}return i.call(this,o,a,c,u,l)}}function o8(e){let t=ou([e,"access",o=>o.route,"optionalAccess",o=>o.path]),n=Sn.isRegExp(t),r=Array.isArray(t);if(!t)return{isRegex:n,isArray:r,numExtraSegments:0};let i=r?Math.max(a8(t)-Sn.getNumberOfUrlSegments(e.path||""),0):0;return{layerRoutePath:c8(r,t),isRegex:n,isArray:r,numExtraSegments:i}}function a8(e){return e.reduce((t,n)=>t+Sn.getNumberOfUrlSegments(n.toString()),0)}function c8(e,t){return e?t.map(n=>n.toString()).join(","):t&&t.toString()}YC.Express=Do});var Tw=g(FC=>{var{_optionalChain:Is}=fe();Object.defineProperty(FC,"__esModule",{value:!0});var Oo=Z(),u8=ai(),Uo=class{static __initStatic(){this.id="Postgres"}constructor(t={}){this.name=Uo.id,this._usePgNative=!!t.usePgNative}loadDependency(){return this._module=this._module||Oo.loadModule("pg")}setupOnce(t,n){if(u8.shouldDisableAutoInstrumentation(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oo.logger.log("Postgres Integration is skipped because of instrumenter configuration.");return}let r=this.loadDependency();if(!r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oo.logger.error("Postgres Integration was unable to require `pg` package.");return}if(this._usePgNative&&!Is([r,"access",s=>s.native,"optionalAccess",s=>s.Client])){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Oo.logger.error("Postgres Integration was unable to access 'pg-native' bindings.");return}let{Client:i}=this._usePgNative?r.native:r;Oo.fill(i.prototype,"query",function(s){return function(o,a,c){let u=n().getScope(),l=Is([u,"optionalAccess",f=>f.getSpan,"call",f=>f()]),d={"db.system":"postgresql"};try{this.database&&(d["db.name"]=this.database),this.host&&(d["server.address"]=this.host),this.port&&(d["server.port"]=this.port),this.user&&(d["db.user"]=this.user)}catch{}let p=Is([l,"optionalAccess",f=>f.startChild,"call",f=>f({description:typeof o=="string"?o:o.text,op:"db",data:d})]);if(typeof c=="function")return s.call(this,o,a,function(f,h){Is([p,"optionalAccess",I=>I.finish,"call",I=>I()]),c(f,h)});if(typeof a=="function")return s.call(this,o,function(f,h){Is([p,"optionalAccess",I=>I.finish,"call",I=>I()]),a(f,h)});let m=typeof a<"u"?s.call(this,o,a):s.call(this,o);return Oo.isThenable(m)?m.then(f=>(Is([p,"optionalAccess",h=>h.finish,"call",h=>h()]),f)):(Is([p,"optionalAccess",f=>f.finish,"call",f=>f()]),m)}})}};Uo.__initStatic();FC.Postgres=Uo});var Hw=g(xC=>{var{_optionalChain:Zg}=fe();Object.defineProperty(xC,"__esModule",{value:!0});var au=Z(),l8=ai(),Ko=class{static __initStatic(){this.id="Mysql"}constructor(){this.name=Ko.id}loadDependency(){return this._module=this._module||au.loadModule("mysql/lib/Connection.js")}setupOnce(t,n){if(l8.shouldDisableAutoInstrumentation(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&au.logger.log("Mysql Integration is skipped because of instrumenter configuration.");return}let r=this.loadDependency();if(!r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&au.logger.error("Mysql Integration was unable to require `mysql` package.");return}let i;try{r.prototype.connect=new Proxy(r.prototype.connect,{apply(o,a,c){return i||(i=a.config),o.apply(a,c)}})}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&au.logger.error("Mysql Integration was unable to instrument `mysql` config.")}function s(){return i?{"server.address":i.host,"server.port":i.port,"db.user":i.user}:{}}au.fill(r,"createQuery",function(o){return function(a,c,u){let l=n().getScope(),d=Zg([l,"optionalAccess",m=>m.getSpan,"call",m=>m()]),p=Zg([d,"optionalAccess",m=>m.startChild,"call",m=>m({description:typeof a=="string"?a:a.sql,op:"db",data:{...s(),"db.system":"mysql"}})]);return typeof u=="function"?o.call(this,a,c,function(m,f,h){Zg([p,"optionalAccess",I=>I.finish,"call",I=>I()]),u(m,f,h)}):typeof c=="function"?o.call(this,a,function(m,f,h){Zg([p,"optionalAccess",I=>I.finish,"call",I=>I()]),c(m,f,h)}):o.call(this,a,c,u)}})}};Ko.__initStatic();xC.Mysql=Ko});var kw=g(XC=>{var{_optionalChain:ci}=fe();Object.defineProperty(XC,"__esModule",{value:!0});var cu=Z(),d8=ai(),g8=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],p8={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};function m8(e){return e&&typeof e=="object"&&e.once&&typeof e.once=="function"}var Lo=class{static __initStatic(){this.id="Mongo"}constructor(t={}){this.name=Lo.id,this._operations=Array.isArray(t.operations)?t.operations:g8,this._describeOperations="describeOperations"in t?t.describeOperations:!0,this._useMongoose=!!t.useMongoose}loadDependency(){let t=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||cu.loadModule(t)}setupOnce(t,n){if(d8.shouldDisableAutoInstrumentation(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&cu.logger.log("Mongo Integration is skipped because of instrumenter configuration.");return}let r=this.loadDependency();if(!r){let i=this._useMongoose?"mongoose":"mongodb";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&cu.logger.error(`Mongo Integration was unable to require \`${i}\` package.`);return}this._instrumentOperations(r.Collection,this._operations,n)}_instrumentOperations(t,n,r){n.forEach(i=>this._patchOperation(t,i,r))}_patchOperation(t,n,r){if(!(n in t.prototype))return;let i=this._getSpanContextFromOperationArguments.bind(this);cu.fill(t.prototype,n,function(s){return function(...o){let a=o[o.length-1],c=r().getScope(),u=ci([c,"optionalAccess",d=>d.getSpan,"call",d=>d()]);if(typeof a!="function"||n==="mapReduce"&&o.length===2){let d=ci([u,"optionalAccess",m=>m.startChild,"call",m=>m(i(this,n,o))]),p=s.call(this,...o);if(cu.isThenable(p))return p.then(m=>(ci([d,"optionalAccess",f=>f.finish,"call",f=>f()]),m));if(m8(p)){let m=p;try{m.once("close",()=>{ci([d,"optionalAccess",f=>f.finish,"call",f=>f()])})}catch{ci([d,"optionalAccess",h=>h.finish,"call",h=>h()])}return m}else return ci([d,"optionalAccess",m=>m.finish,"call",m=>m()]),p}let l=ci([u,"optionalAccess",d=>d.startChild,"call",d=>d(i(this,n,o.slice(0,-1)))]);return s.call(this,...o.slice(0,-1),function(d,p){ci([l,"optionalAccess",m=>m.finish,"call",m=>m()]),a(d,p)})}})}_getSpanContextFromOperationArguments(t,n,r){let i={"db.system":"mongodb","db.name":t.dbName,"db.operation":n,"db.mongodb.collection":t.collectionName},s={op:"db",description:n,data:i},o=p8[n],a=Array.isArray(this._describeOperations)?this._describeOperations.includes(n):this._describeOperations;if(!o||!a)return s;try{if(n==="mapReduce"){let[c,u]=r;i[o[0]]=typeof c=="string"?c:c.name||"<anonymous>",i[o[1]]=typeof u=="string"?u:u.name||"<anonymous>"}else for(let c=0;c<o.length;c++)i[`db.mongodb.${o[c]}`]=JSON.stringify(r[c])}catch{}return s}};Lo.__initStatic();XC.Mongo=Lo});var Fw=g(JC=>{Object.defineProperty(JC,"__esModule",{value:!0});var Vw=ae(),Yw=Z(),f8=ai();function h8(e){return!!e&&!!e.$use}var Mo=class{static __initStatic(){this.id="Prisma"}constructor(t={}){if(this.name=Mo.id,h8(t.client)&&!t.client._sentryInstrumented){Yw.addNonEnumerableProperty(t.client,"_sentryInstrumented",!0);let n={};try{let r=t.client._engineConfig;if(r){let{activeProvider:i,clientVersion:s}=r;i&&(n["db.system"]=i),s&&(n["db.prisma.version"]=s)}}catch{}t.client.$use((r,i)=>{if(f8.shouldDisableAutoInstrumentation(Vw.getCurrentHub))return i(r);let s=r.action,o=r.model;return Vw.trace({name:o?`${o} ${s}`:s,op:"db.sql.prisma",data:{...n,"db.operation":s}},()=>i(r))})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Yw.logger.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",t.client)}setupOnce(){}};Mo.__initStatic();JC.Prisma=Mo});var xw=g(DC=>{var{_optionalChain:Cs}=fe();Object.defineProperty(DC,"__esModule",{value:!0});var uu=Z(),I8=ai(),qo=class{static __initStatic(){this.id="GraphQL"}constructor(){this.name=qo.id}loadDependency(){return this._module=this._module||uu.loadModule("graphql/execution/execute.js")}setupOnce(t,n){if(I8.shouldDisableAutoInstrumentation(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&uu.logger.log("GraphQL Integration is skipped because of instrumenter configuration.");return}let r=this.loadDependency();if(!r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&uu.logger.error("GraphQL Integration was unable to require graphql/execution package.");return}uu.fill(r,"execute",function(i){return function(...s){let o=n().getScope(),a=Cs([o,"optionalAccess",l=>l.getSpan,"call",l=>l()]),c=Cs([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:"execute",op:"graphql.execute"})]);Cs([o,"optionalAccess",l=>l.setSpan,"call",l=>l(c)]);let u=i.call(this,...s);return uu.isThenable(u)?u.then(l=>(Cs([c,"optionalAccess",d=>d.finish,"call",d=>d()]),Cs([o,"optionalAccess",d=>d.setSpan,"call",d=>d(a)]),l)):(Cs([c,"optionalAccess",l=>l.finish,"call",l=>l()]),Cs([o,"optionalAccess",l=>l.setSpan,"call",l=>l(a)]),u)}})}};qo.__initStatic();DC.GraphQL=qo});var Jw=g(OC=>{var{_optionalChain:Eg}=fe();Object.defineProperty(OC,"__esModule",{value:!0});var Qe=Z(),C8=ai(),Po=class{static __initStatic(){this.id="Apollo"}constructor(t={useNestjs:!1}){this.name=Po.id,this._useNest=!!t.useNestjs}loadDependency(){return this._useNest?this._module=this._module||Qe.loadModule("@nestjs/graphql"):this._module=this._module||Qe.loadModule("apollo-server-core"),this._module}setupOnce(t,n){if(C8.shouldDisableAutoInstrumentation(n)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Qe.logger.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){let r=this.loadDependency();if(!r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Qe.logger.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}Qe.fill(r.GraphQLFactory.prototype,"mergeWithSchema",function(i){return function(...s){return Qe.fill(this.resolversExplorerService,"explore",function(o){return function(){let a=Qe.arrayify(o.call(this));return Xw(a,n)}}),i.call(this,...s)}})}else{let r=this.loadDependency();if(!r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Qe.logger.error("Apollo Integration was unable to require apollo-server-core package.");return}Qe.fill(r.ApolloServerBase.prototype,"constructSchema",function(i){return function(){if(!this.config.resolvers)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(this.config.schema?(Qe.logger.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),Qe.logger.warn()):this.config.modules&&Qe.logger.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),Qe.logger.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),i.call(this);let s=Qe.arrayify(this.config.resolvers);return this.config.resolvers=Xw(s,n),i.call(this)}})}}};Po.__initStatic();function Xw(e,t){return e.map(n=>(Object.keys(n).forEach(r=>{Object.keys(n[r]).forEach(i=>{typeof n[r][i]=="function"&&y8(n,r,i,t)})}),n))}function y8(e,t,n,r){Qe.fill(e[t],n,function(i){return function(...s){let o=r().getScope(),a=Eg([o,"optionalAccess",l=>l.getSpan,"call",l=>l()]),c=Eg([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:`${t}.${n}`,op:"graphql.resolve"})]),u=i.call(this,...s);return Qe.isThenable(u)?u.then(l=>(Eg([c,"optionalAccess",d=>d.finish,"call",d=>d()]),l)):(Eg([c,"optionalAccess",l=>l.finish,"call",l=>l()]),u)}})}OC.Apollo=Po});var Dw=g((UC,ui)=>{Object.defineProperty(UC,"__esModule",{value:!0});var ys=Z(),b8=[()=>{let e=ys.dynamicRequire(ui,"./apollo");return new e.Apollo},()=>{let e=ys.dynamicRequire(ui,"./apollo");return new e.Apollo({useNestjs:!0})},()=>{let e=ys.dynamicRequire(ui,"./graphql");return new e.GraphQL},()=>{let e=ys.dynamicRequire(ui,"./mongo");return new e.Mongo},()=>{let e=ys.dynamicRequire(ui,"./mongo");return new e.Mongo({mongoose:!0})},()=>{let e=ys.dynamicRequire(ui,"./mysql");return new e.Mysql},()=>{let e=ys.dynamicRequire(ui,"./postgres");return new e.Postgres}];UC.lazyLoadedNodePerformanceMonitoringIntegrations=b8});var _r=g(KC=>{Object.defineProperty(KC,"__esModule",{value:!0});var A8=Z(),_8=A8.GLOBAL_OBJ;KC.WINDOW=_8});var Uw=g(LC=>{Object.defineProperty(LC,"__esModule",{value:!0});var S8=ae(),Ow=Z(),Rg=_r();function G8(){Rg.WINDOW&&Rg.WINDOW.document?Rg.WINDOW.document.addEventListener("visibilitychange",()=>{let e=S8.getActiveTransaction();if(Rg.WINDOW.document.hidden&&e){let t="cancelled";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ow.logger.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.finish()}}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ow.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}LC.registerBackgroundTabDetection=G8});var Wg=g(MC=>{Object.defineProperty(MC,"__esModule",{value:!0});var B8=(e,t,n)=>{let r,i;return s=>{t.value>=0&&(s||n)&&(i=t.value-(r||0),(i||r===void 0)&&(r=t.value,t.delta=i,e(t)))}};MC.bindReporter=B8});var Kw=g(qC=>{Object.defineProperty(qC,"__esModule",{value:!0});var v8=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`;qC.generateUniqueID=v8});var zC=g(PC=>{Object.defineProperty(PC,"__esModule",{value:!0});var lu=_r(),Z8=()=>{let e=lu.WINDOW.performance.timing,t=lu.WINDOW.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(let r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},E8=()=>lu.WINDOW.__WEB_VITALS_POLYFILL__?lu.WINDOW.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Z8()):lu.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];PC.getNavigationEntry=E8});var QC=g(jC=>{Object.defineProperty(jC,"__esModule",{value:!0});var R8=zC(),W8=()=>{let e=R8.getNavigationEntry();return e&&e.activationStart||0};jC.getActivationStart=W8});var wg=g($C=>{Object.defineProperty($C,"__esModule",{value:!0});var w8=_r(),N8=Kw(),T8=QC(),H8=zC(),k8=(e,t)=>{let n=H8.getNavigationEntry(),r="navigate";return n&&(w8.WINDOW.document.prerendering||T8.getActivationStart()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:N8.generateUniqueID(),navigationType:r}};$C.initMetric=k8});var du=g(ey=>{Object.defineProperty(ey,"__esModule",{value:!0});var V8=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(i=>{t(i.getEntries())});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}};ey.observe=V8});var gu=g(ty=>{Object.defineProperty(ty,"__esModule",{value:!0});var Y8=_r(),F8=(e,t)=>{let n=r=>{(r.type==="pagehide"||Y8.WINDOW.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)};ty.onHidden=F8});var Lw=g(ny=>{Object.defineProperty(ny,"__esModule",{value:!0});var x8=Wg(),X8=wg(),J8=du(),D8=gu(),O8=e=>{let t=X8.initMetric("CLS",0),n,r=0,i=[],s=a=>{a.forEach(c=>{if(!c.hadRecentInput){let u=i[0],l=i[i.length-1];r&&i.length!==0&&c.startTime-l.startTime<1e3&&c.startTime-u.startTime<5e3?(r+=c.value,i.push(c)):(r=c.value,i=[c]),r>t.value&&(t.value=r,t.entries=i,n&&n())}})},o=J8.observe("layout-shift",s);if(o){n=x8.bindReporter(e,t);let a=()=>{s(o.takeRecords()),n(!0)};return D8.onHidden(a),a}};ny.onCLS=O8});var Tg=g(ry=>{Object.defineProperty(ry,"__esModule",{value:!0});var Mw=_r(),U8=gu(),Ng=-1,K8=()=>Mw.WINDOW.document.visibilityState==="hidden"&&!Mw.WINDOW.document.prerendering?0:1/0,L8=()=>{U8.onHidden(({timeStamp:e})=>{Ng=e},!0)},M8=()=>(Ng<0&&(Ng=K8(),L8()),{get firstHiddenTime(){return Ng}});ry.getVisibilityWatcher=M8});var qw=g(iy=>{Object.defineProperty(iy,"__esModule",{value:!0});var q8=Wg(),P8=Tg(),z8=wg(),j8=du(),Q8=gu(),$8=e=>{let t=P8.getVisibilityWatcher(),n=z8.initMetric("FID"),r,i=a=>{a.startTime<t.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),r(!0))},s=a=>{a.forEach(i)},o=j8.observe("first-input",s);r=q8.bindReporter(e,n),o&&Q8.onHidden(()=>{s(o.takeRecords()),o.disconnect()},!0)};iy.onFID=$8});var zw=g(sy=>{Object.defineProperty(sy,"__esModule",{value:!0});var e7=Wg(),t7=QC(),n7=Tg(),r7=wg(),i7=du(),s7=gu(),Pw={},o7=e=>{let t=n7.getVisibilityWatcher(),n=r7.initMetric("LCP"),r,i=o=>{let a=o[o.length-1];if(a){let c=Math.max(a.startTime-t7.getActivationStart(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[a],r())}},s=i7.observe("largest-contentful-paint",i);if(s){r=e7.bindReporter(e,n);let o=()=>{Pw[n.id]||(i(s.takeRecords()),s.disconnect(),Pw[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,o,{once:!0,capture:!0})}),s7.onHidden(o,!0),o}};sy.onLCP=o7});var jw=g(Hg=>{Object.defineProperty(Hg,"__esModule",{value:!0});function a7(e){return typeof e=="number"&&isFinite(e)}function c7(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}Hg._startChild=c7;Hg.isMeasurementValue=a7});var iN=g(li=>{Object.defineProperty(li,"__esModule",{value:!0});var $w=ae(),Ee=Z(),bs=_r(),u7=Lw(),l7=qw(),d7=zw(),g7=Tg(),eN=du(),Sr=jw();function Re(e){return e/1e3}function tN(){return bs.WINDOW&&bs.WINDOW.addEventListener&&bs.WINDOW.performance}var Qw=0,ue={},Dn,pu;function p7(){let e=tN();if(e&&Ee.browserPerformanceTimeOrigin){e.mark&&bs.WINDOW.performance.mark("sentry-tracing-init"),C7();let t=h7(),n=I7();return()=>{t&&t(),n&&n()}}return()=>{}}function m7(){let e=t=>{for(let n of t){let r=$w.getActiveTransaction();if(!r)return;let i=Re(Ee.browserPerformanceTimeOrigin+n.startTime),s=Re(n.duration);r.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:i,endTimestamp:i+s})}};eN.observe("longtask",e)}function f7(){let e=t=>{for(let n of t){let r=$w.getActiveTransaction();if(!r)return;if(n.name==="click"){let i=Re(Ee.browserPerformanceTimeOrigin+n.startTime),s=Re(n.duration);r.startChild({description:Ee.htmlTreeAsString(n.target),op:`ui.interaction.${n.name}`,startTimestamp:i,endTimestamp:i+s})}}};eN.observe("event",e,{durationThreshold:0})}function h7(){return u7.onCLS(e=>{let t=e.entries.pop();!t||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log("[Measurements] Adding CLS"),ue.cls={value:e.value,unit:""},pu=t)})}function I7(){return d7.onLCP(e=>{let t=e.entries.pop();!t||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log("[Measurements] Adding LCP"),ue.lcp={value:e.value,unit:"millisecond"},Dn=t)})}function C7(){l7.onFID(e=>{let t=e.entries.pop();if(!t)return;let n=Re(Ee.browserPerformanceTimeOrigin),r=Re(t.startTime);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log("[Measurements] Adding FID"),ue.fid={value:e.value,unit:"millisecond"},ue["mark.fid"]={value:n+r,unit:"second"}})}function y7(e){let t=tN();if(!t||!bs.WINDOW.performance.getEntries||!Ee.browserPerformanceTimeOrigin)return;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log("[Tracing] Adding & adjusting spans using Performance API");let n=Re(Ee.browserPerformanceTimeOrigin),r=t.getEntries(),i,s;if(r.slice(Qw).forEach(o=>{let a=Re(o.startTime),c=Re(o.duration);if(!(e.op==="navigation"&&n+a<e.startTimestamp))switch(o.entryType){case"navigation":{b7(e,o,n),i=n+Re(o.responseStart),s=n+Re(o.requestStart);break}case"mark":case"paint":case"measure":{nN(e,o,a,c,n);let u=g7.getVisibilityWatcher(),l=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&l&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log("[Measurements] Adding FP"),ue.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&l&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log("[Measurements] Adding FCP"),ue.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{let u=o.name.replace(bs.WINDOW.location.origin,"");rN(e,o,u,a,c,n);break}}}),Qw=Math.max(r.length-1,0),_7(e),e.op==="pageload"){typeof i=="number"&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log("[Measurements] Adding TTFB"),ue.ttfb={value:(i-e.startTimestamp)*1e3,unit:"millisecond"},typeof s=="number"&&s<=i&&(ue["ttfb.requestTime"]={value:(i-s)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(a=>{if(!ue[a]||n>=e.startTimestamp)return;let c=ue[a].value,u=n+Re(c),l=Math.abs((u-e.startTimestamp)*1e3),d=l-c;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log(`[Measurements] Normalized ${a} from ${c} to ${l} (${d})`),ue[a].value=l});let o=ue["mark.fid"];o&&ue.fid&&(Sr._startChild(e,{description:"first input delay",endTimestamp:o.value+Re(ue.fid.value),op:"ui.action",startTimestamp:o.value}),delete ue["mark.fid"]),"fcp"in ue||delete ue.cls,Object.keys(ue).forEach(a=>{e.setMeasurement(a,ue[a].value,ue[a].unit)}),S7(e)}Dn=void 0,pu=void 0,ue={}}function nN(e,t,n,r,i){let s=i+n,o=s+r;return Sr._startChild(e,{description:t.name,endTimestamp:o,op:t.entryType,startTimestamp:s}),s}function b7(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{kg(e,t,r,n)}),kg(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),kg(e,t,"fetch",n,"cache","domainLookupStart"),kg(e,t,"domainLookup",n,"DNS"),A7(e,t,n)}function kg(e,t,n,r,i,s){let o=s?t[s]:t[`${n}End`],a=t[`${n}Start`];!a||!o||Sr._startChild(e,{op:"browser",description:i||n,startTimestamp:r+Re(a),endTimestamp:r+Re(o)})}function A7(e,t,n){Sr._startChild(e,{op:"browser",description:"request",startTimestamp:n+Re(t.requestStart),endTimestamp:n+Re(t.responseEnd)}),Sr._startChild(e,{op:"browser",description:"response",startTimestamp:n+Re(t.responseStart),endTimestamp:n+Re(t.responseEnd)})}function rN(e,t,n,r,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let o={};"transferSize"in t&&(o["http.response_transfer_size"]=t.transferSize),"encodedBodySize"in t&&(o["http.response_content_length"]=t.encodedBodySize),"decodedBodySize"in t&&(o["http.decoded_response_content_length"]=t.decodedBodySize),"renderBlockingStatus"in t&&(o["resource.render_blocking_status"]=t.renderBlockingStatus);let a=s+r,c=a+i;Sr._startChild(e,{description:n,endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",startTimestamp:a,data:o})}function _7(e){let t=bs.WINDOW.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Sr.isMeasurementValue(n.rtt)&&(ue["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Sr.isMeasurementValue(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),Sr.isMeasurementValue(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function S7(e){Dn&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log("[Measurements] Adding LCP Data"),Dn.element&&e.setTag("lcp.element",Ee.htmlTreeAsString(Dn.element)),Dn.id&&e.setTag("lcp.id",Dn.id),Dn.url&&e.setTag("lcp.url",Dn.url.trim().slice(0,200)),e.setTag("lcp.size",Dn.size)),pu&&pu.sources&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ee.logger.log("[Measurements] Adding CLS Data"),pu.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,Ee.htmlTreeAsString(t.node))))}li._addMeasureSpans=nN;li._addResourceSpans=rN;li.addPerformanceEntries=y7;li.startTrackingInteractions=f7;li.startTrackingLongTasks=m7;li.startTrackingWebVitals=p7});var ay=g(Un=>{Object.defineProperty(Un,"__esModule",{value:!0});var zo=ae(),$e=Z(),Vg=["localhost",/^\/(?!\/)/],oy={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Vg,tracePropagationTargets:Vg};function G7(e){let{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:i,shouldCreateSpanForRequest:s,enableHTTPTimings:o}={traceFetch:oy.traceFetch,traceXHR:oy.traceXHR,...e},a=typeof s=="function"?s:l=>!0,c=l=>cN(l,r||i),u={};t&&$e.addInstrumentationHandler("fetch",l=>{let d=uN(l,a,c,u);o&&d&&sN(d)}),n&&$e.addInstrumentationHandler("xhr",l=>{let d=dN(l,a,c,u);o&&d&&sN(d)})}function sN(e){let t=e.data.url,n=new PerformanceObserver(r=>{r.getEntries().forEach(s=>{(s.initiatorType==="fetch"||s.initiatorType==="xmlhttprequest")&&s.name.endsWith(t)&&(B7(s).forEach(a=>e.setData(...a)),n.disconnect())})});n.observe({entryTypes:["resource"]})}function aN(e){let t="unknown",n="unknown",r="";for(let i of e){if(i==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=i}return r===e&&(t=r),{name:t,version:n}}function On(e){return(($e.browserPerformanceTimeOrigin||performance.timeOrigin)+e)/1e3}function B7(e){let{name:t,version:n}=aN(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),$e.browserPerformanceTimeOrigin?[...r,["http.request.redirect_start",On(e.redirectStart)],["http.request.fetch_start",On(e.fetchStart)],["http.request.domain_lookup_start",On(e.domainLookupStart)],["http.request.domain_lookup_end",On(e.domainLookupEnd)],["http.request.connect_start",On(e.connectStart)],["http.request.secure_connection_start",On(e.secureConnectionStart)],["http.request.connection_end",On(e.connectEnd)],["http.request.request_start",On(e.requestStart)],["http.request.response_start",On(e.responseStart)],["http.request.response_end",On(e.responseEnd)]]:r}function cN(e,t){return $e.stringMatchesSomePattern(e,t||Vg)}function uN(e,t,n,r){if(!zo.hasTracingEnabled()||!e.fetchData)return;let i=t(e.fetchData.url);if(e.endTimestamp&&i){let p=e.fetchData.__span;if(!p)return;let m=r[p];if(m){if(e.response){m.setHttpStatus(e.response.status);let f=e.response&&e.response.headers&&e.response.headers.get("content-length"),h=parseInt(f);h>0&&m.setData("http.response_content_length",h)}else e.error&&m.setStatus("internal_error");m.finish(),delete r[p]}return}let s=zo.getCurrentHub(),o=s.getScope(),a=s.getClient(),c=o.getSpan(),{method:u,url:l}=e.fetchData,d=i&&c?c.startChild({data:{url:l,type:"fetch","http.method":u},description:`${u} ${l}`,op:"http.client"}):void 0;if(d&&(e.fetchData.__span=d.spanId,r[d.spanId]=d),n(e.fetchData.url)&&a){let p=e.args[0];e.args[1]=e.args[1]||{};let m=e.args[1];m.headers=lN(p,a,o,m,d)}return d}function lN(e,t,n,r,i){let s=i||n.getSpan(),o=s&&s.transaction,{traceId:a,sampled:c,dsc:u}=n.getPropagationContext(),l=s?s.toTraceparent():$e.generateSentryTraceHeader(a,void 0,c),d=o?o.getDynamicSamplingContext():u||zo.getDynamicSamplingContextFromClient(a,t,n),p=$e.dynamicSamplingContextToSentryBaggageHeader(d),m=typeof Request<"u"&&$e.isInstanceOf(e,Request)?e.headers:r.headers;if(m)if(typeof Headers<"u"&&$e.isInstanceOf(m,Headers)){let f=new Headers(m);return f.append("sentry-trace",l),p&&f.append($e.BAGGAGE_HEADER_NAME,p),f}else if(Array.isArray(m)){let f=[...m,["sentry-trace",l]];return p&&f.push([$e.BAGGAGE_HEADER_NAME,p]),f}else{let f="baggage"in m?m.baggage:void 0,h=[];return Array.isArray(f)?h.push(...f):f&&h.push(f),p&&h.push(p),{...m,"sentry-trace":l,baggage:h.length>0?h.join(","):void 0}}else return{"sentry-trace":l,baggage:p}}function dN(e,t,n,r){let i=e.xhr,s=i&&i[$e.SENTRY_XHR_DATA_KEY];if(!zo.hasTracingEnabled()||i&&i.__sentry_own_request__||!i||!s)return;let o=t(s.url);if(e.endTimestamp&&o){let d=i.__sentry_xhr_span_id__;if(!d)return;let p=r[d];p&&(p.setHttpStatus(s.status_code),p.finish(),delete r[d]);return}let a=zo.getCurrentHub(),c=a.getScope(),u=c.getSpan(),l=o&&u?u.startChild({data:{...s.data,type:"xhr","http.method":s.method,url:s.url},description:`${s.method} ${s.url}`,op:"http.client"}):void 0;if(l&&(i.__sentry_xhr_span_id__=l.spanId,r[i.__sentry_xhr_span_id__]=l),i.setRequestHeader&&n(s.url))if(l){let d=l&&l.transaction,p=d&&d.getDynamicSamplingContext(),m=$e.dynamicSamplingContextToSentryBaggageHeader(p);oN(i,l.toTraceparent(),m)}else{let d=a.getClient(),{traceId:p,sampled:m,dsc:f}=c.getPropagationContext(),h=$e.generateSentryTraceHeader(p,void 0,m),I=f||(d?zo.getDynamicSamplingContextFromClient(p,d,c):void 0),b=$e.dynamicSamplingContextToSentryBaggageHeader(I);oN(i,h,b)}return l}function oN(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader($e.BAGGAGE_HEADER_NAME,n)}catch{}}Un.DEFAULT_TRACE_PROPAGATION_TARGETS=Vg;Un.addTracingHeadersToFetchRequest=lN;Un.defaultRequestInstrumentationOptions=oy;Un.extractNetworkProtocol=aN;Un.fetchCallback=uN;Un.instrumentOutgoingRequests=G7;Un.shouldAttachHeaders=cN;Un.xhrCallback=dN});var gN=g(cy=>{Object.defineProperty(cy,"__esModule",{value:!0});var mu=Z(),fu=_r();function v7(e,t=!0,n=!0){if(!fu.WINDOW||!fu.WINDOW.location){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&mu.logger.warn("Could not initialize routing instrumentation due to invalid location");return}let r=fu.WINDOW.location.href,i;t&&(i=e({name:fu.WINDOW.location.pathname,startTimestamp:mu.browserPerformanceTimeOrigin?mu.browserPerformanceTimeOrigin/1e3:void 0,op:"pageload",metadata:{source:"url"}})),n&&mu.addInstrumentationHandler("history",({to:s,from:o})=>{if(o===void 0&&r&&r.indexOf(s)!==-1){r=void 0;return}o!==s&&(r=void 0,i&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&mu.logger.log(`[Tracing] Finishing current transaction with op: ${i.op}`),i.finish()),i=e({name:fu.WINDOW.location.pathname,op:"navigation",metadata:{source:"url"}}))})}cy.instrumentRoutingWithDefaults=v7});var hN=g(Iu=>{Object.defineProperty(Iu,"__esModule",{value:!0});var hu=ae(),Gr=Z(),Z7=Uw(),Yg=iN(),mN=ay(),E7=gN(),pN=_r(),fN="BrowserTracing",R7={...hu.TRACING_DEFAULTS,markBackgroundTransactions:!0,routingInstrumentation:E7.instrumentRoutingWithDefaults,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...mN.defaultRequestInstrumentationOptions},uy=class{constructor(t){this.name=fN,this._hasSetTracePropagationTargets=!1,hu.addTracingExtensions(),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(this._hasSetTracePropagationTargets=!!(t&&(t.tracePropagationTargets||t.tracingOrigins))),this.options={...R7,...t},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=Yg.startTrackingWebVitals(),this.options.enableLongTask&&Yg.startTrackingLongTasks(),this.options._experiments.enableInteractions&&Yg.startTrackingInteractions()}setupOnce(t,n){this._getCurrentHub=n;let i=n().getClient(),s=i&&i.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:l,traceXHR:d,shouldCreateSpanForRequest:p,enableHTTPTimings:m,_experiments:f}=this.options,h=s&&s.tracePropagationTargets,I=h||this.options.tracePropagationTargets;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this._hasSetTracePropagationTargets&&h&&Gr.logger.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o(b=>{let R=this._createRouteTransaction(b);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(R,b,n),R},c,a),u&&Z7.registerBackgroundTabDetection(),f.enableInteractions&&this._registerInteractionListener(),mN.instrumentOutgoingRequests({traceFetch:l,traceXHR:d,tracePropagationTargets:I,shouldCreateSpanForRequest:p,enableHTTPTimings:m})}_createRouteTransaction(t){if(!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Gr.logger.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}let n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:i,finalTimeout:s,heartbeatInterval:o}=this.options,a=t.op==="pageload",c=a?ly("sentry-trace"):"",u=a?ly("baggage"):"",{traceparentData:l,dynamicSamplingContext:d,propagationContext:p}=Gr.tracingContextFromHeaders(c,u),m={...t,...l,metadata:{...t.metadata,dynamicSamplingContext:l&&!d?{}:d},trimEnd:!0},f=typeof r=="function"?r(m):m,h=f===void 0?{...m,sampled:!1}:f;h.metadata=h.name!==m.name?{...h.metadata,source:"custom"}:h.metadata,this._latestRouteName=h.name,this._latestRouteSource=h.metadata&&h.metadata.source,h.sampled===!1&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Gr.logger.log(`[Tracing] Will not send ${h.op} transaction because of beforeNavigate.`),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Gr.logger.log(`[Tracing] Starting ${h.op} transaction on scope`);let{location:I}=pN.WINDOW,b=hu.startIdleTransaction(n,h,i,s,!0,{location:I},o),R=n.getScope();return a&&l?R.setPropagationContext(p):R.setPropagationContext({traceId:b.traceId,spanId:b.spanId,parentSpanId:b.parentSpanId,sampled:!!b.sampled}),b.registerBeforeFinishCallback(W=>{this._collectWebVitals(),Yg.addPerformanceEntries(W)}),b}_registerInteractionListener(){let t,n=()=>{let{idleTimeout:r,finalTimeout:i,heartbeatInterval:s}=this.options,o="ui.action.click",a=hu.getActiveTransaction();if(a&&a.op&&["navigation","pageload"].includes(a.op)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Gr.logger.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.finish(),t=void 0),!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Gr.logger.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Gr.logger.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}let c=this._getCurrentHub(),{location:u}=pN.WINDOW,l={name:this._latestRouteName,op:o,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};t=hu.startIdleTransaction(c,l,r,i,!0,{location:u},s)};["click"].forEach(r=>{addEventListener(r,n,{once:!1,capture:!0})})}};function ly(e){let t=Gr.getDomElement(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}Iu.BROWSER_TRACING_INTEGRATION_ID=fN;Iu.BrowserTracing=uy;Iu.getMetaContent=ly});var CN=g((dy,Cu)=>{Object.defineProperty(dy,"__esModule",{value:!0});var IN=ae(),jo=Z();function W7(){let e=IN.getMainCarrier();if(!e.__SENTRY__)return;let t={mongodb(){let r=jo.dynamicRequire(Cu,"./node/integrations/mongo");return new r.Mongo},mongoose(){let r=jo.dynamicRequire(Cu,"./node/integrations/mongo");return new r.Mongo},mysql(){let r=jo.dynamicRequire(Cu,"./node/integrations/mysql");return new r.Mysql},pg(){let r=jo.dynamicRequire(Cu,"./node/integrations/postgres");return new r.Postgres}},n=Object.keys(t).filter(r=>!!jo.loadModule(r)).map(r=>{try{return t[r]()}catch{return}}).filter(r=>r);n.length>0&&(e.__SENTRY__.integrations=[...e.__SENTRY__.integrations||[],...n])}function w7(){IN.addTracingExtensions(),jo.isNodeEnv()&&W7()}dy.addExtensionMethods=w7});var py=g(ee=>{Object.defineProperty(ee,"__esModule",{value:!0});var Br=ae(),yN=Z(),N7=Nw(),T7=Tw(),H7=Hw(),k7=kw(),V7=Fw(),Y7=xw(),F7=Jw(),x7=Dw(),bN=hN(),gy=ay(),X7=CN();ee.IdleTransaction=Br.IdleTransaction;ee.Span=Br.Span;ee.SpanStatus=Br.SpanStatus;ee.Transaction=Br.Transaction;ee.extractTraceparentData=Br.extractTraceparentData;ee.getActiveTransaction=Br.getActiveTransaction;ee.hasTracingEnabled=Br.hasTracingEnabled;ee.spanStatusfromHttpCode=Br.spanStatusfromHttpCode;ee.startIdleTransaction=Br.startIdleTransaction;ee.TRACEPARENT_REGEXP=yN.TRACEPARENT_REGEXP;ee.stripUrlQueryAndFragment=yN.stripUrlQueryAndFragment;ee.Express=N7.Express;ee.Postgres=T7.Postgres;ee.Mysql=H7.Mysql;ee.Mongo=k7.Mongo;ee.Prisma=V7.Prisma;ee.GraphQL=Y7.GraphQL;ee.Apollo=F7.Apollo;ee.lazyLoadedNodePerformanceMonitoringIntegrations=x7.lazyLoadedNodePerformanceMonitoringIntegrations;ee.BROWSER_TRACING_INTEGRATION_ID=bN.BROWSER_TRACING_INTEGRATION_ID;ee.BrowserTracing=bN.BrowserTracing;ee.addTracingHeadersToFetchRequest=gy.addTracingHeadersToFetchRequest;ee.defaultRequestInstrumentationOptions=gy.defaultRequestInstrumentationOptions;ee.instrumentOutgoingRequests=gy.instrumentOutgoingRequests;ee.addExtensionMethods=X7.addExtensionMethods});var AN=g(my=>{Object.defineProperty(my,"__esModule",{value:!0});var J7=py(),D7=Z();function O7(){let e=J7.lazyLoadedNodePerformanceMonitoringIntegrations.map(t=>{try{return t()}catch{return}}).filter(t=>!!t);return e.length===0&&D7.logger.warn("Performance monitoring integrations could not be automatically loaded."),e.filter(t=>!!t.loadDependency())}my.autoDiscoverNodePerformanceMonitoringIntegrations=O7});var hy=g($o=>{Object.defineProperty($o,"__esModule",{value:!0});var U7=ae(),Qo=Z();function fy(e,t){return e(t.stack||"",1)}function _N(e,t){let n={type:t.name||t.constructor.name,value:t.message},r=fy(e,t);return r.length&&(n.stacktrace={frames:r}),n}function K7(e,t,n){let r=t,s=n&&n.data&&n.data.mechanism||{handled:!0,type:"generic"};if(!Qo.isError(t)){if(Qo.isPlainObject(t)){let a=`Non-Error exception captured with keys: ${Qo.extractExceptionKeysForMessage(t)}`,c=U7.getCurrentHub(),u=c.getClient(),l=u&&u.getOptions().normalizeDepth;c.configureScope(d=>{d.setExtra("__serialized__",Qo.normalizeToSize(t,l))}),r=n&&n.syntheticException||new Error(a),r.message=a}else r=n&&n.syntheticException||new Error(t),r.message=t;s.synthetic=!0}let o={exception:{values:[_N(e,r)]}};return Qo.addExceptionTypeValue(o,void 0,void 0),Qo.addExceptionMechanism(o,s),{...o,event_id:n&&n.event_id}}function L7(e,t,n="info",r,i){let s={event_id:r&&r.event_id,level:n,message:t};if(i&&r&&r.syntheticException){let o=fy(e,r.syntheticException);o.length&&(s.exception={values:[{value:t,stacktrace:{frames:o}}]})}return s}$o.eventFromMessage=L7;$o.eventFromUnknownInput=K7;$o.exceptionFromError=_N;$o.parseStackFrames=fy});var yy=g(Cy=>{var{_optionalChain:Fg}=fe();Object.defineProperty(Cy,"__esModule",{value:!0});var As=ae(),_s=Z(),M7=require("os"),q7=require("util"),SN=hy(),Iy=class extends As.BaseClient{constructor(t){t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:As.SDK_VERSION}],version:As.SDK_VERSION},t.transportOptions={textEncoder:new q7.TextEncoder,...t.transportOptions},As.addTracingExtensions(),super(t)}captureException(t,n,r){if(this._options.autoSessionTracking&&this._sessionFlusher&&r){let i=r.getRequestSession();i&&i.status==="ok"&&(i.status="errored")}return super.captureException(t,n,r)}captureEvent(t,n,r){if(this._options.autoSessionTracking&&this._sessionFlusher&&r&&(t.type||"exception")==="exception"&&t.exception&&t.exception.values&&t.exception.values.length>0){let o=r.getRequestSession();o&&o.status==="ok"&&(o.status="errored")}return super.captureEvent(t,n,r)}close(t){return Fg([this,"access",n=>n._sessionFlusher,"optionalAccess",n=>n.close,"call",n=>n()]),super.close(t)}initSessionFlusher(){let{release:t,environment:n}=this._options;t?this._sessionFlusher=new As.SessionFlusher(this,{release:t,environment:n}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_s.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}eventFromException(t,n){return _s.resolvedSyncPromise(SN.eventFromUnknownInput(this._options.stackParser,t,n))}eventFromMessage(t,n="info",r){return _s.resolvedSyncPromise(SN.eventFromMessage(this._options.stackParser,t,n,r,this._options.attachStacktrace))}captureCheckIn(t,n,r){let i=t.status!=="in_progress"&&t.checkInId?t.checkInId:_s.uuid4();if(!this._isEnabled())return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_s.logger.warn("SDK not enabled, will not capture checkin."),i;let s=this.getOptions(),{release:o,environment:a,tunnel:c}=s,u={check_in_id:i,monitor_slug:t.monitorSlug,status:t.status,release:o,environment:a};t.status!=="in_progress"&&(u.duration=t.duration),n&&(u.monitor_config={schedule:n.schedule,checkin_margin:n.checkinMargin,max_runtime:n.maxRuntime,timezone:n.timezone});let[l,d]=this._getTraceInfoFromScope(r);d&&(u.contexts={trace:d});let p=As.createCheckInEnvelope(u,l,this.getSdkMetadata(),c,this.getDsn());return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_s.logger.info("Sending checkin:",t.monitorSlug,t.status),this._sendEnvelope(p),i}_prepareEvent(t,n,r){return t.platform=t.platform||"node",t.contexts={...t.contexts,runtime:Fg([t,"access",i=>i.contexts,"optionalAccess",i=>i.runtime])||{name:"node",version:global.process.version}},t.server_name=t.server_name||this.getOptions().serverName||global.process.env.SENTRY_NAME||M7.hostname(),super._prepareEvent(t,n,r)}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_s.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_getTraceInfoFromScope(t){if(!t)return[void 0,void 0];let n=t.getSpan();if(n)return[Fg([n,"optionalAccess",c=>c.transaction,"optionalAccess",c=>c.getDynamicSamplingContext,"call",c=>c()]),Fg([n,"optionalAccess",c=>c.getTraceContext,"call",c=>c()])];let{traceId:r,spanId:i,parentSpanId:s,dsc:o}=t.getPropagationContext(),a={trace_id:r,span_id:i,parent_span_id:s};return o?[o,a]:[As.getDynamicSamplingContextFromClient(r,this,t),a]}};Cy.NodeClient=Iy});var BN=g((ERe,GN)=>{var ea=1e3,ta=ea*60,na=ta*60,Ss=na*24,P7=Ss*7,z7=Ss*365.25;GN.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return j7(e);if(n==="number"&&isFinite(e))return t.long?$7(e):Q7(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function j7(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*z7;case"weeks":case"week":case"w":return n*P7;case"days":case"day":case"d":return n*Ss;case"hours":case"hour":case"hrs":case"hr":case"h":return n*na;case"minutes":case"minute":case"mins":case"min":case"m":return n*ta;case"seconds":case"second":case"secs":case"sec":case"s":return n*ea;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function Q7(e){var t=Math.abs(e);return t>=Ss?Math.round(e/Ss)+"d":t>=na?Math.round(e/na)+"h":t>=ta?Math.round(e/ta)+"m":t>=ea?Math.round(e/ea)+"s":e+"ms"}function $7(e){var t=Math.abs(e);return t>=Ss?xg(e,t,Ss,"day"):t>=na?xg(e,t,na,"hour"):t>=ta?xg(e,t,ta,"minute"):t>=ea?xg(e,t,ea,"second"):e+" ms"}function xg(e,t,n,r){var i=t>=n*1.5;return Math.round(e/n)+" "+r+(i?"s":"")}});var by=g((RRe,vN)=>{function e6(e){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=i,n.enabled=o,n.humanize=BN(),n.destroy=u,Object.keys(e).forEach(l=>{n[l]=e[l]}),n.names=[],n.skips=[],n.formatters={};function t(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=t;function n(l){let d,p=null,m,f;function h(...I){if(!h.enabled)return;let b=h,R=Number(new Date),W=R-(d||R);b.diff=W,b.prev=d,b.curr=R,d=R,I[0]=n.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let F=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(x,ne)=>{if(x==="%%")return"%";F++;let ce=n.formatters[ne];if(typeof ce=="function"){let T=I[F];x=ce.call(b,T),I.splice(F,1),F--}return x}),n.formatArgs.call(b,I),(b.log||n.log).apply(b,I)}return h.namespace=l,h.useColors=n.useColors(),h.color=n.selectColor(l),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==n.namespaces&&(m=n.namespaces,f=n.enabled(l)),f),set:I=>{p=I}}),typeof n.init=="function"&&n.init(h),h}function r(l,d){let p=n(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let d,p=(typeof l=="string"?l:"").split(/[\s,]+/),m=p.length;for(d=0;d<m;d++)!p[d]||(l=p[d].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.slice(1)+"$")):n.names.push(new RegExp("^"+l+"$")))}function s(){let l=[...n.names.map(a),...n.skips.map(a).map(d=>"-"+d)].join(",");return n.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let d,p;for(d=0,p=n.skips.length;d<p;d++)if(n.skips[d].test(l))return!1;for(d=0,p=n.names.length;d<p;d++)if(n.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}vN.exports=e6});var ZN=g((Jt,Xg)=>{Jt.formatArgs=n6;Jt.save=r6;Jt.load=i6;Jt.useColors=t6;Jt.storage=s6();Jt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Jt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t6(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n6(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Xg.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),e.splice(r,0,t)}Jt.log=console.debug||console.log||(()=>{});function r6(e){try{e?Jt.storage.setItem("debug",e):Jt.storage.removeItem("debug")}catch{}}function i6(){let e;try{e=Jt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function s6(){try{return localStorage}catch{}}Xg.exports=by()(Jt);var{formatters:o6}=Xg.exports;o6.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var RN=g((WRe,EN)=>{"use strict";EN.exports=(e,t=process.argv)=>{let n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return r!==-1&&(i===-1||r<i)}});var NN=g((wRe,wN)=>{"use strict";var a6=require("os"),WN=require("tty"),rn=RN(),{env:ke}=process,di;rn("no-color")||rn("no-colors")||rn("color=false")||rn("color=never")?di=0:(rn("color")||rn("colors")||rn("color=true")||rn("color=always"))&&(di=1);"FORCE_COLOR"in ke&&(ke.FORCE_COLOR==="true"?di=1:ke.FORCE_COLOR==="false"?di=0:di=ke.FORCE_COLOR.length===0?1:Math.min(parseInt(ke.FORCE_COLOR,10),3));function Ay(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function _y(e,t){if(di===0)return 0;if(rn("color=16m")||rn("color=full")||rn("color=truecolor"))return 3;if(rn("color=256"))return 2;if(e&&!t&&di===void 0)return 0;let n=di||0;if(ke.TERM==="dumb")return n;if(process.platform==="win32"){let r=a6.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in ke)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in ke)||ke.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in ke)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ke.TEAMCITY_VERSION)?1:0;if(ke.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ke){let r=parseInt((ke.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ke.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ke.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ke.TERM)||"COLORTERM"in ke?1:n}function c6(e){let t=_y(e,e&&e.isTTY);return Ay(t)}wN.exports={supportsColor:c6,stdout:Ay(_y(!0,WN.isatty(1))),stderr:Ay(_y(!0,WN.isatty(2)))}});var HN=g((Le,Dg)=>{var u6=require("tty"),Jg=require("util");Le.init=h6;Le.log=p6;Le.formatArgs=d6;Le.save=m6;Le.load=f6;Le.useColors=l6;Le.destroy=Jg.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Le.colors=[6,2,3,4,5,1];try{let e=NN();e&&(e.stderr||e).level>=2&&(Le.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Le.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),r=process.env[t];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),e[n]=r,e},{});function l6(){return"colors"in Le.inspectOpts?Boolean(Le.inspectOpts.colors):u6.isatty(process.stderr.fd)}function d6(e){let{namespace:t,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+Dg.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=g6()+t+" "+e[0]}function g6(){return Le.inspectOpts.hideDate?"":new Date().toISOString()+" "}function p6(...e){return process.stderr.write(Jg.format(...e)+`
`)}function m6(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function f6(){return process.env.DEBUG}function h6(e){e.inspectOpts={};let t=Object.keys(Le.inspectOpts);for(let n=0;n<t.length;n++)e.inspectOpts[t[n]]=Le.inspectOpts[t[n]]}Dg.exports=by()(Le);var{formatters:TN}=Dg.exports;TN.o=function(e){return this.inspectOpts.colors=this.useColors,Jg.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};TN.O=function(e){return this.inspectOpts.colors=this.useColors,Jg.inspect(e,this.inspectOpts)}});var le=g((NRe,Sy)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Sy.exports=ZN():Sy.exports=HN()});var kN=g(Gy=>{"use strict";Object.defineProperty(Gy,"__esModule",{value:!0});function I6(e){return function(t,n){return new Promise((r,i)=>{e.call(this,t,n,(s,o)=>{s?i(s):r(o)})})}}Gy.default=I6});var FN=g((vy,YN)=>{"use strict";var VN=vy&&vy.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},C6=require("events"),y6=VN(le()),b6=VN(kN()),yu=y6.default("agent-base");function A6(e){return Boolean(e)&&typeof e.addRequest=="function"}function By(){let{stack:e}=new Error;return typeof e!="string"?!1:e.split(`
`).some(t=>t.indexOf("(https.js:")!==-1||t.indexOf("node:https:")!==-1)}function Og(e,t){return new Og.Agent(e,t)}(function(e){class t extends C6.EventEmitter{constructor(r,i){super();let s=i;typeof r=="function"?this.callback=r:r&&(s=r),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:By()?443:80}set defaultPort(r){this.explicitDefaultPort=r}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:By()?"https:":"http:"}set protocol(r){this.explicitProtocol=r}callback(r,i,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(r,i){let s=Object.assign({},i);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=By()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,r._last=!0,r.shouldKeepAlive=!1;let o=!1,a=null,c=s.timeout||this.timeout,u=m=>{r._hadError||(r.emit("error",m),r._hadError=!0)},l=()=>{a=null,o=!0;let m=new Error(`A "socket" was not created for HTTP request before ${c}ms`);m.code="ETIMEOUT",u(m)},d=m=>{o||(a!==null&&(clearTimeout(a),a=null),u(m))},p=m=>{if(o)return;if(a!=null&&(clearTimeout(a),a=null),A6(m)){yu("Callback returned another Agent instance %o",m.constructor.name),m.addRequest(r,s);return}if(m){m.once("free",()=>{this.freeSocket(m,s)}),r.onSocket(m);return}let f=new Error(`no Duplex stream was returned to agent-base for \`${r.method} ${r.path}\``);u(f)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(yu("Converting legacy callback function to promise"),this.promisifiedCallback=b6.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(a=setTimeout(l,c)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{yu("Resolving socket for %o request: %o",s.protocol,`${r.method} ${r.path}`),Promise.resolve(this.promisifiedCallback(r,s)).then(p,d)}catch(m){Promise.reject(m).catch(d)}}freeSocket(r,i){yu("Freeing socket %o %o",r.constructor.name,i),r.destroy()}destroy(){yu("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype})(Og||(Og={}));YN.exports=Og});var xN=g(Au=>{"use strict";var _6=Au&&Au.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Au,"__esModule",{value:!0});var S6=_6(le()),bu=S6.default("https-proxy-agent:parse-proxy-response");function G6(e){return new Promise((t,n)=>{let r=0,i=[];function s(){let d=e.read();d?l(d):e.once("readable",s)}function o(){e.removeListener("end",c),e.removeListener("error",u),e.removeListener("close",a),e.removeListener("readable",s)}function a(d){bu("onclose had error %o",d)}function c(){bu("onend")}function u(d){o(),bu("onerror %o",d),n(d)}function l(d){i.push(d),r+=d.length;let p=Buffer.concat(i,r);if(p.indexOf(`\r
\r
`)===-1){bu("have not received end of HTTP headers yet..."),s();return}let f=p.toString("ascii",0,p.indexOf(`\r
`)),h=+f.split(" ")[1];bu("got proxy server response: %o",f),t({statusCode:h,buffered:p})}e.on("error",u),e.on("close",a),e.on("end",c),s()})}Au.default=G6});var DN=g(Gs=>{"use strict";var B6=Gs&&Gs.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})},ra=Gs&&Gs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gs,"__esModule",{value:!0});var XN=ra(require("net")),JN=ra(require("tls")),v6=ra(require("url")),Z6=ra(require("assert")),E6=ra(le()),R6=FN(),W6=ra(xN()),_u=E6.default("https-proxy-agent:agent"),Zy=class extends R6.Agent{constructor(t){let n;if(typeof t=="string"?n=v6.default.parse(t):n=t,!n)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");_u("creating new HttpsProxyAgent instance: %o",n),super(n);let r=Object.assign({},n);this.secureProxy=n.secureProxy||T6(r.protocol),r.host=r.hostname||r.host,typeof r.port=="string"&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in r)&&(r.ALPNProtocols=["http 1.1"]),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(t,n){return B6(this,void 0,void 0,function*(){let{proxy:r,secureProxy:i}=this,s;i?(_u("Creating `tls.Socket`: %o",r),s=JN.default.connect(r)):(_u("Creating `net.Socket`: %o",r),s=XN.default.connect(r));let o=Object.assign({},r.headers),c=`CONNECT ${`${n.host}:${n.port}`} HTTP/1.1\r
`;r.auth&&(o["Proxy-Authorization"]=`Basic ${Buffer.from(r.auth).toString("base64")}`);let{host:u,port:l,secureEndpoint:d}=n;N6(l,d)||(u+=`:${l}`),o.Host=u,o.Connection="close";for(let I of Object.keys(o))c+=`${I}: ${o[I]}\r
`;let p=W6.default(s);s.write(`${c}\r
`);let{statusCode:m,buffered:f}=yield p;if(m===200){if(t.once("socket",w6),n.secureEndpoint){_u("Upgrading socket connection to TLS");let I=n.servername||n.host;return JN.default.connect(Object.assign(Object.assign({},H6(n,"host","hostname","path","port")),{socket:s,servername:I}))}return s}s.destroy();let h=new XN.default.Socket({writable:!1});return h.readable=!0,t.once("socket",I=>{_u("replaying proxy buffer for failed request"),Z6.default(I.listenerCount("data")>0),I.push(f),I.push(null)}),h})}};Gs.default=Zy;function w6(e){e.resume()}function N6(e,t){return Boolean(!t&&e===80||t&&e===443)}function T6(e){return typeof e=="string"?/^https:?$/i.test(e):!1}function H6(e,...t){let n={},r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}});var wy=g((Wy,ON)=>{"use strict";var k6=Wy&&Wy.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ey=k6(DN());function Ry(e){return new Ey.default(e)}(function(e){e.HttpsProxyAgent=Ey.default,e.prototype=Ey.default.prototype})(Ry||(Ry={}));ON.exports=Ry});var Hy=g(Ty=>{var{_nullishCoalesce:Ny}=fe();Object.defineProperty(Ty,"__esModule",{value:!0});var UN=ae(),V6=require("http"),Y6=require("https"),F6=wy(),x6=require("stream"),KN=require("url"),X6=require("zlib"),J6=1024*32;function D6(e){return new x6.Readable({read(){this.push(e),this.push(null)}})}function O6(e){let t;try{t=new KN.URL(e.url)}catch{return console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used."),UN.createTransport(e,()=>Promise.resolve({}))}let n=t.protocol==="https:",r=U6(t,e.proxy||(n?process.env.https_proxy:void 0)||process.env.http_proxy),i=n?Y6:V6,s=e.keepAlive===void 0?!1:e.keepAlive,o=r?new F6.HttpsProxyAgent(r):new i.Agent({keepAlive:s,maxSockets:30,timeout:2e3}),a=K6(e,Ny(e.httpModule,()=>i),o);return UN.createTransport(e,a)}function U6(e,t){let{no_proxy:n}=process.env;if(!(n&&n.split(",").some(i=>e.host.endsWith(i)||e.hostname.endsWith(i))))return t}function K6(e,t,n){let{hostname:r,pathname:i,port:s,protocol:o,search:a}=new KN.URL(e.url);return function(u){return new Promise((l,d)=>{let p=D6(u.body),m={...e.headers};u.body.length>J6&&(m["content-encoding"]="gzip",p=p.pipe(X6.createGzip()));let f=t.request({method:"POST",agent:n,headers:m,hostname:r,path:`${i}${a}`,port:s,protocol:o,ca:e.caCerts},h=>{h.on("data",()=>{}),h.on("end",()=>{}),h.setEncoding("utf8");let I=Ny(h.headers["retry-after"],()=>null),b=Ny(h.headers["x-sentry-rate-limits"],()=>null);l({statusCode:h.statusCode,headers:{"retry-after":I,"x-sentry-rate-limits":Array.isArray(b)?b[0]:b}})});f.on("error",d),p.pipe(f)})}}Ty.makeNodeTransport=O6});var ia=g(ky=>{Object.defineProperty(ky,"__esModule",{value:!0});var L6=Z(),M6=L6.parseSemver(process.versions.node);ky.NODE_VERSION=M6});var qN=g(Vy=>{var{_optionalChain:q6}=fe();Object.defineProperty(Vy,"__esModule",{value:!0});var Bs=ae(),LN=require("domain");function MN(){return LN.active}function P6(){let e=MN();if(!!e)return Bs.ensureHubOnCarrier(e),Bs.getHubFromCarrier(e)}function z6(e){let t={};return Bs.ensureHubOnCarrier(t,e),Bs.getHubFromCarrier(t)}function j6(e,t){let n=MN();if(n&&q6([t,"optionalAccess",o=>o.reuseExisting]))return e();let r=LN.create(),i=n?Bs.getHubFromCarrier(n):void 0,s=z6(i);return Bs.setHubOnCarrier(r,s),r.bind(()=>e())()}function Q6(){Bs.setAsyncContextStrategy({getCurrentHub:P6,runWithAsyncContext:j6})}Vy.setDomainAsyncContextStrategy=Q6});var PN=g(Fy=>{var{_optionalChain:$6}=fe();Object.defineProperty(Fy,"__esModule",{value:!0});var Yy=ae(),eee=require("async_hooks");function tee(){let e=new eee.AsyncLocalStorage;function t(){return e.getStore()}function n(i){let s={};return Yy.ensureHubOnCarrier(s,i),Yy.getHubFromCarrier(s)}function r(i,s){let o=t();if(o&&$6([s,"optionalAccess",c=>c.reuseExisting]))return i();let a=n(o);return e.run(a,()=>i())}Yy.setAsyncContextStrategy({getCurrentHub:t,runWithAsyncContext:r})}Fy.setHooksAsyncContextStrategy=tee});var jN=g(xy=>{Object.defineProperty(xy,"__esModule",{value:!0});var zN=ia(),nee=qN(),ree=PN();function iee(){zN.NODE_VERSION.major&&zN.NODE_VERSION.major>=14?ree.setHooksAsyncContextStrategy():nee.setDomainAsyncContextStrategy()}xy.setNodeAsyncContextStrategy=iee});var Jy=g(Xy=>{Object.defineProperty(Xy,"__esModule",{value:!0});var QN=ae(),$N=Z(),see=require("util"),gi=class{constructor(){gi.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=gi.id}setupOnce(){for(let t of["debug","info","warn","error","log"])$N.fill(console,t,oee(t))}};gi.__initStatic();function oee(e){return function(n){let r=$N.severityLevelFromString(e);return function(){QN.getCurrentHub().getIntegration(gi)&&QN.getCurrentHub().addBreadcrumb({category:"console",level:r,message:see.format.apply(void 0,arguments)},{input:[...arguments],level:e}),n.apply(this,arguments)}}}Xy.Console=gi});var Su=g(Ug=>{(function(e,t){let n=typeof Ug=="object"?Ug:typeof e=="object"?e:{};t(n),typeof define=="function"&&define.amd&&define("lru",n)})(Ug,function(e){let t=Symbol("newer"),n=Symbol("older");function r(c,u){typeof c!="number"&&(u=c,c=0),this.size=0,this.limit=c,this.oldest=this.newest=void 0,this._keymap=new Map,u&&(this.assign(u),c<1&&(this.limit=this.size))}e.LRUMap=r;function i(c,u){this.key=c,this.value=u,this[t]=void 0,this[n]=void 0}r.prototype._markEntryAsUsed=function(c){c!==this.newest&&(c[t]&&(c===this.oldest&&(this.oldest=c[t]),c[t][n]=c[n]),c[n]&&(c[n][t]=c[t]),c[t]=void 0,c[n]=this.newest,this.newest&&(this.newest[t]=c),this.newest=c)},r.prototype.assign=function(c){let u,l=this.limit||Number.MAX_VALUE;this._keymap.clear();let d=c[Symbol.iterator]();for(let p=d.next();!p.done;p=d.next()){let m=new i(p.value[0],p.value[1]);if(this._keymap.set(m.key,m),u?(u[t]=m,m[n]=u):this.oldest=m,u=m,l--==0)throw new Error("overflow")}this.newest=u,this.size=this._keymap.size},r.prototype.get=function(c){var u=this._keymap.get(c);if(!!u)return this._markEntryAsUsed(u),u.value},r.prototype.set=function(c,u){var l=this._keymap.get(c);return l?(l.value=u,this._markEntryAsUsed(l),this):(this._keymap.set(c,l=new i(c,u)),this.newest?(this.newest[t]=l,l[n]=this.newest):this.oldest=l,this.newest=l,++this.size,this.size>this.limit&&this.shift(),this)},r.prototype.shift=function(){var c=this.oldest;if(c)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),c[t]=c[n]=void 0,this._keymap.delete(c.key),--this.size,[c.key,c.value]},r.prototype.find=function(c){let u=this._keymap.get(c);return u?u.value:void 0},r.prototype.has=function(c){return this._keymap.has(c)},r.prototype.delete=function(c){var u=this._keymap.get(c);if(!!u)return this._keymap.delete(u.key),u[t]&&u[n]?(u[n][t]=u[t],u[t][n]=u[n]):u[t]?(u[t][n]=void 0,this.oldest=u[t]):u[n]?(u[n][t]=void 0,this.newest=u[n]):this.oldest=this.newest=void 0,this.size--,u.value},r.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()};function s(c){this.entry=c}s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let c=this.entry;return c?(this.entry=c[t],{done:!1,value:[c.key,c.value]}):{done:!0,value:void 0}};function o(c){this.entry=c}o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let c=this.entry;return c?(this.entry=c[t],{done:!1,value:c.key}):{done:!0,value:void 0}};function a(c){this.entry=c}a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let c=this.entry;return c?(this.entry=c[t],{done:!1,value:c.value}):{done:!0,value:void 0}},r.prototype.keys=function(){return new o(this.oldest)},r.prototype.values=function(){return new a(this.oldest)},r.prototype.entries=function(){return this},r.prototype[Symbol.iterator]=function(){return new s(this.oldest)},r.prototype.forEach=function(c,u){typeof u!="object"&&(u=this);let l=this.oldest;for(;l;)c.call(u,l.value,l.key,this),l=l[t]},r.prototype.toJSON=function(){for(var c=new Array(this.size),u=0,l=this.oldest;l;)c[u++]={key:l.key,value:l.value},l=l[t];return c},r.prototype.toString=function(){for(var c="",u=this.oldest;u;)c+=String(u.key)+":"+u.value,u=u[t],u&&(c+=" < ");return c}})});var Oy=g(pi=>{var{_optionalChain:Gn}=fe();Object.defineProperty(pi,"__esModule",{value:!0});var aee=ae(),eT=require("url"),tT=ia();function cee(e){let t=Gn([aee.getCurrentHub,"call",n=>n(),"access",n=>n.getClient,"call",n=>n(),"optionalAccess",n=>n.getDsn,"call",n=>n()]);return t?e.includes(t.host):!1}function uee(e){let t=e.protocol||"",n=e.hostname||e.host||"",r=!e.port||e.port===80||e.port===443?"":`:${e.port}`,i=e.path?e.path:"/";return`${t}//${n}${r}${i}`}function nT(e){let t=e.protocol||"",n=e.hostname||e.host||"",r=!e.port||e.port===80||e.port===443?"":`:${e.port}`,i=e.pathname||"/",s=e.auth?lee(e.auth):"";return`${t}//${s}${n}${r}${i}`}function lee(e){let[t,n]=e.split(":");return`${t?"[Filtered]":""}:${n?"[Filtered]":""}@`}function dee(e,t,n){if(!e)return e;let[r,i]=e.split(" ");return t.host&&!t.protocol&&(t.protocol=Gn([n,"optionalAccess",s=>s.agent,"optionalAccess",s=>s.protocol]),i=nT(t)),Gn([i,"optionalAccess",s=>s.startsWith,"call",s=>s("///")])&&(i=i.slice(2)),`${r} ${i}`}function Dy(e){let t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}function gee(e,t){let n,r;return typeof t[t.length-1]=="function"&&(n=t.pop()),typeof t[0]=="string"?r=Dy(new eT.URL(t[0])):t[0]instanceof eT.URL?r=Dy(t[0]):r=t[0],t.length===2&&(r={...r,...t[1]}),r.protocol===void 0&&(tT.NODE_VERSION.major&&tT.NODE_VERSION.major>8?r.protocol=Gn([Gn([e,"optionalAccess",i=>i.globalAgent]),"optionalAccess",i=>i.protocol])||Gn([r.agent,"optionalAccess",i=>i.protocol])||Gn([r._defaultAgent,"optionalAccess",i=>i.protocol]):r.protocol=Gn([r.agent,"optionalAccess",i=>i.protocol])||Gn([r._defaultAgent,"optionalAccess",i=>i.protocol])||Gn([Gn([e,"optionalAccess",i=>i.globalAgent]),"optionalAccess",i=>i.protocol])),n?[r,n]:[r]}pi.cleanSpanDescription=dee;pi.extractRawUrl=uee;pi.extractUrl=nT;pi.isSentryRequest=cee;pi.normalizeRequestArgs=gee;pi.urlToOptions=Dy});var Ky=g(Uy=>{var{_optionalChain:vs}=fe();Object.defineProperty(Uy,"__esModule",{value:!0});var Kg=ae(),Kn=Z(),rT=Su(),iT=ia(),sa=Oy(),mi=class{static __initStatic(){this.id="Http"}__init(){this.name=mi.id}constructor(t={}){mi.prototype.__init.call(this),this._breadcrumbs=typeof t.breadcrumbs>"u"?!0:t.breadcrumbs,this._tracing=t.tracing?t.tracing===!0?{}:t.tracing:void 0}setupOnce(t,n){if(!this._breadcrumbs&&!this._tracing)return;let r=vs([n,"call",c=>c(),"access",c=>c.getClient,"call",c=>c(),"optionalAccess",c=>c.getOptions,"call",c=>c()]);if(r&&r.instrumenter!=="sentry"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Kn.logger.log("HTTP Integration is skipped because of instrumenter configuration.");return}let i=vs([this,"access",c=>c._tracing,"optionalAccess",c=>c.shouldCreateSpanForRequest])||vs([r,"optionalAccess",c=>c.shouldCreateSpanForRequest]),s=vs([r,"optionalAccess",c=>c.tracePropagationTargets])||vs([this,"access",c=>c._tracing,"optionalAccess",c=>c.tracePropagationTargets]),o=require("http"),a=sT(o,this._breadcrumbs,i,s);if(Kn.fill(o,"get",a),Kn.fill(o,"request",a),iT.NODE_VERSION.major&&iT.NODE_VERSION.major>8){let c=require("https"),u=sT(c,this._breadcrumbs,i,s);Kn.fill(c,"get",u),Kn.fill(c,"request",u)}}};mi.__initStatic();function sT(e,t,n,r){let i=new rT.LRUMap(100),s=new rT.LRUMap(100),o=u=>{if(n===void 0)return!0;let l=i.get(u);if(l!==void 0)return l;let d=n(u);return i.set(u,d),d},a=u=>{if(r===void 0)return!0;let l=s.get(u);if(l!==void 0)return l;let d=Kn.stringMatchesSomePattern(u,r);return s.set(u,d),d};function c(u,l,d,p){!Kg.getCurrentHub().getIntegration(mi)||Kg.getCurrentHub().addBreadcrumb({category:"http",data:{status_code:p&&p.statusCode,...l},type:"http"},{event:u,request:d,response:p})}return function(l){return function(...p){let m=sa.normalizeRequestArgs(e,p),f=m[0],h=sa.extractRawUrl(f),I=sa.extractUrl(f);if(sa.isSentryRequest(I))return l.apply(e,m);let b=Kg.getCurrentHub(),R=b.getScope(),W=R.getSpan(),F=pee(I,f),H=o(h)?vs([W,"optionalAccess",x=>x.startChild,"call",x=>x({op:"http.client",description:`${F["http.method"]} ${F.url}`,data:F})]):void 0;if(a(h))if(H){let x=H.toTraceparent(),ne=vs([H,"optionalAccess",ce=>ce.transaction,"optionalAccess",ce=>ce.getDynamicSamplingContext,"call",ce=>ce()]);oT(f,I,x,ne)}else{let x=b.getClient(),{traceId:ne,sampled:ce,dsc:T}=R.getPropagationContext(),J=Kn.generateSentryTraceHeader(ne,void 0,ce),D=T||(x?Kg.getDynamicSamplingContextFromClient(ne,x,R):void 0);oT(f,I,J,D)}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Kn.logger.log(`[Tracing] Not adding sentry-trace header to outgoing request (${I}) due to mismatching tracePropagationTargets option.`);return l.apply(e,m).once("response",function(x){let ne=this;t&&c("response",F,ne,x),H&&(x.statusCode&&H.setHttpStatus(x.statusCode),H.description=sa.cleanSpanDescription(H.description,f,ne),H.finish())}).once("error",function(){let x=this;t&&c("error",F,x),H&&(H.setHttpStatus(500),H.description=sa.cleanSpanDescription(H.description,f,x),H.finish())})}}}function oT(e,t,n,r){if((e.headers||{})["sentry-trace"])return;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Kn.logger.log(`[Tracing] Adding sentry-trace header ${n} to outgoing request to "${t}": `);let s=Kn.dynamicSamplingContextToSentryBaggageHeader(r),o=s&&s.length>0?mee(e,s):void 0;e.headers={...e.headers,"sentry-trace":n,...o&&{baggage:o}}}function pee(e,t){let n=t.method||"GET",r={url:e,"http.method":n};return t.hash&&(r["http.fragment"]=t.hash.substring(1)),t.search&&(r["http.query"]=t.search.substring(1)),r}function mee(e,t){if(!e.headers||!e.headers.baggage)return t;if(t){if(Array.isArray(e.headers.baggage))return[...e.headers.baggage,t]}else return e.headers.baggage;return[e.headers.baggage,t]}Uy.Http=mi});var qy=g(My=>{Object.defineProperty(My,"__esModule",{value:!0});var fee=ae(),Ly=Z(),hee=2e3;function Iee(e){console.error(e&&e.stack?e.stack:e);let t=fee.getCurrentHub().getClient();t===void 0&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ly.logger.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1));let n=t.getOptions(),r=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||hee;t.close(r).then(i=>{i||(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ly.logger.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)},i=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ly.logger.error(i)})}My.logAndExitProcess=Iee});var zy=g(Py=>{Object.defineProperty(Py,"__esModule",{value:!0});var aT=ae(),Cee=Z(),cT=qy(),vr=class{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=vr.id}__init2(){this.handler=this._makeErrorHandler()}constructor(t={}){vr.prototype.__init.call(this),vr.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...t}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let n=!1,r=!1,i=!1,s;return o=>{let a=cT.logAndExitProcess,c=aT.getCurrentHub().getClient();this._options.onFatalError?a=this._options.onFatalError:c&&c.getOptions().onFatalError&&(a=c.getOptions().onFatalError);let l=global.process.listeners("uncaughtException").reduce((p,m)=>m.name==="domainUncaughtExceptionClear"||m.tag&&m.tag==="sentry_tracingErrorCallback"||m===this.handler?p:p+1,0)===0,d=this._options.exitEvenIfOtherHandlersAreRegistered||l;if(n)d&&(i?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Cee.logger.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),cT.logAndExitProcess(o)):r||(r=!0,setTimeout(()=>{i||(i=!0,a(s,o))},2e3)));else{let p=aT.getCurrentHub();s=o,n=!0,p.getIntegration(vr)?p.withScope(m=>{m.setLevel("fatal"),p.captureException(o,{originalException:o,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!i&&d&&(i=!0,a(o))}):!i&&d&&(i=!0,a(o))}}}};vr.__initStatic();Py.OnUncaughtException=vr});var Qy=g(jy=>{Object.defineProperty(jy,"__esModule",{value:!0});var yee=ae(),uT=Z(),bee=qy(),fi=class{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=fi.id}constructor(t={mode:"warn"}){this._options=t,fi.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise(t,n){let r=yee.getCurrentHub();r.getIntegration(fi)&&r.withScope(i=>{i.setExtra("unhandledPromiseRejection",!0),r.captureException(t,{originalException:n,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})}),this._handleRejection(t)}_handleRejection(t){let n="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";this._options.mode==="warn"?uT.consoleSandbox(()=>{console.warn(n),console.error(t&&t.stack?t.stack:t)}):this._options.mode==="strict"&&(uT.consoleSandbox(()=>{console.warn(n)}),bee.logAndExitProcess(t))}};fi.__initStatic();jy.OnUnhandledRejection=fi});var Mg=g(eb=>{var{_optionalChain:$y}=fe();Object.defineProperty(eb,"__esModule",{value:!0});var Aee=Z(),_ee=require("fs"),See=Su(),Lg=new See.LRUMap(100),Gee=7;function Bee(e){return new Promise((t,n)=>{_ee.readFile(e,"utf8",(r,i)=>{r?n(r):t(i)})})}var hi=class{static __initStatic(){this.id="ContextLines"}__init(){this.name=hi.id}constructor(t={}){this._options=t,hi.prototype.__init.call(this)}get _contextLines(){return this._options.frameContextLines!==void 0?this._options.frameContextLines:Gee}setupOnce(t,n){t(r=>n().getIntegration(hi)?this.addSourceContext(r):r)}async addSourceContext(t){let n={},r=[];if(this._contextLines>0&&$y([t,"access",i=>i.exception,"optionalAccess",i=>i.values])){for(let i of t.exception.values)if(!!$y([i,"access",s=>s.stacktrace,"optionalAccess",s=>s.frames]))for(let s=i.stacktrace.frames.length-1;s>=0;s--){let o=i.stacktrace.frames[s];o.filename&&!n[o.filename]&&!Lg.get(o.filename)&&(r.push(vee(o.filename)),n[o.filename]=1)}}if(r.length>0&&await Promise.all(r),this._contextLines>0&&$y([t,"access",i=>i.exception,"optionalAccess",i=>i.values]))for(let i of t.exception.values)i.stacktrace&&i.stacktrace.frames&&await this.addSourceContextToFrames(i.stacktrace.frames);return t}addSourceContextToFrames(t){for(let n of t)if(n.filename&&n.context_line===void 0){let r=Lg.get(n.filename);if(r)try{Aee.addContextToFrame(r,n,this._contextLines)}catch{}}}};hi.__initStatic();async function vee(e){let t=Lg.get(e);if(t===null)return null;if(t!==void 0)return t;let n=null;try{n=(await Bee(e)).split(`
`)}catch{}return Lg.set(e,n),n}eb.ContextLines=hi});var nb=g(tb=>{Object.defineProperty(tb,"__esModule",{value:!0});var Zee=Z(),Eee=hy(),Ree=Mg(),Wee="cause",wee=5,Ii=class{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Ii.id}constructor(t={}){Ii.prototype.__init.call(this),this._key=t.key||Wee,this._limit=t.limit||wee}setupOnce(t,n){t(async(r,i)=>{let s=n(),o=s.getClient(),a=s.getIntegration(Ii);if(!o||!a)return r;let c=o.getOptions();Zee.applyAggregateErrorsToEvent(Eee.exceptionFromError,c.stackParser,c.maxValueLength,a._key,a._limit,r,i);let u=n().getIntegration(Ree.ContextLines);return u&&await u.addSourceContext(r),r})}};Ii.__initStatic();tb.LinkedErrors=Ii});var sb=g(ib=>{Object.defineProperty(ib,"__esModule",{value:!0});var lT=require("fs"),dT=require("path"),rb;function Nee(){try{return require.cache?Object.keys(require.cache):[]}catch{return[]}}function Tee(){let e=require.main&&require.main.paths||[],t=Nee(),n={},r={};return t.forEach(i=>{let s=i,o=()=>{let a=s;if(s=dT.dirname(a),!s||a===s||r[a])return;if(e.indexOf(s)<0)return o();let c=dT.join(a,"package.json");if(r[a]=!0,!lT.existsSync(c))return o();try{let u=JSON.parse(lT.readFileSync(c,"utf8"));n[u.name]=u.version}catch{}};o()}),n}var Ci=class{constructor(){Ci.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=Ci.id}setupOnce(t,n){t(r=>n().getIntegration(Ci)?{...r,modules:{...r.modules,...this._getModules()}}:r)}_getModules(){return rb||(rb=Tee()),rb}};Ci.__initStatic();ib.Modules=Ci});var ob=g(oa=>{var{_optionalChain:Zs}=fe();Object.defineProperty(oa,"__esModule",{value:!0});var Hee=require("child_process"),pT=require("fs"),sn=require("os"),kee=require("path"),mT=require("util"),fT=mT.promisify(pT.readFile),hT=mT.promisify(pT.readdir),Es=class{static __initStatic(){this.id="Context"}__init(){this.name=Es.id}constructor(t={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0}){this._options=t,Es.prototype.__init.call(this)}setupOnce(t){t(n=>this.addContext(n))}async addContext(t){this._cachedContext===void 0&&(this._cachedContext=this._getContexts());let n=this._updateContext(await this._cachedContext);return t.contexts={...t.contexts,app:{...n.app,...Zs([t,"access",r=>r.contexts,"optionalAccess",r=>r.app])},os:{...n.os,...Zs([t,"access",r=>r.contexts,"optionalAccess",r=>r.os])},device:{...n.device,...Zs([t,"access",r=>r.contexts,"optionalAccess",r=>r.device])},culture:{...n.culture,...Zs([t,"access",r=>r.contexts,"optionalAccess",r=>r.culture])},cloud_resource:{...n.cloud_resource,...Zs([t,"access",r=>r.contexts,"optionalAccess",r=>r.cloud_resource])}},t}_updateContext(t){return Zs([t,"optionalAccess",n=>n.app,"optionalAccess",n=>n.app_memory])&&(t.app.app_memory=process.memoryUsage().rss),Zs([t,"optionalAccess",n=>n.device,"optionalAccess",n=>n.free_memory])&&(t.device.free_memory=sn.freemem()),t}async _getContexts(){let t={};if(this._options.os&&(t.os=await Vee()),this._options.app&&(t.app=Fee()),this._options.device&&(t.device=IT(this._options.device)),this._options.culture){let n=Yee();n&&(t.culture=n)}return this._options.cloudResource&&(t.cloud_resource=Uee()),t}};Es.__initStatic();async function Vee(){let e=sn.platform();switch(e){case"darwin":return Dee();case"linux":return Oee();default:return{name:xee[e]||e,version:sn.release()}}}function Yee(){try{if(typeof process.versions.icu!="string")return;let e=new Date(9e8);if(new Intl.DateTimeFormat("es",{month:"long"}).format(e)==="enero"){let n=Intl.DateTimeFormat().resolvedOptions();return{locale:n.locale,timezone:n.timeZone}}}catch{}}function Fee(){let e=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1e3).toISOString(),app_memory:e}}function IT(e){let t={},n;try{n=sn.uptime&&sn.uptime()}catch{}if(typeof n=="number"&&(t.boot_time=new Date(Date.now()-n*1e3).toISOString()),t.arch=sn.arch(),(e===!0||e.memory)&&(t.memory_size=sn.totalmem(),t.free_memory=sn.freemem()),e===!0||e.cpu){let r=sn.cpus();if(r&&r.length){let i=r[0];t.processor_count=r.length,t.cpu_description=i.model,t.processor_frequency=i.speed}}return t}var xee={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},Xee=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],Jee={alpine:e=>e,arch:e=>Ln(/distrib_release=(.*)/,e),centos:e=>Ln(/release ([^ ]+)/,e),debian:e=>e,fedora:e=>Ln(/release (..)/,e),mint:e=>Ln(/distrib_release=(.*)/,e),red:e=>Ln(/release ([^ ]+)/,e),suse:e=>Ln(/VERSION = (.*)\n/,e),ubuntu:e=>Ln(/distrib_release=(.*)/,e)};function Ln(e,t){let n=e.exec(t);return n?n[1]:void 0}async function Dee(){let e={kernel_version:sn.release(),name:"Mac OS X",version:`10.${Number(sn.release().split(".")[0])-4}`};try{let t=await new Promise((n,r)=>{Hee.execFile("/usr/bin/sw_vers",(i,s)=>{if(i){r(i);return}n(s)})});e.name=Ln(/^ProductName:\s+(.*)$/m,t),e.version=Ln(/^ProductVersion:\s+(.*)$/m,t),e.build=Ln(/^BuildVersion:\s+(.*)$/m,t)}catch{}return e}function gT(e){return e.split(" ")[0].toLowerCase()}async function Oee(){let e={kernel_version:sn.release(),name:"Linux"};try{let t=await hT("/etc"),n=Xee.find(a=>t.includes(a.name));if(!n)return e;let r=kee.join("/etc",n.name),i=(await fT(r,{encoding:"utf-8"})).toLowerCase(),{distros:s}=n;e.name=s.find(a=>i.indexOf(gT(a))>=0)||s[0];let o=gT(e.name);e.version=Jee[o](i)}catch{}return e}function Uee(){return process.env.VERCEL?{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION}:process.env.AWS_REGION?{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV}:process.env.GCP_PROJECT?{"cloud.provider":"gcp"}:process.env.ALIYUN_REGION_ID?{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID}:process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME?{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME}:process.env.IBM_CLOUD_REGION?{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION}:process.env.TENCENTCLOUD_REGION?{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE}:process.env.NETLIFY?{"cloud.provider":"netlify"}:process.env.FLY_REGION?{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION}:process.env.DYNO?{"cloud.provider":"heroku"}:void 0}oa.Context=Es;oa.getDeviceContext=IT;oa.readDirAsync=hT;oa.readFileAsync=fT});var CT=g(ab=>{"use strict";ab.parse=Mee;ab.serialize=qee;var Kee=decodeURIComponent,Lee=encodeURIComponent,qg=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Mee(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(";"),s=r.decode||Kee,o=0;o<i.length;o++){var a=i[o],c=a.indexOf("=");if(!(c<0)){var u=a.substring(0,c).trim();if(n[u]==null){var l=a.substring(c+1,a.length).trim();l[0]==='"'&&(l=l.slice(1,-1)),n[u]=Pee(l,s)}}}return n}function qee(e,t,n){var r=n||{},i=r.encode||Lee;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!qg.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!qg.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var a=r.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!qg.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!qg.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var c=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(c){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function Pee(e,t){try{return t(e)}catch{return e}}});var Gu=g(aa=>{var{_optionalChain:zee}=fe();Object.defineProperty(aa,"__esModule",{value:!0});var Pg=Z(),jee=CT(),Qee=require("url"),$ee={ip:!1,request:!0,transaction:!0,user:!0},ete=["cookies","data","headers","method","query_string","url"],yT=["id","username","email"];function cb(e,t={}){let n=e.method&&e.method.toUpperCase(),r="",i="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,i="route"):(e.originalUrl||e.url)&&(r=Pg.stripUrlQueryAndFragment(e.originalUrl||e.url||""));let s="";return t.method&&n&&(s+=n),t.method&&t.path&&(s+=" "),t.path&&r&&(s+=r),[s,i]}function tte(e,t){switch(t){case"path":return cb(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";case"methodPath":default:return cb(e,{path:!0,method:!0})[0]}}function nte(e,t){let n={};return(Array.isArray(t)?t:yT).forEach(i=>{e&&i in e&&(n[i]=e[i])}),n}function ub(e,t){let{include:n=ete}=t||{},r={},i=e.headers||{},s=e.method,o=e.hostname||e.host||i.host||"<no host>",a=e.protocol==="https"||e.socket&&e.socket.encrypted?"https":"http",c=e.originalUrl||e.url||"",u=c.startsWith(a)?c:`${a}://${o}${c}`;return n.forEach(l=>{switch(l){case"headers":{r.headers=i,n.includes("cookies")||delete r.headers.cookie;break}case"method":{r.method=s;break}case"url":{r.url=u;break}case"cookies":{r.cookies=e.cookies||i.cookie&&jee.parse(i.cookie)||{};break}case"query_string":{r.query_string=ite(e);break}case"data":{if(s==="GET"||s==="HEAD")break;e.body!==void 0&&(r.data=Pg.isString(e.body)?e.body:JSON.stringify(Pg.normalize(e.body)));break}default:({}).hasOwnProperty.call(e,l)&&(r[l]=e[l])}}),r}function rte(e,t,n){let r={...$ee,...zee([n,"optionalAccess",i=>i.include])};if(r.request){let i=Array.isArray(r.request)?ub(t,{include:r.request}):ub(t);e.request={...e.request,...i}}if(r.user){let i=t.user&&Pg.isPlainObject(t.user)?nte(t.user,r.user):{};Object.keys(i).length&&(e.user={...e.user,...i})}if(r.ip){let i=t.ip||t.socket&&t.socket.remoteAddress;i&&(e.user={...e.user,ip_address:i})}return r.transaction&&!e.transaction&&(e.transaction=tte(t,r.transaction)),e}function ite(e){let t=e.originalUrl||e.url||"";if(!!t)return t.startsWith("/")&&(t=`http://dogs.are.great${t}`),e.query||typeof URL!==void 0&&new URL(t).search.replace("?","")||Qee.parse(t).query||void 0}aa.DEFAULT_USER_INCLUDES=yT;aa.addRequestDataToEvent=rte;aa.extractPathForTransaction=cb;aa.extractRequestData=ub});var gb=g(db=>{Object.defineProperty(db,"__esModule",{value:!0});var ste=Z(),ote=Gu(),lb={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},yi=class{static __initStatic(){this.id="RequestData"}__init(){this.name=yi.id}constructor(t={}){yi.prototype.__init.call(this),this._addRequestData=ote.addRequestDataToEvent,this._options={...lb,...t,include:{method:!0,...lb.include,...t.include,user:t.include&&typeof t.include.user=="boolean"?t.include.user:{...lb.include.user,...(t.include||{}).user}}}}setupOnce(t,n){let{transactionNamingScheme:r}=this._options;t(i=>{let s=n(),o=s.getIntegration(yi),{sdkProcessingMetadata:a={}}=i,c=a.request;if(!o||!c)return i;let u=a.requestDataOptionsFromExpressHandler||a.requestDataOptionsFromGCPWrapper||ate(this._options),l=this._addRequestData(i,c,u);if(i.type==="transaction"||r==="handler")return l;let p=c._sentryTransaction;if(p){let m=cte(s)==="sentry.javascript.nextjs"?p.name.startsWith("/api"):r!=="path",[f]=ste.extractPathForTransaction(c,{path:!0,method:m,customRoute:p.name});l.transaction=f}return l})}};yi.__initStatic();function ate(e){let{transactionNamingScheme:t,include:{ip:n,user:r,...i}}=e,s=[];for(let[a,c]of Object.entries(i))c&&s.push(a);let o;if(r===void 0)o=!0;else if(typeof r=="boolean")o=r;else{let a=[];for(let[c,u]of Object.entries(r))u&&a.push(c);o=a}return{include:{ip:n,user:o,request:s.length!==0?s:void 0,transaction:t}}}function cte(e){try{return e.getClient().getOptions()._metadata.sdk.name}catch{return}}db.RequestData=yi});var fb=g(zg=>{var{_optionalChain:Ce}=fe();Object.defineProperty(zg,"__esModule",{value:!0});var ute=Z(),lte=Su(),dte=ia();function mb(e){let t=[],n=!1;function r(o){t=[],!n&&(n=!0,e(o))}t.push(r);function i(o){t.push(o)}function s(o){let a=t.pop()||r;try{a(o)}catch{r(o)}}return{add:i,next:s}}var pb=class{constructor(){let{Session:t}=require("inspector");this._session=new t}configureAndConnect(t,n){this._session.connect(),this._session.on("Debugger.paused",r=>{t(r,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:n?"all":"uncaught"})}getLocalVariables(t,n){this._getProperties(t,r=>{let{add:i,next:s}=mb(n);for(let o of r)if(Ce([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.objectId])&&Ce([o,"optionalAccess",a=>a.value,"access",a=>a.className])==="Array"){let a=o.value.objectId;i(c=>this._unrollArray(a,o.name,c,s))}else if(Ce([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.objectId])&&Ce([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.className])==="Object"){let a=o.value.objectId;i(c=>this._unrollObject(a,o.name,c,s))}else(Ce([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.value])||Ce([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.description]))&&i(a=>this._unrollOther(o,a,s));s({})})}_getProperties(t,n){this._session.post("Runtime.getProperties",{objectId:t,ownProperties:!0},(r,i)=>{n(r?[]:i.result)})}_unrollArray(t,n,r,i){this._getProperties(t,s=>{r[n]=s.filter(o=>o.name!=="length"&&!isNaN(parseInt(o.name,10))).sort((o,a)=>parseInt(o.name,10)-parseInt(a.name,10)).map(o=>Ce([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.value])),i(r)})}_unrollObject(t,n,r,i){this._getProperties(t,s=>{r[n]=s.map(o=>[o.name,Ce([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.value])]).reduce((o,[a,c])=>(o[a]=c,o),{}),i(r)})}_unrollOther(t,n,r){Ce([t,"optionalAccess",i=>i.value,"optionalAccess",i=>i.value])?n[t.name]=t.value.value:Ce([t,"optionalAccess",i=>i.value,"optionalAccess",i=>i.description])&&Ce([t,"optionalAccess",i=>i.value,"optionalAccess",i=>i.type])!=="function"&&(n[t.name]=`<${t.value.description}>`),r(n)}};function gte(){try{return new pb}catch{return}}function bT(e){return e!==void 0&&["","?","<anonymous>"].includes(e)}function pte(e,t){return e===t||bT(e)&&bT(t)}function AT(e){if(e!==void 0)return e.slice(-10).reduce((t,n)=>`${t},${n.function},${n.lineno},${n.colno}`,"")}function mte(e,t){if(t!==void 0)return AT(e(t,1))}var bi=class{static __initStatic(){this.id="LocalVariables"}__init(){this.name=bi.id}__init2(){this._cachedFrames=new lte.LRUMap(20)}constructor(t={},n=gte()){this._options=t,this._session=n,bi.prototype.__init.call(this),bi.prototype.__init2.call(this)}setupOnce(t,n){this._setup(t,Ce([n,"call",r=>r(),"access",r=>r.getClient,"call",r=>r(),"optionalAccess",r=>r.getOptions,"call",r=>r()]))}_setup(t,n){if(this._session&&Ce([n,"optionalAccess",r=>r.includeLocalVariables])){if((dte.NODE_VERSION.major||0)<18){ute.logger.log("The `LocalVariables` integration is only supported on Node >= v18.");return}this._session.configureAndConnect((i,s)=>this._handlePaused(n.stackParser,i,s),!!this._options.captureAllExceptions),t(async i=>this._addLocalVariables(i))}}_handlePaused(t,{params:{reason:n,data:r,callFrames:i}},s){if(n!=="exception"&&n!=="promiseRejection"){s();return}let o=mte(t,Ce([r,"optionalAccess",u=>u.description]));if(o==null){s();return}let{add:a,next:c}=mb(u=>{this._cachedFrames.set(o,u),s()});for(let u=0;u<Math.min(i.length,5);u++){let{scopeChain:l,functionName:d,this:p}=i[u],m=l.find(h=>h.type==="local"),f=p.className==="global"||!p.className?d:`${p.className}.${d}`;if(Ce([m,"optionalAccess",h=>h.object,"access",h=>h.objectId])===void 0)a(h=>{h[u]={function:f},c(h)});else{let h=m.object.objectId;a(I=>Ce([this,"access",b=>b._session,"optionalAccess",b=>b.getLocalVariables,"call",b=>b(h,R=>{I[u]={function:f,vars:R},c(I)})]))}}c([])}_addLocalVariables(t){for(let n of Ce([t,"optionalAccess",r=>r.exception,"optionalAccess",r=>r.values])||[])this._addLocalVariablesToException(n);return t}_addLocalVariablesToException(t){let n=AT(Ce([t,"optionalAccess",s=>s.stacktrace,"optionalAccess",s=>s.frames]));if(n===void 0)return;let r=this._cachedFrames.delete(n);if(r===void 0)return;let i=Ce([t,"access",s=>s.stacktrace,"optionalAccess",s=>s.frames,"optionalAccess",s=>s.length])||0;for(let s=0;s<i;s++){let o=i-s-1;if(!Ce([t,"optionalAccess",a=>a.stacktrace,"optionalAccess",a=>a.frames,"optionalAccess",a=>a[o]])||!r[s])break;r[s].vars===void 0||t.stacktrace.frames[o].in_app===!1||!pte(t.stacktrace.frames[o].function,r[s].function)||(t.stacktrace.frames[o].vars=r[s].vars)}}};bi.__initStatic();zg.LocalVariables=bi;zg.createCallbackList=mb});var Ib=g((Zr,vT)=>{var{_optionalChain:BT}=fe();Object.defineProperty(Zr,"__esModule",{value:!0});var jg=ae(),Rs=Z(),_T=Su(),ST=ia(),hb=Oy();Zr.ChannelName=void 0;(function(e){let t="undici:request:create";e.RequestCreate=t;let n="undici:request:headers";e.RequestEnd=n;let r="undici:request:error";e.RequestError=r})(Zr.ChannelName||(Zr.ChannelName={}));var dt=class{static __initStatic(){this.id="Undici"}__init(){this.name=dt.id}__init2(){this._createSpanUrlMap=new _T.LRUMap(100)}__init3(){this._headersUrlMap=new _T.LRUMap(100)}constructor(t={}){dt.prototype.__init.call(this),dt.prototype.__init2.call(this),dt.prototype.__init3.call(this),dt.prototype.__init4.call(this),dt.prototype.__init5.call(this),dt.prototype.__init6.call(this),this._options={breadcrumbs:t.breadcrumbs===void 0?!0:t.breadcrumbs,shouldCreateSpanForRequest:t.shouldCreateSpanForRequest}}setupOnce(t){if(ST.NODE_VERSION.major&&ST.NODE_VERSION.major<16)return;let n;try{n=Rs.dynamicRequire(vT,"diagnostics_channel")}catch{}!n||!n.subscribe||(n.subscribe(Zr.ChannelName.RequestCreate,this._onRequestCreate),n.subscribe(Zr.ChannelName.RequestEnd,this._onRequestEnd),n.subscribe(Zr.ChannelName.RequestError,this._onRequestError))}_shouldCreateSpan(t){if(this._options.shouldCreateSpanForRequest===void 0)return!0;let n=this._createSpanUrlMap.get(t);if(n!==void 0)return n;let r=this._options.shouldCreateSpanForRequest(t);return this._createSpanUrlMap.set(t,r),r}__init4(){this._onRequestCreate=t=>{let n=jg.getCurrentHub();if(!n.getIntegration(dt))return;let{request:r}=t,i=r.origin?r.origin.toString()+r.path:r.path;if(hb.isSentryRequest(i)||r.__sentry_span__!==void 0)return;let s=n.getClient();if(!s)return;let o=s.getOptions(),a=n.getScope(),c=a.getSpan(),u=this._shouldCreateSpan(i)?fte(c,r,i):void 0;if(u&&(r.__sentry_span__=u),(d=>{if(o.tracePropagationTargets===void 0)return!0;let p=this._headersUrlMap.get(d);if(p!==void 0)return p;let m=Rs.stringMatchesSomePattern(d,o.tracePropagationTargets);return this._headersUrlMap.set(d,m),m})(i))if(u){let d=BT([u,"optionalAccess",m=>m.transaction,"optionalAccess",m=>m.getDynamicSamplingContext,"call",m=>m()]),p=Rs.dynamicSamplingContextToSentryBaggageHeader(d);GT(r,u.toTraceparent(),p)}else{let{traceId:d,sampled:p,dsc:m}=a.getPropagationContext(),f=Rs.generateSentryTraceHeader(d,void 0,p),h=m||jg.getDynamicSamplingContextFromClient(d,s,a),I=Rs.dynamicSamplingContextToSentryBaggageHeader(h);GT(r,f,I)}}}__init5(){this._onRequestEnd=t=>{let n=jg.getCurrentHub();if(!n.getIntegration(dt))return;let{request:r,response:i}=t,s=r.origin?r.origin.toString()+r.path:r.path;if(hb.isSentryRequest(s))return;let o=r.__sentry_span__;o&&(o.setHttpStatus(i.statusCode),o.finish()),this._options.breadcrumbs&&n.addBreadcrumb({category:"http",data:{method:r.method,status_code:i.statusCode,url:s},type:"http"},{event:"response",request:r,response:i})}}__init6(){this._onRequestError=t=>{let n=jg.getCurrentHub();if(!n.getIntegration(dt))return;let{request:r}=t,i=r.origin?r.origin.toString()+r.path:r.path;if(hb.isSentryRequest(i))return;let s=r.__sentry_span__;s&&(s.setStatus("internal_error"),s.finish()),this._options.breadcrumbs&&n.addBreadcrumb({category:"http",data:{method:r.method,url:i},level:"error",type:"http"},{event:"error",request:r})}}};dt.__initStatic();function GT(e,t,n){e.__sentry_has_headers__||(e.addHeader("sentry-trace",t),n&&e.addHeader("baggage",n),e.__sentry_has_headers__=!0)}function fte(e,t,n){let r=Rs.parseUrl(n),i=t.method||"GET",s={"http.method":i};return r.search&&(s["http.query"]=r.search),r.hash&&(s["http.fragment"]=r.hash),BT([e,"optionalAccess",o=>o.startChild,"call",o=>o({op:"http.client",description:`${i} ${Rs.getSanitizedUrlString(r)}`,data:s})])}Zr.Undici=dt});var yb=g(Cb=>{Object.defineProperty(Cb,"__esModule",{value:!0});var ZT=require("path"),hte=ZT.sep==="\\";function Ite(e){return e.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}function Cte(e,t=hte){if(!e)return;let n=t?Ite(e):e,{root:r,dir:i,base:s,ext:o}=ZT.posix.parse(n),c=`${require&&require.main&&require.main.filename&&i||global.process.cwd()}/`,u=s;o===".js"&&(u=u.slice(0,u.length-3)),!r&&!i&&(i=".");let l=i.lastIndexOf("/node_modules/");if(l>-1)return`${i.slice(l+14).replace(/\//g,".")}:${u}`;if(l=`${i}/`.lastIndexOf(c,0),l===0){let d=i.slice(c.length).replace(/\//g,".");return d&&(d+=":"),d+=u,d}return u}Cb.getModuleFromFilename=Cte});var bb=g(Ns=>{var{_optionalChain:yte}=fe();Object.defineProperty(Ns,"__esModule",{value:!0});var Ws=ae(),ws=Z(),bte=jN(),Ate=yy(),_te=Jy(),Ste=Ky(),Gte=zy(),Bte=Qy(),vte=nb(),Zte=sb(),Ete=Mg(),Rte=ob(),Wte=gb(),wte=fb(),Nte=Ib(),Tte=yb(),Hte=Hy(),ET=[new Ws.Integrations.InboundFilters,new Ws.Integrations.FunctionToString,new _te.Console,new Ste.Http,new Nte.Undici,new Gte.OnUncaughtException,new Bte.OnUnhandledRejection,new Ete.ContextLines,new wte.LocalVariables,new Rte.Context,new Zte.Modules,new Wte.RequestData,new vte.LinkedErrors];function kte(e={}){let t=Ws.getMainCarrier();bte.setNodeAsyncContextStrategy();let n=yte([t,"access",s=>s.__SENTRY__,"optionalAccess",s=>s.integrations])||[];e.defaultIntegrations=e.defaultIntegrations===!1?[]:[...Array.isArray(e.defaultIntegrations)?e.defaultIntegrations:ET,...n],e.dsn===void 0&&(e.dsn="https://cbe9c82c26b9431a9d05cf0a97984f0d@o10801.ingest.sentry.io/6418580");let r=process.env.SENTRY_TRACES_SAMPLE_RATE;if(e.tracesSampleRate===void 0&&r){let s=parseFloat(r);isFinite(s)&&(e.tracesSampleRate=s)}if(e.release===void 0){let s=RT();s!==void 0?e.release=s:e.autoSessionTracking=!1}e.environment===void 0&&process.env.SENTRY_ENVIRONMENT&&(e.environment=process.env.SENTRY_ENVIRONMENT),e.autoSessionTracking===void 0&&e.dsn!==void 0&&(e.autoSessionTracking=!0),e.instrumenter===void 0&&(e.instrumenter="sentry");let i={...e,stackParser:ws.stackParserFromStackParserOptions(e.stackParser||WT),integrations:Ws.getIntegrationsToSetup(e),transport:e.transport||Hte.makeNodeTransport};Ws.initAndBind(e.clientClass||Ate.NodeClient,i),e.autoSessionTracking&&Yte(),Fte()}function Vte(e){if(e===void 0)return!1;let t=e&&e.getOptions();return t&&t.autoSessionTracking!==void 0?t.autoSessionTracking:!1}function RT(e){return process.env.SENTRY_RELEASE?process.env.SENTRY_RELEASE:ws.GLOBAL_OBJ.SENTRY_RELEASE&&ws.GLOBAL_OBJ.SENTRY_RELEASE.id?ws.GLOBAL_OBJ.SENTRY_RELEASE.id:process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||e}var WT=ws.createStackParser(ws.nodeStackLineParser(Tte.getModuleFromFilename));function Yte(){let e=Ws.getCurrentHub();e.startSession(),process.on("beforeExit",()=>{let t=e.getScope().getSession();t&&!["exited","crashed"].includes(t.status)&&e.endSession()})}function Fte(){let e=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(e)){let t=process.env.SENTRY_TRACE,n=process.env.SENTRY_BAGGAGE,{propagationContext:r}=ws.tracingContextFromHeaders(t,n);Ws.getCurrentHub().getScope().setPropagationContext(r)}}Ns.defaultIntegrations=ET;Ns.defaultStackParser=WT;Ns.getSentryRelease=RT;Ns.init=kte;Ns.isAutoSessionTrackingEnabled=Vte});var wT=g(_b=>{Object.defineProperty(_b,"__esModule",{value:!0});var Qg=require("fs"),Ab=require("path");function xte(e){let t=Ab.resolve(e);if(!Qg.existsSync(t))throw new Error(`Cannot read contents of ${t}. Directory does not exist.`);if(!Qg.statSync(t).isDirectory())throw new Error(`Cannot read contents of ${t}, because it is not a directory.`);let n=r=>Qg.readdirSync(r).reduce((i,s)=>{let o=Ab.join(r,s);return Qg.statSync(o).isDirectory()?i.concat(n(o)):(i.push(o),i)},[]);return n(t).map(r=>Ab.relative(t,r))}_b.deepReadDirSync=xte});var TT=g($g=>{Object.defineProperty($g,"__esModule",{value:!0});var NT=Gu();function Xte(e,t){return NT.extractRequestData(e,{include:t})}function Jte(e,t,n={}){return NT.addRequestDataToEvent(e,t,{include:n})}$g.extractRequestData=Xte;$g.parseRequest=Jte});var kT=g(_i=>{var{_optionalChain:ca}=fe();Object.defineProperty(_i,"__esModule",{value:!0});var Bn=ae(),Ai=Z(),Dte=Gu(),ep=bb(),HT=TT();function Ote(){return function(t,n,r){let i=Bn.getCurrentHub(),s=ca([i,"access",f=>f.getClient,"call",f=>f(),"optionalAccess",f=>f.getOptions,"call",f=>f()]);if(!s||s.instrumenter!=="sentry"||ca([t,"access",f=>f.method,"optionalAccess",f=>f.toUpperCase,"call",f=>f()])==="OPTIONS"||ca([t,"access",f=>f.method,"optionalAccess",f=>f.toUpperCase,"call",f=>f()])==="HEAD")return r();let o=t.headers&&Ai.isString(t.headers["sentry-trace"])?t.headers["sentry-trace"]:void 0,a=ca([t,"access",f=>f.headers,"optionalAccess",f=>f.baggage]),{traceparentData:c,dynamicSamplingContext:u,propagationContext:l}=Ai.tracingContextFromHeaders(o,a);if(i.getScope().setPropagationContext(l),!Bn.hasTracingEnabled(s))return r();let[d,p]=Ai.extractPathForTransaction(t,{path:!0,method:!0}),m=Bn.startTransaction({name:d,op:"http.server",...c,metadata:{dynamicSamplingContext:c&&!u?{}:u,request:t,source:p}},{request:Dte.extractRequestData(t)});i.configureScope(f=>{f.setSpan(m)}),n.__sentry_transaction=m,n.once("finish",()=>{setImmediate(()=>{Ai.addRequestDataToTransaction(m,t),m.setHttpStatus(n.statusCode),m.finish()})}),r()}}function Ute(e={}){let t;if("include"in e)t={include:e.include};else{let{ip:n,request:r,transaction:i,user:s}=e;(n||r||i||s)&&(t={include:Ai.dropUndefinedKeys({ip:n,request:r,transaction:i,user:s})})}return t}function Kte(e){let t=Ute(e),n=Bn.getCurrentHub(),r=n.getClient();if(r&&ep.isAutoSessionTrackingEnabled(r)){r.initSessionFlusher();let i=n.getScope();i.getSession()&&i.setSession()}return function(s,o,a){if(e&&e.flushTimeout&&e.flushTimeout>0){let c=o.end;o.end=function(u,l,d){Bn.flush(e.flushTimeout).then(()=>{c.call(this,u,l,d)}).then(null,p=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Ai.logger.error(p),c.call(this,u,l,d)})}}Bn.runWithAsyncContext(()=>{let c=Bn.getCurrentHub();c.configureScope(u=>{u.setSDKProcessingMetadata({request:s,requestDataOptionsFromExpressHandler:t});let l=c.getClient();if(ep.isAutoSessionTrackingEnabled(l)){let d=c.getScope();d&&d.setRequestSession({status:"ok"})}}),o.once("finish",()=>{let u=c.getClient();ep.isAutoSessionTrackingEnabled(u)&&setImmediate(()=>{u&&u._captureRequestSession&&u._captureRequestSession()})}),a()})}}function Lte(e){let t=e.status||e.statusCode||e.status_code||e.output&&e.output.statusCode;return t?parseInt(t,10):500}function Mte(e){return Lte(e)>=500}function qte(e){return function(n,r,i,s){if((e&&e.shouldHandleError||Mte)(n)){Bn.withScope(a=>{a.setSDKProcessingMetadata({request:r});let c=i.__sentry_transaction;c&&a.getSpan()===void 0&&a.setSpan(c);let u=Bn.getCurrentHub().getClient();if(u&&ep.isAutoSessionTrackingEnabled(u)&&u._sessionFlusher!==void 0){let p=a.getRequestSession();p&&p.status!==void 0&&(p.status="crashed")}a.addEventProcessor(d=>(Ai.addExceptionMechanism(d,{type:"middleware",handled:!1}),d));let l=Bn.captureException(n);i.sentry=l,s(n)});return}s(n)}}function Pte(e={}){return function({path:t,type:n,next:r,rawInput:i}){let s=Bn.getCurrentHub(),o=ca([s,"access",c=>c.getClient,"call",c=>c(),"optionalAccess",c=>c.getOptions,"call",c=>c()]),a=s.getScope().getTransaction();if(a){a.setName(`trpc/${t}`,"route"),a.op="rpc.server";let c={procedure_type:n};(e.attachRpcInput!==void 0?e.attachRpcInput:ca([o,"optionalAccess",u=>u.sendDefaultPii]))&&(c.input=Ai.normalize(i)),a.setContext("trpc",c)}return r()}}_i.extractRequestData=HT.extractRequestData;_i.parseRequest=HT.parseRequest;_i.errorHandler=qte;_i.requestHandler=Kte;_i.tracingHandler=Ote;_i.trpcMiddleware=Pte});var VT=g(Dt=>{Object.defineProperty(Dt,"__esModule",{value:!0});var zte=Jy(),jte=Ky(),Qte=zy(),$te=Qy(),ene=nb(),tne=sb(),nne=Mg(),rne=ob(),ine=gb(),sne=fb(),one=Ib();Dt.Console=zte.Console;Dt.Http=jte.Http;Dt.OnUncaughtException=Qte.OnUncaughtException;Dt.OnUnhandledRejection=$te.OnUnhandledRejection;Dt.LinkedErrors=ene.LinkedErrors;Dt.Modules=tne.Modules;Dt.ContextLines=nne.ContextLines;Dt.Context=rne.Context;Dt.RequestData=ine.RequestData;Dt.LocalVariables=sne.LocalVariables;Dt.Undici=one.Undici});var YT=g(Er=>{Object.defineProperty(Er,"__esModule",{value:!0});var Ts=py();Er.Apollo=Ts.Apollo;Er.Express=Ts.Express;Er.GraphQL=Ts.GraphQL;Er.Mongo=Ts.Mongo;Er.Mysql=Ts.Mysql;Er.Postgres=Ts.Postgres;Er.Prisma=Ts.Prisma});var FT=g(V=>{Object.defineProperty(V,"__esModule",{value:!0});var L=ae(),ane=AN(),cne=yy(),une=Hy(),tp=bb(),Sb=Gu(),lne=wT(),dne=yb(),gne=kT(),pne=VT(),mne=YT(),fne={...L.Integrations,...pne,...mne};V.Hub=L.Hub;V.SDK_VERSION=L.SDK_VERSION;V.Scope=L.Scope;V.addBreadcrumb=L.addBreadcrumb;V.addGlobalEventProcessor=L.addGlobalEventProcessor;V.captureCheckIn=L.captureCheckIn;V.captureEvent=L.captureEvent;V.captureException=L.captureException;V.captureMessage=L.captureMessage;V.close=L.close;V.configureScope=L.configureScope;V.createTransport=L.createTransport;V.extractTraceparentData=L.extractTraceparentData;V.flush=L.flush;V.getActiveTransaction=L.getActiveTransaction;V.getCurrentHub=L.getCurrentHub;V.getHubFromCarrier=L.getHubFromCarrier;V.lastEventId=L.lastEventId;V.makeMain=L.makeMain;V.runWithAsyncContext=L.runWithAsyncContext;V.setContext=L.setContext;V.setExtra=L.setExtra;V.setExtras=L.setExtras;V.setMeasurement=L.setMeasurement;V.setTag=L.setTag;V.setTags=L.setTags;V.setUser=L.setUser;V.spanStatusfromHttpCode=L.spanStatusfromHttpCode;V.startTransaction=L.startTransaction;V.trace=L.trace;V.withScope=L.withScope;V.autoDiscoverNodePerformanceMonitoringIntegrations=ane.autoDiscoverNodePerformanceMonitoringIntegrations;V.NodeClient=cne.NodeClient;V.makeNodeTransport=une.makeNodeTransport;V.defaultIntegrations=tp.defaultIntegrations;V.defaultStackParser=tp.defaultStackParser;V.getSentryRelease=tp.getSentryRelease;V.init=tp.init;V.DEFAULT_USER_INCLUDES=Sb.DEFAULT_USER_INCLUDES;V.addRequestDataToEvent=Sb.addRequestDataToEvent;V.extractRequestData=Sb.extractRequestData;V.deepReadDirSync=lne.deepReadDirSync;V.getModuleFromFilename=dne.getModuleFromFilename;V.Handlers=gne;V.Integrations=fne});var Bb=g(Gb=>{"use strict";Object.defineProperty(Gb,"__esModule",{value:!0});Gb.default=Cne;var hne=Ine(require("crypto"));function Ine(e){return e&&e.__esModule?e:{default:e}}var rp=new Uint8Array(256),np=rp.length;function Cne(){return np>rp.length-16&&(hne.default.randomFillSync(rp),np=0),rp.slice(np,np+=16)}});var xT=g(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.default=void 0;var yne=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;ip.default=yne});var Bu=g(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.default=void 0;var bne=Ane(xT());function Ane(e){return e&&e.__esModule?e:{default:e}}function _ne(e){return typeof e=="string"&&bne.default.test(e)}var Sne=_ne;sp.default=Sne});var Zu=g(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.default=void 0;vu.unsafeStringify=XT;var Gne=Bne(Bu());function Bne(e){return e&&e.__esModule?e:{default:e}}var Me=[];for(let e=0;e<256;++e)Me.push((e+256).toString(16).slice(1));function XT(e,t=0){return Me[e[t+0]]+Me[e[t+1]]+Me[e[t+2]]+Me[e[t+3]]+"-"+Me[e[t+4]]+Me[e[t+5]]+"-"+Me[e[t+6]]+Me[e[t+7]]+"-"+Me[e[t+8]]+Me[e[t+9]]+"-"+Me[e[t+10]]+Me[e[t+11]]+Me[e[t+12]]+Me[e[t+13]]+Me[e[t+14]]+Me[e[t+15]]}function vne(e,t=0){let n=XT(e,t);if(!(0,Gne.default)(n))throw TypeError("Stringified UUID is invalid");return n}var Zne=vne;vu.default=Zne});var DT=g(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.default=void 0;var Ene=Wne(Bb()),Rne=Zu();function Wne(e){return e&&e.__esModule?e:{default:e}}var JT,vb,Zb=0,Eb=0;function wne(e,t,n){let r=t&&n||0,i=t||new Array(16);e=e||{};let s=e.node||JT,o=e.clockseq!==void 0?e.clockseq:vb;if(s==null||o==null){let p=e.random||(e.rng||Ene.default)();s==null&&(s=JT=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),o==null&&(o=vb=(p[6]<<8|p[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Eb+1,u=a-Zb+(c-Eb)/1e4;if(u<0&&e.clockseq===void 0&&(o=o+1&16383),(u<0||a>Zb)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Zb=a,Eb=c,vb=o,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=l&255;let d=a/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=d&255,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(let p=0;p<6;++p)i[r+p]=s[p];return t||(0,Rne.unsafeStringify)(i)}var Nne=wne;op.default=Nne});var Rb=g(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.default=void 0;var Tne=Hne(Bu());function Hne(e){return e&&e.__esModule?e:{default:e}}function kne(e){if(!(0,Tne.default)(e))throw TypeError("Invalid UUID");let t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var Vne=kne;ap.default=Vne});var Wb=g(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.URL=Hs.DNS=void 0;Hs.default=Jne;var Yne=Zu(),Fne=xne(Rb());function xne(e){return e&&e.__esModule?e:{default:e}}function Xne(e){e=unescape(encodeURIComponent(e));let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var OT="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Hs.DNS=OT;var UT="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Hs.URL=UT;function Jne(e,t,n){function r(i,s,o,a){var c;if(typeof i=="string"&&(i=Xne(i)),typeof s=="string"&&(s=(0,Fne.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=n(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){a=a||0;for(let l=0;l<16;++l)o[a+l]=u[l];return o}return(0,Yne.unsafeStringify)(u)}try{r.name=e}catch{}return r.DNS=OT,r.URL=UT,r}});var KT=g(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.default=void 0;var Dne=One(require("crypto"));function One(e){return e&&e.__esModule?e:{default:e}}function Une(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Dne.default.createHash("md5").update(e).digest()}var Kne=Une;cp.default=Kne});var MT=g(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.default=void 0;var Lne=LT(Wb()),Mne=LT(KT());function LT(e){return e&&e.__esModule?e:{default:e}}var qne=(0,Lne.default)("v3",48,Mne.default),Pne=qne;up.default=Pne});var qT=g(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.default=void 0;var zne=jne(require("crypto"));function jne(e){return e&&e.__esModule?e:{default:e}}var Qne={randomUUID:zne.default.randomUUID};lp.default=Qne});var jT=g(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.default=void 0;var PT=zT(qT()),$ne=zT(Bb()),ere=Zu();function zT(e){return e&&e.__esModule?e:{default:e}}function tre(e,t,n){if(PT.default.randomUUID&&!t&&!e)return PT.default.randomUUID();e=e||{};let r=e.random||(e.rng||$ne.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return(0,ere.unsafeStringify)(r)}var nre=tre;dp.default=nre});var QT=g(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.default=void 0;var rre=ire(require("crypto"));function ire(e){return e&&e.__esModule?e:{default:e}}function sre(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),rre.default.createHash("sha1").update(e).digest()}var ore=sre;gp.default=ore});var eH=g(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.default=void 0;var are=$T(Wb()),cre=$T(QT());function $T(e){return e&&e.__esModule?e:{default:e}}var ure=(0,are.default)("v5",80,cre.default),lre=ure;pp.default=lre});var tH=g(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.default=void 0;var dre="00000000-0000-0000-0000-000000000000";mp.default=dre});var nH=g(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.default=void 0;var gre=pre(Bu());function pre(e){return e&&e.__esModule?e:{default:e}}function mre(e){if(!(0,gre.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var fre=mre;fp.default=fre});var rH=g(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});Object.defineProperty(vn,"NIL",{enumerable:!0,get:function(){return bre.default}});Object.defineProperty(vn,"parse",{enumerable:!0,get:function(){return Gre.default}});Object.defineProperty(vn,"stringify",{enumerable:!0,get:function(){return Sre.default}});Object.defineProperty(vn,"v1",{enumerable:!0,get:function(){return hre.default}});Object.defineProperty(vn,"v3",{enumerable:!0,get:function(){return Ire.default}});Object.defineProperty(vn,"v4",{enumerable:!0,get:function(){return Cre.default}});Object.defineProperty(vn,"v5",{enumerable:!0,get:function(){return yre.default}});Object.defineProperty(vn,"validate",{enumerable:!0,get:function(){return _re.default}});Object.defineProperty(vn,"version",{enumerable:!0,get:function(){return Are.default}});var hre=Rr(DT()),Ire=Rr(MT()),Cre=Rr(jT()),yre=Rr(eH()),bre=Rr(tH()),Are=Rr(nH()),_re=Rr(Bu()),Sre=Rr(Zu()),Gre=Rr(Rb());function Rr(e){return e&&e.__esModule?e:{default:e}}});var Mn,vWe,ZWe,wb,EWe,RWe,WWe,wWe,NWe,TWe,iH=Xe(()=>{Mn=w(rH(),1),vWe=Mn.default.v1,ZWe=Mn.default.v3,wb=Mn.default.v4,EWe=Mn.default.v5,RWe=Mn.default.NIL,WWe=Mn.default.version,wWe=Mn.default.validate,NWe=Mn.default.stringify,TWe=Mn.default.parse});var sH=g((kWe,Bre)=>{Bre.exports=[{name:"Appcircle",constant:"APPCIRCLE",env:"AC_APPCIRCLE"},{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN"},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"TF_BUILD",pr:{BUILD_REASON:"PullRequest"}},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"Codefresh",constant:"CODEFRESH",env:"CF_BUILD_ID",pr:{any:["CF_PULL_REQUEST_NUMBER","CF_PULL_REQUEST_ID"]}},{name:"Codemagic",constant:"CODEMAGIC",env:"CM_BUILD_ID",pr:"CM_PULL_REQUEST"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"Expo Application Services",constant:"EAS",env:"EAS_BUILD"},{name:"Gerrit",constant:"GERRIT",env:"GERRIT_PROJECT"},{name:"GitHub Actions",constant:"GITHUB_ACTIONS",env:"GITHUB_ACTIONS",pr:{GITHUB_EVENT_NAME:"pull_request"}},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI",pr:"CI_MERGE_REQUEST_ID"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Google Cloud Build",constant:"GOOGLE_CLOUD_BUILD",env:"BUILDER_OUTPUT"},{name:"Harness CI",constant:"HARNESS",env:"HARNESS_BUILD_ID"},{name:"Heroku",constant:"HEROKU",env:{env:"NODE",includes:"/app/.heroku/node/bin/node"}},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"LayerCI",constant:"LAYERCI",env:"LAYERCI",pr:"LAYERCI_PULL_REQUEST"},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Nevercode",constant:"NEVERCODE",env:"NEVERCODE",pr:{env:"NEVERCODE_PULL_REQUEST",ne:"false"}},{name:"ReleaseHub",constant:"RELEASEHUB",env:"RELEASE_BUILD_ID"},{name:"Render",constant:"RENDER",env:"RENDER",pr:{IS_PULL_REQUEST:"true"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Screwdriver",constant:"SCREWDRIVER",env:"SCREWDRIVER",pr:{env:"SD_PULL_REQUEST",ne:"false"}},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Shippable",constant:"SHIPPABLE",env:"SHIPPABLE",pr:{IS_PULL_REQUEST:"true"}},{name:"Solano CI",constant:"SOLANO",env:"TDDIUM",pr:"TDDIUM_PR_ID"},{name:"Sourcehut",constant:"SOURCEHUT",env:{CI_NAME:"sourcehut"}},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}},{name:"Vercel",constant:"VERCEL",env:{any:["NOW_BUILDER","VERCEL"]},pr:"VERCEL_GIT_PULL_REQUEST_ID"},{name:"Visual Studio App Center",constant:"APPCENTER",env:"APPCENTER_BUILD_ID"},{name:"Woodpecker",constant:"WOODPECKER",env:{CI:"woodpecker"},pr:{CI_BUILD_EVENT:"pull_request"}},{name:"Xcode Cloud",constant:"XCODE_CLOUD",env:"CI_XCODE_PROJECT",pr:"CI_PULL_REQUEST_NUMBER"},{name:"Xcode Server",constant:"XCODE_SERVER",env:"XCS"}]});var cH=g(Ot=>{"use strict";var aH=sH(),We=process.env;Object.defineProperty(Ot,"_vendors",{value:aH.map(function(e){return e.constant})});Ot.name=null;Ot.isPR=null;aH.forEach(function(e){let n=(Array.isArray(e.env)?e.env:[e.env]).every(function(r){return oH(r)});if(Ot[e.constant]=n,!!n)switch(Ot.name=e.name,typeof e.pr){case"string":Ot.isPR=!!We[e.pr];break;case"object":"env"in e.pr?Ot.isPR=e.pr.env in We&&We[e.pr.env]!==e.pr.ne:"any"in e.pr?Ot.isPR=e.pr.any.some(function(r){return!!We[r]}):Ot.isPR=oH(e.pr);break;default:Ot.isPR=null}});Ot.isCI=!!(We.CI!=="false"&&(We.BUILD_ID||We.BUILD_NUMBER||We.CI||We.CI_APP_ID||We.CI_BUILD_ID||We.CI_BUILD_NUMBER||We.CI_NAME||We.CONTINUOUS_INTEGRATION||We.RUN_ID||Ot.name||!1));function oH(e){return typeof e=="string"?!!We[e]:"env"in e?We[e.env]&&We[e.env].includes(e.includes):"any"in e?e.any.some(function(t){return!!We[t]}):Object.keys(e).every(function(t){return We[t]===e[t]})}});var lH=g((YWe,uH)=>{"use strict";uH.exports=vre;function ua(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function vre(e){if(e=e||{},e.circles)return Zre(e);return e.proto?r:n;function t(i,s){for(var o=Object.keys(i),a=new Array(o.length),c=0;c<o.length;c++){var u=o[c],l=i[u];typeof l!="object"||l===null?a[u]=l:l instanceof Date?a[u]=new Date(l):ArrayBuffer.isView(l)?a[u]=ua(l):a[u]=s(l)}return a}function n(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,n);if(i instanceof Map)return new Map(t(Array.from(i),n));if(i instanceof Set)return new Set(t(Array.from(i),n));var s={};for(var o in i)if(Object.hasOwnProperty.call(i,o)!==!1){var a=i[o];typeof a!="object"||a===null?s[o]=a:a instanceof Date?s[o]=new Date(a):a instanceof Map?s[o]=new Map(t(Array.from(a),n)):a instanceof Set?s[o]=new Set(t(Array.from(a),n)):ArrayBuffer.isView(a)?s[o]=ua(a):s[o]=n(a)}return s}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,r);if(i instanceof Map)return new Map(t(Array.from(i),r));if(i instanceof Set)return new Set(t(Array.from(i),r));var s={};for(var o in i){var a=i[o];typeof a!="object"||a===null?s[o]=a:a instanceof Date?s[o]=new Date(a):a instanceof Map?s[o]=new Map(t(Array.from(a),r)):a instanceof Set?s[o]=new Set(t(Array.from(a),r)):ArrayBuffer.isView(a)?s[o]=ua(a):s[o]=r(a)}return s}}function Zre(e){var t=[],n=[];return e.proto?s:i;function r(o,a){for(var c=Object.keys(o),u=new Array(c.length),l=0;l<c.length;l++){var d=c[l],p=o[d];if(typeof p!="object"||p===null)u[d]=p;else if(p instanceof Date)u[d]=new Date(p);else if(ArrayBuffer.isView(p))u[d]=ua(p);else{var m=t.indexOf(p);m!==-1?u[d]=n[m]:u[d]=a(p)}}return u}function i(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return r(o,i);if(o instanceof Map)return new Map(r(Array.from(o),i));if(o instanceof Set)return new Set(r(Array.from(o),i));var a={};t.push(o),n.push(a);for(var c in o)if(Object.hasOwnProperty.call(o,c)!==!1){var u=o[c];if(typeof u!="object"||u===null)a[c]=u;else if(u instanceof Date)a[c]=new Date(u);else if(u instanceof Map)a[c]=new Map(r(Array.from(u),i));else if(u instanceof Set)a[c]=new Set(r(Array.from(u),i));else if(ArrayBuffer.isView(u))a[c]=ua(u);else{var l=t.indexOf(u);l!==-1?a[c]=n[l]:a[c]=i(u)}}return t.pop(),n.pop(),a}function s(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return r(o,s);if(o instanceof Map)return new Map(r(Array.from(o),s));if(o instanceof Set)return new Set(r(Array.from(o),s));var a={};t.push(o),n.push(a);for(var c in o){var u=o[c];if(typeof u!="object"||u===null)a[c]=u;else if(u instanceof Date)a[c]=new Date(u);else if(u instanceof Map)a[c]=new Map(r(Array.from(u),s));else if(u instanceof Set)a[c]=new Set(r(Array.from(u),s));else if(ArrayBuffer.isView(u))a[c]=ua(u);else{var l=t.indexOf(u);l!==-1?a[c]=n[l]:a[c]=s(u)}}return t.pop(),n.pop(),a}}});var Vs=g((FWe,mH)=>{var Ere=require("util"),ks=le()("log4js:configuration"),hp=[],Ip=[],dH=e=>!e,gH=e=>e&&typeof e=="object"&&!Array.isArray(e),Rre=e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),Wre=e=>e&&typeof e=="number"&&Number.isInteger(e),wre=e=>{Ip.push(e),ks(`Added listener, now ${Ip.length} listeners`)},Nre=e=>{hp.push(e),ks(`Added pre-processing listener, now ${hp.length} listeners`)},pH=(e,t,n)=>{(Array.isArray(t)?t:[t]).forEach(i=>{if(i)throw new Error(`Problem with log4js configuration: (${Ere.inspect(e,{depth:5})}) - ${n}`)})},Tre=e=>{ks("New configuration to be validated: ",e),pH(e,dH(gH(e)),"must be an object."),ks(`Calling pre-processing listeners (${hp.length})`),hp.forEach(t=>t(e)),ks("Configuration pre-processing finished."),ks(`Calling configuration listeners (${Ip.length})`),Ip.forEach(t=>t(e)),ks("Configuration finished.")};mH.exports={configure:Tre,addListener:wre,addPreProcessingListener:Nre,throwExceptionIf:pH,anObject:gH,anInteger:Wre,validIdentifier:Rre,not:dH}});var Cp=g((xWe,on)=>{"use strict";function fH(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}function Ys(e){return fH(e,2)}function Hre(e){var t=Math.abs(e),n=String(Math.floor(t/60)),r=String(t%60);return n=("0"+n).slice(-2),r=("0"+r).slice(-2),e===0?"Z":(e<0?"+":"-")+n+":"+r}function hH(e,t){typeof e!="string"&&(t=e,e=on.exports.ISO8601_FORMAT),t||(t=on.exports.now());var n=Ys(t.getDate()),r=Ys(t.getMonth()+1),i=Ys(t.getFullYear()),s=Ys(i.substring(2,4)),o=e.indexOf("yyyy")>-1?i:s,a=Ys(t.getHours()),c=Ys(t.getMinutes()),u=Ys(t.getSeconds()),l=fH(t.getMilliseconds(),3),d=Hre(t.getTimezoneOffset()),p=e.replace(/dd/g,n).replace(/MM/g,r).replace(/y{1,4}/g,o).replace(/hh/g,a).replace(/mm/g,c).replace(/ss/g,u).replace(/SSS/g,l).replace(/O/g,d);return p}function Si(e,t,n,r){e["set"+(r?"":"UTC")+t](n)}function kre(e,t,n){var r=e.indexOf("O")<0,i=!1,s=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(d,p){Si(d,"FullYear",p,r)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(d,p){Si(d,"Month",p-1,r),d.getMonth()!==p-1&&(i=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(d,p){i&&Si(d,"Month",d.getMonth()-1,r),Si(d,"Date",p,r)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(d,p){Si(d,"Hours",p,r)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(d,p){Si(d,"Minutes",p,r)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(d,p){Si(d,"Seconds",p,r)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(d,p){Si(d,"Milliseconds",p,r)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(d,p){p==="Z"?p=0:p=p.replace(":","");var m=Math.abs(p),f=(p>0?-1:1)*(m%100+Math.floor(m/100)*60);d.setUTCMinutes(d.getUTCMinutes()+f)}}],o=s.reduce(function(d,p){return p.pattern.test(d.regexp)?(p.index=d.regexp.match(p.pattern).index,d.regexp=d.regexp.replace(p.pattern,"("+p.regexp+")")):p.index=-1,d},{regexp:e,index:[]}),a=s.filter(function(d){return d.index>-1});a.sort(function(d,p){return d.index-p.index});var c=new RegExp(o.regexp),u=c.exec(t);if(u){var l=n||on.exports.now();return a.forEach(function(d,p){d.fn(l,u[p+1])}),l}throw new Error("String '"+t+"' could not be parsed as '"+e+"'")}function Vre(e,t,n){if(!e)throw new Error("pattern must be supplied");return kre(e,t,n)}function Yre(){return new Date}on.exports=hH;on.exports.asString=hH;on.exports.parse=Vre;on.exports.now=Yre;on.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";on.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";on.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";on.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"});var Tb=g((XWe,EH)=>{var Gi=Cp(),IH=require("os"),Ru=require("util"),Eu=require("path"),CH=require("url"),yH=le()("log4js:layouts"),bH={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function AH(e){return e?`\x1B[${bH[e][0]}m`:""}function _H(e){return e?`\x1B[${bH[e][1]}m`:""}function Fre(e,t){return AH(t)+e+_H(t)}function SH(e,t){return Fre(Ru.format("[%s] [%s] %s - ",Gi.asString(e.startTime),e.level.toString(),e.categoryName),t)}function GH(e){return SH(e)+Ru.format(...e.data)}function yp(e){return SH(e,e.level.colour)+Ru.format(...e.data)}function BH(e){return Ru.format(...e.data)}function vH(e){return e.data[0]}function ZH(e,t){let n="%r %p %c - %m%n",r=/%(-?[0-9]+)?(\.?-?[0-9]+)?([[\]cdhmnprzxXyflosCMAF%])(\{([^}]+)\})?|([^%]+)/;e=e||n;function i(S,E){let G=S.categoryName;if(E){let U=parseInt(E,10),k=G.split(".");U<k.length&&(G=k.slice(k.length-U).join("."))}return G}function s(S,E){let G=Gi.ISO8601_FORMAT;if(E)switch(G=E,G){case"ISO8601":case"ISO8601_FORMAT":G=Gi.ISO8601_FORMAT;break;case"ISO8601_WITH_TZ_OFFSET":case"ISO8601_WITH_TZ_OFFSET_FORMAT":G=Gi.ISO8601_WITH_TZ_OFFSET_FORMAT;break;case"ABSOLUTE":process.emitWarning("Pattern %d{ABSOLUTE} is deprecated in favor of %d{ABSOLUTETIME}. Please use %d{ABSOLUTETIME} instead.","DeprecationWarning","log4js-node-DEP0003"),yH("[log4js-node-DEP0003]","DEPRECATION: Pattern %d{ABSOLUTE} is deprecated and replaced by %d{ABSOLUTETIME}.");case"ABSOLUTETIME":case"ABSOLUTETIME_FORMAT":G=Gi.ABSOLUTETIME_FORMAT;break;case"DATE":process.emitWarning("Pattern %d{DATE} is deprecated due to the confusion it causes when used. Please use %d{DATETIME} instead.","DeprecationWarning","log4js-node-DEP0004"),yH("[log4js-node-DEP0004]","DEPRECATION: Pattern %d{DATE} is deprecated and replaced by %d{DATETIME}.");case"DATETIME":case"DATETIME_FORMAT":G=Gi.DATETIME_FORMAT;break}return Gi.asString(G,S.startTime)}function o(){return IH.hostname().toString()}function a(S,E){let G=S.data;if(E){let[U,k]=E.split(",");G=G.slice(U,k)}return Ru.format(...G)}function c(){return IH.EOL}function u(S){return S.level.toString()}function l(S){return Gi.asString("hh:mm:ss",S.startTime)}function d(S){return AH(S.level.colour)}function p(S){return _H(S.level.colour)}function m(){return"%"}function f(S){return S&&S.pid?S.pid.toString():process.pid.toString()}function h(){return f()}function I(S,E){return typeof t[E]<"u"?typeof t[E]=="function"?t[E](S):t[E]:null}function b(S,E){let G=S.context[E];return typeof G<"u"?typeof G=="function"?G(S):G:null}function R(S,E){let G=S.fileName||"";if(G=function(k){let ei="file://";return k.startsWith(ei)&&(typeof CH.fileURLToPath=="function"?k=CH.fileURLToPath(k):(k=Eu.normalize(k.replace(new RegExp(`^${ei}`),"")),process.platform==="win32"&&(k.startsWith("\\")?k=k.slice(1):k=Eu.sep+Eu.sep+k))),k}(G),E){let k=parseInt(E,10),ei=G.split(Eu.sep);ei.length>k&&(G=ei.slice(-k).join(Eu.sep))}return G}function W(S){return S.lineNumber?`${S.lineNumber}`:""}function F(S){return S.columnNumber?`${S.columnNumber}`:""}function H(S){return S.callStack||""}function x(S){return S.className||""}function ne(S){return S.functionName||""}function ce(S){return S.functionAlias||""}function T(S){return S.callerName||""}let J={c:i,d:s,h:o,m:a,n:c,p:u,r:l,"[":d,"]":p,y:h,z:f,"%":m,x:I,X:b,f:R,l:W,o:F,s:H,C:x,M:ne,A:ce,F:T};function D(S,E,G){return J[S](E,G)}function Be(S,E){let G;return S?(G=parseInt(S.slice(1),10),G>0?E.slice(0,G):E.slice(G)):E}function ve(S,E){let G;if(S)if(S.charAt(0)==="-")for(G=parseInt(S.slice(1),10);E.length<G;)E+=" ";else for(G=parseInt(S,10);E.length<G;)E=` ${E}`;return E}function Ie(S,E,G){let U=S;return U=Be(E,U),U=ve(G,U),U}return function(S){let E="",G,U=e;for(;(G=r.exec(U))!==null;){let k=G[1],ei=G[2],Z1=G[3],E1=G[5],OZ=G[6];if(OZ)E+=OZ.toString();else{let R1=D(Z1,S,E1);E+=Ie(R1,ei,k)}U=U.slice(G.index+G[0].length)}return E}}var Nb={messagePassThrough(){return BH},basic(){return GH},colored(){return yp},coloured(){return yp},pattern(e){return ZH(e&&e.pattern,e&&e.tokens)},dummy(){return vH}};EH.exports={basicLayout:GH,messagePassThroughLayout:BH,patternLayout:ZH,colouredLayout:yp,coloredLayout:yp,dummyLayout:vH,addLayout(e,t){Nb[e]=t},layout(e,t){return Nb[e]&&Nb[e](t)}}});var Fs=g((JWe,WH)=>{var ye=Vs(),RH=["white","grey","black","blue","cyan","green","magenta","red","yellow"],be=class{constructor(t,n,r){this.level=t,this.levelStr=n,this.colour=r}toString(){return this.levelStr}static getLevel(t,n){return t?t instanceof be?t:(t instanceof Object&&t.levelStr&&(t=t.levelStr),be[t.toString().toUpperCase()]||n):n}static addLevels(t){t&&(Object.keys(t).forEach(r=>{let i=r.toUpperCase();be[i]=new be(t[r].value,i,t[r].colour);let s=be.levels.findIndex(o=>o.levelStr===i);s>-1?be.levels[s]=be[i]:be.levels.push(be[i])}),be.levels.sort((r,i)=>r.level-i.level))}isLessThanOrEqualTo(t){return typeof t=="string"&&(t=be.getLevel(t)),this.level<=t.level}isGreaterThanOrEqualTo(t){return typeof t=="string"&&(t=be.getLevel(t)),this.level>=t.level}isEqualTo(t){return typeof t=="string"&&(t=be.getLevel(t)),this.level===t.level}};be.levels=[];be.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}});ye.addListener(e=>{let t=e.levels;t&&(ye.throwExceptionIf(e,ye.not(ye.anObject(t)),"levels must be an object"),Object.keys(t).forEach(r=>{ye.throwExceptionIf(e,ye.not(ye.validIdentifier(r)),`level name "${r}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),ye.throwExceptionIf(e,ye.not(ye.anObject(t[r])),`level "${r}" must be an object`),ye.throwExceptionIf(e,ye.not(t[r].value),`level "${r}" must have a 'value' property`),ye.throwExceptionIf(e,ye.not(ye.anInteger(t[r].value)),`level "${r}".value must have an integer value`),ye.throwExceptionIf(e,ye.not(t[r].colour),`level "${r}" must have a 'colour' property`),ye.throwExceptionIf(e,ye.not(RH.indexOf(t[r].colour)>-1),`level "${r}".colour must be one of ${RH.join(", ")}`)}))});ye.addListener(e=>{be.addLevels(e.levels)});WH.exports=be});var XH=g(wu=>{"use strict";var{parse:TH,stringify:HH}=JSON,{keys:xre}=Object,Wu=String,kH="string",wH={},bp="object",VH=(e,t)=>t,Xre=e=>e instanceof Wu?Wu(e):e,Jre=(e,t)=>typeof t===kH?new Wu(t):t,YH=(e,t,n,r)=>{let i=[];for(let s=xre(n),{length:o}=s,a=0;a<o;a++){let c=s[a],u=n[c];if(u instanceof Wu){let l=e[u];typeof l===bp&&!t.has(l)?(t.add(l),n[c]=wH,i.push({k:c,a:[e,t,l,r]})):n[c]=r.call(n,c,l)}else n[c]!==wH&&(n[c]=r.call(n,c,u))}for(let{length:s}=i,o=0;o<s;o++){let{k:a,a:c}=i[o];n[a]=r.call(n,a,YH.apply(null,c))}return n},NH=(e,t,n)=>{let r=Wu(t.push(n)-1);return e.set(n,r),r},FH=(e,t)=>{let n=TH(e,Jre).map(Xre),r=n[0],i=t||VH,s=typeof r===bp&&r?YH(n,new Set,r,i):r;return i.call({"":s},"",s)};wu.parse=FH;var xH=(e,t,n)=>{let r=t&&typeof t===bp?(l,d)=>l===""||-1<t.indexOf(l)?d:void 0:t||VH,i=new Map,s=[],o=[],a=+NH(i,s,r.call({"":e},"",e)),c=!a;for(;a<s.length;)c=!0,o[a]=HH(s[a++],u,n);return"["+o.join(",")+"]";function u(l,d){if(c)return c=!c,d;let p=r.call(this,l,d);switch(typeof p){case bp:if(p===null)return p;case kH:return i.get(p)||NH(i,s,p)}return p}};wu.stringify=xH;var Dre=e=>TH(xH(e));wu.toJSON=Dre;var Ore=e=>FH(HH(e));wu.fromJSON=Ore});var kb=g((OWe,UH)=>{var JH=XH(),DH=Fs(),Hb=class{constructor(){let t={__LOG4JS_undefined__:void 0,__LOG4JS_NaN__:Number("abc"),__LOG4JS_Infinity__:1/0,"__LOG4JS_-Infinity__":-1/0};this.deMap=t,this.serMap={},Object.keys(this.deMap).forEach(n=>{let r=this.deMap[n];this.serMap[r]=n})}canSerialise(t){return typeof t=="string"?!1:t in this.serMap}serialise(t){return this.canSerialise(t)?this.serMap[t]:t}canDeserialise(t){return t in this.deMap}deserialise(t){return this.canDeserialise(t)?this.deMap[t]:t}},OH=new Hb,la=class{constructor(t,n,r,i,s,o){if(this.startTime=new Date,this.categoryName=t,this.data=r,this.level=n,this.context=Object.assign({},i),this.pid=process.pid,this.error=o,typeof s<"u"){if(!s||typeof s!="object"||Array.isArray(s))throw new TypeError("Invalid location type passed to LoggingEvent constructor");this.constructor._getLocationKeys().forEach(a=>{typeof s[a]<"u"&&(this[a]=s[a])})}}static _getLocationKeys(){return["fileName","lineNumber","columnNumber","callStack","className","functionName","functionAlias","callerName"]}serialise(){return JH.stringify(this,(t,n)=>(n instanceof Error&&(n=Object.assign({message:n.message,stack:n.stack},n)),OH.serialise(n)))}static deserialise(t){let n;try{let r=JH.parse(t,(i,s)=>{if(s&&s.message&&s.stack){let o=new Error(s);Object.keys(s).forEach(a=>{o[a]=s[a]}),s=o}return OH.deserialise(s)});this._getLocationKeys().forEach(i=>{typeof r[i]<"u"&&(r.location||(r.location={}),r.location[i]=r[i])}),n=new la(r.categoryName,DH.getLevel(r.level.levelStr),r.data,r.context,r.location,r.error),n.startTime=new Date(r.startTime),n.pid=r.pid,r.cluster&&(n.cluster=r.cluster)}catch(r){n=new la("log4js",DH.ERROR,["Unable to parse log:",t,"because: ",r])}return n}};UH.exports=la});var _p=g((UWe,MH)=>{var an=le()("log4js:clustering"),Ure=kb(),Kre=Vs(),da=!1,cn=null;try{cn=require("cluster")}catch{an("cluster module not present"),da=!0}var Yb=[],Tu=!1,Nu="NODE_APP_INSTANCE",KH=()=>Tu&&process.env[Nu]==="0",Vb=()=>da||cn&&cn.isMaster||KH(),LH=e=>{Yb.forEach(t=>t(e))},Ap=(e,t)=>{if(an("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&t.topic==="log4js:message"){an("received message: ",t.data);let n=Ure.deserialise(t.data);LH(n)}};da||Kre.addListener(e=>{Yb.length=0,{pm2:Tu,disableClustering:da,pm2InstanceVar:Nu="NODE_APP_INSTANCE"}=e,an(`clustering disabled ? ${da}`),an(`cluster.isMaster ? ${cn&&cn.isMaster}`),an(`pm2 enabled ? ${Tu}`),an(`pm2InstanceVar = ${Nu}`),an(`process.env[${Nu}] = ${process.env[Nu]}`),Tu&&process.removeListener("message",Ap),cn&&cn.removeListener&&cn.removeListener("message",Ap),da||e.disableClustering?an("Not listening for cluster messages, because clustering disabled."):KH()?(an("listening for PM2 broadcast messages"),process.on("message",Ap)):cn&&cn.isMaster?(an("listening for cluster messages"),cn.on("message",Ap)):an("not listening for messages, because we are not a master process")});MH.exports={onlyOnMaster:(e,t)=>Vb()?e():t,isMaster:Vb,send:e=>{Vb()?LH(e):(Tu||(e.cluster={workerId:cn.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{Yb.push(e)}}});var zH=g((KWe,PH)=>{function Lre(e){if(typeof e=="number"&&Number.isInteger(e))return e;let t={K:1024,M:1024*1024,G:1024*1024*1024},n=Object.keys(t),r=e.slice(-1).toLocaleUpperCase(),i=e.slice(0,-1).trim();if(n.indexOf(r)<0||!Number.isInteger(Number(i)))throw Error(`maxLogSize: "${e}" is invalid`);return i*t[r]}function Mre(e,t){let n=Object.assign({},t);return Object.keys(e).forEach(r=>{n[r]&&(n[r]=e[r](t[r]))}),n}function Fb(e){return Mre({maxLogSize:Lre},e)}var qH={dateFile:Fb,file:Fb,fileSync:Fb};PH.exports.modifyConfig=e=>qH[e.type]?qH[e.type](e):e});var QH=g((LWe,jH)=>{var qre=console.log.bind(console);function Pre(e,t){return n=>{qre(e(n,t))}}function zre(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),Pre(n,e.timezoneOffset)}jH.exports.configure=zre});var ek=g($H=>{function jre(e,t){return n=>{process.stdout.write(`${e(n,t)}
`)}}function Qre(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),jre(n,e.timezoneOffset)}$H.configure=Qre});var nk=g((qWe,tk)=>{function $re(e,t){return n=>{process.stderr.write(`${e(n,t)}
`)}}function eie(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),$re(n,e.timezoneOffset)}tk.exports.configure=eie});var ik=g((PWe,rk)=>{function tie(e,t,n,r){let i=r.getLevel(e),s=r.getLevel(t,r.FATAL);return o=>{let a=o.level;i.isLessThanOrEqualTo(a)&&s.isGreaterThanOrEqualTo(a)&&n(o)}}function nie(e,t,n,r){let i=n(e.appender);return tie(e.level,e.maxLevel,i,r)}rk.exports.configure=nie});var ak=g((zWe,ok)=>{var sk=le()("log4js:categoryFilter");function rie(e,t){return typeof e=="string"&&(e=[e]),n=>{sk(`Checking ${n.categoryName} against ${e}`),e.indexOf(n.categoryName)===-1&&(sk("Not excluded, sending to appender"),t(n))}}function iie(e,t,n){let r=n(e.appender);return rie(e.exclude,r)}ok.exports.configure=iie});var lk=g((jWe,uk)=>{var ck=le()("log4js:noLogFilter");function sie(e){return e.filter(n=>n!=null&&n!=="")}function oie(e,t){return n=>{ck(`Checking data: ${n.data} against filters: ${e}`),typeof e=="string"&&(e=[e]),e=sie(e);let r=new RegExp(e.join("|"),"i");(e.length===0||n.data.findIndex(i=>r.test(i))<0)&&(ck("Not excluded, sending to appender"),t(n))}}function aie(e,t,n){let r=n(e.appender);return oie(e.exclude,r)}uk.exports.configure=aie});var Et=g(xb=>{"use strict";xb.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,n)=>{arguments[arguments.length]=(r,i)=>{if(r)return n(r);t(i)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};xb.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(n=>t(null,n),t)},"name",{value:e.name})}});var Xb=g(xs=>{"use strict";var dk=Et().fromCallback,un=N(),cie=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof un[e]=="function");Object.keys(un).forEach(e=>{e!=="promises"&&(xs[e]=un[e])});cie.forEach(e=>{xs[e]=dk(un[e])});xs.exists=function(e,t){return typeof t=="function"?un.exists(e,t):new Promise(n=>un.exists(e,n))};xs.read=function(e,t,n,r,i,s){return typeof s=="function"?un.read(e,t,n,r,i,s):new Promise((o,a)=>{un.read(e,t,n,r,i,(c,u,l)=>{if(c)return a(c);o({bytesRead:u,buffer:l})})})};xs.write=function(e,t,...n){return typeof n[n.length-1]=="function"?un.write(e,t,...n):new Promise((r,i)=>{un.write(e,t,...n,(s,o,a)=>{if(s)return i(s);r({bytesWritten:o,buffer:a})})})};typeof un.realpath.native=="function"&&(xs.realpath.native=dk(un.realpath.native))});var Db=g((ewe,pk)=>{"use strict";var Jb=require("path");function gk(e){return e=Jb.normalize(Jb.resolve(e)).split(Jb.sep),e.length>0?e[0]:null}var uie=/[<>:"|?*]/;function lie(e){let t=gk(e);return e=e.replace(t,""),uie.test(e)}pk.exports={getRootPath:gk,invalidWin32Path:lie}});var fk=g((twe,mk)=>{"use strict";var die=N(),Ob=require("path"),gie=Db().invalidWin32Path,pie=parseInt("0777",8);function Ub(e,t,n,r){if(typeof t=="function"?(n=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&gie(e)){let o=new Error(e+" contains invalid WIN32 path characters.");return o.code="EINVAL",n(o)}let i=t.mode,s=t.fs||die;i===void 0&&(i=pie&~process.umask()),r||(r=null),n=n||function(){},e=Ob.resolve(e),s.mkdir(e,i,o=>{if(!o)return r=r||e,n(null,r);switch(o.code){case"ENOENT":if(Ob.dirname(e)===e)return n(o);Ub(Ob.dirname(e),t,(a,c)=>{a?n(a,c):Ub(e,t,n,c)});break;default:s.stat(e,(a,c)=>{a||!c.isDirectory()?n(o,r):n(null,r)});break}})}mk.exports=Ub});var Ik=g((nwe,hk)=>{"use strict";var mie=N(),Kb=require("path"),fie=Db().invalidWin32Path,hie=parseInt("0777",8);function Lb(e,t,n){(!t||typeof t!="object")&&(t={mode:t});let r=t.mode,i=t.fs||mie;if(process.platform==="win32"&&fie(e)){let s=new Error(e+" contains invalid WIN32 path characters.");throw s.code="EINVAL",s}r===void 0&&(r=hie&~process.umask()),n||(n=null),e=Kb.resolve(e);try{i.mkdirSync(e,r),n=n||e}catch(s){if(s.code==="ENOENT"){if(Kb.dirname(e)===e)throw s;n=Lb(Kb.dirname(e),t,n),Lb(e,t,n)}else{let o;try{o=i.statSync(e)}catch{throw s}if(!o.isDirectory())throw s}}return n}hk.exports=Lb});var Ut=g((rwe,Ck)=>{"use strict";var Iie=Et().fromCallback,Mb=Iie(fk()),qb=Ik();Ck.exports={mkdirs:Mb,mkdirsSync:qb,mkdirp:Mb,mkdirpSync:qb,ensureDir:Mb,ensureDirSync:qb}});var Pb=g((iwe,bk)=>{"use strict";var et=N(),yk=require("os"),Sp=require("path");function Cie(){let e=Sp.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=Sp.join(yk.tmpdir(),e);let t=new Date(1435410243862);et.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let n=et.openSync(e,"r+");return et.futimesSync(n,t,t),et.closeSync(n),et.statSync(e).mtime>1435410243e3}function yie(e){let t=Sp.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=Sp.join(yk.tmpdir(),t);let n=new Date(1435410243862);et.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",r=>{if(r)return e(r);et.open(t,"r+",(i,s)=>{if(i)return e(i);et.futimes(s,n,n,o=>{if(o)return e(o);et.close(s,a=>{if(a)return e(a);et.stat(t,(c,u)=>{if(c)return e(c);e(null,u.mtime>1435410243e3)})})})})})}function bie(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function Aie(e,t,n,r){et.open(e,"r+",(i,s)=>{if(i)return r(i);et.futimes(s,t,n,o=>{et.close(s,a=>{r&&r(o||a)})})})}function _ie(e,t,n){let r=et.openSync(e,"r+");return et.futimesSync(r,t,n),et.closeSync(r)}bk.exports={hasMillisRes:yie,hasMillisResSync:Cie,timeRemoveMillis:bie,utimesMillis:Aie,utimesMillisSync:_ie}});var Vu=g((swe,vk)=>{"use strict";var ln=N(),Rt=require("path"),Ak=10,_k=5,Sie=0,jb=process.versions.node.split("."),Sk=Number.parseInt(jb[0],10),Gk=Number.parseInt(jb[1],10),Gie=Number.parseInt(jb[2],10);function Hu(){if(Sk>Ak)return!0;if(Sk===Ak){if(Gk>_k)return!0;if(Gk===_k&&Gie>=Sie)return!0}return!1}function Bie(e,t,n){Hu()?ln.stat(e,{bigint:!0},(r,i)=>{if(r)return n(r);ln.stat(t,{bigint:!0},(s,o)=>s?s.code==="ENOENT"?n(null,{srcStat:i,destStat:null}):n(s):n(null,{srcStat:i,destStat:o}))}):ln.stat(e,(r,i)=>{if(r)return n(r);ln.stat(t,(s,o)=>s?s.code==="ENOENT"?n(null,{srcStat:i,destStat:null}):n(s):n(null,{srcStat:i,destStat:o}))})}function vie(e,t){let n,r;Hu()?n=ln.statSync(e,{bigint:!0}):n=ln.statSync(e);try{Hu()?r=ln.statSync(t,{bigint:!0}):r=ln.statSync(t)}catch(i){if(i.code==="ENOENT")return{srcStat:n,destStat:null};throw i}return{srcStat:n,destStat:r}}function Zie(e,t,n,r){Bie(e,t,(i,s)=>{if(i)return r(i);let{srcStat:o,destStat:a}=s;return a&&a.ino&&a.dev&&a.ino===o.ino&&a.dev===o.dev?r(new Error("Source and destination must not be the same.")):o.isDirectory()&&Qb(e,t)?r(new Error(ku(e,t,n))):r(null,{srcStat:o,destStat:a})})}function Eie(e,t,n){let{srcStat:r,destStat:i}=vie(e,t);if(i&&i.ino&&i.dev&&i.ino===r.ino&&i.dev===r.dev)throw new Error("Source and destination must not be the same.");if(r.isDirectory()&&Qb(e,t))throw new Error(ku(e,t,n));return{srcStat:r,destStat:i}}function zb(e,t,n,r,i){let s=Rt.resolve(Rt.dirname(e)),o=Rt.resolve(Rt.dirname(n));if(o===s||o===Rt.parse(o).root)return i();Hu()?ln.stat(o,{bigint:!0},(a,c)=>a?a.code==="ENOENT"?i():i(a):c.ino&&c.dev&&c.ino===t.ino&&c.dev===t.dev?i(new Error(ku(e,n,r))):zb(e,t,o,r,i)):ln.stat(o,(a,c)=>a?a.code==="ENOENT"?i():i(a):c.ino&&c.dev&&c.ino===t.ino&&c.dev===t.dev?i(new Error(ku(e,n,r))):zb(e,t,o,r,i))}function Bk(e,t,n,r){let i=Rt.resolve(Rt.dirname(e)),s=Rt.resolve(Rt.dirname(n));if(s===i||s===Rt.parse(s).root)return;let o;try{Hu()?o=ln.statSync(s,{bigint:!0}):o=ln.statSync(s)}catch(a){if(a.code==="ENOENT")return;throw a}if(o.ino&&o.dev&&o.ino===t.ino&&o.dev===t.dev)throw new Error(ku(e,n,r));return Bk(e,t,s,r)}function Qb(e,t){let n=Rt.resolve(e).split(Rt.sep).filter(i=>i),r=Rt.resolve(t).split(Rt.sep).filter(i=>i);return n.reduce((i,s,o)=>i&&r[o]===s,!0)}function ku(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}vk.exports={checkPaths:Zie,checkPathsSync:Eie,checkParentPaths:zb,checkParentPathsSync:Bk,isSrcSubdir:Qb}});var Ek=g((owe,Zk)=>{"use strict";Zk.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch{return new Buffer(e)}return new Buffer(e)}});var Tk=g((awe,Nk)=>{"use strict";var se=N(),Yu=require("path"),Rie=Ut().mkdirsSync,Wie=Pb().utimesMillisSync,Fu=Vu();function wie(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:r,destStat:i}=Fu.checkPathsSync(e,t,"copy");return Fu.checkParentPathsSync(e,r,t,"copy"),Nie(i,e,t,n)}function Nie(e,t,n,r){if(r.filter&&!r.filter(t,n))return;let i=Yu.dirname(n);return se.existsSync(i)||Rie(i),Rk(e,t,n,r)}function Rk(e,t,n,r){if(!(r.filter&&!r.filter(t,n)))return Tie(e,t,n,r)}function Tie(e,t,n,r){let s=(r.dereference?se.statSync:se.lstatSync)(t);if(s.isDirectory())return Yie(s,e,t,n,r);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Hie(s,e,t,n,r);if(s.isSymbolicLink())return Xie(e,t,n,r)}function Hie(e,t,n,r,i){return t?kie(e,n,r,i):Wk(e,n,r,i)}function kie(e,t,n,r){if(r.overwrite)return se.unlinkSync(n),Wk(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}function Wk(e,t,n,r){return typeof se.copyFileSync=="function"?(se.copyFileSync(t,n),se.chmodSync(n,e.mode),r.preserveTimestamps?Wie(n,e.atime,e.mtime):void 0):Vie(e,t,n,r)}function Vie(e,t,n,r){let s=Ek()(65536),o=se.openSync(t,"r"),a=se.openSync(n,"w",e.mode),c=0;for(;c<e.size;){let u=se.readSync(o,s,0,65536,c);se.writeSync(a,s,0,u),c+=u}r.preserveTimestamps&&se.futimesSync(a,e.atime,e.mtime),se.closeSync(o),se.closeSync(a)}function Yie(e,t,n,r,i){if(!t)return Fie(e,n,r,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`);return wk(n,r,i)}function Fie(e,t,n,r){return se.mkdirSync(n),wk(t,n,r),se.chmodSync(n,e.mode)}function wk(e,t,n){se.readdirSync(e).forEach(r=>xie(r,e,t,n))}function xie(e,t,n,r){let i=Yu.join(t,e),s=Yu.join(n,e),{destStat:o}=Fu.checkPathsSync(i,s,"copy");return Rk(o,i,s,r)}function Xie(e,t,n,r){let i=se.readlinkSync(t);if(r.dereference&&(i=Yu.resolve(process.cwd(),i)),e){let s;try{s=se.readlinkSync(n)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return se.symlinkSync(i,n);throw o}if(r.dereference&&(s=Yu.resolve(process.cwd(),s)),Fu.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(se.statSync(n).isDirectory()&&Fu.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return Jie(i,n)}else return se.symlinkSync(i,n)}function Jie(e,t){return se.unlinkSync(t),se.symlinkSync(e,t)}Nk.exports=wie});var $b=g((cwe,Hk)=>{"use strict";Hk.exports={copySync:Tk()}});var qn=g((uwe,Vk)=>{"use strict";var Die=Et().fromPromise,kk=Xb();function Oie(e){return kk.access(e).then(()=>!0).catch(()=>!1)}Vk.exports={pathExists:Die(Oie),pathExistsSync:kk.existsSync}});var Kk=g((lwe,Uk)=>{"use strict";var qe=N(),xu=require("path"),Uie=Ut().mkdirs,Kie=qn().pathExists,Lie=Pb().utimesMillis,Xu=Vu();function Mie(e,t,n,r){typeof n=="function"&&!r?(r=n,n={}):typeof n=="function"&&(n={filter:n}),r=r||function(){},n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),Xu.checkPaths(e,t,"copy",(i,s)=>{if(i)return r(i);let{srcStat:o,destStat:a}=s;Xu.checkParentPaths(e,o,t,"copy",c=>c?r(c):n.filter?xk(Yk,a,e,t,n,r):Yk(a,e,t,n,r))})}function Yk(e,t,n,r,i){let s=xu.dirname(n);Kie(s,(o,a)=>{if(o)return i(o);if(a)return eA(e,t,n,r,i);Uie(s,c=>c?i(c):eA(e,t,n,r,i))})}function xk(e,t,n,r,i,s){Promise.resolve(i.filter(n,r)).then(o=>o?e(t,n,r,i,s):s(),o=>s(o))}function eA(e,t,n,r,i){return r.filter?xk(Fk,e,t,n,r,i):Fk(e,t,n,r,i)}function Fk(e,t,n,r,i){(r.dereference?qe.stat:qe.lstat)(t,(o,a)=>{if(o)return i(o);if(a.isDirectory())return jie(a,e,t,n,r,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return qie(a,e,t,n,r,i);if(a.isSymbolicLink())return ese(e,t,n,r,i)})}function qie(e,t,n,r,i,s){return t?Pie(e,n,r,i,s):Xk(e,n,r,i,s)}function Pie(e,t,n,r,i){if(r.overwrite)qe.unlink(n,s=>s?i(s):Xk(e,t,n,r,i));else return r.errorOnExist?i(new Error(`'${n}' already exists`)):i()}function Xk(e,t,n,r,i){return typeof qe.copyFile=="function"?qe.copyFile(t,n,s=>s?i(s):Jk(e,n,r,i)):zie(e,t,n,r,i)}function zie(e,t,n,r,i){let s=qe.createReadStream(t);s.on("error",o=>i(o)).once("open",()=>{let o=qe.createWriteStream(n,{mode:e.mode});o.on("error",a=>i(a)).on("open",()=>s.pipe(o)).once("close",()=>Jk(e,n,r,i))})}function Jk(e,t,n,r){qe.chmod(t,e.mode,i=>i?r(i):n.preserveTimestamps?Lie(t,e.atime,e.mtime,r):r())}function jie(e,t,n,r,i,s){return t?t&&!t.isDirectory()?s(new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`)):Dk(n,r,i,s):Qie(e,n,r,i,s)}function Qie(e,t,n,r,i){qe.mkdir(n,s=>{if(s)return i(s);Dk(t,n,r,o=>o?i(o):qe.chmod(n,e.mode,i))})}function Dk(e,t,n,r){qe.readdir(e,(i,s)=>i?r(i):Ok(s,e,t,n,r))}function Ok(e,t,n,r,i){let s=e.pop();return s?$ie(e,s,t,n,r,i):i()}function $ie(e,t,n,r,i,s){let o=xu.join(n,t),a=xu.join(r,t);Xu.checkPaths(o,a,"copy",(c,u)=>{if(c)return s(c);let{destStat:l}=u;eA(l,o,a,i,d=>d?s(d):Ok(e,n,r,i,s))})}function ese(e,t,n,r,i){qe.readlink(t,(s,o)=>{if(s)return i(s);if(r.dereference&&(o=xu.resolve(process.cwd(),o)),e)qe.readlink(n,(a,c)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?qe.symlink(o,n,i):i(a):(r.dereference&&(c=xu.resolve(process.cwd(),c)),Xu.isSrcSubdir(o,c)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${c}'.`)):e.isDirectory()&&Xu.isSrcSubdir(c,o)?i(new Error(`Cannot overwrite '${c}' with '${o}'.`)):tse(o,n,i)));else return qe.symlink(o,n,i)})}function tse(e,t,n){qe.unlink(t,r=>r?n(r):qe.symlink(e,t,n))}Uk.exports=Mie});var tA=g((dwe,Lk)=>{"use strict";var nse=Et().fromCallback;Lk.exports={copy:nse(Kk())}});var tV=g((gwe,eV)=>{"use strict";var Mk=N(),jk=require("path"),z=require("assert"),Ju=process.platform==="win32";function Qk(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{e[n]=e[n]||Mk[n],n=n+"Sync",e[n]=e[n]||Mk[n]}),e.maxBusyTries=e.maxBusyTries||3}function nA(e,t,n){let r=0;typeof t=="function"&&(n=t,t={}),z(e,"rimraf: missing path"),z.strictEqual(typeof e,"string","rimraf: path should be a string"),z.strictEqual(typeof n,"function","rimraf: callback function required"),z(t,"rimraf: invalid options argument provided"),z.strictEqual(typeof t,"object","rimraf: options should be object"),Qk(t),qk(e,t,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&r<t.maxBusyTries){r++;let o=r*100;return setTimeout(()=>qk(e,t,i),o)}s.code==="ENOENT"&&(s=null)}n(s)})}function qk(e,t,n){z(e),z(t),z(typeof n=="function"),t.lstat(e,(r,i)=>{if(r&&r.code==="ENOENT")return n(null);if(r&&r.code==="EPERM"&&Ju)return Pk(e,t,r,n);if(i&&i.isDirectory())return Gp(e,t,r,n);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return n(null);if(s.code==="EPERM")return Ju?Pk(e,t,s,n):Gp(e,t,s,n);if(s.code==="EISDIR")return Gp(e,t,s,n)}return n(s)})})}function Pk(e,t,n,r){z(e),z(t),z(typeof r=="function"),n&&z(n instanceof Error),t.chmod(e,438,i=>{i?r(i.code==="ENOENT"?null:n):t.stat(e,(s,o)=>{s?r(s.code==="ENOENT"?null:n):o.isDirectory()?Gp(e,t,n,r):t.unlink(e,r)})})}function zk(e,t,n){let r;z(e),z(t),n&&z(n instanceof Error);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw n}try{r=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw n}r.isDirectory()?Bp(e,t,n):t.unlinkSync(e)}function Gp(e,t,n,r){z(e),z(t),n&&z(n instanceof Error),z(typeof r=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?rse(e,t,r):i&&i.code==="ENOTDIR"?r(n):r(i)})}function rse(e,t,n){z(e),z(t),z(typeof n=="function"),t.readdir(e,(r,i)=>{if(r)return n(r);let s=i.length,o;if(s===0)return t.rmdir(e,n);i.forEach(a=>{nA(jk.join(e,a),t,c=>{if(!o){if(c)return n(o=c);--s===0&&t.rmdir(e,n)}})})})}function $k(e,t){let n;t=t||{},Qk(t),z(e,"rimraf: missing path"),z.strictEqual(typeof e,"string","rimraf: path should be a string"),z(t,"rimraf: missing options"),z.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&Ju&&zk(e,t,r)}try{n&&n.isDirectory()?Bp(e,t,null):t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return Ju?zk(e,t,r):Bp(e,t,r);if(r.code!=="EISDIR")throw r;Bp(e,t,r)}}function Bp(e,t,n){z(e),z(t),n&&z(n instanceof Error);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR")throw n;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")ise(e,t);else if(r.code!=="ENOENT")throw r}}function ise(e,t){if(z(e),z(t),t.readdirSync(e).forEach(n=>$k(jk.join(e,n),t)),Ju){let n=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-n<500)}else return t.rmdirSync(e,t)}eV.exports=nA;nA.sync=$k});var Du=g((pwe,rV)=>{"use strict";var sse=Et().fromCallback,nV=tV();rV.exports={remove:sse(nV),removeSync:nV.sync}});var dV=g((mwe,lV)=>{"use strict";var ose=Et().fromCallback,oV=N(),aV=require("path"),cV=Ut(),uV=Du(),iV=ose(function(t,n){n=n||function(){},oV.readdir(t,(r,i)=>{if(r)return cV.mkdirs(t,n);i=i.map(o=>aV.join(t,o)),s();function s(){let o=i.pop();if(!o)return n();uV.remove(o,a=>{if(a)return n(a);s()})}})});function sV(e){let t;try{t=oV.readdirSync(e)}catch{return cV.mkdirsSync(e)}t.forEach(n=>{n=aV.join(e,n),uV.removeSync(n)})}lV.exports={emptyDirSync:sV,emptydirSync:sV,emptyDir:iV,emptydir:iV}});var fV=g((fwe,mV)=>{"use strict";var ase=Et().fromCallback,gV=require("path"),Ou=N(),pV=Ut(),cse=qn().pathExists;function use(e,t){function n(){Ou.writeFile(e,"",r=>{if(r)return t(r);t()})}Ou.stat(e,(r,i)=>{if(!r&&i.isFile())return t();let s=gV.dirname(e);cse(s,(o,a)=>{if(o)return t(o);if(a)return n();pV.mkdirs(s,c=>{if(c)return t(c);n()})})})}function lse(e){let t;try{t=Ou.statSync(e)}catch{}if(t&&t.isFile())return;let n=gV.dirname(e);Ou.existsSync(n)||pV.mkdirsSync(n),Ou.writeFileSync(e,"")}mV.exports={createFile:ase(use),createFileSync:lse}});var bV=g((hwe,yV)=>{"use strict";var dse=Et().fromCallback,IV=require("path"),Xs=N(),CV=Ut(),hV=qn().pathExists;function gse(e,t,n){function r(i,s){Xs.link(i,s,o=>{if(o)return n(o);n(null)})}hV(t,(i,s)=>{if(i)return n(i);if(s)return n(null);Xs.lstat(e,o=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);let a=IV.dirname(t);hV(a,(c,u)=>{if(c)return n(c);if(u)return r(e,t);CV.mkdirs(a,l=>{if(l)return n(l);r(e,t)})})})})}function pse(e,t){if(Xs.existsSync(t))return;try{Xs.lstatSync(e)}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let r=IV.dirname(t);return Xs.existsSync(r)||CV.mkdirsSync(r),Xs.linkSync(e,t)}yV.exports={createLink:dse(gse),createLinkSync:pse}});var _V=g((Iwe,AV)=>{"use strict";var Bi=require("path"),Uu=N(),mse=qn().pathExists;function fse(e,t,n){if(Bi.isAbsolute(e))return Uu.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),n(r)):n(null,{toCwd:e,toDst:e}));{let r=Bi.dirname(t),i=Bi.join(r,e);return mse(i,(s,o)=>s?n(s):o?n(null,{toCwd:i,toDst:e}):Uu.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),n(a)):n(null,{toCwd:e,toDst:Bi.relative(r,e)})))}}function hse(e,t){let n;if(Bi.isAbsolute(e)){if(n=Uu.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let r=Bi.dirname(t),i=Bi.join(r,e);if(n=Uu.existsSync(i),n)return{toCwd:i,toDst:e};if(n=Uu.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Bi.relative(r,e)}}}AV.exports={symlinkPaths:fse,symlinkPathsSync:hse}});var BV=g((Cwe,GV)=>{"use strict";var SV=N();function Ise(e,t,n){if(n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,t)return n(null,t);SV.lstat(e,(r,i)=>{if(r)return n(null,"file");t=i&&i.isDirectory()?"dir":"file",n(null,t)})}function Cse(e,t){let n;if(t)return t;try{n=SV.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}GV.exports={symlinkType:Ise,symlinkTypeSync:Cse}});var NV=g((ywe,wV)=>{"use strict";var yse=Et().fromCallback,ZV=require("path"),ga=N(),EV=Ut(),bse=EV.mkdirs,Ase=EV.mkdirsSync,RV=_V(),_se=RV.symlinkPaths,Sse=RV.symlinkPathsSync,WV=BV(),Gse=WV.symlinkType,Bse=WV.symlinkTypeSync,vV=qn().pathExists;function vse(e,t,n,r){r=typeof n=="function"?n:r,n=typeof n=="function"?!1:n,vV(t,(i,s)=>{if(i)return r(i);if(s)return r(null);_se(e,t,(o,a)=>{if(o)return r(o);e=a.toDst,Gse(a.toCwd,n,(c,u)=>{if(c)return r(c);let l=ZV.dirname(t);vV(l,(d,p)=>{if(d)return r(d);if(p)return ga.symlink(e,t,u,r);bse(l,m=>{if(m)return r(m);ga.symlink(e,t,u,r)})})})})})}function Zse(e,t,n){if(ga.existsSync(t))return;let i=Sse(e,t);e=i.toDst,n=Bse(i.toCwd,n);let s=ZV.dirname(t);return ga.existsSync(s)||Ase(s),ga.symlinkSync(e,t,n)}wV.exports={createSymlink:yse(vse),createSymlinkSync:Zse}});var HV=g((bwe,TV)=>{"use strict";var vp=fV(),Zp=bV(),Ep=NV();TV.exports={createFile:vp.createFile,createFileSync:vp.createFileSync,ensureFile:vp.createFile,ensureFileSync:vp.createFileSync,createLink:Zp.createLink,createLinkSync:Zp.createLinkSync,ensureLink:Zp.createLink,ensureLinkSync:Zp.createLinkSync,createSymlink:Ep.createSymlink,createSymlinkSync:Ep.createSymlinkSync,ensureSymlink:Ep.createSymlink,ensureSymlinkSync:Ep.createSymlinkSync}});var FV=g((Awe,YV)=>{var pa;try{pa=N()}catch{pa=require("fs")}function Ese(e,t,n){n==null&&(n=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var r=t.fs||pa,i=!0;"throws"in t&&(i=t.throws),r.readFile(e,t,function(s,o){if(s)return n(s);o=VV(o);var a;try{a=JSON.parse(o,t?t.reviver:null)}catch(c){return i?(c.message=e+": "+c.message,n(c)):n(null,null)}n(null,a)})}function Rse(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var n=t.fs||pa,r=!0;"throws"in t&&(r=t.throws);try{var i=n.readFileSync(e,t);return i=VV(i),JSON.parse(i,t.reviver)}catch(s){if(r)throw s.message=e+": "+s.message,s;return null}}function kV(e,t){var n,r=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(n=t.spaces),t.EOL&&(r=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,n);return i.replace(/\n/g,r)+r}function Wse(e,t,n,r){r==null&&(r=n,n={}),n=n||{};var i=n.fs||pa,s="";try{s=kV(t,n)}catch(o){r&&r(o,null);return}i.writeFile(e,s,n,r)}function wse(e,t,n){n=n||{};var r=n.fs||pa,i=kV(t,n);return r.writeFileSync(e,i,n)}function VV(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var Nse={readFile:Ese,readFileSync:Rse,writeFile:Wse,writeFileSync:wse};YV.exports=Nse});var Wp=g((_we,XV)=>{"use strict";var xV=Et().fromCallback,Rp=FV();XV.exports={readJson:xV(Rp.readFile),readJsonSync:Rp.readFileSync,writeJson:xV(Rp.writeFile),writeJsonSync:Rp.writeFileSync}});var OV=g((Swe,DV)=>{"use strict";var Tse=require("path"),Hse=Ut(),kse=qn().pathExists,JV=Wp();function Vse(e,t,n,r){typeof n=="function"&&(r=n,n={});let i=Tse.dirname(e);kse(i,(s,o)=>{if(s)return r(s);if(o)return JV.writeJson(e,t,n,r);Hse.mkdirs(i,a=>{if(a)return r(a);JV.writeJson(e,t,n,r)})})}DV.exports=Vse});var KV=g((Gwe,UV)=>{"use strict";var Yse=N(),Fse=require("path"),xse=Ut(),Xse=Wp();function Jse(e,t,n){let r=Fse.dirname(e);Yse.existsSync(r)||xse.mkdirsSync(r),Xse.writeJsonSync(e,t,n)}UV.exports=Jse});var MV=g((Bwe,LV)=>{"use strict";var Dse=Et().fromCallback,gt=Wp();gt.outputJson=Dse(OV());gt.outputJsonSync=KV();gt.outputJSON=gt.outputJson;gt.outputJSONSync=gt.outputJsonSync;gt.writeJSON=gt.writeJson;gt.writeJSONSync=gt.writeJsonSync;gt.readJSON=gt.readJson;gt.readJSONSync=gt.readJsonSync;LV.exports=gt});var $V=g((vwe,QV)=>{"use strict";var zV=N(),Ose=require("path"),Use=$b().copySync,jV=Du().removeSync,Kse=Ut().mkdirpSync,qV=Vu();function Lse(e,t,n){n=n||{};let r=n.overwrite||n.clobber||!1,{srcStat:i}=qV.checkPathsSync(e,t,"move");return qV.checkParentPathsSync(e,i,t,"move"),Kse(Ose.dirname(t)),Mse(e,t,r)}function Mse(e,t,n){if(n)return jV(t),PV(e,t,n);if(zV.existsSync(t))throw new Error("dest already exists.");return PV(e,t,n)}function PV(e,t,n){try{zV.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return qse(e,t,n)}}function qse(e,t,n){return Use(e,t,{overwrite:n,errorOnExist:!0}),jV(e)}QV.exports=Lse});var tY=g((Zwe,eY)=>{"use strict";eY.exports={moveSync:$V()}});var oY=g((Ewe,sY)=>{"use strict";var Pse=N(),zse=require("path"),jse=tA().copy,iY=Du().remove,Qse=Ut().mkdirp,$se=qn().pathExists,nY=Vu();function eoe(e,t,n,r){typeof n=="function"&&(r=n,n={});let i=n.overwrite||n.clobber||!1;nY.checkPaths(e,t,"move",(s,o)=>{if(s)return r(s);let{srcStat:a}=o;nY.checkParentPaths(e,a,t,"move",c=>{if(c)return r(c);Qse(zse.dirname(t),u=>u?r(u):toe(e,t,i,r))})})}function toe(e,t,n,r){if(n)return iY(t,i=>i?r(i):rY(e,t,n,r));$se(t,(i,s)=>i?r(i):s?r(new Error("dest already exists.")):rY(e,t,n,r))}function rY(e,t,n,r){Pse.rename(e,t,i=>i?i.code!=="EXDEV"?r(i):noe(e,t,n,r):r())}function noe(e,t,n,r){jse(e,t,{overwrite:n,errorOnExist:!0},s=>s?r(s):iY(e,r))}sY.exports=eoe});var cY=g((Rwe,aY)=>{"use strict";var roe=Et().fromCallback;aY.exports={move:roe(oY())}});var gY=g((Wwe,dY)=>{"use strict";var ioe=Et().fromCallback,Ku=N(),uY=require("path"),lY=Ut(),soe=qn().pathExists;function ooe(e,t,n,r){typeof n=="function"&&(r=n,n="utf8");let i=uY.dirname(e);soe(i,(s,o)=>{if(s)return r(s);if(o)return Ku.writeFile(e,t,n,r);lY.mkdirs(i,a=>{if(a)return r(a);Ku.writeFile(e,t,n,r)})})}function aoe(e,...t){let n=uY.dirname(e);if(Ku.existsSync(n))return Ku.writeFileSync(e,...t);lY.mkdirsSync(n),Ku.writeFileSync(e,...t)}dY.exports={outputFile:ioe(ooe),outputFileSync:aoe}});var iA=g((wwe,rA)=>{"use strict";rA.exports=Object.assign({},Xb(),$b(),tA(),dV(),HV(),MV(),Ut(),tY(),cY(),gY(),qn(),Du());var pY=require("fs");Object.getOwnPropertyDescriptor(pY,"promises")&&Object.defineProperty(rA.exports,"promises",{get(){return pY.promises}})});var fY=g((Nwe,mY)=>{mY.exports=()=>new Date});var IY=g((Twe,hY)=>{var coe=le()("streamroller:fileNameFormatter"),uoe=require("path"),loe=".gz",doe=".";hY.exports=({file:e,keepFileExt:t,needsIndex:n,alwaysIncludeDate:r,compress:i,fileNameSep:s})=>{let o=s||doe,a=uoe.join(e.dir,e.name),c=m=>m+e.ext,u=(m,f,h)=>(n||!h)&&f?m+o+f:m,l=(m,f,h)=>(f>0||r)&&h?m+o+h:m,d=(m,f)=>f&&i?m+loe:m,p=t?[l,u,c,d]:[c,l,u,d];return({date:m,index:f})=>(coe(`_formatFileName: date=${m}, index=${f}`),p.reduce((h,I)=>I(h,f,m),a))}});var AY=g((Hwe,bY)=>{var Js=le()("streamroller:fileNameParser"),CY=".gz",yY=Cp(),goe=".";bY.exports=({file:e,keepFileExt:t,pattern:n,fileNameSep:r})=>{let i=r||goe,s=(p,m)=>p.endsWith(CY)?(Js("it is gzipped"),m.isCompressed=!0,p.slice(0,-1*CY.length)):p,o="__NOT_MATCHING__",d=[s,t?p=>p.startsWith(e.name)&&p.endsWith(e.ext)?(Js("it starts and ends with the right things"),p.slice(e.name.length+1,-1*e.ext.length)):o:p=>p.startsWith(e.base)?(Js("it starts with the right things"),p.slice(e.base.length+1)):o,n?(p,m)=>{let f=p.split(i),h=f[f.length-1];Js("items: ",f,", indexStr: ",h);let I=p;h!==void 0&&h.match(/^\d+$/)?(I=p.slice(0,-1*(h.length+1)),Js(`dateStr is ${I}`),n&&!I&&(I=h,h="0")):h="0";try{let b=yY.parse(n,I,new Date(0,0));return yY.asString(n,b)!==I?p:(m.index=parseInt(h,10),m.date=I,m.timestamp=b.getTime(),"")}catch(b){return Js(`Problem parsing ${I} as ${n}, error was: `,b),p}}:(p,m)=>p.match(/^\d+$/)?(Js("it has an index"),m.index=parseInt(p,10),""):p];return p=>{let m={filename:p,index:0,isCompressed:!1};return d.reduce((h,I)=>I(h,m),p)?null:m}}});var SY=g((kwe,_Y)=>{var Wt=le()("streamroller:moveAndMaybeCompressFile"),Wr=iA(),poe=require("zlib"),moe=function(e){let t={mode:parseInt("0600",8),compress:!1},n=Object.assign({},t,e);return Wt(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(n)}`),n},foe=async(e,t,n)=>{if(n=moe(n),e===t){Wt("moveAndMaybeCompressFile: source and target are the same, not doing anything");return}if(await Wr.pathExists(e))if(Wt(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${n.compress?"with":"without"} compress`),n.compress)await new Promise((r,i)=>{let s=!1,o=Wr.createWriteStream(t,{mode:n.mode,flags:"wx"}).on("open",()=>{s=!0;let a=Wr.createReadStream(e).on("open",()=>{a.pipe(poe.createGzip()).pipe(o)}).on("error",c=>{Wt(`moveAndMaybeCompressFile: error reading ${e}`,c),o.destroy(c)})}).on("finish",()=>{Wt(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),Wr.unlink(e).then(r).catch(a=>{Wt(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,a),Wr.truncate(e).then(r).catch(c=>{Wt(`moveAndMaybeCompressFile: error truncating ${e}`,c),i(c)})})}).on("error",a=>{s?(Wt(`moveAndMaybeCompressFile: error writing ${t}, deleting`,a),Wr.unlink(t).then(()=>{i(a)}).catch(c=>{Wt(`moveAndMaybeCompressFile: error deleting ${t}`,c),i(c)})):(Wt(`moveAndMaybeCompressFile: error creating ${t}`,a),i(a))})}).catch(()=>{});else{Wt(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await Wr.move(e,t,{overwrite:!0})}catch(r){if(Wt(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,r),r.code!=="ENOENT"){Wt("moveAndMaybeCompressFile: trying copy+truncate instead");try{await Wr.copy(e,t,{overwrite:!0}),await Wr.truncate(e)}catch(i){Wt("moveAndMaybeCompressFile: error copy+truncate",i)}}}}};_Y.exports=foe});var Tp=g((Vwe,GY)=>{var Kt=le()("streamroller:RollingFileWriteStream"),Os=iA(),Ds=require("path"),hoe=require("os"),wp=fY(),Np=Cp(),{Writable:Ioe}=require("stream"),Coe=IY(),yoe=AY(),boe=SY(),Aoe=e=>(Kt(`deleteFiles: files to delete: ${e}`),Promise.all(e.map(t=>Os.unlink(t).catch(n=>{Kt(`deleteFiles: error when unlinking ${t}, ignoring. Error was ${n}`)})))),sA=class extends Ioe{constructor(t,n){if(Kt(`constructor: creating RollingFileWriteStream. path=${t}`),typeof t!="string"||t.length===0)throw new Error(`Invalid filename: ${t}`);if(t.endsWith(Ds.sep))throw new Error(`Filename is a directory: ${t}`);t.indexOf(`~${Ds.sep}`)===0&&(t=t.replace("~",hoe.homedir())),super(n),this.options=this._parseOption(n),this.fileObject=Ds.parse(t),this.fileObject.dir===""&&(this.fileObject=Ds.parse(Ds.join(process.cwd(),t))),this.fileFormatter=Coe({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=yoe({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=Np(this.options.pattern,wp())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),Kt(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{let t=Os.statSync(this.filename);this.state.currentSize=t.size,this.options.pattern&&(this.state.currentDate=Np(this.options.pattern,t.mtime))}catch{return}}_parseOption(t){let n={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},r=Object.assign({},n,t);if(!r.maxSize)delete r.maxSize;else if(r.maxSize<=0)throw new Error(`options.maxSize (${r.maxSize}) should be > 0`);if(r.numBackups||r.numBackups===0){if(r.numBackups<0)throw new Error(`options.numBackups (${r.numBackups}) should be >= 0`);if(r.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${r.numBackups}) should be < Number.MAX_SAFE_INTEGER`);r.numToKeep=r.numBackups+1}else if(r.numToKeep<=0)throw new Error(`options.numToKeep (${r.numToKeep}) should be > 0`);return Kt(`_parseOption: creating stream with option=${JSON.stringify(r)}`),r}_final(t){this.currentFileStream.end("",this.options.encoding,t)}_write(t,n,r){this._shouldRoll().then(()=>{Kt(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${t}`),this.currentFileStream.write(t,n,i=>{this.state.currentSize+=t.length,r(i)})})}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(Kt(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==Np(this.options.pattern,wp())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return Kt("_roll: closing the current stream"),new Promise((t,n)=>{this.currentFileStream.end("",this.options.encoding,()=>{this._moveOldFiles().then(t).catch(n)})})}async _moveOldFiles(){let t=await this._getExistingFiles(),n=this.state.currentDate?t.filter(r=>r.date===this.state.currentDate):t;for(let r=n.length;r>=0;r--){Kt(`_moveOldFiles: i = ${r}`);let i=this.fileFormatter({date:this.state.currentDate,index:r}),s=this.fileFormatter({date:this.state.currentDate,index:r+1}),o={compress:this.options.compress&&r===0,mode:this.options.mode};await boe(i,s,o)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?Np(this.options.pattern,wp()):null,Kt(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise((r,i)=>{this.currentFileStream.write("","utf8",()=>{this._clean().then(r).catch(i)})})}async _getExistingFiles(){let t=await Os.readdir(this.fileObject.dir).catch(()=>[]);Kt(`_getExistingFiles: files=${t}`);let n=t.map(i=>this.fileNameParser(i)).filter(i=>i),r=i=>(i.timestamp?i.timestamp:wp().getTime())-i.index;return n.sort((i,s)=>r(i)-r(s)),n}_renewWriteStream(){let t=this.fileFormatter({date:this.state.currentDate,index:0}),n=s=>{try{return Os.mkdirSync(s,{recursive:!0})}catch(o){if(o.code==="ENOENT")return n(Ds.dirname(s)),n(s);if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(Os.statSync(s).isDirectory())return s;throw o}catch{throw o}}};n(this.fileObject.dir);let r={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode},i=function(s,o,a){return s[a]=s[o],delete s[o],s};Os.appendFileSync(t,"",i({...r},"flags","flag")),this.currentFileStream=Os.createWriteStream(t,r),this.currentFileStream.on("error",s=>{this.emit("error",s)})}async _clean(){let t=await this._getExistingFiles();if(Kt(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${t.length}`),Kt("_clean: existing files are: ",t),this._tooManyFiles(t.length)){let n=t.slice(0,t.length-this.options.numToKeep).map(r=>Ds.format({dir:this.fileObject.dir,base:r.filename}));await Aoe(n)}}_tooManyFiles(t){return this.options.numToKeep>0&&t>this.options.numToKeep}};GY.exports=sA});var vY=g((Ywe,BY)=>{var _oe=Tp(),oA=class extends _oe{constructor(t,n,r,i){i||(i={}),n&&(i.maxSize=n),!i.numBackups&&i.numBackups!==0&&(!r&&r!==0&&(r=1),i.numBackups=r),super(t,i),this.backups=i.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}};BY.exports=oA});var EY=g((Fwe,ZY)=>{var Soe=Tp(),aA=class extends Soe{constructor(t,n,r){n&&typeof n=="object"&&(r=n,n=null),r||(r={}),n||(n="yyyy-MM-dd"),r.pattern=n,!r.numBackups&&r.numBackups!==0?(!r.daysToKeep&&r.daysToKeep!==0?r.daysToKeep=1:process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"),r.numBackups=r.daysToKeep):r.daysToKeep=r.numBackups,super(t,r),this.mode=this.options.mode}get theStream(){return this.currentFileStream}};ZY.exports=aA});var cA=g((xwe,RY)=>{RY.exports={RollingFileWriteStream:Tp(),RollingFileStream:vY(),DateRollingFileStream:EY()}});var HY=g((Xwe,TY)=>{var WY=le()("log4js:file"),uA=require("path"),Goe=cA(),NY=require("os"),Boe=NY.EOL,Hp=!1,kp=new Set;function wY(){kp.forEach(e=>{e.sighupHandler()})}function voe(e,t,n,r,i,s){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(uA.sep))throw new Error(`Filename is a directory: ${e}`);e.indexOf(`~${uA.sep}`)===0&&(e=e.replace("~",NY.homedir())),e=uA.normalize(e),r=!r&&r!==0?5:r,WY("Creating file appender (",e,", ",n,", ",r,", ",i,", ",s,")");function o(u,l,d,p){let m=new Goe.RollingFileStream(u,l,d,p);return m.on("error",f=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",u,f)}),m.on("drain",()=>{process.emit("log4js:pause",!1)}),m}let a=o(e,n,r,i),c=function(u){if(!!a.writable){if(i.removeColor===!0){let l=/\x1b[[0-9;]*m/g;u.data=u.data.map(d=>typeof d=="string"?d.replace(l,""):d)}a.write(t(u,s)+Boe,"utf8")||process.emit("log4js:pause",!0)}};return c.reopen=function(){a.end(()=>{a=o(e,n,r,i)})},c.sighupHandler=function(){WY("SIGHUP handler called."),c.reopen()},c.shutdown=function(u){kp.delete(c),kp.size===0&&Hp&&(process.removeListener("SIGHUP",wY),Hp=!1),a.end("","utf-8",u)},kp.add(c),Hp||(process.on("SIGHUP",wY),Hp=!0),c}function Zoe(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,voe(e.filename,n,e.maxLogSize,e.backups,e,e.timezoneOffset)}TY.exports.configure=Zoe});var VY=g((Jwe,kY)=>{var Eoe=cA(),Roe=require("os"),Woe=Roe.EOL;function woe(e,t,n){let r=new Eoe.DateRollingFileStream(e,t,n);return r.on("error",i=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,i)}),r.on("drain",()=>{process.emit("log4js:pause",!1)}),r}function Noe(e,t,n,r,i){r.maxSize=r.maxLogSize;let s=woe(e,t,r),o=function(a){!s.writable||s.write(n(a,i)+Woe,"utf8")||process.emit("log4js:pause",!0)};return o.shutdown=function(a){s.end("","utf-8",a)},o}function Toe(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,Noe(e.filename,e.pattern,n,e,e.timezoneOffset)}kY.exports.configure=Toe});var XY=g((Dwe,xY)=>{var wr=le()("log4js:fileSync"),zn=require("path"),Pn=require("fs"),YY=require("os"),Hoe=YY.EOL;function FY(e,t){let n=r=>{try{return Pn.mkdirSync(r,{recursive:!0})}catch(i){if(i.code==="ENOENT")return n(zn.dirname(r)),n(r);if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(Pn.statSync(r).isDirectory())return r;throw i}catch{throw i}}};n(zn.dirname(e)),Pn.appendFileSync(e,"",{mode:t.mode,flag:t.flags})}var lA=class{constructor(t,n,r,i){if(wr("In RollingFileStream"),n<0)throw new Error(`maxLogSize (${n}) should be > 0`);this.filename=t,this.size=n,this.backups=r,this.options=i,this.currentSize=0;function s(o){let a=0;try{a=Pn.statSync(o).size}catch{FY(o,i)}return a}this.currentSize=s(this.filename)}shouldRoll(){return wr("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(t){let n=this,r=new RegExp(`^${zn.basename(t)}`);function i(u){return r.test(u)}function s(u){return parseInt(u.slice(`${zn.basename(t)}.`.length),10)||0}function o(u,l){return s(u)-s(l)}function a(u){let l=s(u);if(wr(`Index of ${u} is ${l}`),n.backups===0)Pn.truncateSync(t,0);else if(l<n.backups){try{Pn.unlinkSync(`${t}.${l+1}`)}catch{}wr(`Renaming ${u} -> ${t}.${l+1}`),Pn.renameSync(zn.join(zn.dirname(t),u),`${t}.${l+1}`)}}function c(){wr("Renaming the old files"),Pn.readdirSync(zn.dirname(t)).filter(i).sort(o).reverse().forEach(a)}wr("Rolling, rolling, rolling"),c()}write(t,n){let r=this;function i(){wr("writing the chunk to the file"),r.currentSize+=t.length,Pn.appendFileSync(r.filename,t)}wr("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),i()}};function koe(e,t,n,r,i,s){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(zn.sep))throw new Error(`Filename is a directory: ${e}`);e.indexOf(`~${zn.sep}`)===0&&(e=e.replace("~",YY.homedir())),e=zn.normalize(e),r=!r&&r!==0?5:r,wr("Creating fileSync appender (",e,", ",n,", ",r,", ",i,", ",s,")");function o(c,u,l){let d;return u?d=new lA(c,u,l,i):d=(p=>(FY(p,i),{write(m){Pn.appendFileSync(p,m)}}))(c),d}let a=o(e,n,r);return c=>{a.write(t(c,s)+Hoe)}}function Voe(e,t){let n=t.basicLayout;e.layout&&(n=t.layout(e.layout.type,e.layout));let r={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return koe(e.filename,n,e.maxLogSize,e.backups,r,e.timezoneOffset)}xY.exports.configure=Voe});var DY=g((Owe,JY)=>{var jn=le()("log4js:tcp"),Yoe=require("net");function Foe(e,t){let n=!1,r=[],i,s=3,o="__LOG4JS__";function a(d){jn("Writing log event to socket"),n=i.write(`${t(d)}${o}`,"utf8")}function c(){let d;for(jn("emptying buffer");d=r.shift();)a(d)}function u(){jn(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),o=`${e.endMsg||"__LOG4JS__"}`,i=Yoe.createConnection(e.port||5e3,e.host||"localhost"),i.on("connect",()=>{jn("socket connected"),c(),n=!0}),i.on("drain",()=>{jn("drain event received, emptying buffer"),n=!0,c()}),i.on("timeout",i.end.bind(i)),i.on("error",d=>{jn("connection error",d),n=!1,c()}),i.on("close",u)}u();function l(d){n?a(d):(jn("buffering log event because it cannot write at the moment"),r.push(d))}return l.shutdown=function(d){jn("shutdown called"),r.length&&s?(jn("buffer has items, waiting 100ms to empty"),s-=1,setTimeout(()=>{l.shutdown(d)},100)):(i.removeAllListeners("close"),i.end(d))},l}function xoe(e,t){jn(`configure with config = ${e}`);let n=function(r){return r.serialise()};return e.layout&&(n=t.layout(e.layout.type,e.layout)),Foe(e,n)}JY.exports.configure=xoe});var pA=g((Uwe,gA)=>{var dA=require("path"),vi=le()("log4js:appenders"),dn=Vs(),OY=_p(),Xoe=Fs(),Joe=Tb(),Doe=zH(),Zn=new Map;Zn.set("console",QH());Zn.set("stdout",ek());Zn.set("stderr",nk());Zn.set("logLevelFilter",ik());Zn.set("categoryFilter",ak());Zn.set("noLogFilter",lk());Zn.set("file",HY());Zn.set("dateFile",VY());Zn.set("fileSync",XY());Zn.set("tcp",DY());var Lu=new Map,Vp=(e,t)=>{let n;try{let r=`${e}.cjs`;n=require.resolve(r),vi("Loading module from ",r)}catch{n=e,vi("Loading module from ",e)}try{return require(n)}catch(r){dn.throwExceptionIf(t,r.code!=="MODULE_NOT_FOUND",`appender "${e}" could not be loaded (error was: ${r})`);return}},Ooe=(e,t)=>Zn.get(e)||Vp(`./${e}`,t)||Vp(e,t)||require.main&&require.main.filename&&Vp(dA.join(dA.dirname(require.main.filename),e),t)||Vp(dA.join(process.cwd(),e),t),Yp=new Set,UY=(e,t)=>{if(Lu.has(e))return Lu.get(e);if(!t.appenders[e])return!1;if(Yp.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);Yp.add(e),vi(`Creating appender ${e}`);let n=Uoe(e,t);return Yp.delete(e),Lu.set(e,n),n},Uoe=(e,t)=>{let n=t.appenders[e],r=n.type.configure?n.type:Ooe(n.type,t);return dn.throwExceptionIf(t,dn.not(r),`appender "${e}" is not valid (type "${n.type}" could not be found)`),r.appender&&(process.emitWarning(`Appender ${n.type} exports an appender function.`,"DeprecationWarning","log4js-node-DEP0001"),vi("[log4js-node-DEP0001]",`DEPRECATION: Appender ${n.type} exports an appender function.`)),r.shutdown&&(process.emitWarning(`Appender ${n.type} exports a shutdown function.`,"DeprecationWarning","log4js-node-DEP0002"),vi("[log4js-node-DEP0002]",`DEPRECATION: Appender ${n.type} exports a shutdown function.`)),vi(`${e}: clustering.isMaster ? ${OY.isMaster()}`),vi(`${e}: appenderModule is ${require("util").inspect(r)}`),OY.onlyOnMaster(()=>(vi(`calling appenderModule.configure for ${e} / ${n.type}`),r.configure(Doe.modifyConfig(n),Joe,i=>UY(i,t),Xoe)),()=>{})},KY=e=>{if(Lu.clear(),Yp.clear(),!e)return;let t=[];Object.values(e.categories).forEach(n=>{t.push(...n.appenders)}),Object.keys(e.appenders).forEach(n=>{(t.includes(n)||e.appenders[n].type==="tcp-server"||e.appenders[n].type==="multiprocess")&&UY(n,e)})},LY=()=>{KY()};LY();dn.addListener(e=>{dn.throwExceptionIf(e,dn.not(dn.anObject(e.appenders)),'must have a property "appenders" of type object.');let t=Object.keys(e.appenders);dn.throwExceptionIf(e,dn.not(t.length),"must define at least one appender."),t.forEach(n=>{dn.throwExceptionIf(e,dn.not(e.appenders[n].type),`appender "${n}" is not valid (must be an object with property "type")`)})});dn.addListener(KY);gA.exports=Lu;gA.exports.init=LY});var hA=g((Kwe,Fp)=>{var Mu=le()("log4js:categories"),de=Vs(),mA=Fs(),MY=pA(),Zi=new Map;function qY(e,t,n){if(t.inherit===!1)return;let r=n.lastIndexOf(".");if(r<0)return;let i=n.slice(0,r),s=e.categories[i];s||(s={inherit:!0,appenders:[]}),qY(e,s,i),!e.categories[i]&&s.appenders&&s.appenders.length&&s.level&&(e.categories[i]=s),t.appenders=t.appenders||[],t.level=t.level||s.level,s.appenders.forEach(o=>{t.appenders.includes(o)||t.appenders.push(o)}),t.parent=s}function Koe(e){if(!e.categories)return;Object.keys(e.categories).forEach(n=>{let r=e.categories[n];qY(e,r,n)})}de.addPreProcessingListener(e=>Koe(e));de.addListener(e=>{de.throwExceptionIf(e,de.not(de.anObject(e.categories)),'must have a property "categories" of type object.');let t=Object.keys(e.categories);de.throwExceptionIf(e,de.not(t.length),"must define at least one category."),t.forEach(n=>{let r=e.categories[n];de.throwExceptionIf(e,[de.not(r.appenders),de.not(r.level)],`category "${n}" is not valid (must be an object with properties "appenders" and "level")`),de.throwExceptionIf(e,de.not(Array.isArray(r.appenders)),`category "${n}" is not valid (appenders must be an array of appender names)`),de.throwExceptionIf(e,de.not(r.appenders.length),`category "${n}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(r,"enableCallStack")&&de.throwExceptionIf(e,typeof r.enableCallStack!="boolean",`category "${n}" is not valid (enableCallStack must be boolean type)`),r.appenders.forEach(i=>{de.throwExceptionIf(e,de.not(MY.get(i)),`category "${n}" is not valid (appender "${i}" is not defined)`)}),de.throwExceptionIf(e,de.not(mA.getLevel(r.level)),`category "${n}" is not valid (level "${r.level}" not recognised; valid levels are ${mA.levels.join(", ")})`)}),de.throwExceptionIf(e,de.not(e.categories.default),'must define a "default" category.')});var fA=e=>{if(Zi.clear(),!e)return;Object.keys(e.categories).forEach(n=>{let r=e.categories[n],i=[];r.appenders.forEach(s=>{i.push(MY.get(s)),Mu(`Creating category ${n}`),Zi.set(n,{appenders:i,level:mA.getLevel(r.level),enableCallStack:r.enableCallStack||!1})})})},PY=()=>{fA()};PY();de.addListener(fA);var ma=e=>{if(Mu(`configForCategory: searching for config for ${e}`),Zi.has(e))return Mu(`configForCategory: ${e} exists in config, returning it`),Zi.get(e);let t;return e.indexOf(".")>0?(Mu(`configForCategory: ${e} has hierarchy, cloning from parents`),t={...ma(e.slice(0,e.lastIndexOf(".")))}):(Zi.has("default")||fA({categories:{default:{appenders:["out"],level:"OFF"}}}),Mu("configForCategory: cloning default category"),t={...Zi.get("default")}),Zi.set(e,t),t},Loe=e=>ma(e).appenders,Moe=e=>ma(e).level,qoe=(e,t)=>{ma(e).level=t},Poe=e=>ma(e).enableCallStack===!0,zoe=(e,t)=>{ma(e).enableCallStack=t};Fp.exports=Zi;Fp.exports=Object.assign(Fp.exports,{appendersForCategory:Loe,getLevelForCategory:Moe,setLevelForCategory:qoe,getEnableCallStackForCategory:Poe,setEnableCallStackForCategory:zoe,init:PY})});var nF=g((Lwe,tF)=>{var zY=le()("log4js:logger"),joe=kb(),Qn=Fs(),Qoe=_p(),xp=hA(),QY=Vs(),$oe=/^(?:\s*)at (?:(.+) \()?(?:([^(]+?):(\d+):(\d+))\)?$/,IA=1,$Y=3;function jY(e,t=$Y+IA){try{let n=e.stack.split(`
`).slice(t);if(!n.length)return null;let r=$oe.exec(n[0]);if(r&&r.length===5){let i="",s="",o="";return r[1]&&r[1]!==""&&([s,o]=r[1].replace(/[[\]]/g,"").split(" as "),o=o||"",s.includes(".")&&([i,s]=s.split("."))),{fileName:r[2],lineNumber:parseInt(r[3],10),columnNumber:parseInt(r[4],10),callStack:n.join(`
`),className:i,functionName:s,functionAlias:o,callerName:r[1]||""}}else console.error("log4js.logger - defaultParseCallStack error")}catch(n){console.error("log4js.logger - defaultParseCallStack error",n)}return null}var qu=class{constructor(t){if(!t)throw new Error("No category provided.");this.category=t,this.context={},this.callStackSkipIndex=0,this.parseCallStack=jY,zY(`Logger created (${this.category}, ${this.level})`)}get level(){return Qn.getLevel(xp.getLevelForCategory(this.category),Qn.OFF)}set level(t){xp.setLevelForCategory(this.category,Qn.getLevel(t,this.level))}get useCallStack(){return xp.getEnableCallStackForCategory(this.category)}set useCallStack(t){xp.setEnableCallStackForCategory(this.category,t===!0)}get callStackLinesToSkip(){return this.callStackSkipIndex}set callStackLinesToSkip(t){if(typeof t!="number")throw new TypeError("Must be a number");if(t<0)throw new RangeError("Must be >= 0");this.callStackSkipIndex=t}log(t,...n){let r=Qn.getLevel(t);r?this.isLevelEnabled(r)&&this._log(r,n):QY.validIdentifier(t)&&n.length>0?(this.log(Qn.WARN,"log4js:logger.log: valid log-level not found as first parameter given:",t),this.log(Qn.INFO,`[${t}]`,...n)):this.log(Qn.INFO,t,...n)}isLevelEnabled(t){return this.level.isLessThanOrEqualTo(t)}_log(t,n){zY(`sending log data (${t}) to appenders`);let r=n.find(o=>o instanceof Error),i;if(this.useCallStack){try{r&&(i=this.parseCallStack(r,this.callStackSkipIndex+IA))}catch{}i=i||this.parseCallStack(new Error,this.callStackSkipIndex+$Y+IA)}let s=new joe(this.category,t,n,this.context,i,r);Qoe.send(s)}addContext(t,n){this.context[t]=n}removeContext(t){delete this.context[t]}clearContext(){this.context={}}setParseCallStackFunction(t){if(typeof t=="function")this.parseCallStack=t;else if(typeof t>"u")this.parseCallStack=jY;else throw new TypeError("Invalid type passed to setParseCallStackFunction")}};function eF(e){let t=Qn.getLevel(e),r=t.toString().toLowerCase().replace(/_([a-z])/g,s=>s[1].toUpperCase()),i=r[0].toUpperCase()+r.slice(1);qu.prototype[`is${i}Enabled`]=function(){return this.isLevelEnabled(t)},qu.prototype[r]=function(...s){this.log(t,...s)}}Qn.levels.forEach(eF);QY.addListener(()=>{Qn.levels.forEach(eF)});tF.exports=qu});var sF=g((Mwe,iF)=>{var fa=Fs(),eae=':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';function tae(e){return e.originalUrl||e.url}function nae(e,t,n){let r=s=>{let o=s.concat();for(let a=0;a<o.length;++a)for(let c=a+1;c<o.length;++c)o[a].token==o[c].token&&o.splice(c--,1);return o},i=[];return i.push({token:":url",replacement:tae(e)}),i.push({token:":protocol",replacement:e.protocol}),i.push({token:":hostname",replacement:e.hostname}),i.push({token:":method",replacement:e.method}),i.push({token:":status",replacement:t.__statusCode||t.statusCode}),i.push({token:":response-time",replacement:t.responseTime}),i.push({token:":date",replacement:new Date().toUTCString()}),i.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),i.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),i.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),i.push({token:":user-agent",replacement:e.headers["user-agent"]}),i.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),i.push({token:/:req\[([^\]]+)]/g,replacement(s,o){return e.headers[o.toLowerCase()]}}),i.push({token:/:res\[([^\]]+)]/g,replacement(s,o){return t.getHeader(o.toLowerCase())||t.__headers&&t.__headers[o]}}),r(n.concat(i))}function rF(e,t){for(let n=0;n<t.length;n++)e=e.replace(t[n].token,t[n].replacement);return e}function rae(e){let t=null;if(e instanceof RegExp&&(t=e),typeof e=="string"&&(t=new RegExp(e)),Array.isArray(e)){let n=e.map(r=>r.source?r.source:r);t=new RegExp(n.join("|"))}return t}function iae(e,t,n){let r=t;if(n){let i=n.find(s=>{let o=!1;return s.from&&s.to?o=e>=s.from&&e<=s.to:o=s.codes.indexOf(e)!==-1,o});i&&(r=fa.getLevel(i.level,r))}return r}iF.exports=function(t,n){typeof n=="string"||typeof n=="function"?n={format:n}:n=n||{};let r=t,i=fa.getLevel(n.level,fa.INFO),s=n.format||eae;return(o,a,c)=>{if(typeof o._logging<"u")return c();if(typeof n.nolog!="function"){let u=rae(n.nolog);if(u&&u.test(o.originalUrl))return c()}if(r.isLevelEnabled(i)||n.level==="auto"){let u=new Date,{writeHead:l}=a;o._logging=!0,a.writeHead=(m,f)=>{a.writeHead=l,a.writeHead(m,f),a.__statusCode=m,a.__headers=f||{}};let d=!1,p=()=>{if(d)return;if(d=!0,typeof n.nolog=="function"&&n.nolog(o,a)===!0){o._logging=!1;return}a.responseTime=new Date-u,a.statusCode&&n.level==="auto"&&(i=fa.INFO,a.statusCode>=300&&(i=fa.WARN),a.statusCode>=400&&(i=fa.ERROR)),i=iae(a.statusCode,i,n.statusRules);let m=nae(o,a,n.tokens||[]);if(n.context&&r.addContext("res",a),typeof s=="function"){let f=s(o,a,h=>rF(h,m));f&&r.log(i,f)}else r.log(i,rF(s,m));n.context&&r.removeContext("res")};a.on("end",p),a.on("finish",p),a.on("error",p),a.on("close",p)}return c()}}});var lF=g((qwe,uF)=>{var oF=le()("log4js:recording"),Xp=[];function sae(){return function(e){oF(`received logEvent, number of events now ${Xp.length+1}`),oF("log event was ",e),Xp.push(e)}}function aF(){return Xp.slice()}function cF(){Xp.length=0}uF.exports={configure:sae,replay:aF,playback:aF,reset:cF,erase:cF}});var IF=g((Pwe,hF)=>{var Ei=le()("log4js:main"),oae=require("fs"),aae=lH()({proto:!0}),cae=Vs(),uae=Tb(),lae=Fs(),dF=pA(),gF=hA(),dae=nF(),gae=_p(),pae=sF(),mae=lF(),ha=!1;function fae(e){if(!ha)return;Ei("Received log event ",e),gF.appendersForCategory(e.categoryName).forEach(n=>{n(e)})}function hae(e){Ei(`Loading configuration from ${e}`);try{return JSON.parse(oae.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}function pF(e){ha&&mF();let t=e;return typeof t=="string"&&(t=hae(e)),Ei(`Configuration is ${t}`),cae.configure(aae(t)),gae.onMessage(fae),ha=!0,fF}function Iae(){return ha}function Cae(){return mae}function mF(e=()=>{}){if(typeof e!="function")throw new TypeError("Invalid callback passed to shutdown");Ei("Shutdown called. Disabling all log writing."),ha=!1;let t=Array.from(dF.values());dF.init(),gF.init();let n=t.reduce((o,a)=>a.shutdown?o+1:o,0);n===0&&(Ei("No appenders with shutdown functions found."),e());let r=0,i;Ei(`Found ${n} appenders with shutdown functions.`);function s(o){i=i||o,r+=1,Ei(`Appender shutdowns complete: ${r} / ${n}`),r>=n&&(Ei("All shutdown functions completed."),e(i))}t.filter(o=>o.shutdown).forEach(o=>o.shutdown(s))}function yae(e){return ha||pF(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new dae(e||"default")}var fF={getLogger:yae,configure:pF,isConfigured:Iae,shutdown:mF,connectLogger:pae,levels:lae,addLayout:uae.addLayout,recording:Cae};hF.exports=fF});var Q=g(CA=>{"use strict";CA.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((n,r)=>{t.push((i,s)=>i!=null?r(i):n(s)),e.apply(this,t)})},"name",{value:e.name})};CA.fromPromise=function(e){return Object.defineProperty(function(...t){let n=t[t.length-1];if(typeof n!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(r=>n(null,r),n)},"name",{value:e.name})}});var mt=g(Nr=>{"use strict";var CF=Q().fromCallback,pt=N(),bae=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof pt[e]=="function");Object.assign(Nr,pt);bae.forEach(e=>{Nr[e]=CF(pt[e])});Nr.exists=function(e,t){return typeof t=="function"?pt.exists(e,t):new Promise(n=>pt.exists(e,n))};Nr.read=function(e,t,n,r,i,s){return typeof s=="function"?pt.read(e,t,n,r,i,s):new Promise((o,a)=>{pt.read(e,t,n,r,i,(c,u,l)=>{if(c)return a(c);o({bytesRead:u,buffer:l})})})};Nr.write=function(e,t,...n){return typeof n[n.length-1]=="function"?pt.write(e,t,...n):new Promise((r,i)=>{pt.write(e,t,...n,(s,o,a)=>{if(s)return i(s);r({bytesWritten:o,buffer:a})})})};Nr.readv=function(e,t,...n){return typeof n[n.length-1]=="function"?pt.readv(e,t,...n):new Promise((r,i)=>{pt.readv(e,t,...n,(s,o,a)=>{if(s)return i(s);r({bytesRead:o,buffers:a})})})};Nr.writev=function(e,t,...n){return typeof n[n.length-1]=="function"?pt.writev(e,t,...n):new Promise((r,i)=>{pt.writev(e,t,...n,(s,o,a)=>{if(s)return i(s);r({bytesWritten:o,buffers:a})})})};typeof pt.realpath.native=="function"?Nr.realpath.native=CF(pt.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var bF=g((Qwe,yF)=>{"use strict";var Aae=require("path");yF.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Aae.parse(t).root,""))){let r=new Error(`Path contains invalid characters: ${t}`);throw r.code="EINVAL",r}}});var GF=g(($we,yA)=>{"use strict";var AF=mt(),{checkPath:_F}=bF(),SF=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};yA.exports.makeDir=async(e,t)=>(_F(e),AF.mkdir(e,{mode:SF(t),recursive:!0}));yA.exports.makeDirSync=(e,t)=>(_F(e),AF.mkdirSync(e,{mode:SF(t),recursive:!0}))});var En=g((eNe,BF)=>{"use strict";var _ae=Q().fromPromise,{makeDir:Sae,makeDirSync:bA}=GF(),AA=_ae(Sae);BF.exports={mkdirs:AA,mkdirsSync:bA,mkdirp:AA,mkdirpSync:bA,ensureDir:AA,ensureDirSync:bA}});var Ri=g((tNe,ZF)=>{"use strict";var Gae=Q().fromPromise,vF=mt();function Bae(e){return vF.access(e).then(()=>!0).catch(()=>!1)}ZF.exports={pathExists:Gae(Bae),pathExistsSync:vF.existsSync}});var _A=g((nNe,EF)=>{"use strict";var Ia=mt(),vae=Q().fromPromise;async function Zae(e,t,n){let r=await Ia.open(e,"r+"),i=null;try{await Ia.futimes(r,t,n)}finally{try{await Ia.close(r)}catch(s){i=s}}if(i)throw i}function Eae(e,t,n){let r=Ia.openSync(e,"r+");return Ia.futimesSync(r,t,n),Ia.closeSync(r)}EF.exports={utimesMillis:vae(Zae),utimesMillisSync:Eae}});var Us=g((rNe,NF)=>{"use strict";var Ca=mt(),Ve=require("path"),RF=Q().fromPromise;function Rae(e,t,n){let r=n.dereference?i=>Ca.stat(i,{bigint:!0}):i=>Ca.lstat(i,{bigint:!0});return Promise.all([r(e),r(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}function Wae(e,t,n){let r,i=n.dereference?o=>Ca.statSync(o,{bigint:!0}):o=>Ca.lstatSync(o,{bigint:!0}),s=i(e);try{r=i(t)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:r}}async function wae(e,t,n,r){let{srcStat:i,destStat:s}=await Rae(e,t,r);if(s){if(Pu(i,s)){let o=Ve.basename(e),a=Ve.basename(t);if(n==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&SA(e,t))throw new Error(Jp(e,t,n));return{srcStat:i,destStat:s}}function Nae(e,t,n,r){let{srcStat:i,destStat:s}=Wae(e,t,r);if(s){if(Pu(i,s)){let o=Ve.basename(e),a=Ve.basename(t);if(n==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&SA(e,t))throw new Error(Jp(e,t,n));return{srcStat:i,destStat:s}}async function WF(e,t,n,r){let i=Ve.resolve(Ve.dirname(e)),s=Ve.resolve(Ve.dirname(n));if(s===i||s===Ve.parse(s).root)return;let o;try{o=await Ca.stat(s,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Pu(t,o))throw new Error(Jp(e,n,r));return WF(e,t,s,r)}function wF(e,t,n,r){let i=Ve.resolve(Ve.dirname(e)),s=Ve.resolve(Ve.dirname(n));if(s===i||s===Ve.parse(s).root)return;let o;try{o=Ca.statSync(s,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Pu(t,o))throw new Error(Jp(e,n,r));return wF(e,t,s,r)}function Pu(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function SA(e,t){let n=Ve.resolve(e).split(Ve.sep).filter(i=>i),r=Ve.resolve(t).split(Ve.sep).filter(i=>i);return n.every((i,s)=>r[s]===i)}function Jp(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}NF.exports={checkPaths:RF(wae),checkPathsSync:Nae,checkParentPaths:RF(WF),checkParentPathsSync:wF,isSrcSubdir:SA,areIdentical:Pu}});var YF=g((iNe,VF)=>{"use strict";var tt=mt(),zu=require("path"),{mkdirs:Tae}=En(),{pathExists:Hae}=Ri(),{utimesMillis:kae}=_A(),ju=Us();async function Vae(e,t,n={}){typeof n=="function"&&(n={filter:n}),n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:r,destStat:i}=await ju.checkPaths(e,t,"copy",n);if(await ju.checkParentPaths(e,r,t,"copy"),!await HF(e,t,n))return;let o=zu.dirname(t);await Hae(o)||await Tae(o),await kF(i,e,t,n)}async function HF(e,t,n){return n.filter?n.filter(e,t):!0}async function kF(e,t,n,r){let s=await(r.dereference?tt.stat:tt.lstat)(t);if(s.isDirectory())return Xae(s,e,t,n,r);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Yae(s,e,t,n,r);if(s.isSymbolicLink())return Jae(e,t,n,r);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function Yae(e,t,n,r,i){if(!t)return TF(e,n,r,i);if(i.overwrite)return await tt.unlink(r),TF(e,n,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}async function TF(e,t,n,r){if(await tt.copyFile(t,n),r.preserveTimestamps){Fae(e.mode)&&await xae(n,e.mode);let i=await tt.stat(t);await kae(n,i.atime,i.mtime)}return tt.chmod(n,e.mode)}function Fae(e){return(e&128)===0}function xae(e,t){return tt.chmod(e,t|128)}async function Xae(e,t,n,r,i){t||await tt.mkdir(r);let s=await tt.readdir(n);await Promise.all(s.map(async o=>{let a=zu.join(n,o),c=zu.join(r,o);if(!await HF(a,c,i))return;let{destStat:l}=await ju.checkPaths(a,c,"copy",i);return kF(l,a,c,i)})),t||await tt.chmod(r,e.mode)}async function Jae(e,t,n,r){let i=await tt.readlink(t);if(r.dereference&&(i=zu.resolve(process.cwd(),i)),!e)return tt.symlink(i,n);let s=null;try{s=await tt.readlink(n)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return tt.symlink(i,n);throw o}if(r.dereference&&(s=zu.resolve(process.cwd(),s)),ju.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(ju.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return await tt.unlink(n),tt.symlink(i,n)}VF.exports=Vae});var DF=g((sNe,JF)=>{"use strict";var ft=N(),Qu=require("path"),Dae=En().mkdirsSync,Oae=_A().utimesMillisSync,$u=Us();function Uae(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:r,destStat:i}=$u.checkPathsSync(e,t,"copy",n);if($u.checkParentPathsSync(e,r,t,"copy"),n.filter&&!n.filter(e,t))return;let s=Qu.dirname(t);return ft.existsSync(s)||Dae(s),FF(i,e,t,n)}function FF(e,t,n,r){let s=(r.dereference?ft.statSync:ft.lstatSync)(t);if(s.isDirectory())return jae(s,e,t,n,r);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Kae(s,e,t,n,r);if(s.isSymbolicLink())return ece(e,t,n,r);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Kae(e,t,n,r,i){return t?Lae(e,n,r,i):xF(e,n,r,i)}function Lae(e,t,n,r){if(r.overwrite)return ft.unlinkSync(n),xF(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}function xF(e,t,n,r){return ft.copyFileSync(t,n),r.preserveTimestamps&&Mae(e.mode,t,n),GA(n,e.mode)}function Mae(e,t,n){return qae(e)&&Pae(n,e),zae(t,n)}function qae(e){return(e&128)===0}function Pae(e,t){return GA(e,t|128)}function GA(e,t){return ft.chmodSync(e,t)}function zae(e,t){let n=ft.statSync(e);return Oae(t,n.atime,n.mtime)}function jae(e,t,n,r,i){return t?XF(n,r,i):Qae(e.mode,n,r,i)}function Qae(e,t,n,r){return ft.mkdirSync(n),XF(t,n,r),GA(n,e)}function XF(e,t,n){ft.readdirSync(e).forEach(r=>$ae(r,e,t,n))}function $ae(e,t,n,r){let i=Qu.join(t,e),s=Qu.join(n,e);if(r.filter&&!r.filter(i,s))return;let{destStat:o}=$u.checkPathsSync(i,s,"copy",r);return FF(o,i,s,r)}function ece(e,t,n,r){let i=ft.readlinkSync(t);if(r.dereference&&(i=Qu.resolve(process.cwd(),i)),e){let s;try{s=ft.readlinkSync(n)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return ft.symlinkSync(i,n);throw o}if(r.dereference&&(s=Qu.resolve(process.cwd(),s)),$u.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if($u.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return tce(i,n)}else return ft.symlinkSync(i,n)}function tce(e,t){return ft.unlinkSync(t),ft.symlinkSync(e,t)}JF.exports=Uae});var Dp=g((oNe,OF)=>{"use strict";var nce=Q().fromPromise;OF.exports={copy:nce(YF()),copySync:DF()}});var el=g((aNe,KF)=>{"use strict";var UF=N(),rce=Q().fromCallback;function ice(e,t){UF.rm(e,{recursive:!0,force:!0},t)}function sce(e){UF.rmSync(e,{recursive:!0,force:!0})}KF.exports={remove:rce(ice),removeSync:sce}});var $F=g((cNe,QF)=>{"use strict";var oce=Q().fromPromise,qF=mt(),PF=require("path"),zF=En(),jF=el(),LF=oce(async function(t){let n;try{n=await qF.readdir(t)}catch{return zF.mkdirs(t)}return Promise.all(n.map(r=>jF.remove(PF.join(t,r))))});function MF(e){let t;try{t=qF.readdirSync(e)}catch{return zF.mkdirsSync(e)}t.forEach(n=>{n=PF.join(e,n),jF.removeSync(n)})}QF.exports={emptyDirSync:MF,emptydirSync:MF,emptyDir:LF,emptydir:LF}});var r2=g((uNe,n2)=>{"use strict";var ace=Q().fromPromise,e2=require("path"),Tr=mt(),t2=En();async function cce(e){let t;try{t=await Tr.stat(e)}catch{}if(t&&t.isFile())return;let n=e2.dirname(e),r=null;try{r=await Tr.stat(n)}catch(i){if(i.code==="ENOENT"){await t2.mkdirs(n),await Tr.writeFile(e,"");return}else throw i}r.isDirectory()?await Tr.writeFile(e,""):await Tr.readdir(n)}function uce(e){let t;try{t=Tr.statSync(e)}catch{}if(t&&t.isFile())return;let n=e2.dirname(e);try{Tr.statSync(n).isDirectory()||Tr.readdirSync(n)}catch(r){if(r&&r.code==="ENOENT")t2.mkdirsSync(n);else throw r}Tr.writeFileSync(e,"")}n2.exports={createFile:ace(cce),createFileSync:uce}});var c2=g((lNe,a2)=>{"use strict";var lce=Q().fromPromise,i2=require("path"),Wi=mt(),s2=En(),{pathExists:dce}=Ri(),{areIdentical:o2}=Us();async function gce(e,t){let n;try{n=await Wi.lstat(t)}catch{}let r;try{r=await Wi.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(n&&o2(r,n))return;let i=i2.dirname(t);await dce(i)||await s2.mkdirs(i),await Wi.link(e,t)}function pce(e,t){let n;try{n=Wi.lstatSync(t)}catch{}try{let s=Wi.lstatSync(e);if(n&&o2(s,n))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let r=i2.dirname(t);return Wi.existsSync(r)||s2.mkdirsSync(r),Wi.linkSync(e,t)}a2.exports={createLink:lce(gce),createLinkSync:pce}});var l2=g((dNe,u2)=>{"use strict";var wi=require("path"),tl=mt(),{pathExists:mce}=Ri(),fce=Q().fromPromise;async function hce(e,t){if(wi.isAbsolute(e)){try{await tl.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:e}}let n=wi.dirname(t),r=wi.join(n,e);if(await mce(r))return{toCwd:r,toDst:e};try{await tl.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:wi.relative(n,e)}}function Ice(e,t){if(wi.isAbsolute(e)){if(!tl.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let n=wi.dirname(t),r=wi.join(n,e);if(tl.existsSync(r))return{toCwd:r,toDst:e};if(!tl.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:wi.relative(n,e)}}u2.exports={symlinkPaths:fce(hce),symlinkPathsSync:Ice}});var p2=g((gNe,g2)=>{"use strict";var d2=mt(),Cce=Q().fromPromise;async function yce(e,t){if(t)return t;let n;try{n=await d2.lstat(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}function bce(e,t){if(t)return t;let n;try{n=d2.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}g2.exports={symlinkType:Cce(yce),symlinkTypeSync:bce}});var I2=g((pNe,h2)=>{"use strict";var Ace=Q().fromPromise,m2=require("path"),$n=mt(),{mkdirs:_ce,mkdirsSync:Sce}=En(),{symlinkPaths:Gce,symlinkPathsSync:Bce}=l2(),{symlinkType:vce,symlinkTypeSync:Zce}=p2(),{pathExists:Ece}=Ri(),{areIdentical:f2}=Us();async function Rce(e,t,n){let r;try{r=await $n.lstat(t)}catch{}if(r&&r.isSymbolicLink()){let[a,c]=await Promise.all([$n.stat(e),$n.stat(t)]);if(f2(a,c))return}let i=await Gce(e,t);e=i.toDst;let s=await vce(i.toCwd,n),o=m2.dirname(t);return await Ece(o)||await _ce(o),$n.symlink(e,t,s)}function Wce(e,t,n){let r;try{r=$n.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){let a=$n.statSync(e),c=$n.statSync(t);if(f2(a,c))return}let i=Bce(e,t);e=i.toDst,n=Zce(i.toCwd,n);let s=m2.dirname(t);return $n.existsSync(s)||Sce(s),$n.symlinkSync(e,t,n)}h2.exports={createSymlink:Ace(Rce),createSymlinkSync:Wce}});var B2=g((mNe,G2)=>{"use strict";var{createFile:C2,createFileSync:y2}=r2(),{createLink:b2,createLinkSync:A2}=c2(),{createSymlink:_2,createSymlinkSync:S2}=I2();G2.exports={createFile:C2,createFileSync:y2,ensureFile:C2,ensureFileSync:y2,createLink:b2,createLinkSync:A2,ensureLink:b2,ensureLinkSync:A2,createSymlink:_2,createSymlinkSync:S2,ensureSymlink:_2,ensureSymlinkSync:S2}});var ya=g((fNe,v2)=>{function wce(e,{EOL:t=`
`,finalEOL:n=!0,replacer:r=null,spaces:i}={}){let s=n?t:"";return JSON.stringify(e,r,i).replace(/\n/g,t)+s}function Nce(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}v2.exports={stringify:wce,stripBom:Nce}});var BA=g((hNe,R2)=>{var ba;try{ba=N()}catch{ba=require("fs")}var Op=Q(),{stringify:Z2,stripBom:E2}=ya();async function Tce(e,t={}){typeof t=="string"&&(t={encoding:t});let n=t.fs||ba,r="throws"in t?t.throws:!0,i=await Op.fromCallback(n.readFile)(e,t);i=E2(i);let s;try{s=JSON.parse(i,t?t.reviver:null)}catch(o){if(r)throw o.message=`${e}: ${o.message}`,o;return null}return s}var Hce=Op.fromPromise(Tce);function kce(e,t={}){typeof t=="string"&&(t={encoding:t});let n=t.fs||ba,r="throws"in t?t.throws:!0;try{let i=n.readFileSync(e,t);return i=E2(i),JSON.parse(i,t.reviver)}catch(i){if(r)throw i.message=`${e}: ${i.message}`,i;return null}}async function Vce(e,t,n={}){let r=n.fs||ba,i=Z2(t,n);await Op.fromCallback(r.writeFile)(e,i,n)}var Yce=Op.fromPromise(Vce);function Fce(e,t,n={}){let r=n.fs||ba,i=Z2(t,n);return r.writeFileSync(e,i,n)}var xce={readFile:Hce,readFileSync:kce,writeFile:Yce,writeFileSync:Fce};R2.exports=xce});var w2=g((INe,W2)=>{"use strict";var Up=BA();W2.exports={readJson:Up.readFile,readJsonSync:Up.readFileSync,writeJson:Up.writeFile,writeJsonSync:Up.writeFileSync}});var Kp=g((CNe,H2)=>{"use strict";var Xce=Q().fromPromise,vA=mt(),N2=require("path"),T2=En(),Jce=Ri().pathExists;async function Dce(e,t,n="utf-8"){let r=N2.dirname(e);return await Jce(r)||await T2.mkdirs(r),vA.writeFile(e,t,n)}function Oce(e,...t){let n=N2.dirname(e);vA.existsSync(n)||T2.mkdirsSync(n),vA.writeFileSync(e,...t)}H2.exports={outputFile:Xce(Dce),outputFileSync:Oce}});var V2=g((yNe,k2)=>{"use strict";var{stringify:Uce}=ya(),{outputFile:Kce}=Kp();async function Lce(e,t,n={}){let r=Uce(t,n);await Kce(e,r,n)}k2.exports=Lce});var F2=g((bNe,Y2)=>{"use strict";var{stringify:Mce}=ya(),{outputFileSync:qce}=Kp();function Pce(e,t,n){let r=Mce(t,n);qce(e,r,n)}Y2.exports=Pce});var X2=g((ANe,x2)=>{"use strict";var zce=Q().fromPromise,ht=w2();ht.outputJson=zce(V2());ht.outputJsonSync=F2();ht.outputJSON=ht.outputJson;ht.outputJSONSync=ht.outputJsonSync;ht.writeJSON=ht.writeJson;ht.writeJSONSync=ht.writeJsonSync;ht.readJSON=ht.readJson;ht.readJSONSync=ht.readJsonSync;x2.exports=ht});var K2=g((_Ne,U2)=>{"use strict";var jce=mt(),J2=require("path"),{copy:Qce}=Dp(),{remove:O2}=el(),{mkdirp:$ce}=En(),{pathExists:eue}=Ri(),D2=Us();async function tue(e,t,n={}){let r=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:s=!1}=await D2.checkPaths(e,t,"move",n);await D2.checkParentPaths(e,i,t,"move");let o=J2.dirname(t);return J2.parse(o).root!==o&&await $ce(o),nue(e,t,r,s)}async function nue(e,t,n,r){if(!r){if(n)await O2(t);else if(await eue(t))throw new Error("dest already exists.")}try{await jce.rename(e,t)}catch(i){if(i.code!=="EXDEV")throw i;await rue(e,t,n)}}async function rue(e,t,n){return await Qce(e,t,{overwrite:n,errorOnExist:!0,preserveTimestamps:!0}),O2(e)}U2.exports=tue});var z2=g((SNe,P2)=>{"use strict";var M2=N(),EA=require("path"),iue=Dp().copySync,q2=el().removeSync,sue=En().mkdirpSync,L2=Us();function oue(e,t,n){n=n||{};let r=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:s=!1}=L2.checkPathsSync(e,t,"move",n);return L2.checkParentPathsSync(e,i,t,"move"),aue(t)||sue(EA.dirname(t)),cue(e,t,r,s)}function aue(e){let t=EA.dirname(e);return EA.parse(t).root===t}function cue(e,t,n,r){if(r)return ZA(e,t,n);if(n)return q2(t),ZA(e,t,n);if(M2.existsSync(t))throw new Error("dest already exists.");return ZA(e,t,n)}function ZA(e,t,n){try{M2.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return uue(e,t,n)}}function uue(e,t,n){return iue(e,t,{overwrite:n,errorOnExist:!0,preserveTimestamps:!0}),q2(e)}P2.exports=oue});var Q2=g((GNe,j2)=>{"use strict";var lue=Q().fromPromise;j2.exports={move:lue(K2()),moveSync:z2()}});var Ks=g((BNe,$2)=>{"use strict";$2.exports={...mt(),...Dp(),...$F(),...B2(),...X2(),...En(),...Q2(),...Kp(),...Ri(),...el()}});var gn=g(Pe=>{Object.defineProperty(Pe,"__esModule",{value:!0});var ex=Object.prototype.toString;function due(e){switch(ex.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Lp(e,Error)}}function Aa(e,t){return ex.call(e)===`[object ${t}]`}function gue(e){return Aa(e,"ErrorEvent")}function pue(e){return Aa(e,"DOMError")}function mue(e){return Aa(e,"DOMException")}function fue(e){return Aa(e,"String")}function hue(e){return e===null||typeof e!="object"&&typeof e!="function"}function tx(e){return Aa(e,"Object")}function Iue(e){return typeof Event<"u"&&Lp(e,Event)}function Cue(e){return typeof Element<"u"&&Lp(e,Element)}function yue(e){return Aa(e,"RegExp")}function bue(e){return Boolean(e&&e.then&&typeof e.then=="function")}function Aue(e){return tx(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function _ue(e){return typeof e=="number"&&e!==e}function Lp(e,t){try{return e instanceof t}catch{return!1}}function Sue(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}Pe.isDOMError=pue;Pe.isDOMException=mue;Pe.isElement=Cue;Pe.isError=due;Pe.isErrorEvent=gue;Pe.isEvent=Iue;Pe.isInstanceOf=Lp;Pe.isNaN=_ue;Pe.isPlainObject=tx;Pe.isPrimitive=hue;Pe.isRegExp=yue;Pe.isString=fue;Pe.isSyntheticEvent=Aue;Pe.isThenable=bue;Pe.isVueViewModel=Sue});var nl=g(Ls=>{Object.defineProperty(Ls,"__esModule",{value:!0});var Mp=gn();function Gue(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Bue(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let i=Math.max(t-60,0);i<5&&(i=0);let s=Math.min(i+140,r);return s>r-5&&(s=r),s===r&&(i=Math.max(s-140,0)),n=n.slice(i,s),i>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function vue(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let i=e[r];try{Mp.isVueViewModel(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function nx(e,t,n=!1){return Mp.isString(e)?Mp.isRegExp(t)?t.test(e):Mp.isString(t)?n?e===t:e.includes(t):!1:!1}function Zue(e,t=[],n=!1){return t.some(r=>nx(e,r,n))}Ls.isMatchingPattern=nx;Ls.safeJoin=vue;Ls.snipLine=Bue;Ls.stringMatchesSomePattern=Zue;Ls.truncate=Gue});var sx=g(wA=>{Object.defineProperty(wA,"__esModule",{value:!0});var RA=gn(),Eue=nl();function Rue(e,t,n=250,r,i,s,o){if(!s.exception||!s.exception.values||!o||!RA.isInstanceOf(o.originalException,Error))return;let a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=Wue(WA(e,t,i,o.originalException,r,s.exception.values,a,0),n))}function WA(e,t,n,r,i,s,o,a){if(s.length>=n+1)return s;let c=[...s];if(RA.isInstanceOf(r[i],Error)){rx(o,a);let u=e(t,r[i]),l=c.length;ix(u,i,l,a),c=WA(e,t,n,r[i],i,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(RA.isInstanceOf(u,Error)){rx(o,a);let d=e(t,u),p=c.length;ix(d,`errors[${l}]`,p,a),c=WA(e,t,n,u,i,[d,...c],d,p)}}),c}function rx(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function ix(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Wue(e,t){return e.map(n=>(n.value&&(n.value=Eue.truncate(n.value,t)),n))}wA.applyAggregateErrorsToEvent=Rue});var nt=g(rl=>{Object.defineProperty(rl,"__esModule",{value:!0});function qp(e){return e&&e.Math==Math?e:void 0}var NA=typeof globalThis=="object"&&qp(globalThis)||typeof window=="object"&&qp(window)||typeof self=="object"&&qp(self)||typeof global=="object"&&qp(global)||function(){return this}()||{};function wue(){return NA}function Nue(e,t,n){let r=n||NA,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}rl.GLOBAL_OBJ=NA;rl.getGlobalObject=wue;rl.getGlobalSingleton=Nue});var TA=g(Sa=>{Object.defineProperty(Sa,"__esModule",{value:!0});var Tue=gn(),Hue=nt(),_a=Hue.getGlobalObject(),kue=80;function Vue(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,i=[],s=0,o=0,a=" > ",c=a.length,u,l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||kue;for(;n&&s++<r&&(u=Yue(n,l),!(u==="html"||s>1&&o+i.length*c+u.length>=d));)i.push(u),o+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function Yue(e,t){let n=e,r=[],i,s,o,a,c;if(!n||!n.tagName)return"";if(_a.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());let u=t&&t.length?t.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(u&&u.length)u.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&Tue.isString(i))for(s=i.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);let l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)o=l[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function Fue(){try{return _a.document.location.href}catch{return""}}function xue(e){return _a.document&&_a.document.querySelector?_a.document.querySelector(e):null}function Xue(e){if(!_a.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}Sa.getComponentName=Xue;Sa.getDomElement=xue;Sa.getLocationHref=Fue;Sa.htmlTreeAsString=Vue});var er=g(HA=>{Object.defineProperty(HA,"__esModule",{value:!0});var Jue=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;HA.DEBUG_BUILD=Jue});var Rn=g(Ga=>{Object.defineProperty(Ga,"__esModule",{value:!0});var Due=er(),kA=nt(),Oue="Sentry Logger ",VA=["debug","info","warn","error","log","assert","trace"],YA={};function ox(e){if(!("console"in kA.GLOBAL_OBJ))return e();let t=kA.GLOBAL_OBJ.console,n={},r=Object.keys(YA);r.forEach(i=>{let s=YA[i];n[i]=t[i],t[i]=s});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function Uue(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Due.DEBUG_BUILD?VA.forEach(n=>{t[n]=(...r)=>{e&&ox(()=>{kA.GLOBAL_OBJ.console[n](`${Oue}[${n}]:`,...r)})}}):VA.forEach(n=>{t[n]=()=>{}}),t}var Kue=Uue();Ga.CONSOLE_LEVELS=VA;Ga.consoleSandbox=ox;Ga.logger=Kue;Ga.originalConsoleMethods=YA});var FA=g(sl=>{Object.defineProperty(sl,"__esModule",{value:!0});var Lue=er(),il=Rn(),Mue=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function que(e){return e==="http"||e==="https"}function Pue(e,t=!1){let{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function ax(e){let t=Mue.exec(e);if(!t){il.consoleSandbox(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,i="",s,o="",a]=t.slice(1),c="",u=a,l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){let d=u.match(/^\d+/);d&&(u=d[0])}return cx({host:s,pass:i,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function cx(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function zue(e){if(!Lue.DEBUG_BUILD)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(il.logger.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?que(r)?t&&isNaN(parseInt(t,10))?(il.logger.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(il.logger.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(il.logger.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function jue(e){let t=typeof e=="string"?ax(e):cx(e);if(!(!t||!zue(t)))return t}sl.dsnFromString=ax;sl.dsnToString=Pue;sl.makeDsn=jue});var JA=g(XA=>{Object.defineProperty(XA,"__esModule",{value:!0});var xA=class extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}};XA.SentryError=xA});var pn=g(Wn=>{Object.defineProperty(Wn,"__esModule",{value:!0});var Que=TA(),$ue=er(),Ba=gn(),ele=Rn(),ux=nl();function tle(e,t,n){if(!(t in e))return;let r=e[t],i=n(r);typeof i=="function"&&px(i,r),e[t]=i}function gx(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{$ue.DEBUG_BUILD&&ele.logger.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function px(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,gx(e,"__sentry_original__",t)}catch{}}function nle(e){return e.__sentry_original__}function rle(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function mx(e){if(Ba.isError(e))return{message:e.message,name:e.name,stack:e.stack,...dx(e)};if(Ba.isEvent(e)){let t={type:e.type,target:lx(e.target),currentTarget:lx(e.currentTarget),...dx(e)};return typeof CustomEvent<"u"&&Ba.isInstanceOf(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function lx(e){try{return Ba.isElement(e)?Que.htmlTreeAsString(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function dx(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function ile(e,t=40){let n=Object.keys(mx(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return ux.truncate(n[0],t);for(let r=n.length;r>0;r--){let i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:ux.truncate(i,t)}return""}function sle(e){return DA(e,new Map)}function DA(e,t){if(Ba.isPlainObject(e)){let n=t.get(e);if(n!==void 0)return n;let r={};t.set(e,r);for(let i of Object.keys(e))typeof e[i]<"u"&&(r[i]=DA(e[i],t));return r}if(Array.isArray(e)){let n=t.get(e);if(n!==void 0)return n;let r=[];return t.set(e,r),e.forEach(i=>{r.push(DA(i,t))}),r}return e}function ole(e){let t;switch(!0){case e==null:t=new String(e);break;case(typeof e=="symbol"||typeof e=="bigint"):t=Object(e);break;case Ba.isPrimitive(e):t=new e.constructor(e);break;default:t=e;break}return t}Wn.addNonEnumerableProperty=gx;Wn.convertToPlainObject=mx;Wn.dropUndefinedKeys=sle;Wn.extractExceptionKeysForMessage=ile;Wn.fill=tle;Wn.getOriginalFunction=nle;Wn.markFunctionWrapped=px;Wn.objectify=ole;Wn.urlEncode=rle});var zp=g(Pp=>{Object.defineProperty(Pp,"__esModule",{value:!0});function fx(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.includes(":\\")&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&e!==void 0&&!e.includes("node_modules/")}function ale(e){let t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return r=>{let i=r.match(n);if(i){let s,o,a,c,u;if(i[1]){a=i[1];let p=a.lastIndexOf(".");if(a[p-1]==="."&&p--,p>0){s=a.slice(0,p),o=a.slice(p+1);let m=s.indexOf(".Module");m>0&&(a=a.slice(m+1),s=s.slice(0,m))}c=void 0}o&&(c=s,u=o),o==="<anonymous>"&&(u=void 0,a=void 0),a===void 0&&(u=u||"<anonymous>",a=c?`${c}.${u}`:u);let l=i[2]&&i[2].startsWith("file://")?i[2].slice(7):i[2],d=i[5]==="native";return!l&&i[5]&&!d&&(l=i[5]),{filename:l,module:e?e(l):void 0,function:a,lineno:parseInt(i[3],10)||void 0,colno:parseInt(i[4],10)||void 0,in_app:fx(l,d)}}if(r.match(t))return{filename:r}}}Pp.filenameIsInApp=fx;Pp.node=ale});var jp=g(Ni=>{Object.defineProperty(Ni,"__esModule",{value:!0});var Cx=zp(),yx=50,hx=/\(error: (.*)\)/,Ix=/captureMessage|captureException/;function bx(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{let i=[],s=n.split(`
`);for(let o=r;o<s.length;o++){let a=s[o];if(a.length>1024)continue;let c=hx.test(a)?a.replace(hx,"$1"):a;if(!c.match(/\S*Error: /)){for(let u of t){let l=u(c);if(l){i.push(l);break}}if(i.length>=yx)break}}return Ax(i)}}function cle(e){return Array.isArray(e)?bx(...e):e}function Ax(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),Ix.test(t[t.length-1].function||"")&&(t.pop(),Ix.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,yx).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}var OA="<anonymous>";function ule(e){try{return!e||typeof e!="function"?OA:e.name||OA}catch{return OA}}function lle(e){return[90,Cx.node(e)]}Ni.filenameIsInApp=Cx.filenameIsInApp;Ni.createStackParser=bx;Ni.getFunctionName=ule;Ni.nodeStackLineParser=lle;Ni.stackParserFromStackParserOptions=cle;Ni.stripSentryFramesAndReverse=Ax});var Hr=g(Za=>{Object.defineProperty(Za,"__esModule",{value:!0});var dle=er(),gle=Rn(),ple=jp(),va={},_x={};function mle(e,t){va[e]=va[e]||[],va[e].push(t)}function fle(){Object.keys(va).forEach(e=>{va[e]=void 0})}function hle(e,t){_x[e]||(t(),_x[e]=!0)}function Ile(e,t){let n=e&&va[e];if(!!n)for(let r of n)try{r(t)}catch(i){dle.DEBUG_BUILD&&gle.logger.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${ple.getFunctionName(r)}
Error:`,i)}}Za.addHandler=mle;Za.maybeInstrument=hle;Za.resetInstrumentationHandlers=fle;Za.triggerHandlers=Ile});var MA=g(LA=>{Object.defineProperty(LA,"__esModule",{value:!0});var UA=Rn(),Cle=pn(),Qp=nt(),KA=Hr();function yle(e){let t="console";KA.addHandler(t,e),KA.maybeInstrument(t,ble)}function ble(){"console"in Qp.GLOBAL_OBJ&&UA.CONSOLE_LEVELS.forEach(function(e){e in Qp.GLOBAL_OBJ.console&&Cle.fill(Qp.GLOBAL_OBJ.console,e,function(t){return UA.originalConsoleMethods[e]=t,function(...n){let r={args:n,level:e};KA.triggerHandlers("console",r);let i=UA.originalConsoleMethods[e];i&&i.apply(Qp.GLOBAL_OBJ.console,n)}})})}LA.addConsoleInstrumentationHandler=yle});var ol=g(tr=>{Object.defineProperty(tr,"__esModule",{value:!0});var Ale=pn(),qA=nl(),_le=nt();function Sle(){let e=_le.GLOBAL_OBJ,t=e.crypto||e.msCrypto,n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{let r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function Sx(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Gle(e){let{message:t,event_id:n}=e;if(t)return t;let r=Sx(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Ble(e,t,n){let r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function vle(e,t){let n=Sx(e);if(!n)return;let r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){let s={...i&&i.data,...t.data};n.mechanism.data=s}}var Zle=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function Ele(e){let t=e.match(Zle)||[],n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(i)?void 0:i,prerelease:t[4]}}function Rle(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,i=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,i-n),i).map(s=>qA.snipLine(s,0)),t.context_line=qA.snipLine(e[Math.min(r-1,i)],t.colno||0),t.post_context=e.slice(Math.min(i+1,r),i+1+n).map(s=>qA.snipLine(s,0))}function Wle(e){if(e&&e.__sentry_captured__)return!0;try{Ale.addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch{}return!1}function wle(e){return Array.isArray(e)?e:[e]}tr.addContextToFrame=Rle;tr.addExceptionMechanism=vle;tr.addExceptionTypeValue=Ble;tr.arrayify=wle;tr.checkOrSetAlreadyCaught=Wle;tr.getEventDescription=Gle;tr.parseSemver=Ele;tr.uuid4=Sle});var QA=g(em=>{Object.defineProperty(em,"__esModule",{value:!0});var Nle=ol(),$p=pn(),Tle=nt(),PA=Hr(),Ea=Tle.GLOBAL_OBJ,Hle=1e3,Gx,zA,jA;function kle(e){let t="dom";PA.addHandler(t,e),PA.maybeInstrument(t,vx)}function vx(){if(!Ea.document)return;let e=PA.triggerHandlers.bind(null,"dom"),t=Bx(e,!0);Ea.document.addEventListener("click",t,!1),Ea.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let r=Ea[n]&&Ea[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||($p.fill(r,"addEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},l=u[s]=u[s]||{refCount:0};if(!l.handler){let d=Bx(e);l.handler=d,i.call(this,s,d,a)}l.refCount++}catch{}return i.call(this,s,o,a)}}),$p.fill(r,"removeEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__||{},l=u[s];l&&(l.refCount--,l.refCount<=0&&(i.call(this,s,l.handler,a),l.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,o,a)}}))})}function Vle(e){if(e.type!==zA)return!1;try{if(!e.target||e.target._sentryId!==jA)return!1}catch{}return!0}function Yle(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function Bx(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=Fle(n);if(Yle(n.type,r))return;$p.addNonEnumerableProperty(n,"_sentryCaptured",!0),r&&!r._sentryId&&$p.addNonEnumerableProperty(r,"_sentryId",Nle.uuid4());let i=n.type==="keypress"?"input":n.type;Vle(n)||(e({event:n,name:i,global:t}),zA=n.type,jA=r?r._sentryId:void 0),clearTimeout(Gx),Gx=Ea.setTimeout(()=>{jA=void 0,zA=void 0},Hle)}}function Fle(e){try{return e.target}catch{return null}}em.addClickKeypressInstrumentationHandler=kle;em.instrumentDOM=vx});var t_=g(nr=>{Object.defineProperty(nr,"__esModule",{value:!0});var xle=er(),Xle=Rn(),Jle=nt(),tm=Jle.getGlobalObject();function Dle(){try{return new ErrorEvent(""),!0}catch{return!1}}function Ole(){try{return new DOMError(""),!0}catch{return!1}}function Ule(){try{return new DOMException(""),!0}catch{return!1}}function e_(){if(!("fetch"in tm))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function $A(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Kle(){if(typeof EdgeRuntime=="string")return!0;if(!e_())return!1;if($A(tm.fetch))return!0;let e=!1,t=tm.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=$A(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){xle.DEBUG_BUILD&&Xle.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Lle(){return"ReportingObserver"in tm}function Mle(){if(!e_())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch{return!1}}nr.isNativeFetch=$A;nr.supportsDOMError=Ole;nr.supportsDOMException=Ule;nr.supportsErrorEvent=Dle;nr.supportsFetch=e_;nr.supportsNativeFetch=Kle;nr.supportsReferrerPolicy=Mle;nr.supportsReportingObserver=Lle});var r_=g(nm=>{Object.defineProperty(nm,"__esModule",{value:!0});var qle=pn(),Ple=t_(),Zx=nt(),al=Hr();function zle(e){let t="fetch";al.addHandler(t,e),al.maybeInstrument(t,jle)}function jle(){!Ple.supportsNativeFetch()||qle.fill(Zx.GLOBAL_OBJ,"fetch",function(e){return function(...t){let{method:n,url:r}=Rx(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return al.triggerHandlers("fetch",{...i}),e.apply(Zx.GLOBAL_OBJ,t).then(s=>{let o={...i,endTimestamp:Date.now(),response:s};return al.triggerHandlers("fetch",o),s},s=>{let o={...i,endTimestamp:Date.now(),error:s};throw al.triggerHandlers("fetch",o),s})}})}function n_(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Ex(e){return typeof e=="string"?e:e?n_(e,"url")?e.url:e.toString?e.toString():"":""}function Rx(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:Ex(n),method:n_(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:Ex(t),method:n_(t,"method")?String(t.method).toUpperCase():"GET"}}nm.addFetchInstrumentationHandler=zle;nm.parseFetchArgs=Rx});var a_=g(o_=>{Object.defineProperty(o_,"__esModule",{value:!0});var i_=nt(),s_=Hr(),rm=null;function Qle(e){let t="error";s_.addHandler(t,e),s_.maybeInstrument(t,$le)}function $le(){rm=i_.GLOBAL_OBJ.onerror,i_.GLOBAL_OBJ.onerror=function(e,t,n,r,i){let s={column:r,error:i,line:n,msg:e,url:t};return s_.triggerHandlers("error",s),rm&&!rm.__SENTRY_LOADER__?rm.apply(this,arguments):!1},i_.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}o_.addGlobalErrorInstrumentationHandler=Qle});var d_=g(l_=>{Object.defineProperty(l_,"__esModule",{value:!0});var c_=nt(),u_=Hr(),im=null;function ede(e){let t="unhandledrejection";u_.addHandler(t,e),u_.maybeInstrument(t,tde)}function tde(){im=c_.GLOBAL_OBJ.onunhandledrejection,c_.GLOBAL_OBJ.onunhandledrejection=function(e){let t=e;return u_.triggerHandlers("unhandledrejection",t),im&&!im.__SENTRY_LOADER__?im.apply(this,arguments):!0},c_.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}l_.addGlobalUnhandledRejectionInstrumentationHandler=ede});var p_=g(g_=>{Object.defineProperty(g_,"__esModule",{value:!0});var nde=nt(),sm=nde.getGlobalObject();function rde(){let e=sm.chrome,t=e&&e.app&&e.app.runtime,n="history"in sm&&!!sm.history.pushState&&!!sm.history.replaceState;return!t&&n}g_.supportsHistory=rde});var f_=g(m_=>{Object.defineProperty(m_,"__esModule",{value:!0});var Wx=pn();er();Rn();var ide=nt(),sde=p_(),am=Hr(),cl=ide.GLOBAL_OBJ,om;function ode(e){let t="history";am.addHandler(t,e),am.maybeInstrument(t,ade)}function ade(){if(!sde.supportsHistory())return;let e=cl.onpopstate;cl.onpopstate=function(...n){let r=cl.location.href,i=om;om=r;let s={from:i,to:r};if(am.triggerHandlers("history",s),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){let i=r.length>2?r[2]:void 0;if(i){let s=om,o=String(i);om=o;let a={from:s,to:o};am.triggerHandlers("history",a)}return n.apply(this,r)}}Wx.fill(cl.history,"pushState",t),Wx.fill(cl.history,"replaceState",t)}m_.addHistoryInstrumentationHandler=ode});var h_=g(ll=>{Object.defineProperty(ll,"__esModule",{value:!0});var um=gn(),cm=pn(),cde=nt(),lm=Hr(),ude=cde.GLOBAL_OBJ,ul="__sentry_xhr_v3__";function lde(e){let t="xhr";lm.addHandler(t,e),lm.maybeInstrument(t,wx)}function wx(){if(!ude.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;cm.fill(e,"open",function(t){return function(...n){let r=Date.now(),i=um.isString(n[0])?n[0].toUpperCase():void 0,s=dde(n[1]);if(!i||!s)return t.apply(this,n);this[ul]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);let o=()=>{let a=this[ul];if(!!a&&this.readyState===4){try{a.status_code=this.status}catch{}let c={args:[i,s],endTimestamp:Date.now(),startTimestamp:r,xhr:this};lm.triggerHandlers("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?cm.fill(this,"onreadystatechange",function(a){return function(...c){return o(),a.apply(this,c)}}):this.addEventListener("readystatechange",o),cm.fill(this,"setRequestHeader",function(a){return function(...c){let[u,l]=c,d=this[ul];return d&&um.isString(u)&&um.isString(l)&&(d.request_headers[u.toLowerCase()]=l),a.apply(this,c)}}),t.apply(this,n)}}),cm.fill(e,"send",function(t){return function(...n){let r=this[ul];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);let i={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return lm.triggerHandlers("xhr",i),t.apply(this,n)}})}function dde(e){if(um.isString(e))return e;try{return e.toString()}catch{}}ll.SENTRY_XHR_DATA_KEY=ul;ll.addXhrInstrumentationHandler=lde;ll.instrumentXHR=wx});var Fx=g(wn=>{Object.defineProperty(wn,"__esModule",{value:!0});var gde=er(),pde=Rn(),Nx=MA(),Tx=QA(),Hx=r_(),kx=a_(),Vx=d_(),Yx=f_(),I_=h_();function mde(e,t){switch(e){case"console":return Nx.addConsoleInstrumentationHandler(t);case"dom":return Tx.addClickKeypressInstrumentationHandler(t);case"xhr":return I_.addXhrInstrumentationHandler(t);case"fetch":return Hx.addFetchInstrumentationHandler(t);case"history":return Yx.addHistoryInstrumentationHandler(t);case"error":return kx.addGlobalErrorInstrumentationHandler(t);case"unhandledrejection":return Vx.addGlobalUnhandledRejectionInstrumentationHandler(t);default:gde.DEBUG_BUILD&&pde.logger.warn("unknown instrumentation type:",e)}}wn.addConsoleInstrumentationHandler=Nx.addConsoleInstrumentationHandler;wn.addClickKeypressInstrumentationHandler=Tx.addClickKeypressInstrumentationHandler;wn.addFetchInstrumentationHandler=Hx.addFetchInstrumentationHandler;wn.addGlobalErrorInstrumentationHandler=kx.addGlobalErrorInstrumentationHandler;wn.addGlobalUnhandledRejectionInstrumentationHandler=Vx.addGlobalUnhandledRejectionInstrumentationHandler;wn.addHistoryInstrumentationHandler=Yx.addHistoryInstrumentationHandler;wn.SENTRY_XHR_DATA_KEY=I_.SENTRY_XHR_DATA_KEY;wn.addXhrInstrumentationHandler=I_.addXhrInstrumentationHandler;wn.addInstrumentationHandler=mde});var C_=g(dm=>{Object.defineProperty(dm,"__esModule",{value:!0});function fde(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function hde(){return"npm"}dm.getSDKSource=hde;dm.isBrowserBundle=fde});var mm=g((dl,pm)=>{Object.defineProperty(dl,"__esModule",{value:!0});var Ide=C_();function Cde(){return!Ide.isBrowserBundle()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function gm(e,t){return e.require(t)}function yde(e){let t;try{t=gm(pm,e)}catch{}try{let{cwd:n}=gm(pm,"process");t=gm(pm,`${n()}/node_modules/${e}`)}catch{}return t}dl.dynamicRequire=gm;dl.isNodeEnv=Cde;dl.loadModule=yde});var Xx=g(y_=>{Object.defineProperty(y_,"__esModule",{value:!0});var bde=mm(),xx=nt();function Ade(){return typeof window<"u"&&(!bde.isNodeEnv()||_de())}function _de(){return xx.GLOBAL_OBJ.process!==void 0&&xx.GLOBAL_OBJ.process.type==="renderer"}y_.isBrowser=Ade});var A_=g(b_=>{Object.defineProperty(b_,"__esModule",{value:!0});function Sde(){let e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let s=0;s<t.length;s++)if(t[s]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let s=0;s<t.length;s++)if(t[s]===i){t.splice(s,1);break}}return[n,r]}b_.memoBuilder=Sde});var gl=g(Ra=>{Object.defineProperty(Ra,"__esModule",{value:!0});var __=gn(),Gde=A_(),Bde=pn(),vde=jp();function Jx(e,t=100,n=1/0){try{return fm("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Dx(e,t=3,n=100*1024){let r=Jx(e,t);return Wde(r)>n?Dx(e,t-1,n):r}function fm(e,t,n=1/0,r=1/0,i=Gde.memoBuilder()){let[s,o]=i;if(t==null||["number","boolean","string"].includes(typeof t)&&!__.isNaN(t))return t;let a=Zde(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(s(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let m=u.toJSON();return fm("",m,c-1,r,i)}catch{}let l=Array.isArray(t)?[]:{},d=0,p=Bde.convertToPlainObject(t);for(let m in p){if(!Object.prototype.hasOwnProperty.call(p,m))continue;if(d>=r){l[m]="[MaxProperties ~]";break}let f=p[m];l[m]=fm(m,f,c-1,r,i),d++}return o(t),l}function Zde(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(__.isVueViewModel(t))return"[VueViewModel]";if(__.isSyntheticEvent(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${vde.getFunctionName(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=Ede(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Ede(e){let t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function Rde(e){return~-encodeURI(e).split(/%..|./).length}function Wde(e){return Rde(JSON.stringify(e))}function wde(e,t){let n=t.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),r=e;try{r=decodeURI(e)}catch{}return r.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${n}/*`,"ig"),"app:///")}Ra.normalize=Jx;Ra.normalizeToSize=Dx;Ra.normalizeUrlToBase=wde;Ra.walk=fm});var qx=g(kr=>{Object.defineProperty(kr,"__esModule",{value:!0});function Ux(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let i=e[r];i==="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var Nde=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Kx(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Nde.exec(t);return n?n.slice(1):[]}function S_(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:"/";!i||(t=`${i}/${t}`,n=i.charAt(0)==="/")}return t=Ux(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Ox(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Tde(e,t){e=S_(e).slice(1),t=S_(t).slice(1);let n=Ox(e.split("/")),r=Ox(t.split("/")),i=Math.min(n.length,r.length),s=i;for(let a=0;a<i;a++)if(n[a]!==r[a]){s=a;break}let o=[];for(let a=s;a<n.length;a++)o.push("..");return o=o.concat(r.slice(s)),o.join("/")}function Lx(e){let t=Mx(e),n=e.slice(-1)==="/",r=Ux(e.split("/").filter(i=>!!i),!t).join("/");return!r&&!t&&(r="."),r&&n&&(r+="/"),(t?"/":"")+r}function Mx(e){return e.charAt(0)==="/"}function Hde(...e){return Lx(e.join("/"))}function kde(e){let t=Kx(e),n=t[0],r=t[1];return!n&&!r?".":(r&&(r=r.slice(0,r.length-1)),n+r)}function Vde(e,t){let n=Kx(e)[2];return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}kr.basename=Vde;kr.dirname=kde;kr.isAbsolute=Mx;kr.join=Hde;kr.normalizePath=Lx;kr.relative=Tde;kr.resolve=S_});var G_=g(pl=>{Object.defineProperty(pl,"__esModule",{value:!0});var Yde=gn(),Vr;(function(e){e[e.PENDING=0]="PENDING";let n=1;e[e.RESOLVED=n]="RESOLVED";let r=2;e[e.REJECTED=r]="REJECTED"})(Vr||(Vr={}));function Fde(e){return new mn(t=>{t(e)})}function xde(e){return new mn((t,n)=>{n(e)})}var mn=class{constructor(t){mn.prototype.__init.call(this),mn.prototype.__init2.call(this),mn.prototype.__init3.call(this),mn.prototype.__init4.call(this),this._state=Vr.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new mn((r,i)=>{this._handlers.push([!1,s=>{if(!t)r(s);else try{r(t(s))}catch(o){i(o)}},s=>{if(!n)i(s);else try{r(n(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new mn((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,t&&t()},o=>{s=!0,i=o,t&&t()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=t=>{this._setResult(Vr.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Vr.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Vr.PENDING){if(Yde.isThenable(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Vr.PENDING)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Vr.RESOLVED&&n[1](this._value),this._state===Vr.REJECTED&&n[2](this._value),n[0]=!0)})}}};pl.SyncPromise=mn;pl.rejectedSyncPromise=xde;pl.resolvedSyncPromise=Fde});var Px=g(v_=>{Object.defineProperty(v_,"__esModule",{value:!0});var Xde=JA(),B_=G_();function Jde(e){let t=[];function n(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]}function i(o){if(!n())return B_.rejectedSyncPromise(new Xde.SentryError("Not adding Promise because buffer limit was reached."));let a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new B_.SyncPromise((a,c)=>{let u=t.length;if(!u)return a(!0);let l=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{B_.resolvedSyncPromise(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:t,add:i,drain:s}}v_.makePromiseBuffer=Jde});var zx=g(Z_=>{Object.defineProperty(Z_,"__esModule",{value:!0});function Dde(e){let t={},n=0;for(;n<e.length;){let r=e.indexOf("=",n);if(r===-1)break;let i=e.indexOf(";",n);if(i===-1)i=e.length;else if(i<r){n=e.lastIndexOf(";",r-1)+1;continue}let s=e.slice(n,r).trim();if(t[s]===void 0){let o=e.slice(r+1,i).trim();o.charCodeAt(0)===34&&(o=o.slice(1,-1));try{t[s]=o.indexOf("%")!==-1?decodeURIComponent(o):o}catch{t[s]=o}}n=i+1}return t}Z_.parseCookie=Dde});var E_=g(Wa=>{Object.defineProperty(Wa,"__esModule",{value:!0});function Ode(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Ude(e){return e.split(/[\?#]/,1)[0]}function Kde(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function Lde(e){let{protocol:t,host:n,path:r}=e,i=n&&n.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${t?`${t}://`:""}${i}${r}`}Wa.getNumberOfUrlSegments=Kde;Wa.getSanitizedUrlString=Lde;Wa.parseUrl=Ode;Wa.stripUrlQueryAndFragment=Ude});var tX=g(Yr=>{Object.defineProperty(Yr,"__esModule",{value:!0});var Mde=zx(),qde=er(),jx=gn(),Pde=Rn(),zde=gl(),jde=E_(),Qde={ip:!1,request:!0,transaction:!0,user:!0},$de=["cookies","data","headers","method","query_string","url"],Qx=["id","username","email"];function ege(e,t,n){if(!!e){if(!e.metadata.source||e.metadata.source==="url"){let[r,i]=hm(t,{path:!0,method:!0});e.updateName(r),e.setMetadata({source:i})}e.setData("url",t.originalUrl||t.url),t.baseUrl&&e.setData("baseUrl",t.baseUrl),e.setData("query",$x(t,n))}}function hm(e,t={}){let n=e.method&&e.method.toUpperCase(),r="",i="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,i="route"):(e.originalUrl||e.url)&&(r=jde.stripUrlQueryAndFragment(e.originalUrl||e.url||""));let s="";return t.method&&n&&(s+=n),t.method&&t.path&&(s+=" "),t.path&&r&&(s+=r),[s,i]}function tge(e,t){switch(t){case"path":return hm(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";case"methodPath":default:{let n=e._reconstructedRoute?e._reconstructedRoute:void 0;return hm(e,{path:!0,method:!0,customRoute:n})[0]}}}function nge(e,t){let n={};return(Array.isArray(t)?t:Qx).forEach(i=>{e&&i in e&&(n[i]=e[i])}),n}function R_(e,t){let{include:n=$de,deps:r}=t||{},i={},s=e.headers||{},o=e.method,a=s.host||e.hostname||e.host||"<no host>",c=e.protocol==="https"||e.socket&&e.socket.encrypted?"https":"http",u=e.originalUrl||e.url||"",l=u.startsWith(c)?u:`${c}://${a}${u}`;return n.forEach(d=>{switch(d){case"headers":{i.headers=s,n.includes("cookies")||delete i.headers.cookie;break}case"method":{i.method=o;break}case"url":{i.url=l;break}case"cookies":{i.cookies=e.cookies||s.cookie&&Mde.parseCookie(s.cookie)||{};break}case"query_string":{i.query_string=$x(e,r);break}case"data":{if(o==="GET"||o==="HEAD")break;e.body!==void 0&&(i.data=jx.isString(e.body)?e.body:JSON.stringify(zde.normalize(e.body)));break}default:({}).hasOwnProperty.call(e,d)&&(i[d]=e[d])}}),i}function rge(e,t,n){let r={...Qde,...n&&n.include};if(r.request){let i=Array.isArray(r.request)?R_(t,{include:r.request,deps:n&&n.deps}):R_(t,{deps:n&&n.deps});e.request={...e.request,...i}}if(r.user){let i=t.user&&jx.isPlainObject(t.user)?nge(t.user,r.user):{};Object.keys(i).length&&(e.user={...e.user,...i})}if(r.ip){let i=t.ip||t.socket&&t.socket.remoteAddress;i&&(e.user={...e.user,ip_address:i})}return r.transaction&&!e.transaction&&(e.transaction=tge(t,r.transaction)),e}function $x(e,t){let n=e.originalUrl||e.url||"";if(!!n){n.startsWith("/")&&(n=`http://dogs.are.great${n}`);try{return e.query||typeof URL<"u"&&new URL(n).search.slice(1)||t&&t.url&&t.url.parse(n).query||void 0}catch{return}}}function eX(e){let t={};try{e.forEach((n,r)=>{typeof n=="string"&&(t[r]=n)})}catch{qde.DEBUG_BUILD&&Pde.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return t}function ige(e){let t=eX(e.headers);return{method:e.method,url:e.url,headers:t}}Yr.DEFAULT_USER_INCLUDES=Qx;Yr.addRequestDataToEvent=rge;Yr.addRequestDataToTransaction=ege;Yr.extractPathForTransaction=hm;Yr.extractRequestData=R_;Yr.winterCGHeadersToDict=eX;Yr.winterCGRequestToRequestData=ige});var iX=g(ml=>{Object.defineProperty(ml,"__esModule",{value:!0});var nX=["fatal","error","warning","log","info","debug"];function sge(e){return rX(e)}function rX(e){return e==="warn"?"warning":nX.includes(e)?e:"log"}ml.severityFromString=sge;ml.severityLevelFromString=rX;ml.validSeverityLevels=nX});var w_=g((fn,uX)=>{Object.defineProperty(fn,"__esModule",{value:!0});var oX=mm(),oge=nt(),aX=oge.getGlobalObject(),W_={nowSeconds:()=>Date.now()/1e3};function age(){let{performance:e}=aX;if(!e||!e.now)return;let t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}function cge(){try{return oX.dynamicRequire(uX,"perf_hooks").performance}catch{return}}var Im=oX.isNodeEnv()?cge():age(),sX=Im===void 0?W_:{nowSeconds:()=>(Im.timeOrigin+Im.now())/1e3},uge=W_.nowSeconds.bind(W_),cX=sX.nowSeconds.bind(sX),lge=cX,dge=Im!==void 0;fn._browserPerformanceTimeOriginMode=void 0;var gge=(()=>{let{performance:e}=aX;if(!e||!e.now){fn._browserPerformanceTimeOriginMode="none";return}let t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=i<t,o=e.timing&&e.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,u=c<t;return s||u?i<=c?(fn._browserPerformanceTimeOriginMode="timeOrigin",e.timeOrigin):(fn._browserPerformanceTimeOriginMode="navigationStart",o):(fn._browserPerformanceTimeOriginMode="dateNow",r)})();fn.browserPerformanceTimeOrigin=gge;fn.dateTimestampInSeconds=uge;fn.timestampInSeconds=cX;fn.timestampWithMs=lge;fn.usingPerformanceAPI=dge});var T_=g(Ti=>{Object.defineProperty(Ti,"__esModule",{value:!0});var pge=er(),mge=gn(),fge=Rn(),hge="baggage",N_="sentry-",dX=/^sentry-/,gX=8192;function Ige(e){if(!mge.isString(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,i)=>{let s=lX(i);for(let o of Object.keys(s))r[o]=s[o];return r},{});else{if(!e)return;t=lX(e)}let n=Object.entries(t).reduce((r,[i,s])=>{if(i.match(dX)){let o=i.slice(N_.length);r[o]=s}return r},{});if(Object.keys(n).length>0)return n}function Cge(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,i])=>(i&&(n[`${N_}${r}`]=i),n),{});return yge(t)}function lX(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function yge(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],i)=>{let s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=i===0?s:`${t},${s}`;return o.length>gX?(pge.DEBUG_BUILD&&fge.logger.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}Ti.BAGGAGE_HEADER_NAME=hge;Ti.MAX_BAGGAGE_STRING_LENGTH=gX;Ti.SENTRY_BAGGAGE_KEY_PREFIX=N_;Ti.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=dX;Ti.baggageHeaderToDynamicSamplingContext=Ige;Ti.dynamicSamplingContextToSentryBaggageHeader=Cge});var fX=g(wa=>{Object.defineProperty(wa,"__esModule",{value:!0});var bge=T_(),Cm=ol(),pX=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function mX(e){if(!e)return;let t=e.match(pX);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Age(e,t){let n=mX(e),r=bge.baggageHeaderToDynamicSamplingContext(t),{traceId:i,parentSpanId:s,parentSampled:o}=n||{},a={traceId:i||Cm.uuid4(),spanId:Cm.uuid4().substring(16),sampled:o};return s&&(a.parentSpanId=s),r&&(a.dsc=r),{traceparentData:n,dynamicSamplingContext:r,propagationContext:a}}function _ge(e=Cm.uuid4(),t=Cm.uuid4().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}wa.TRACEPARENT_REGEXP=pX;wa.extractTraceparentData=mX;wa.generateSentryTraceHeader=_ge;wa.tracingContextFromHeaders=Age});var k_=g(hn=>{Object.defineProperty(hn,"__esModule",{value:!0});var Sge=FA(),Gge=gl(),hX=pn();function Bge(e,t=[]){return[e,t]}function vge(e,t){let[n,r]=e;return[n,[...r,t]]}function IX(e,t){let n=e[1];for(let r of n){let i=r[0].type;if(t(r,i))return!0}return!1}function Zge(e,t){return IX(e,(n,r)=>t.includes(r))}function H_(e,t){return(t||new TextEncoder).encode(e)}function Ege(e,t){let[n,r]=e,i=JSON.stringify(n);function s(o){typeof i=="string"?i=typeof o=="string"?i+o:[H_(i,t),o]:i.push(typeof o=="string"?H_(o,t):o)}for(let o of r){let[a,c]=o;if(s(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)s(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(Gge.normalize(c))}s(u)}}return typeof i=="string"?i:Rge(i)}function Rge(e){let t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t),r=0;for(let i of e)n.set(i,r),r+=i.length;return n}function Wge(e,t,n){let r=typeof e=="string"?t.encode(e):e;function i(c){let u=r.subarray(0,c);return r=r.subarray(c+1),u}function s(){let c=r.indexOf(10);return c<0&&(c=r.length),JSON.parse(n.decode(i(c)))}let o=s(),a=[];for(;r.length;){let c=s(),u=typeof c.length=="number"?c.length:void 0;a.push([c,u?i(u):s()])}return[o,a]}function wge(e,t){let n=typeof e.data=="string"?H_(e.data,t):e.data;return[hX.dropUndefinedKeys({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}var Nge={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function Tge(e){return Nge[e]}function Hge(e){if(!e||!e.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function kge(e,t,n,r){let i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Sge.dsnToString(r)},...i&&{trace:hX.dropUndefinedKeys({...i})}}}hn.addItemToEnvelope=vge;hn.createAttachmentEnvelopeItem=wge;hn.createEnvelope=Bge;hn.createEventEnvelopeHeaders=kge;hn.envelopeContainsItemType=Zge;hn.envelopeItemTypeToDataCategory=Tge;hn.forEachEnvelopeItem=IX;hn.getSdkMetadataForEnvelopeHeader=Hge;hn.parseEnvelope=Wge;hn.serializeEnvelope=Ege});var CX=g(V_=>{Object.defineProperty(V_,"__esModule",{value:!0});var Vge=k_(),Yge=w_();function Fge(e,t,n){let r=[{type:"client_report"},{timestamp:n||Yge.dateTimestampInSeconds(),discarded_events:e}];return Vge.createEnvelope(t?{dsn:t}:{},[r])}V_.createClientReportEnvelope=Fge});var _X=g(Ms=>{Object.defineProperty(Ms,"__esModule",{value:!0});var yX=60*1e3;function bX(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?yX:r-t}function AX(e,t){return e[t]||e.all||0}function xge(e,t,n=Date.now()){return AX(e,t)>n}function Xge(e,{statusCode:t,headers:n},r=Date.now()){let i={...e},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(let a of s.trim().split(",")){let[c,u]=a.split(":",2),l=parseInt(c,10),d=(isNaN(l)?60:l)*1e3;if(!u)i.all=r+d;else for(let p of u.split(";"))i[p]=r+d}else o?i.all=r+bX(o,r):t===429&&(i.all=r+60*1e3);return i}Ms.DEFAULT_RETRY_AFTER=yX;Ms.disabledUntil=AX;Ms.isRateLimited=xge;Ms.parseRetryAfterHeader=bX;Ms.updateRateLimits=Xge});var BX=g(Y_=>{Object.defineProperty(Y_,"__esModule",{value:!0});function SX(e,t,n){let r=t.match(/([a-z_]+)\.(.*)/i);if(r===null)e[t]=n;else{let i=e[r[1]];SX(i,r[2],n)}}function Jge(e,t,n={}){return Array.isArray(t)?GX(e,t,n):Dge(e,t,n)}function GX(e,t,n){let r=t.find(i=>i.name===e.name);if(r){for(let[i,s]of Object.entries(n))SX(r,i,s);return t}return[...t,e]}function Dge(e,t,n){return i=>{let s=t(i);return e.allowExclusionByUser&&!s.find(a=>a.name===e.name)?s:GX(e,s,n)}}Y_.addOrUpdateIntegration=Jge});var vX=g(F_=>{Object.defineProperty(F_,"__esModule",{value:!0});function Oge(e){let t=[],n={};return{add(r,i){for(;t.length>=e;){let s=t.shift();s!==void 0&&delete n[s]}n[r]&&this.delete(r),t.push(r),n[r]=i},clear(){n={},t=[]},get(r){return n[r]},size(){return t.length},delete(r){if(!n[r])return!1;delete n[r];for(let i=0;i<t.length;i++)if(t[i]===r){t.splice(i,1);break}return!0}}}F_.makeFifoCache=Oge});var WX=g(Na=>{Object.defineProperty(Na,"__esModule",{value:!0});var ZX=gn(),EX=ol(),Uge=gl(),Kge=pn();function x_(e,t){return e(t.stack||"",1)}function RX(e,t){let n={type:t.name||t.constructor.name,value:t.message},r=x_(e,t);return r.length&&(n.stacktrace={frames:r}),n}function Lge(e){if("name"in e&&typeof e.name=="string"){let t=`'${e.name}' captured as exception`;return"message"in e&&typeof e.message=="string"&&(t+=` with message '${e.message}'`),t}else return"message"in e&&typeof e.message=="string"?e.message:`Object captured as exception with keys: ${Kge.extractExceptionKeysForMessage(e)}`}function Mge(e,t,n,r){let i=typeof e=="function"?e().getClient():e,s=n,a=r&&r.data&&r.data.mechanism||{handled:!0,type:"generic"},c;if(!ZX.isError(n)){if(ZX.isPlainObject(n)){let l=i&&i.getOptions().normalizeDepth;c={__serialized__:Uge.normalizeToSize(n,l)};let d=Lge(n);s=r&&r.syntheticException||new Error(d),s.message=d}else s=r&&r.syntheticException||new Error(n),s.message=n;a.synthetic=!0}let u={exception:{values:[RX(t,s)]}};return c&&(u.extra=c),EX.addExceptionTypeValue(u,void 0,void 0),EX.addExceptionMechanism(u,a),{...u,event_id:r&&r.event_id}}function qge(e,t,n="info",r,i){let s={event_id:r&&r.event_id,level:n,message:t};if(i&&r&&r.syntheticException){let o=x_(e,r.syntheticException);o.length&&(s.exception={values:[{value:t,stacktrace:{frames:o}}]})}return s}Na.eventFromMessage=qge;Na.eventFromUnknownInput=Mge;Na.exceptionFromError=RX;Na.parseStackFrames=x_});var wX=g(ym=>{Object.defineProperty(ym,"__esModule",{value:!0});var Pge=pn(),zge=zp();function jge(e,t,n,r){let i=e(),s=!1,o=!0;return setInterval(()=>{let a=i.getTimeMs();s===!1&&a>t+n&&(s=!0,o&&r()),a<t+n&&(s=!1)},20),{poll:()=>{i.reset()},enabled:a=>{o=a}}}function Qge(e,t,n){let r=t?t.replace(/^file:\/\//,""):void 0,i=e.location.columnNumber?e.location.columnNumber+1:void 0,s=e.location.lineNumber?e.location.lineNumber+1:void 0;return Pge.dropUndefinedKeys({filename:r,module:n(r),function:e.functionName||"?",colno:i,lineno:s,in_app:r?zge.filenameIsInApp(r):void 0})}ym.callFrameToStackFrame=Qge;ym.watchdogTimer=jge});var NX=g(J_=>{Object.defineProperty(J_,"__esModule",{value:!0});var X_=class{constructor(t){this._maxSize=t,this._cache=new Map}get size(){return this._cache.size}get(t){let n=this._cache.get(t);if(n!==void 0)return this._cache.delete(t),this._cache.set(t,n),n}set(t,n){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(t,n)}remove(t){let n=this._cache.get(t);return n&&this._cache.delete(t),n}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){let t=[];return this._cache.forEach(n=>t.push(n)),t}};J_.LRUMap=X_});var O_=g(D_=>{Object.defineProperty(D_,"__esModule",{value:!0});function $ge(e,t){return e??t()}D_._nullishCoalesce=$ge});var TX=g(U_=>{Object.defineProperty(U_,"__esModule",{value:!0});var epe=O_();async function tpe(e,t){return epe._nullishCoalesce(e,t)}U_._asyncNullishCoalesce=tpe});var L_=g(K_=>{Object.defineProperty(K_,"__esModule",{value:!0});async function npe(e){let t,n=e[0],r=1;for(;r<e.length;){let i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=await s(n)):(i==="call"||i==="optionalCall")&&(n=await s((...o)=>n.call(t,...o)),t=void 0)}return n}K_._asyncOptionalChain=npe});var HX=g(M_=>{Object.defineProperty(M_,"__esModule",{value:!0});var rpe=L_();async function ipe(e){let t=await rpe._asyncOptionalChain(e);return t??!0}M_._asyncOptionalChainDelete=ipe});var P_=g(q_=>{Object.defineProperty(q_,"__esModule",{value:!0});function spe(e){let t,n=e[0],r=1;for(;r<e.length;){let i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(t,...o)),t=void 0)}return n}q_._optionalChain=spe});var kX=g(z_=>{Object.defineProperty(z_,"__esModule",{value:!0});var ope=P_();function ape(e){let t=ope._optionalChain(e);return t??!0}z_._optionalChainDelete=ape});var VX=g(j_=>{Object.defineProperty(j_,"__esModule",{value:!0});function cpe(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}j_.escapeStringForRegex=cpe});var A=g(C=>{Object.defineProperty(C,"__esModule",{value:!0});var upe=sx(),bm=TA(),Q_=FA(),lpe=JA(),$_=nt(),dpe=Fx(),It=gn(),gpe=Xx(),Am=Rn(),ppe=A_(),Hi=ol(),eS=mm(),_m=gl(),Fr=pn(),qs=qx(),mpe=Px(),Ps=tX(),tS=iX(),fl=jp(),hl=nl(),ki=t_(),nS=G_(),Ta=w_(),Sm=fX(),YX=C_(),rr=k_(),fpe=CX(),Il=_X(),Ha=T_(),Gm=E_(),hpe=BX(),Ipe=vX(),Bm=WX(),FX=wX(),Cpe=NX(),ype=TX(),bpe=L_(),Ape=HX(),_pe=O_(),Spe=P_(),Gpe=kX(),Bpe=MA(),vpe=QA(),xX=h_(),Zpe=r_(),Epe=f_(),Rpe=a_(),Wpe=d_(),wpe=Hr(),Npe=zp(),Tpe=VX(),Hpe=p_();C.applyAggregateErrorsToEvent=upe.applyAggregateErrorsToEvent;C.getComponentName=bm.getComponentName;C.getDomElement=bm.getDomElement;C.getLocationHref=bm.getLocationHref;C.htmlTreeAsString=bm.htmlTreeAsString;C.dsnFromString=Q_.dsnFromString;C.dsnToString=Q_.dsnToString;C.makeDsn=Q_.makeDsn;C.SentryError=lpe.SentryError;C.GLOBAL_OBJ=$_.GLOBAL_OBJ;C.getGlobalObject=$_.getGlobalObject;C.getGlobalSingleton=$_.getGlobalSingleton;C.addInstrumentationHandler=dpe.addInstrumentationHandler;C.isDOMError=It.isDOMError;C.isDOMException=It.isDOMException;C.isElement=It.isElement;C.isError=It.isError;C.isErrorEvent=It.isErrorEvent;C.isEvent=It.isEvent;C.isInstanceOf=It.isInstanceOf;C.isNaN=It.isNaN;C.isPlainObject=It.isPlainObject;C.isPrimitive=It.isPrimitive;C.isRegExp=It.isRegExp;C.isString=It.isString;C.isSyntheticEvent=It.isSyntheticEvent;C.isThenable=It.isThenable;C.isVueViewModel=It.isVueViewModel;C.isBrowser=gpe.isBrowser;C.CONSOLE_LEVELS=Am.CONSOLE_LEVELS;C.consoleSandbox=Am.consoleSandbox;C.logger=Am.logger;C.originalConsoleMethods=Am.originalConsoleMethods;C.memoBuilder=ppe.memoBuilder;C.addContextToFrame=Hi.addContextToFrame;C.addExceptionMechanism=Hi.addExceptionMechanism;C.addExceptionTypeValue=Hi.addExceptionTypeValue;C.arrayify=Hi.arrayify;C.checkOrSetAlreadyCaught=Hi.checkOrSetAlreadyCaught;C.getEventDescription=Hi.getEventDescription;C.parseSemver=Hi.parseSemver;C.uuid4=Hi.uuid4;C.dynamicRequire=eS.dynamicRequire;C.isNodeEnv=eS.isNodeEnv;C.loadModule=eS.loadModule;C.normalize=_m.normalize;C.normalizeToSize=_m.normalizeToSize;C.normalizeUrlToBase=_m.normalizeUrlToBase;C.walk=_m.walk;C.addNonEnumerableProperty=Fr.addNonEnumerableProperty;C.convertToPlainObject=Fr.convertToPlainObject;C.dropUndefinedKeys=Fr.dropUndefinedKeys;C.extractExceptionKeysForMessage=Fr.extractExceptionKeysForMessage;C.fill=Fr.fill;C.getOriginalFunction=Fr.getOriginalFunction;C.markFunctionWrapped=Fr.markFunctionWrapped;C.objectify=Fr.objectify;C.urlEncode=Fr.urlEncode;C.basename=qs.basename;C.dirname=qs.dirname;C.isAbsolute=qs.isAbsolute;C.join=qs.join;C.normalizePath=qs.normalizePath;C.relative=qs.relative;C.resolve=qs.resolve;C.makePromiseBuffer=mpe.makePromiseBuffer;C.DEFAULT_USER_INCLUDES=Ps.DEFAULT_USER_INCLUDES;C.addRequestDataToEvent=Ps.addRequestDataToEvent;C.addRequestDataToTransaction=Ps.addRequestDataToTransaction;C.extractPathForTransaction=Ps.extractPathForTransaction;C.extractRequestData=Ps.extractRequestData;C.winterCGHeadersToDict=Ps.winterCGHeadersToDict;C.winterCGRequestToRequestData=Ps.winterCGRequestToRequestData;C.severityFromString=tS.severityFromString;C.severityLevelFromString=tS.severityLevelFromString;C.validSeverityLevels=tS.validSeverityLevels;C.createStackParser=fl.createStackParser;C.getFunctionName=fl.getFunctionName;C.nodeStackLineParser=fl.nodeStackLineParser;C.stackParserFromStackParserOptions=fl.stackParserFromStackParserOptions;C.stripSentryFramesAndReverse=fl.stripSentryFramesAndReverse;C.isMatchingPattern=hl.isMatchingPattern;C.safeJoin=hl.safeJoin;C.snipLine=hl.snipLine;C.stringMatchesSomePattern=hl.stringMatchesSomePattern;C.truncate=hl.truncate;C.isNativeFetch=ki.isNativeFetch;C.supportsDOMError=ki.supportsDOMError;C.supportsDOMException=ki.supportsDOMException;C.supportsErrorEvent=ki.supportsErrorEvent;C.supportsFetch=ki.supportsFetch;C.supportsNativeFetch=ki.supportsNativeFetch;C.supportsReferrerPolicy=ki.supportsReferrerPolicy;C.supportsReportingObserver=ki.supportsReportingObserver;C.SyncPromise=nS.SyncPromise;C.rejectedSyncPromise=nS.rejectedSyncPromise;C.resolvedSyncPromise=nS.resolvedSyncPromise;Object.defineProperty(C,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>Ta._browserPerformanceTimeOriginMode});C.browserPerformanceTimeOrigin=Ta.browserPerformanceTimeOrigin;C.dateTimestampInSeconds=Ta.dateTimestampInSeconds;C.timestampInSeconds=Ta.timestampInSeconds;C.timestampWithMs=Ta.timestampWithMs;C.usingPerformanceAPI=Ta.usingPerformanceAPI;C.TRACEPARENT_REGEXP=Sm.TRACEPARENT_REGEXP;C.extractTraceparentData=Sm.extractTraceparentData;C.generateSentryTraceHeader=Sm.generateSentryTraceHeader;C.tracingContextFromHeaders=Sm.tracingContextFromHeaders;C.getSDKSource=YX.getSDKSource;C.isBrowserBundle=YX.isBrowserBundle;C.addItemToEnvelope=rr.addItemToEnvelope;C.createAttachmentEnvelopeItem=rr.createAttachmentEnvelopeItem;C.createEnvelope=rr.createEnvelope;C.createEventEnvelopeHeaders=rr.createEventEnvelopeHeaders;C.envelopeContainsItemType=rr.envelopeContainsItemType;C.envelopeItemTypeToDataCategory=rr.envelopeItemTypeToDataCategory;C.forEachEnvelopeItem=rr.forEachEnvelopeItem;C.getSdkMetadataForEnvelopeHeader=rr.getSdkMetadataForEnvelopeHeader;C.parseEnvelope=rr.parseEnvelope;C.serializeEnvelope=rr.serializeEnvelope;C.createClientReportEnvelope=fpe.createClientReportEnvelope;C.DEFAULT_RETRY_AFTER=Il.DEFAULT_RETRY_AFTER;C.disabledUntil=Il.disabledUntil;C.isRateLimited=Il.isRateLimited;C.parseRetryAfterHeader=Il.parseRetryAfterHeader;C.updateRateLimits=Il.updateRateLimits;C.BAGGAGE_HEADER_NAME=Ha.BAGGAGE_HEADER_NAME;C.MAX_BAGGAGE_STRING_LENGTH=Ha.MAX_BAGGAGE_STRING_LENGTH;C.SENTRY_BAGGAGE_KEY_PREFIX=Ha.SENTRY_BAGGAGE_KEY_PREFIX;C.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=Ha.SENTRY_BAGGAGE_KEY_PREFIX_REGEX;C.baggageHeaderToDynamicSamplingContext=Ha.baggageHeaderToDynamicSamplingContext;C.dynamicSamplingContextToSentryBaggageHeader=Ha.dynamicSamplingContextToSentryBaggageHeader;C.getNumberOfUrlSegments=Gm.getNumberOfUrlSegments;C.getSanitizedUrlString=Gm.getSanitizedUrlString;C.parseUrl=Gm.parseUrl;C.stripUrlQueryAndFragment=Gm.stripUrlQueryAndFragment;C.addOrUpdateIntegration=hpe.addOrUpdateIntegration;C.makeFifoCache=Ipe.makeFifoCache;C.eventFromMessage=Bm.eventFromMessage;C.eventFromUnknownInput=Bm.eventFromUnknownInput;C.exceptionFromError=Bm.exceptionFromError;C.parseStackFrames=Bm.parseStackFrames;C.callFrameToStackFrame=FX.callFrameToStackFrame;C.watchdogTimer=FX.watchdogTimer;C.LRUMap=Cpe.LRUMap;C._asyncNullishCoalesce=ype._asyncNullishCoalesce;C._asyncOptionalChain=bpe._asyncOptionalChain;C._asyncOptionalChainDelete=Ape._asyncOptionalChainDelete;C._nullishCoalesce=_pe._nullishCoalesce;C._optionalChain=Spe._optionalChain;C._optionalChainDelete=Gpe._optionalChainDelete;C.addConsoleInstrumentationHandler=Bpe.addConsoleInstrumentationHandler;C.addClickKeypressInstrumentationHandler=vpe.addClickKeypressInstrumentationHandler;C.SENTRY_XHR_DATA_KEY=xX.SENTRY_XHR_DATA_KEY;C.addXhrInstrumentationHandler=xX.addXhrInstrumentationHandler;C.addFetchInstrumentationHandler=Zpe.addFetchInstrumentationHandler;C.addHistoryInstrumentationHandler=Epe.addHistoryInstrumentationHandler;C.addGlobalErrorInstrumentationHandler=Rpe.addGlobalErrorInstrumentationHandler;C.addGlobalUnhandledRejectionInstrumentationHandler=Wpe.addGlobalUnhandledRejectionInstrumentationHandler;C.resetInstrumentationHandlers=wpe.resetInstrumentationHandlers;C.filenameIsInApp=Npe.filenameIsInApp;C.escapeStringForRegex=Tpe.escapeStringForRegex;C.supportsHistory=Hpe.supportsHistory});var we=g(rS=>{Object.defineProperty(rS,"__esModule",{value:!0});var kpe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;rS.DEBUG_BUILD=kpe});var Cl=g(iS=>{Object.defineProperty(iS,"__esModule",{value:!0});var Vpe="production";iS.DEFAULT_ENVIRONMENT=Vpe});var bl=g(yl=>{Object.defineProperty(yl,"__esModule",{value:!0});var vm=A(),Ype=we();function XX(){return vm.getGlobalSingleton("globalEventProcessors",()=>[])}function Fpe(e){XX().push(e)}function sS(e,t,n,r=0){return new vm.SyncPromise((i,s)=>{let o=e[r];if(t===null||typeof o!="function")i(t);else{let a=o({...t},n);Ype.DEBUG_BUILD&&o.id&&a===null&&vm.logger.log(`Event processor "${o.id}" dropped event`),vm.isThenable(a)?a.then(c=>sS(e,c,n,r+1).then(i)).then(null,s):sS(e,a,n,r+1).then(i).then(null,s)}})}yl.addGlobalEventProcessor=Fpe;yl.getGlobalEventProcessors=XX;yl.notifyEventProcessors=sS});var Sl=g(_l=>{Object.defineProperty(_l,"__esModule",{value:!0});var Al=A();function xpe(e){let t=Al.timestampInSeconds(),n={sid:Al.uuid4(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Jpe(n)};return e&&oS(n,e),n}function oS(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Al.timestampInSeconds(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Al.uuid4()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Xpe(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),oS(e,n)}function Jpe(e){return Al.dropUndefinedKeys({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}_l.closeSession=Xpe;_l.makeSession=xpe;_l.updateSession=oS});var zs=g(Zm=>{Object.defineProperty(Zm,"__esModule",{value:!0});var JX=A();function Dpe(e){let{data:t,description:n,op:r,parent_span_id:i,span_id:s,status:o,tags:a,trace_id:c,origin:u}=e.toJSON();return JX.dropUndefinedKeys({data:t,description:n,op:r,parent_span_id:i,span_id:s,status:o,tags:a,trace_id:c,origin:u})}function Ope(e){return JX.generateSentryTraceHeader(e.traceId,e.spanId,e.sampled)}Zm.spanToTraceContext=Dpe;Zm.spanToTraceHeader=Ope});var Em=g(Gl=>{Object.defineProperty(Gl,"__esModule",{value:!0});var Upe=A(),Kpe=zs();function Lpe(e,t){let{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s,propagationContext:o}=t;qpe(e,t),r&&jpe(e,r),Qpe(e,n),Ppe(e,i),zpe(e,s,o)}function Mpe(e,t){let{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:m,span:f}=t;ka(e,"extra",n),ka(e,"tags",r),ka(e,"user",i),ka(e,"contexts",s),ka(e,"sdkProcessingMetadata",a),o&&(e.level=o),m&&(e.transactionName=m),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function ka(e,t,n){n&&Object.keys(n).length&&(e[t]={...e[t],...n})}function qpe(e,t){let{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=t;n&&Object.keys(n).length&&(e.extra={...n,...e.extra}),r&&Object.keys(r).length&&(e.tags={...r,...e.tags}),i&&Object.keys(i).length&&(e.user={...i,...e.user}),s&&Object.keys(s).length&&(e.contexts={...s,...e.contexts}),o&&(e.level=o),a&&(e.transaction=a)}function Ppe(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function zpe(e,t,n){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t,propagationContext:n}}function jpe(e,t){e.contexts={trace:Kpe.spanToTraceContext(t),...e.contexts};let n=t.transaction;if(n){e.sdkProcessingMetadata={dynamicSamplingContext:n.getDynamicSamplingContext(),...e.sdkProcessingMetadata};let r=n.name;r&&(e.tags={transaction:r,...e.tags})}}function Qpe(e,t){e.fingerprint=e.fingerprint?Upe.arrayify(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}Gl.applyScopeDataToEvent=Lpe;Gl.mergePropOverwrite=ka;Gl.mergeScopeData=Mpe});var wm=g(Bl=>{Object.defineProperty(Bl,"__esModule",{value:!0});var Wm=A(),DX=bl(),$pe=Sl(),eme=Em(),tme=100,Rm,xr=class{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=OX()}static clone(t){return t?t.clone():new xr}clone(){let t=new xr;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&$pe.updateSession(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){let n=t(this);return n instanceof xr?n:this}return t instanceof xr?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):Wm.isPlainObject(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=OX(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:tme;if(r<=0)return this;let i={timestamp:Wm.dateTimestampInSeconds(),...t},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){let{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:i,_extra:s,_user:o,_level:a,_fingerprint:c,_eventProcessors:u,_propagationContext:l,_sdkProcessingMetadata:d,_transactionName:p,_span:m}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:i,extra:s,user:o,level:a,fingerprint:c||[],eventProcessors:u,propagationContext:l,sdkProcessingMetadata:d,transactionName:p,span:m}}applyToEvent(t,n={},r=[]){eme.applyScopeDataToEvent(t,this.getScopeData());let i=[...r,...DX.getGlobalEventProcessors(),...this._eventProcessors];return DX.notifyEventProcessors(i,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function nme(){return Rm||(Rm=new xr),Rm}function rme(e){Rm=e}function OX(){return{traceId:Wm.uuid4(),spanId:Wm.uuid4().substring(16)}}Bl.Scope=xr;Bl.getGlobalScope=nme;Bl.setGlobalScope=rme});var cS=g(aS=>{Object.defineProperty(aS,"__esModule",{value:!0});var ime="7.92.0";aS.SDK_VERSION=ime});var ir=g(Lt=>{Object.defineProperty(Lt,"__esModule",{value:!0});var Ct=A(),sme=Cl(),uS=we(),UX=wm(),lS=Sl(),ome=cS(),Nm=parseFloat(ome.SDK_VERSION),ame=100,Va=class{constructor(t,n,r,i=Nm){this._version=i;let s;n?s=n:(s=new UX.Scope,s.setClient(t));let o;r?o=r:(o=new UX.Scope,o.setClient(t)),this._stack=[{scope:s}],t&&this.bindClient(t),this._isolationScope=o}isOlderThan(t){return this._version<t}bindClient(t){let n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){let t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){let n=this.pushScope(),r;try{r=t(n)}catch(i){throw this.popScope(),i}return Ct.isThenable(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){let r=this._lastEventId=n&&n.event_id?n.event_id:Ct.uuid4(),i=new Error("Sentry syntheticException");return this._withClient((s,o)=>{s.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},o)}),r}captureMessage(t,n,r){let i=this._lastEventId=r&&r.event_id?r.event_id:Ct.uuid4(),s=new Error(t);return this._withClient((o,a)=>{o.captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i},a)}),i}captureEvent(t,n){let r=n&&n.event_id?n.event_id:Ct.uuid4();return t.type||(this._lastEventId=r),this._withClient((i,s)=>{i.captureEvent(t,{...n,event_id:r},s)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){let{scope:r,client:i}=this.getStackTop();if(!i)return;let{beforeBreadcrumb:s=null,maxBreadcrumbs:o=ame}=i.getOptions&&i.getOptions()||{};if(o<=0)return;let c={timestamp:Ct.dateTimestampInSeconds(),...t},u=s?Ct.consoleSandbox(()=>s(c,n)):c;u!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,o))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n)}configureScope(t){let{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){let n=dS(this);try{t(this)}finally{dS(n)}}getIntegration(t){let n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return uS.DEBUG_BUILD&&Ct.logger.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){let r=this._callExtensionMethod("startTransaction",t,n);return uS.DEBUG_BUILD&&!r&&(this.getClient()?Ct.logger.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):Ct.logger.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){let n=this.getStackTop().scope,r=n.getSession();r&&lS.closeSession(r),this._sendSessionUpdate(),n.setSession()}startSession(t){let{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=sme.DEFAULT_ENVIRONMENT}=r&&r.getOptions()||{},{userAgent:o}=Ct.GLOBAL_OBJ.navigator||{},a=lS.makeSession({release:i,environment:s,user:n.getUser(),...o&&{userAgent:o},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&lS.updateSession(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){let t=this.getClient(),n=t&&t.getOptions();return Boolean(n&&n.sendDefaultPii)}_sendSessionUpdate(){let{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(t){let{scope:n,client:r}=this.getStackTop();r&&t(r,n)}_callExtensionMethod(t,...n){let i=js().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,n);uS.DEBUG_BUILD&&Ct.logger.warn(`Extension method ${t} couldn't be found, doing nothing.`)}};function js(){return Ct.GLOBAL_OBJ.__SENTRY__=Ct.GLOBAL_OBJ.__SENTRY__||{extensions:{},hub:void 0},Ct.GLOBAL_OBJ}function dS(e){let t=js(),n=vl(t);return Tm(t,e),n}function KX(){let e=js();if(e.__SENTRY__&&e.__SENTRY__.acs){let t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return LX(e)}function cme(){return KX().getIsolationScope()}function LX(e=js()){return(!MX(e)||vl(e).isOlderThan(Nm))&&Tm(e,new Va),vl(e)}function ume(e,t=LX()){if(!MX(e)||vl(e).isOlderThan(Nm)){let n=t.getClient(),r=t.getScope(),i=t.getIsolationScope();Tm(e,new Va(n,r.clone(),i.clone()))}}function lme(e){let t=js();t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.acs=e}function dme(e,t={}){let n=js();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function MX(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function vl(e){return Ct.getGlobalSingleton("hub",()=>new Va,e)}function Tm(e,t){if(!e)return!1;let n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}Lt.API_VERSION=Nm;Lt.Hub=Va;Lt.ensureHubOnCarrier=ume;Lt.getCurrentHub=KX;Lt.getHubFromCarrier=vl;Lt.getIsolationScope=cme;Lt.getMainCarrier=js;Lt.makeMain=dS;Lt.runWithAsyncContext=dme;Lt.setAsyncContextStrategy=lme;Lt.setHubOnCarrier=Tm});var Qs=g(Ya=>{Object.defineProperty(Ya,"__esModule",{value:!0});var qX=A(),gme=ir();function pme(e){return(e||gme.getCurrentHub()).getScope().getTransaction()}var mme=qX.extractTraceparentData;function fme(e){return e>9999999999?e/1e3:e}Ya.stripUrlQueryAndFragment=qX.stripUrlQueryAndFragment;Ya.ensureTimestampInSeconds=fme;Ya.extractTraceparentData=mme;Ya.getActiveTransaction=pme});var zX=g(mS=>{Object.defineProperty(mS,"__esModule",{value:!0});var gS=A(),hme=we(),Ime=Qs(),PX=!1;function Cme(){PX||(PX=!0,gS.addGlobalErrorInstrumentationHandler(pS),gS.addGlobalUnhandledRejectionInstrumentationHandler(pS))}function pS(){let e=Ime.getActiveTransaction();if(e){let t="internal_error";hme.DEBUG_BUILD&&gS.logger.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}pS.tag="sentry_tracingErrorCallback";mS.registerErrorInstrumentation=Cme});var Hm=g(El=>{Object.defineProperty(El,"__esModule",{value:!0});var Vi=A(),jX=we(),QX=zs(),yme=Qs(),fS=class{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}},Zl=class{constructor(t={}){this.traceId=t.traceId||Vi.uuid4(),this.spanId=t.spanId||Vi.uuid4().substring(16),this.startTimestamp=t.startTimestamp||Vi.timestampInSeconds(),this.tags=t.tags||{},this.data=t.data||{},this.attributes=t.attributes||{},this.instrumenter=t.instrumenter||"sentry",this.origin=t.origin||"manual",t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.name&&(this.description=t.name),t.status&&(this.status=t.status),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}get name(){return this.description||""}set name(t){this.updateName(t)}startChild(t){let n=new Zl({...t,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,jX.DEBUG_BUILD&&n.transaction){let r=t&&t.op||"< unknown op >",i=n.transaction.name||"< unknown name >",s=n.transaction.spanId,o=`[Tracing] Starting '${r}' span on transaction '${i}' (${s}).`;n.transaction.metadata.spanMetadata[n.spanId]={logMessage:o},Vi.logger.log(o)}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setAttribute(t,n){n===void 0?delete this.attributes[t]:this.attributes[t]=n}setAttributes(t){Object.keys(t).forEach(n=>this.setAttribute(n,t[n]))}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t)),this.setData("http.response.status_code",t);let n=$X(t);return n!=="unknown_error"&&this.setStatus(n),this}setName(t){this.updateName(t)}updateName(t){return this.description=t,this}isSuccess(){return this.status==="ok"}finish(t){return this.end(t)}end(t){if(jX.DEBUG_BUILD&&this.transaction&&this.transaction.spanId!==this.spanId){let{logMessage:n}=this.transaction.metadata.spanMetadata[this.spanId];n&&Vi.logger.log(n.replace("Starting","Finishing"))}this.endTimestamp=typeof t=="number"?yme.ensureTimestampInSeconds(t):Vi.timestampInSeconds()}toTraceparent(){return QX.spanToTraceHeader(this)}toContext(){return Vi.dropUndefinedKeys({data:this._getData(),description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=t.data||{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=t.spanId||this.spanId,this.startTimestamp=t.startTimestamp||this.startTimestamp,this.status=t.status,this.tags=t.tags||{},this.traceId=t.traceId||this.traceId,this}getTraceContext(){return QX.spanToTraceContext(this)}toJSON(){return Vi.dropUndefinedKeys({data:this._getData(),description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}_getData(){let{data:t,attributes:n}=this,r=Object.keys(t).length>0,i=Object.keys(n).length>0;if(!(!r&&!i))return r&&i?{...t,...n}:r?t:n}};function $X(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}El.Span=Zl;El.SpanRecorder=fS;El.spanStatusfromHttpCode=$X});var Rl=g(hS=>{Object.defineProperty(hS,"__esModule",{value:!0});var bme=A(),Ame=Cl();function _me(e,t,n){let r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},o=bme.dropUndefinedKeys({environment:r.environment||Ame.DEFAULT_ENVIRONMENT,release:r.release,user_segment:s,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",o),o}hS.getDynamicSamplingContextFromClient=_me});var Vm=g(CS=>{Object.defineProperty(CS,"__esModule",{value:!0});var Fa=A(),km=we(),eJ=ir(),Sme=zs(),Gme=Rl(),tJ=Hm(),Bme=Qs(),IS=class extends tJ.Span{constructor(t,n){super(t),delete this.description,this._measurements={},this._contexts={},this._hub=n||eJ.getCurrentHub(),this._name=t.name||"",this.metadata={source:"custom",...t.metadata,spanMetadata:{}},this._trimEnd=t.trimEnd,this.transaction=this;let r=this.metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}setName(t,n="custom"){this._name=t,this.metadata.source=n}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new tJ.SpanRecorder(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this.metadata={...this.metadata,...t}}end(t){let n=typeof t=="number"?Bme.ensureTimestampInSeconds(t):Fa.timestampInSeconds(),r=this._finishTransaction(n);if(!!r)return this._hub.captureEvent(r)}toContext(){let t=super.toContext();return Fa.dropUndefinedKeys({...t,name:this.name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this.name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;let t=this._hub||eJ.getCurrentHub(),n=t.getClient();if(!n)return{};let r=t.getScope(),i=Gme.getDynamicSamplingContextFromClient(this.traceId,n,r),s=this.metadata.sampleRate;s!==void 0&&(i.sample_rate=`${s}`);let o=this.metadata.source;return o&&o!=="url"&&(i.transaction=this.name),this.sampled!==void 0&&(i.sampled=String(this.sampled)),i}setHub(t){this._hub=t}_finishTransaction(t){if(this.endTimestamp!==void 0)return;this.name||(km.DEBUG_BUILD&&Fa.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.end(t);let n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this.sampled!==!0){km.DEBUG_BUILD&&Fa.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}let r=this.spanRecorder?this.spanRecorder.spans.filter(a=>a!==this&&a.endTimestamp):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((a,c)=>a.endTimestamp&&c.endTimestamp?a.endTimestamp>c.endTimestamp?a:c:a).endTimestamp);let i=this.metadata,s={contexts:{...this._contexts,trace:Sme.spanToTraceContext(this)},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...i,dynamicSamplingContext:this.getDynamicSamplingContext()},...i.source&&{transaction_info:{source:i.source}}};return Object.keys(this._measurements).length>0&&(km.DEBUG_BUILD&&Fa.logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),s.measurements=this._measurements),km.DEBUG_BUILD&&Fa.logger.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),s}};CS.Transaction=IS});var bS=g(Wl=>{Object.defineProperty(Wl,"__esModule",{value:!0});var rt=A(),Mt=we(),vme=Hm(),Zme=Vm(),Eme=Qs(),Ym={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Rme="finishReason",xa=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"],Fm=class extends vme.SpanRecorder{constructor(t,n,r,i){super(i),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=r}add(t){if(t.spanId!==this.transactionSpanId){let n=t.end;t.end=(...r)=>(this._popActivity(t.spanId),n.apply(t,r)),t.endTimestamp===void 0&&this._pushActivity(t.spanId)}super.add(t)}},yS=class extends Zme.Transaction{constructor(t,n,r=Ym.idleTimeout,i=Ym.finalTimeout,s=Ym.heartbeatInterval,o=!1){super(t,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=i,this._heartbeatInterval=s,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=xa[4],o&&(Mt.DEBUG_BUILD&&rt.logger.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),n.getScope().setSpan(this)),this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=xa[3],this.end())},this._finalTimeout)}end(t=rt.timestampInSeconds()){let n=Eme.ensureTimestampInSeconds(t);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setTag(Rme,this._finishReason),this.spanRecorder){Mt.DEBUG_BUILD&&rt.logger.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(let r of this._beforeFinishCallbacks)r(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanId===this.spanId)return!0;r.endTimestamp||(r.endTimestamp=n,r.setStatus("cancelled"),Mt.DEBUG_BUILD&&rt.logger.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));let i=r.startTimestamp<n,s=(this._finalTimeout+this._idleTimeout)/1e3,o=r.endTimestamp-this.startTimestamp<s;if(Mt.DEBUG_BUILD){let a=JSON.stringify(r,void 0,2);i?o||rt.logger.log("[Tracing] discarding Span since it finished after Transaction final timeout",a):rt.logger.log("[Tracing] discarding Span since it happened after Transaction was finished",a)}return i&&o}),Mt.DEBUG_BUILD&&rt.logger.log("[Tracing] flushing IdleTransaction")}else Mt.DEBUG_BUILD&&rt.logger.log("[Tracing] No active IdleTransaction");if(this._onScope){let r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){let n=i=>{this._finished||this._pushActivity(i)},r=i=>{this._finished||this._popActivity(i)};this.spanRecorder=new Fm(n,r,this.spanId,t),Mt.DEBUG_BUILD&&rt.logger.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=xa[5],this.end(t)))}setFinishReason(t){this._finishReason=t}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=xa[1],this.end(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),Mt.DEBUG_BUILD&&rt.logger.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,Mt.DEBUG_BUILD&&rt.logger.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(Mt.DEBUG_BUILD&&rt.logger.log(`[Tracing] popActivity ${t}`),delete this.activities[t],Mt.DEBUG_BUILD&&rt.logger.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){let n=rt.timestampInSeconds();this._idleTimeoutCanceledPermanently?(this._finishReason=xa[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;let t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?(Mt.DEBUG_BUILD&&rt.logger.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=xa[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){Mt.DEBUG_BUILD&&rt.logger.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}};Wl.IdleTransaction=yS;Wl.IdleTransactionSpanRecorder=Fm;Wl.TRACING_DEFAULTS=Ym});var xm=g(Xa=>{Object.defineProperty(Xa,"__esModule",{value:!0});var qt=A(),Wme=Cl(),nJ=bl(),_S=wm(),AS=Em();function wme(e,t,n,r,i,s){let{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||qt.uuid4(),timestamp:t.timestamp||qt.dateTimestampInSeconds()},u=n.integrations||e.integrations.map(I=>I.name);Nme(c,e),Tme(c,u),t.type===void 0&&iJ(c,e.stackParser);let l=kme(r,n.captureContext);n.mechanism&&qt.addExceptionMechanism(c,n.mechanism);let d=i&&i.getEventProcessors?i.getEventProcessors():[],p=_S.getGlobalScope().getScopeData();if(s){let I=s.getScopeData();AS.mergeScopeData(p,I)}if(l){let I=l.getScopeData();AS.mergeScopeData(p,I)}let m=[...n.attachments||[],...p.attachments];m.length&&(n.attachments=m),AS.applyScopeDataToEvent(c,p);let f=[...d,...nJ.getGlobalEventProcessors(),...p.eventProcessors];return nJ.notifyEventProcessors(f,c,n).then(I=>(I&&sJ(I),typeof o=="number"&&o>0?Hme(I,o,a):I))}function Nme(e,t){let{environment:n,release:r,dist:i,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:Wme.DEFAULT_ENVIRONMENT),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=qt.truncate(e.message,s));let o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=qt.truncate(o.value,s));let a=e.request;a&&a.url&&(a.url=qt.truncate(a.url,s))}var rJ=new WeakMap;function iJ(e,t){let n=qt.GLOBAL_OBJ._sentryDebugIds;if(!n)return;let r,i=rJ.get(t);i?r=i:(r=new Map,rJ.set(t,r));let s=Object.keys(n).reduce((o,a)=>{let c,u=r.get(a);u?c=u:(c=t(a),r.set(a,c));for(let l=c.length-1;l>=0;l--){let d=c[l];if(d.filename){o[d.filename]=n[a];break}}return o},{});try{e.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function sJ(e){let t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function Tme(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function Hme(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:qt.normalize(i.data,t,n)}}))},...e.user&&{user:qt.normalize(e.user,t,n)},...e.contexts&&{contexts:qt.normalize(e.contexts,t,n)},...e.extra&&{extra:qt.normalize(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=qt.normalize(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>(i.data&&(i.data=qt.normalize(i.data,t,n)),i))),r}function kme(e,t){if(!t)return e;let n=e?e.clone():new _S.Scope;return n.update(t),n}function Vme(e){if(!!e)return Yme(e)?{captureContext:e}:xme(e)?{captureContext:e}:e}function Yme(e){return e instanceof _S.Scope||typeof e=="function"}var Fme=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function xme(e){return Object.keys(e).some(t=>Fme.includes(t))}Xa.applyDebugIds=iJ;Xa.applyDebugMeta=sJ;Xa.parseEventHintOrCaptureContext=Vme;Xa.prepareEvent=wme});var Xr=g(ge=>{Object.defineProperty(ge,"__esModule",{value:!0});var Yi=A(),Xm=we(),it=ir(),Xme=xm();function Jme(e,t){return it.getCurrentHub().captureException(e,Xme.parseEventHintOrCaptureContext(t))}function Dme(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return it.getCurrentHub().captureMessage(e,n,r)}function Ome(e,t){return it.getCurrentHub().captureEvent(e,t)}function Ume(e){it.getCurrentHub().configureScope(e)}function Kme(e,t){it.getCurrentHub().addBreadcrumb(e,t)}function Lme(e,t){it.getCurrentHub().setContext(e,t)}function Mme(e){it.getCurrentHub().setExtras(e)}function qme(e,t){it.getCurrentHub().setExtra(e,t)}function Pme(e){it.getCurrentHub().setTags(e)}function zme(e,t){it.getCurrentHub().setTag(e,t)}function jme(e){it.getCurrentHub().setUser(e)}function Qme(e){return it.getCurrentHub().withScope(e)}function $me(e,t){return it.getCurrentHub().startTransaction({...e},t)}function SS(e,t){let n=oJ(),r=Jm();if(!r)Xm.DEBUG_BUILD&&Yi.logger.warn("Cannot capture check-in. No client defined.");else if(!r.captureCheckIn)Xm.DEBUG_BUILD&&Yi.logger.warn("Cannot capture check-in. Client does not support sending check-ins.");else return r.captureCheckIn(e,t,n);return Yi.uuid4()}function efe(e,t,n){let r=SS({monitorSlug:e,status:"in_progress"},n),i=Yi.timestampInSeconds();function s(a){SS({monitorSlug:e,status:a,checkInId:r,duration:Yi.timestampInSeconds()-i})}let o;try{o=t()}catch(a){throw s("error"),a}return Yi.isThenable(o)?Promise.resolve(o).then(()=>{s("ok")},()=>{s("error")}):s("ok"),o}async function tfe(e){let t=Jm();return t?t.flush(e):(Xm.DEBUG_BUILD&&Yi.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function nfe(e){let t=Jm();return t?t.close(e):(Xm.DEBUG_BUILD&&Yi.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function rfe(){return it.getCurrentHub().lastEventId()}function Jm(){return it.getCurrentHub().getClient()}function oJ(){return it.getCurrentHub().getScope()}ge.addBreadcrumb=Kme;ge.captureCheckIn=SS;ge.captureEvent=Ome;ge.captureException=Jme;ge.captureMessage=Dme;ge.close=nfe;ge.configureScope=Ume;ge.flush=tfe;ge.getClient=Jm;ge.getCurrentScope=oJ;ge.lastEventId=rfe;ge.setContext=Lme;ge.setExtra=qme;ge.setExtras=Mme;ge.setTag=zme;ge.setTags=Pme;ge.setUser=jme;ge.startTransaction=$me;ge.withMonitor=efe;ge.withScope=Qme});var Dm=g(GS=>{Object.defineProperty(GS,"__esModule",{value:!0});var ife=Xr();function sfe(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=ife.getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}GS.hasTracingEnabled=sfe});var aJ=g(BS=>{Object.defineProperty(BS,"__esModule",{value:!0});var $s=A(),Ja=we(),ofe=Dm();function afe(e,t,n){if(!ofe.hasTracingEnabled(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setMetadata({sampleRate:Number(r)})):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setMetadata({sampleRate:Number(r)})):(r=1,e.setMetadata({sampleRate:r})),cfe(r)?r?(e.sampled=Math.random()<r,e.sampled?(Ja.DEBUG_BUILD&&$s.logger.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):(Ja.DEBUG_BUILD&&$s.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(Ja.DEBUG_BUILD&&$s.logger.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):(Ja.DEBUG_BUILD&&$s.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function cfe(e){return $s.isNaN(e)||!(typeof e=="number"||typeof e=="boolean")?(Ja.DEBUG_BUILD&&$s.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?(Ja.DEBUG_BUILD&&$s.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}BS.sampleTransaction=afe});var vS=g(Om=>{Object.defineProperty(Om,"__esModule",{value:!0});var ufe=A(),lfe=we(),dfe=ir(),gfe=zs(),pfe=zX(),mfe=bS(),cJ=aJ(),ffe=Vm();function hfe(){let t=this.getScope().getSpan();return t?{"sentry-trace":gfe.spanToTraceHeader(t)}:{}}function Ife(e,t){let n=this.getClient(),r=n&&n.getOptions()||{},i=r.instrumenter||"sentry",s=e.instrumenter||"sentry";i!==s&&(lfe.DEBUG_BUILD&&ufe.logger.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${i}\` instrumenter.
The transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),e.sampled=!1);let o=new ffe.Transaction(e,this);return o=cJ.sampleTransaction(o,r,{parentSampled:e.parentSampled,transactionContext:e,...t}),o.sampled&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function Cfe(e,t,n,r,i,s,o){let a=e.getClient(),c=a&&a.getOptions()||{},u=new mfe.IdleTransaction(t,e,n,r,o,i);return u=cJ.sampleTransaction(u,c,{parentSampled:t.parentSampled,transactionContext:t,...s}),u.sampled&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",u),u}function yfe(){let e=dfe.getMainCarrier();!e.__SENTRY__||(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Ife),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=hfe),pfe.registerErrorInstrumentation())}Om.addTracingExtensions=yfe;Om.startIdleTransaction=Cfe});var ZS=g(wl=>{Object.defineProperty(wl,"__esModule",{value:!0});wl.SpanStatus=void 0;(function(e){let t="ok";e.Ok=t;let n="deadline_exceeded";e.DeadlineExceeded=n;let r="unauthenticated";e.Unauthenticated=r;let i="permission_denied";e.PermissionDenied=i;let s="not_found";e.NotFound=s;let o="resource_exhausted";e.ResourceExhausted=o;let a="invalid_argument";e.InvalidArgument=a;let c="unimplemented";e.Unimplemented=c;let u="unavailable";e.Unavailable=u;let l="internal_error";e.InternalError=l;let d="unknown_error";e.UnknownError=d;let p="cancelled";e.Cancelled=p;let m="already_exists";e.AlreadyExists=m;let f="failed_precondition";e.FailedPrecondition=f;let h="aborted";e.Aborted=h;let I="out_of_range";e.OutOfRange=I;let b="data_loss";e.DataLoss=b})(wl.SpanStatus||(wl.SpanStatus={}))});var RS=g(ES=>{Object.defineProperty(ES,"__esModule",{value:!0});var bfe=A();function Afe(e,t,n=()=>{}){let r;try{r=e()}catch(i){throw t(i),n(),i}return _fe(r,t,n)}function _fe(e,t,n){return bfe.isThenable(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}ES.handleCallbackErrors=Afe});var gJ=g(Jr=>{Object.defineProperty(Jr,"__esModule",{value:!0});var WS=A(),Sfe=we(),Nl=Xr(),Um=ir(),wS=RS(),uJ=Dm();function Gfe(e,t,n=()=>{},r=()=>{}){let i=TS(e),s=Um.getCurrentHub(),o=Nl.getCurrentScope(),a=o.getSpan(),c=NS(s,a,i);return o.setSpan(c),wS.handleCallbackErrors(()=>t(c),u=>{c&&c.setStatus("internal_error"),n(u,c)},()=>{c&&c.end(),o.setSpan(a),r()})}function lJ(e,t){let n=TS(e);return Nl.withScope(r=>{let i=Um.getCurrentHub(),s=r.getSpan(),o=NS(i,s,n);return r.setSpan(o),wS.handleCallbackErrors(()=>t(o),()=>{o&&(!o.status||o.status==="ok")&&o.setStatus("internal_error")},()=>o&&o.end())})}var Bfe=lJ;function vfe(e,t){let n=TS(e);return Nl.withScope(r=>{let i=Um.getCurrentHub(),s=r.getSpan(),o=NS(i,s,n);r.setSpan(o);function a(){o&&o.end()}return wS.handleCallbackErrors(()=>t(o,a),()=>{o&&!o.endTimestamp&&(!o.status||o.status==="ok")&&o.setStatus("internal_error")})})}function Zfe(e){if(!uJ.hasTracingEnabled())return;let t={...e};t.name!==void 0&&t.description===void 0&&(t.description=t.name);let n=Um.getCurrentHub(),r=dJ();return r?r.startChild(t):n.startTransaction(t)}function dJ(){return Nl.getCurrentScope().getSpan()}function Efe({sentryTrace:e,baggage:t},n){let r=Nl.getCurrentScope(),{traceparentData:i,dynamicSamplingContext:s,propagationContext:o}=WS.tracingContextFromHeaders(e,t);r.setPropagationContext(o),Sfe.DEBUG_BUILD&&i&&WS.logger.log(`[Tracing] Continuing trace ${i.traceId}.`);let a={...i,metadata:WS.dropUndefinedKeys({dynamicSamplingContext:i&&!s?{}:s})};return n?n(a):a}function NS(e,t,n){if(!!uJ.hasTracingEnabled())return t?t.startChild(n):e.startTransaction(n)}function TS(e){let t={...e};return t.name!==void 0&&t.description===void 0&&(t.description=t.name),t}Jr.continueTrace=Efe;Jr.getActiveSpan=dJ;Jr.startActiveSpan=Bfe;Jr.startInactiveSpan=Zfe;Jr.startSpan=lJ;Jr.startSpanManual=vfe;Jr.trace=Gfe});var pJ=g(HS=>{Object.defineProperty(HS,"__esModule",{value:!0});var Rfe=Qs();function Wfe(e,t,n){let r=Rfe.getActiveTransaction();r&&r.setMeasurement(e,t,n)}HS.setMeasurement=Wfe});var kS=g(Km=>{Object.defineProperty(Km,"__esModule",{value:!0});var Da=A();function wfe(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Nfe(e,t,n,r){let i=Da.getSdkMetadataForEnvelopeHeader(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:Da.dsnToString(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Da.createEnvelope(s,[o])}function Tfe(e,t,n,r){let i=Da.getSdkMetadataForEnvelopeHeader(n),s=e.type&&e.type!=="replay_event"?e.type:"event";wfe(e,n&&n.sdk);let o=Da.createEventEnvelopeHeaders(e,i,r,t);delete e.sdkProcessingMetadata;let a=[{type:s},e];return Da.createEnvelope(o,[a])}Km.createEventEnvelope=Tfe;Km.createSessionEnvelope=Nfe});var FS=g(YS=>{Object.defineProperty(YS,"__esModule",{value:!0});var Hfe=A(),kfe=Xr(),VS=class{constructor(t,n){this._client=t,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval(()=>this.flush(),this.flushTimeout*1e3),this._sessionAttrs=n}flush(){let t=this.getSessionAggregates();t.aggregates.length!==0&&(this._pendingAggregates={},this._client.sendSession(t))}getSessionAggregates(){let t=Object.keys(this._pendingAggregates).map(r=>this._pendingAggregates[parseInt(r)]),n={attrs:this._sessionAttrs,aggregates:t};return Hfe.dropUndefinedKeys(n)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;let t=kfe.getCurrentScope(),n=t.getRequestSession();n&&n.status&&(this._incrementSessionStatusCount(n.status,new Date),t.setRequestSession(void 0))}_incrementSessionStatusCount(t,n){let r=new Date(n).setSeconds(0,0);this._pendingAggregates[r]=this._pendingAggregates[r]||{};let i=this._pendingAggregates[r];switch(i.started||(i.started=new Date(r).toISOString()),t){case"errored":return i.errored=(i.errored||0)+1,i.errored;case"ok":return i.exited=(i.exited||0)+1,i.exited;default:return i.crashed=(i.crashed||0)+1,i.crashed}}};YS.SessionFlusher=VS});var Mm=g(Lm=>{Object.defineProperty(Lm,"__esModule",{value:!0});var xS=A(),Vfe="7";function mJ(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Yfe(e){return`${mJ(e)}${e.projectId}/envelope/`}function Ffe(e,t){return xS.urlEncode({sentry_key:e.publicKey,sentry_version:Vfe,...t&&{sentry_client:`${t.name}/${t.version}`}})}function xfe(e,t={}){let n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${Yfe(e)}?${Ffe(e,r)}`}function Xfe(e,t){let n=xS.makeDsn(e);if(!n)return"";let r=`${mJ(n)}embed/error-page/`,i=`dsn=${xS.dsnToString(n)}`;for(let s in t)if(s!=="dsn"&&s!=="onClose")if(s==="user"){let o=t.user;if(!o)continue;o.name&&(i+=`&name=${encodeURIComponent(o.name)}`),o.email&&(i+=`&email=${encodeURIComponent(o.email)}`)}else i+=`&${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`;return`${r}?${i}`}Lm.getEnvelopeEndpointWithUrlEncodedAuth=xfe;Lm.getReportDialogEndpoint=Xfe});var Dr=g(Fi=>{Object.defineProperty(Fi,"__esModule",{value:!0});var JS=A(),fJ=we(),Jfe=bl(),Dfe=Xr(),Ofe=ir(),XS=[];function Ufe(e){let t={};return e.forEach(n=>{let{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function Kfe(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=JS.arrayify(n(t)):r=t;let i=Ufe(r),s=qfe(i,o=>o.name==="Debug");if(s!==-1){let[o]=i.splice(s,1);i.push(o)}return i}function Lfe(e,t){let n={};return t.forEach(r=>{r&&hJ(e,r,n)}),n}function hJ(e,t,n){if(n[t.name]=t,XS.indexOf(t.name)===-1&&(t.setupOnce(Jfe.addGlobalEventProcessor,Ofe.getCurrentHub),XS.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,s)=>r(i,s,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){let r=t.processEvent.bind(t),i=Object.assign((s,o)=>r(s,o,e),{id:t.name});e.addEventProcessor(i)}fJ.DEBUG_BUILD&&JS.logger.log(`Integration installed: ${t.name}`)}function Mfe(e){let t=Dfe.getClient();if(!t||!t.addIntegration){fJ.DEBUG_BUILD&&JS.logger.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function qfe(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function Pfe(e,t){return Object.assign(function(...r){return{setupOnce:()=>{},...t(...r)}},{id:e})}Fi.addIntegration=Mfe;Fi.convertIntegrationFnToClass=Pfe;Fi.getIntegrationsToSetup=Kfe;Fi.installedIntegrations=XS;Fi.setupIntegration=hJ;Fi.setupIntegrations=Lfe});var Oa=g(Nn=>{Object.defineProperty(Nn,"__esModule",{value:!0});var zfe="c",jfe="g",Qfe="s",$fe="d",ehe=/[^a-zA-Z0-9_/.-]+/g,the=/[^\w\d_:/@.{}[\]$-]+/g,nhe=5e3,rhe=1e4,ihe=1e4;Nn.COUNTER_METRIC_TYPE=zfe;Nn.DEFAULT_BROWSER_FLUSH_INTERVAL=nhe;Nn.DEFAULT_FLUSH_INTERVAL=rhe;Nn.DISTRIBUTION_METRIC_TYPE=$fe;Nn.GAUGE_METRIC_TYPE=jfe;Nn.MAX_WEIGHT=ihe;Nn.NAME_AND_TAG_KEY_NORMALIZATION_REGEX=ehe;Nn.SET_METRIC_TYPE=Qfe;Nn.TAG_VALUE_NORMALIZATION_REGEX=the});var Tl=g(Ua=>{Object.defineProperty(Ua,"__esModule",{value:!0});var she=A(),IJ=Oa();function ohe(e,t,n,r){let i=Object.entries(she.dropUndefinedKeys(r)).sort((s,o)=>s[0].localeCompare(o[0]));return`${e}${t}${n}${i}`}function ahe(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t>>>0}function che(e){let t="";for(let n of e){let r=Object.entries(n.tags),i=r.length>0?`|#${r.map(([s,o])=>`${s}:${o}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${i}|T${n.timestamp}
`}return t}function uhe(e){let t={};for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let r=n.replace(IJ.NAME_AND_TAG_KEY_NORMALIZATION_REGEX,"_");t[r]=String(e[n]).replace(IJ.TAG_VALUE_NORMALIZATION_REGEX,"_")}return t}Ua.getBucketKey=ohe;Ua.sanitizeTags=uhe;Ua.serializeMetricBuckets=che;Ua.simpleHash=ahe});var yJ=g(DS=>{Object.defineProperty(DS,"__esModule",{value:!0});var CJ=A(),lhe=Tl();function dhe(e,t,n,r){let i={sent_at:new Date().toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),!!r&&t&&(i.dsn=CJ.dsnToString(t));let s=ghe(e);return CJ.createEnvelope(i,[s])}function ghe(e){let t=lhe.serializeMetricBuckets(e);return[{type:"statsd",length:t.length},t]}DS.createMetricEnvelope=dhe});var US=g(qm=>{Object.defineProperty(qm,"__esModule",{value:!0});var j=A(),phe=Mm(),sr=we(),bJ=kS(),mhe=Xr(),fhe=ir(),AJ=Dr(),hhe=yJ(),_J=Sl(),Ihe=Rl(),Che=xm(),SJ="Not capturing exception because it's already been captured.",OS=class{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=j.makeDsn(t.dsn):sr.DEBUG_BUILD&&j.logger.warn("No DSN provided, client will not send events."),this._dsn){let n=phe.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(j.checkOrSetAlreadyCaught(t)){sr.DEBUG_BUILD&&j.logger.log(SJ);return}let i=n&&n.event_id;return this._process(this.eventFromException(t,n).then(s=>this._captureEvent(s,n,r)).then(s=>{i=s})),i}captureMessage(t,n,r,i){let s=r&&r.event_id,o=j.isPrimitive(t)?this.eventFromMessage(String(t),n,r):this.eventFromException(t,r);return this._process(o.then(a=>this._captureEvent(a,r,i)).then(a=>{s=a})),s}captureEvent(t,n,r){if(n&&n.originalException&&j.checkOrSetAlreadyCaught(n.originalException)){sr.DEBUG_BUILD&&j.logger.log(SJ);return}let i=n&&n.event_id;return this._process(this._captureEvent(t,n,r).then(s=>{i=s})),i}captureSession(t){typeof t.release!="string"?sr.DEBUG_BUILD&&j.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),_J.updateSession(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){let n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i))):j.resolvedSyncPromise(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&(this._integrations=AJ.setupIntegrations(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return sr.DEBUG_BUILD&&j.logger.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){AJ.setupIntegration(this,t,this._integrations)}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=bJ.createEventEnvelope(t,this._dsn,this._options._metadata,this._options.tunnel);for(let s of n.attachments||[])r=j.addItemToEnvelope(r,j.createAttachmentEnvelopeItem(s,this._options.transportOptions&&this._options.transportOptions.textEncoder));let i=this._sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){let n=bJ.createSessionEnvelope(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){let i=`${t}:${n}`;sr.DEBUG_BUILD&&j.logger.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}captureAggregateMetrics(t){sr.DEBUG_BUILD&&j.logger.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);let n=hhe.createMetricEnvelope(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_updateSessionFromEvent(t,n){let r=!1,i=!1,s=n.exception&&n.exception.values;if(s){i=!0;for(let c of s){let u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}let o=t.status==="ok";(o&&t.errors===0||o&&r)&&(_J.updateSession(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new j.SyncPromise(n=>{let r=0,i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,t&&r>=t&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,i=fhe.getIsolationScope()){let s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",t,n),Che.prepareEvent(s,t,n,r,this,i).then(a=>{if(a===null)return a;let{propagationContext:c}=a.sdkProcessingMetadata||{};if(!(a.contexts&&a.contexts.trace)&&c){let{traceId:l,spanId:d,parentSpanId:p,dsc:m}=c;a.contexts={trace:{trace_id:l,span_id:d,parent_span_id:p},...a.contexts};let f=m||Ihe.getDynamicSamplingContextFromClient(l,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:f,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(i=>i.event_id,i=>{if(sr.DEBUG_BUILD){let s=i;s.logLevel==="log"?j.logger.log(s.message):j.logger.warn(s)}})}_processEvent(t,n,r){let i=this.getOptions(),{sampleRate:s}=i,o=BJ(t),a=GJ(t),c=t.type||"error",u=`before send for type \`${c}\``;if(a&&typeof s=="number"&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",t),j.rejectedSyncPromise(new j.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));let l=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,r).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",l,t),new j.SentryError("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return d;let m=bhe(i,d,n);return yhe(m,u)}).then(d=>{if(d===null)throw this.recordDroppedEvent("before_send",l,t),new j.SentryError(`${u} returned \`null\`, will not send event.`,"log");let p=r&&r.getSession();!o&&p&&this._updateSessionFromEvent(p,d);let m=d.transaction_info;if(o&&m&&d.transaction!==t.transaction){let f="custom";d.transaction_info={...m,source:f}}return this.sendEvent(d,n),d}).then(null,d=>{throw d instanceof j.SentryError?d:(this.captureException(d,{data:{__sentry__:!0},originalException:d}),new j.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{sr.DEBUG_BUILD&&j.logger.error("Error while sending event:",n)});sr.DEBUG_BUILD&&j.logger.error("Transport disabled")}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{let[r,i]=n.split(":");return{reason:r,category:i,quantity:t[n]}})}};function yhe(e,t){let n=`${t} must return \`null\` or a valid event.`;if(j.isThenable(e))return e.then(r=>{if(!j.isPlainObject(r)&&r!==null)throw new j.SentryError(n);return r},r=>{throw new j.SentryError(`${t} rejected with ${r}`)});if(!j.isPlainObject(e)&&e!==null)throw new j.SentryError(n);return e}function bhe(e,t,n){let{beforeSend:r,beforeSendTransaction:i}=e;return GJ(t)&&r?r(t,n):BJ(t)&&i?i(t,n):t}function GJ(e){return e.type===void 0}function BJ(e){return e.type==="transaction"}function Ahe(e){let t=mhe.getClient();!t||!t.addEventProcessor||t.addEventProcessor(e)}qm.BaseClient=OS;qm.addEventProcessor=Ahe});var MS=g(LS=>{Object.defineProperty(LS,"__esModule",{value:!0});var KS=A();function _he(e,t,n,r,i){let s={sent_at:new Date().toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),!!r&&!!i&&(s.dsn=KS.dsnToString(i)),t&&(s.trace=KS.dropUndefinedKeys(t));let o=She(e);return KS.createEnvelope(s,[o])}function She(e){return[{type:"check_in"},e]}LS.createCheckInEnvelope=_he});var qS=g(eo=>{Object.defineProperty(eo,"__esModule",{value:!0});var Pm=Oa(),Ghe=Tl(),zm=class{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}},jm=class{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},Qm=class{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}},$m=class{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?Ghe.simpleHash(t):t).join(":")}},Bhe={[Pm.COUNTER_METRIC_TYPE]:zm,[Pm.GAUGE_METRIC_TYPE]:jm,[Pm.DISTRIBUTION_METRIC_TYPE]:Qm,[Pm.SET_METRIC_TYPE]:$m};eo.CounterMetric=zm;eo.DistributionMetric=Qm;eo.GaugeMetric=jm;eo.METRIC_MAP=Bhe;eo.SetMetric=$m});var EJ=g(zS=>{Object.defineProperty(zS,"__esModule",{value:!0});var vJ=A(),Hl=Oa(),vhe=qS(),ZJ=Tl(),PS=class{constructor(t){this._client=t,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval(()=>this._flush(),Hl.DEFAULT_FLUSH_INTERVAL),this._flushShift=Math.floor(Math.random()*Hl.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}add(t,n,r,i="none",s={},o=vJ.timestampInSeconds()){let a=Math.floor(o),c=n.replace(Hl.NAME_AND_TAG_KEY_NORMALIZATION_REGEX,"_"),u=ZJ.sanitizeTags(s),l=ZJ.getBucketKey(t,c,i,u),d=this._buckets.get(l);d?(d.metric.add(r),d.timestamp<a&&(d.timestamp=a)):(d={metric:new vhe.METRIC_MAP[t](r),timestamp:a,metricType:t,name:c,unit:i,tags:u},this._buckets.set(l,d)),this._bucketsTotalWeight+=d.metric.weight,this._bucketsTotalWeight>=Hl.MAX_WEIGHT&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush){this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),this._buckets.clear();return}let t=Math.floor(vJ.timestampInSeconds())-Hl.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,n=new Map;for(let[r,i]of this._buckets)i.timestamp<=t&&(n.set(r,i),this._bucketsTotalWeight-=i.metric.weight);for(let[r]of n)this._buckets.delete(r);this._captureMetrics(n)}_captureMetrics(t){if(t.size>0&&this._client.captureAggregateMetrics){let n=Array.from(t).map(([,r])=>r);this._client.captureAggregateMetrics(n)}}};zS.MetricsAggregator=PS});var RJ=g(QS=>{Object.defineProperty(QS,"__esModule",{value:!0});var Or=A(),Zhe=US(),Ehe=MS(),ef=we(),Rhe=Xr(),Whe=EJ(),whe=FS(),Nhe=vS(),The=zs(),Hhe=Rl();ZS();var jS=class extends Zhe.BaseClient{constructor(t){Nhe.addTracingExtensions(),super(t),t._experiments&&t._experiments.metricsAggregator&&(this.metricsAggregator=new Whe.MetricsAggregator(this))}eventFromException(t,n){return Or.resolvedSyncPromise(Or.eventFromUnknownInput(Rhe.getClient(),this._options.stackParser,t,n))}eventFromMessage(t,n="info",r){return Or.resolvedSyncPromise(Or.eventFromMessage(this._options.stackParser,t,n,r,this._options.attachStacktrace))}captureException(t,n,r){if(this._options.autoSessionTracking&&this._sessionFlusher&&r){let i=r.getRequestSession();i&&i.status==="ok"&&(i.status="errored")}return super.captureException(t,n,r)}captureEvent(t,n,r){if(this._options.autoSessionTracking&&this._sessionFlusher&&r&&(t.type||"exception")==="exception"&&t.exception&&t.exception.values&&t.exception.values.length>0){let o=r.getRequestSession();o&&o.status==="ok"&&(o.status="errored")}return super.captureEvent(t,n,r)}close(t){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(t)}initSessionFlusher(){let{release:t,environment:n}=this._options;t?this._sessionFlusher=new whe.SessionFlusher(this,{release:t,environment:n}):ef.DEBUG_BUILD&&Or.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(t,n,r){let i="checkInId"in t&&t.checkInId?t.checkInId:Or.uuid4();if(!this._isEnabled())return ef.DEBUG_BUILD&&Or.logger.warn("SDK not enabled, will not capture checkin."),i;let s=this.getOptions(),{release:o,environment:a,tunnel:c}=s,u={check_in_id:i,monitor_slug:t.monitorSlug,status:t.status,release:o,environment:a};"duration"in t&&(u.duration=t.duration),n&&(u.monitor_config={schedule:n.schedule,checkin_margin:n.checkinMargin,max_runtime:n.maxRuntime,timezone:n.timezone});let[l,d]=this._getTraceInfoFromScope(r);d&&(u.contexts={trace:d});let p=Ehe.createCheckInEnvelope(u,l,this.getSdkMetadata(),c,this.getDsn());return ef.DEBUG_BUILD&&Or.logger.info("Sending checkin:",t.monitorSlug,t.status),this._sendEnvelope(p),i}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():ef.DEBUG_BUILD&&Or.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(t,n,r,i){return this._options.platform&&(t.platform=t.platform||this._options.platform),this._options.runtime&&(t.contexts={...t.contexts,runtime:(t.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(t.server_name=t.server_name||this._options.serverName),super._prepareEvent(t,n,r,i)}_getTraceInfoFromScope(t){if(!t)return[void 0,void 0];let n=t.getSpan();if(n)return[n.transaction?n.transaction.getDynamicSamplingContext():void 0,The.spanToTraceContext(n)];let{traceId:r,spanId:i,parentSpanId:s,dsc:o}=t.getPropagationContext(),a={trace_id:r,span_id:i,parent_span_id:s};return o?[o,a]:[Hhe.getDynamicSamplingContextFromClient(r,this,t),a]}};QS.ServerRuntimeClient=jS});var wJ=g($S=>{Object.defineProperty($S,"__esModule",{value:!0});var WJ=A(),khe=we(),Vhe=ir();function Yhe(e,t){t.debug===!0&&(khe.DEBUG_BUILD?WJ.logger.enable():WJ.consoleSandbox(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}));let n=Vhe.getCurrentHub();n.getScope().update(t.initialScope);let i=new e(t);n.bindClient(i)}$S.initAndBind=Yhe});var kJ=g(tf=>{Object.defineProperty(tf,"__esModule",{value:!0});var wt=A(),NJ=we(),HJ=30;function Fhe(e,t,n=wt.makePromiseBuffer(e.bufferSize||HJ)){let r={},i=o=>n.drain(o);function s(o){let a=[];if(wt.forEachEnvelopeItem(o,(d,p)=>{let m=wt.envelopeItemTypeToDataCategory(p);if(wt.isRateLimited(r,m)){let f=TJ(d,p);e.recordDroppedEvent("ratelimit_backoff",m,f)}else a.push(d)}),a.length===0)return wt.resolvedSyncPromise();let c=wt.createEnvelope(o[0],a),u=d=>{wt.forEachEnvelopeItem(c,(p,m)=>{let f=TJ(p,m);e.recordDroppedEvent(d,wt.envelopeItemTypeToDataCategory(m),f)})},l=()=>t({body:wt.serializeEnvelope(c,e.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&NJ.DEBUG_BUILD&&wt.logger.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=wt.updateRateLimits(r,d),d),d=>{throw u("network_error"),d});return n.add(l).then(d=>d,d=>{if(d instanceof wt.SentryError)return NJ.DEBUG_BUILD&&wt.logger.error("Skipped sending event because buffer is full."),u("queue_overflow"),wt.resolvedSyncPromise();throw d})}return s.__sentry__baseTransport__=!0,{send:s,flush:i}}function TJ(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}tf.DEFAULT_TRANSPORT_BUFFER_SIZE=HJ;tf.createTransport=Fhe});var YJ=g(kl=>{Object.defineProperty(kl,"__esModule",{value:!0});var tG=A(),xhe=we(),VJ=100,nG=5e3,Xhe=36e5;function eG(e,t){xhe.DEBUG_BUILD&&tG.logger.info(`[Offline]: ${e}`,t)}function Jhe(e){return t=>{let n=e(t),r=t.createStore?t.createStore(t):void 0,i=nG,s;function o(l,d,p){return tG.envelopeContainsItemType(l,["replay_event","replay_recording","client_report"])?!1:t.shouldStore?t.shouldStore(l,d,p):!0}function a(l){!r||(s&&clearTimeout(s),s=setTimeout(async()=>{s=void 0;let d=await r.pop();d&&(eG("Attempting to send previously queued event"),u(d).catch(p=>{eG("Failed to retry sending",p)}))},l),typeof s!="number"&&s.unref&&s.unref())}function c(){s||(a(i),i=Math.min(i*2,Xhe))}async function u(l){try{let d=await n.send(l),p=VJ;if(d){if(d.headers&&d.headers["retry-after"])p=tG.parseRetryAfterHeader(d.headers["retry-after"]);else if((d.statusCode||0)>=400)return d}return a(p),i=nG,d}catch(d){if(r&&await o(l,d,i))return await r.insert(l),c(),eG("Error sending. Event queued",d),{};throw d}}return t.flushAtStartup&&c(),{send:u,flush:l=>n.flush(l)}}}kl.MIN_DELAY=VJ;kl.START_DELAY=nG;kl.makeOfflineTransport=Jhe});var xJ=g(nf=>{Object.defineProperty(nf,"__esModule",{value:!0});var FJ=A(),Dhe=Mm();function rG(e,t){let n;return FJ.forEachEnvelopeItem(e,(r,i)=>(t.includes(i)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function Ohe(e,t){return n=>{let r=e(n);return{send:async i=>{let s=rG(i,["event","transaction","profile","replay_event"]);return s&&(s.release=t),r.send(i)},flush:i=>r.flush(i)}}}function Uhe(e,t){return n=>{let r=e(n),i={};function s(c,u){let l=u?`${c}:${u}`:c;if(!i[l]){let d=FJ.dsnFromString(c);if(!d)return;let p=Dhe.getEnvelopeEndpointWithUrlEncodedAuth(d);i[l]=u?Ohe(e,u)({...n,url:p}):e({...n,url:p})}return i[l]}async function o(c){function u(p){let m=p&&p.length?p:["event"];return rG(c,m)}let l=t({envelope:c,getEvent:u}).map(p=>typeof p=="string"?s(p,void 0):s(p.dsn,p.release)).filter(p=>!!p);return l.length===0&&l.push(r),(await Promise.all(l.map(p=>p.send(c))))[0]}async function a(c){let u=[...Object.keys(i).map(d=>i[d]),r];return(await Promise.all(u.map(d=>d.flush(c)))).every(d=>d)}return{send:o,flush:a}}}nf.eventFromEnvelope=rG;nf.makeMultiplexedTransport=Uhe});var sG=g(iG=>{Object.defineProperty(iG,"__esModule",{value:!0});var Khe=A(),Lhe=Dr(),XJ,JJ="FunctionToString",Mhe=()=>({name:JJ,setupOnce(){XJ=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=Khe.getOriginalFunction(this)||this;return XJ.apply(t,e)}}catch{}}}),qhe=Lhe.convertIntegrationFnToClass(JJ,Mhe);iG.FunctionToString=qhe});var aG=g(oG=>{Object.defineProperty(oG,"__esModule",{value:!0});var Ye=A(),to=we(),Phe=Dr(),zhe=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],jhe=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],DJ="InboundFilters",Qhe=e=>({name:DJ,processEvent(t,n,r){let i=r.getOptions(),s=eIe(e,i);return tIe(t,s)?null:t}}),$he=Phe.convertIntegrationFnToClass(DJ,Qhe);function eIe(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:zhe],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:jhe],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function tIe(e,t){return t.ignoreInternal&&aIe(e)?(to.DEBUG_BUILD&&Ye.logger.warn(`Event dropped due to being internal Sentry Error.
Event: ${Ye.getEventDescription(e)}`),!0):nIe(e,t.ignoreErrors)?(to.DEBUG_BUILD&&Ye.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ye.getEventDescription(e)}`),!0):rIe(e,t.ignoreTransactions)?(to.DEBUG_BUILD&&Ye.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ye.getEventDescription(e)}`),!0):iIe(e,t.denyUrls)?(to.DEBUG_BUILD&&Ye.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ye.getEventDescription(e)}.
Url: ${rf(e)}`),!0):sIe(e,t.allowUrls)?!1:(to.DEBUG_BUILD&&Ye.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ye.getEventDescription(e)}.
Url: ${rf(e)}`),!0)}function nIe(e,t){return e.type||!t||!t.length?!1:oIe(e).some(n=>Ye.stringMatchesSomePattern(n,t))}function rIe(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;let n=e.transaction;return n?Ye.stringMatchesSomePattern(n,t):!1}function iIe(e,t){if(!t||!t.length)return!1;let n=rf(e);return n?Ye.stringMatchesSomePattern(n,t):!1}function sIe(e,t){if(!t||!t.length)return!0;let n=rf(e);return n?Ye.stringMatchesSomePattern(n,t):!0}function oIe(e){let t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),to.DEBUG_BUILD&&t.length===0&&Ye.logger.error(`Could not extract message for event ${Ye.getEventDescription(e)}`),t}function aIe(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function cIe(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function rf(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?cIe(t):null}catch{return to.DEBUG_BUILD&&Ye.logger.error(`Cannot extract url for event ${Ye.getEventDescription(e)}`),null}}oG.InboundFilters=$he});var uG=g(cG=>{Object.defineProperty(cG,"__esModule",{value:!0});var OJ=A(),uIe=Dr(),lIe="cause",dIe=5,UJ="LinkedErrors",gIe=(e={})=>{let t=e.limit||dIe,n=e.key||lIe;return{name:UJ,preprocessEvent(r,i,s){let o=s.getOptions();OJ.applyAggregateErrorsToEvent(OJ.exceptionFromError,o.stackParser,o.maxValueLength,n,t,r,i)}}},pIe=uIe.convertIntegrationFnToClass(UJ,gIe);cG.LinkedErrors=pIe});var KJ=g(Vl=>{Object.defineProperty(Vl,"__esModule",{value:!0});var mIe=sG(),fIe=aG(),hIe=uG();Vl.FunctionToString=mIe.FunctionToString;Vl.InboundFilters=fIe.InboundFilters;Vl.LinkedErrors=hIe.LinkedErrors});var MJ=g(lG=>{Object.defineProperty(lG,"__esModule",{value:!0});function IIe(e,t){let n=t&&bIe(t)?t.getClient():t,r=n&&n.getDsn(),i=n&&n.getOptions().tunnel;return yIe(e,r)||CIe(e,i)}function CIe(e,t){return t?LJ(e)===LJ(t):!1}function yIe(e,t){return t?e.includes(t.host):!1}function LJ(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function bIe(e){return e.getClient!==void 0}lG.isSentryRequestUrl=IIe});var jJ=g(Yl=>{Object.defineProperty(Yl,"__esModule",{value:!0});var dG=A(),PJ=new Map,qJ=new Set;function AIe(e){if(!!dG.GLOBAL_OBJ._sentryModuleMetadata)for(let t of Object.keys(dG.GLOBAL_OBJ._sentryModuleMetadata)){let n=dG.GLOBAL_OBJ._sentryModuleMetadata[t];if(qJ.has(t))continue;qJ.add(t);let r=e(t);for(let i of r.reverse())if(i.filename){PJ.set(i.filename,n);break}}}function zJ(e,t){return AIe(e),PJ.get(t)}function _Ie(e,t){try{t.exception.values.forEach(n=>{if(!!n.stacktrace)for(let r of n.stacktrace.frames||[]){if(!r.filename)continue;let i=zJ(e,r.filename);i&&(r.module_metadata=i)}})}catch{}}function SIe(e){try{e.exception.values.forEach(t=>{if(!!t.stacktrace)for(let n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}Yl.addMetadataToStackFrames=_Ie;Yl.getMetadataForUrl=zJ;Yl.stripMetadataFromStackFrames=SIe});var eD=g(gG=>{Object.defineProperty(gG,"__esModule",{value:!0});var GIe=A(),BIe=Dr(),QJ=jJ(),$J="ModuleMetadata",vIe=()=>({name:$J,setup(e){typeof e.on=="function"&&e.on("beforeEnvelope",t=>{GIe.forEachEnvelopeItem(t,(n,r)=>{if(r==="event"){let i=Array.isArray(n)?n[1]:void 0;i&&(QJ.stripMetadataFromStackFrames(i),n[1]=i)}})})},processEvent(e,t,n){let r=n.getOptions().stackParser;return QJ.addMetadataToStackFrames(r,e),e}}),ZIe=BIe.convertIntegrationFnToClass($J,vIe);gG.ModuleMetadata=ZIe});var rD=g(mG=>{Object.defineProperty(mG,"__esModule",{value:!0});var tD=A(),EIe=Dr(),pG={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},nD="RequestData",RIe=(e={})=>{let t=tD.addRequestDataToEvent,n={...pG,...e,include:{method:!0,...pG.include,...e.include,user:e.include&&typeof e.include.user=="boolean"?e.include.user:{...pG.include.user,...(e.include||{}).user}}};return{name:nD,processEvent(r,i,s){let{transactionNamingScheme:o}=n,{sdkProcessingMetadata:a={}}=r,c=a.request;if(!c)return r;let u=a.requestDataOptionsFromExpressHandler||a.requestDataOptionsFromGCPWrapper||wIe(n),l=t(r,c,u);if(r.type==="transaction"||o==="handler")return l;let p=c._sentryTransaction;if(p){let m=NIe(s)==="sentry.javascript.nextjs"?p.name.startsWith("/api"):o!=="path",[f]=tD.extractPathForTransaction(c,{path:!0,method:m,customRoute:p.name});l.transaction=f}return l}}},WIe=EIe.convertIntegrationFnToClass(nD,RIe);function wIe(e){let{transactionNamingScheme:t,include:{ip:n,user:r,...i}}=e,s=[];for(let[a,c]of Object.entries(i))c&&s.push(a);let o;if(r===void 0)o=!0;else if(typeof r=="boolean")o=r;else{let a=[];for(let[c,u]of Object.entries(r))u&&a.push(c);o=a}return{include:{ip:n,user:o,request:s.length!==0?s:void 0,transaction:t}}}function NIe(e){try{return e.getOptions()._metadata.sdk.name}catch{return}}mG.RequestData=WIe});var oD=g(hG=>{Object.defineProperty(hG,"__esModule",{value:!0});var TIe=A(),iD=Oa(),HIe=qS(),sD=Tl(),fG=class{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),iD.DEFAULT_BROWSER_FLUSH_INTERVAL)}add(t,n,r,i="none",s={},o=TIe.timestampInSeconds()){let a=Math.floor(o),c=n.replace(iD.NAME_AND_TAG_KEY_NORMALIZATION_REGEX,"_"),u=sD.sanitizeTags(s),l=sD.getBucketKey(t,c,i,u),d=this._buckets.get(l);d?(d.metric.add(r),d.timestamp<a&&(d.timestamp=a)):this._buckets.set(l,{metric:new HIe.METRIC_MAP[t](r),timestamp:a,metricType:t,name:c,unit:i,tags:u})}flush(){if(this._buckets.size!==0){if(this._client.captureAggregateMetrics){let t=Array.from(this._buckets).map(([,n])=>n);this._client.captureAggregateMetrics(t)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}};hG.BrowserMetricsAggregator=fG});var cD=g(IG=>{Object.defineProperty(IG,"__esModule",{value:!0});var kIe=Dr(),VIe=oD(),aD="MetricsAggregator",YIe=()=>({name:aD,setup(e){e.metricsAggregator=new VIe.BrowserMetricsAggregator(e)}}),FIe=kIe.convertIntegrationFnToClass(aD,YIe);IG.MetricsAggregator=FIe});var hD=g(no=>{Object.defineProperty(no,"__esModule",{value:!0});var uD=A(),lD=we(),dD=Xr(),sf=Oa(),xIe=cD();function of(e,t,n,r={}){let i=dD.getClient(),s=dD.getCurrentScope();if(i){if(!i.metricsAggregator){lD.DEBUG_BUILD&&uD.logger.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs");return}let{unit:o,tags:a,timestamp:c}=r,{release:u,environment:l}=i.getOptions(),d=s.getTransaction(),p={};u&&(p.release=u),l&&(p.environment=l),d&&(p.transaction=d.name),lD.DEBUG_BUILD&&uD.logger.log(`Adding value of ${n} to ${e} metric ${t}`),i.metricsAggregator.add(e,t,n,o,{...p,...a},c)}}function gD(e,t=1,n){of(sf.COUNTER_METRIC_TYPE,e,t,n)}function pD(e,t,n){of(sf.DISTRIBUTION_METRIC_TYPE,e,t,n)}function mD(e,t,n){of(sf.SET_METRIC_TYPE,e,t,n)}function fD(e,t,n){of(sf.GAUGE_METRIC_TYPE,e,t,n)}var XIe={increment:gD,distribution:pD,set:mD,gauge:fD,MetricsAggregator:xIe.MetricsAggregator};no.distribution=pD;no.gauge=fD;no.increment=gD;no.metrics=XIe;no.set=mD});var O=g(_=>{Object.defineProperty(_,"__esModule",{value:!0});var ID=vS(),CD=bS(),yD=Hm(),JIe=Vm(),bD=Qs(),DIe=ZS(),ro=gJ(),OIe=Rl(),UIe=pJ(),AD=kS(),Ae=Xr(),or=ir(),CG=Sl(),KIe=FS(),yG=wm(),_D=bl(),SD=Mm(),GD=US(),LIe=RJ(),MIe=wJ(),qIe=kJ(),PIe=YJ(),zIe=xJ(),jIe=cS(),bG=Dr(),QIe=KJ(),BD=Em(),$Ie=xm(),eCe=MS(),tCe=Dm(),nCe=MJ(),rCe=RS(),iCe=zs(),sCe=Cl(),oCe=eD(),aCe=rD(),cCe=hD(),uCe=sG(),lCe=aG(),dCe=uG();_.addTracingExtensions=ID.addTracingExtensions;_.startIdleTransaction=ID.startIdleTransaction;_.IdleTransaction=CD.IdleTransaction;_.TRACING_DEFAULTS=CD.TRACING_DEFAULTS;_.Span=yD.Span;_.spanStatusfromHttpCode=yD.spanStatusfromHttpCode;_.Transaction=JIe.Transaction;_.extractTraceparentData=bD.extractTraceparentData;_.getActiveTransaction=bD.getActiveTransaction;Object.defineProperty(_,"SpanStatus",{enumerable:!0,get:()=>DIe.SpanStatus});_.continueTrace=ro.continueTrace;_.getActiveSpan=ro.getActiveSpan;_.startActiveSpan=ro.startActiveSpan;_.startInactiveSpan=ro.startInactiveSpan;_.startSpan=ro.startSpan;_.startSpanManual=ro.startSpanManual;_.trace=ro.trace;_.getDynamicSamplingContextFromClient=OIe.getDynamicSamplingContextFromClient;_.setMeasurement=UIe.setMeasurement;_.createEventEnvelope=AD.createEventEnvelope;_.createSessionEnvelope=AD.createSessionEnvelope;_.addBreadcrumb=Ae.addBreadcrumb;_.captureCheckIn=Ae.captureCheckIn;_.captureEvent=Ae.captureEvent;_.captureException=Ae.captureException;_.captureMessage=Ae.captureMessage;_.close=Ae.close;_.configureScope=Ae.configureScope;_.flush=Ae.flush;_.getClient=Ae.getClient;_.getCurrentScope=Ae.getCurrentScope;_.lastEventId=Ae.lastEventId;_.setContext=Ae.setContext;_.setExtra=Ae.setExtra;_.setExtras=Ae.setExtras;_.setTag=Ae.setTag;_.setTags=Ae.setTags;_.setUser=Ae.setUser;_.startTransaction=Ae.startTransaction;_.withMonitor=Ae.withMonitor;_.withScope=Ae.withScope;_.Hub=or.Hub;_.ensureHubOnCarrier=or.ensureHubOnCarrier;_.getCurrentHub=or.getCurrentHub;_.getHubFromCarrier=or.getHubFromCarrier;_.getIsolationScope=or.getIsolationScope;_.getMainCarrier=or.getMainCarrier;_.makeMain=or.makeMain;_.runWithAsyncContext=or.runWithAsyncContext;_.setAsyncContextStrategy=or.setAsyncContextStrategy;_.setHubOnCarrier=or.setHubOnCarrier;_.closeSession=CG.closeSession;_.makeSession=CG.makeSession;_.updateSession=CG.updateSession;_.SessionFlusher=KIe.SessionFlusher;_.Scope=yG.Scope;_.getGlobalScope=yG.getGlobalScope;_.setGlobalScope=yG.setGlobalScope;_.addGlobalEventProcessor=_D.addGlobalEventProcessor;_.notifyEventProcessors=_D.notifyEventProcessors;_.getEnvelopeEndpointWithUrlEncodedAuth=SD.getEnvelopeEndpointWithUrlEncodedAuth;_.getReportDialogEndpoint=SD.getReportDialogEndpoint;_.BaseClient=GD.BaseClient;_.addEventProcessor=GD.addEventProcessor;_.ServerRuntimeClient=LIe.ServerRuntimeClient;_.initAndBind=MIe.initAndBind;_.createTransport=qIe.createTransport;_.makeOfflineTransport=PIe.makeOfflineTransport;_.makeMultiplexedTransport=zIe.makeMultiplexedTransport;_.SDK_VERSION=jIe.SDK_VERSION;_.addIntegration=bG.addIntegration;_.convertIntegrationFnToClass=bG.convertIntegrationFnToClass;_.getIntegrationsToSetup=bG.getIntegrationsToSetup;_.Integrations=QIe;_.applyScopeDataToEvent=BD.applyScopeDataToEvent;_.mergeScopeData=BD.mergeScopeData;_.prepareEvent=$Ie.prepareEvent;_.createCheckInEnvelope=eCe.createCheckInEnvelope;_.hasTracingEnabled=tCe.hasTracingEnabled;_.isSentryRequestUrl=nCe.isSentryRequestUrl;_.handleCallbackErrors=rCe.handleCallbackErrors;_.spanToTraceHeader=iCe.spanToTraceHeader;_.DEFAULT_ENVIRONMENT=sCe.DEFAULT_ENVIRONMENT;_.ModuleMetadata=oCe.ModuleMetadata;_.RequestData=aCe.RequestData;_.metrics=cCe.metrics;_.FunctionToString=uCe.FunctionToString;_.InboundFilters=lCe.InboundFilters;_.LinkedErrors=dCe.LinkedErrors});var Pt=g(AG=>{Object.defineProperty(AG,"__esModule",{value:!0});var gCe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;AG.DEBUG_BUILD=gCe});var xi=g(_G=>{var{_optionalChain:vD}=A();Object.defineProperty(_G,"__esModule",{value:!0});function pCe(e){let t=vD([e,"call",r=>r(),"access",r=>r.getClient,"call",r=>r(),"optionalAccess",r=>r.getOptions,"call",r=>r()]);return(vD([t,"optionalAccess",r=>r.instrumenter])||"sentry")!=="sentry"}_G.shouldDisableAutoInstrumentation=pCe});var WD=g(Fl=>{var{_optionalChain:ar}=A();Object.defineProperty(Fl,"__esModule",{value:!0});var Nt=A(),af=Pt(),mCe=xi(),Ka=class{static __initStatic(){this.id="Express"}constructor(t={}){this.name=Ka.id,this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}setupOnce(t,n){if(!this._router){af.DEBUG_BUILD&&Nt.logger.error("ExpressIntegration is missing an Express instance");return}if(mCe.shouldDisableAutoInstrumentation(n)){af.DEBUG_BUILD&&Nt.logger.log("Express Integration is skipped because of instrumenter configuration.");return}ICe(this._router,this._methods),CCe(this._router)}};Ka.__initStatic();function ZD(e,t){let n=e.length;switch(n){case 2:return function(r,i){let s=i.__sentry_transaction;if(s){let o=s.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});i.once("finish",()=>{o.end()})}return e.call(this,r,i)};case 3:return function(r,i,s){let o=i.__sentry_transaction,a=ar([o,"optionalAccess",c=>c.startChild,"call",c=>c({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,r,i,function(...c){ar([a,"optionalAccess",u=>u.end,"call",u=>u()]),s.call(this,...c)})};case 4:return function(r,i,s,o){let a=s.__sentry_transaction,c=ar([a,"optionalAccess",u=>u.startChild,"call",u=>u({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,r,i,s,function(...u){ar([c,"optionalAccess",l=>l.end,"call",l=>l()]),o.call(this,...u)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}function fCe(e,t){return e.map(n=>typeof n=="function"?ZD(n,t):Array.isArray(n)?n.map(r=>typeof r=="function"?ZD(r,t):r):n)}function hCe(e,t){let n=e[t];return e[t]=function(...r){return n.call(this,...fCe(r,t))},e}function ICe(e,t=[]){t.forEach(n=>hCe(e,n))}function CCe(e){let t="settings"in e;t&&e._router===void 0&&e.lazyrouter&&e.lazyrouter();let n=t?e._router:e;if(!n){af.DEBUG_BUILD&&Nt.logger.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),af.DEBUG_BUILD&&Nt.logger.debug("Routing instrumentation is currently only supported in Express 4.");return}let r=Object.getPrototypeOf(n),i=r.process_params;r.process_params=function(o,a,c,u,l){c._reconstructedRoute||(c._reconstructedRoute="");let{layerRoutePath:d,isRegex:p,isArray:m,numExtraSegments:f}=yCe(o);(d||p||m)&&(c._hasParameters=!0);let h;d?h=d:h=RD(c.originalUrl,c._reconstructedRoute,o.path)||"";let I=h.split("/").filter(W=>W.length>0&&(p||m||!W.includes("*"))).join("/");I&&I.length>0&&(c._reconstructedRoute+=`/${I}${p?"/":""}`);let b=Nt.getNumberOfUrlSegments(Nt.stripUrlQueryAndFragment(c.originalUrl||""))+f,R=Nt.getNumberOfUrlSegments(c._reconstructedRoute);if(b===R){c._hasParameters||c._reconstructedRoute!==c.originalUrl&&(c._reconstructedRoute=c.originalUrl?Nt.stripUrlQueryAndFragment(c.originalUrl):c.originalUrl);let W=u.__sentry_transaction;if(W&&W.metadata.source!=="custom"){let F=c._reconstructedRoute||"/",[H,x]=Nt.extractPathForTransaction(c,{path:!0,method:!0,customRoute:F});W.updateName(H),W.setMetadata({source:x})}}return i.call(this,o,a,c,u,l)}}var ED=(e,t,n)=>{if(!e||!t||!n||Object.keys(n).length===0||!ar([n,"access",u=>u[0],"optionalAccess",u=>u.offset]))return;let r=n.sort((u,l)=>u.offset-l.offset),s=new RegExp(t,`${t.flags}d`).exec(e);if(!s||!s.indices)return;let[,...o]=s.indices;if(o.length!==r.length)return;let a=e,c=0;return o.forEach((u,l)=>{if(u){let[d,p]=u,m=a.substring(0,d-c),f=`:${r[l].name}`,h=a.substring(p-c);a=m+f+h,c=c+(p-d-f.length)}}),a};function yCe(e){let t=ar([e,"access",o=>o.route,"optionalAccess",o=>o.path]),n=Nt.isRegExp(t),r=Array.isArray(t);if(!t){let[o]=Nt.GLOBAL_OBJ.process.versions.node.split(".").map(Number);o>=16&&(t=ED(e.path,e.regexp,e.keys))}if(!t)return{isRegex:n,isArray:r,numExtraSegments:0};let i=r?Math.max(bCe(t)-Nt.getNumberOfUrlSegments(e.path||""),0):0;return{layerRoutePath:ACe(r,t),isRegex:n,isArray:r,numExtraSegments:i}}function bCe(e){return e.reduce((t,n)=>t+Nt.getNumberOfUrlSegments(n.toString()),0)}function ACe(e,t){return e?t.map(n=>n.toString()).join(","):t&&t.toString()}function RD(e,t,n){let r=Nt.stripUrlQueryAndFragment(e||""),i=ar([r,"optionalAccess",c=>c.split,"call",c=>c("/"),"access",c=>c.filter,"call",c=>c(u=>!!u)]),s=0,o=ar([t,"optionalAccess",c=>c.split,"call",c=>c("/"),"access",c=>c.filter,"call",c=>c(u=>!!u),"access",c=>c.length])||0;return ar([n,"optionalAccess",c=>c.split,"call",c=>c("/"),"access",c=>c.filter,"call",c=>c(u=>ar([i,"optionalAccess",l=>l[o+s]])===u?(s+=1,!0):!1),"access",c=>c.join,"call",c=>c("/")])}Fl.Express=Ka;Fl.extractOriginalRoute=ED;Fl.preventDuplicateSegments=RD});var wD=g(GG=>{var{_optionalChain:La}=A();Object.defineProperty(GG,"__esModule",{value:!0});var Ma=A(),SG=Pt(),_Ce=xi(),qa=class{static __initStatic(){this.id="Postgres"}constructor(t={}){this.name=qa.id,this._usePgNative=!!t.usePgNative,this._module=t.module}loadDependency(){return this._module=this._module||Ma.loadModule("pg")}setupOnce(t,n){if(_Ce.shouldDisableAutoInstrumentation(n)){SG.DEBUG_BUILD&&Ma.logger.log("Postgres Integration is skipped because of instrumenter configuration.");return}let r=this.loadDependency();if(!r){SG.DEBUG_BUILD&&Ma.logger.error("Postgres Integration was unable to require `pg` package.");return}let i=this._usePgNative?La([r,"access",s=>s.native,"optionalAccess",s=>s.Client]):r.Client;if(!i){SG.DEBUG_BUILD&&Ma.logger.error("Postgres Integration was unable to access 'pg-native' bindings.");return}Ma.fill(i.prototype,"query",function(s){return function(o,a,c){let l=n().getScope().getSpan(),d={"db.system":"postgresql"};try{this.database&&(d["db.name"]=this.database),this.host&&(d["server.address"]=this.host),this.port&&(d["server.port"]=this.port),this.user&&(d["db.user"]=this.user)}catch{}let p=La([l,"optionalAccess",f=>f.startChild,"call",f=>f({description:typeof o=="string"?o:o.text,op:"db",origin:"auto.db.postgres",data:d})]);if(typeof c=="function")return s.call(this,o,a,function(f,h){La([p,"optionalAccess",I=>I.end,"call",I=>I()]),c(f,h)});if(typeof a=="function")return s.call(this,o,function(f,h){La([p,"optionalAccess",I=>I.end,"call",I=>I()]),a(f,h)});let m=typeof a<"u"?s.call(this,o,a):s.call(this,o);return Ma.isThenable(m)?m.then(f=>(La([p,"optionalAccess",h=>h.end,"call",h=>h()]),f)):(La([p,"optionalAccess",f=>f.end,"call",f=>f()]),m)}})}};qa.__initStatic();GG.Postgres=qa});var ND=g(vG=>{var{_optionalChain:SCe}=A();Object.defineProperty(vG,"__esModule",{value:!0});var xl=A(),BG=Pt(),GCe=xi(),Pa=class{static __initStatic(){this.id="Mysql"}constructor(){this.name=Pa.id}loadDependency(){return this._module=this._module||xl.loadModule("mysql/lib/Connection.js")}setupOnce(t,n){if(GCe.shouldDisableAutoInstrumentation(n)){BG.DEBUG_BUILD&&xl.logger.log("Mysql Integration is skipped because of instrumenter configuration.");return}let r=this.loadDependency();if(!r){BG.DEBUG_BUILD&&xl.logger.error("Mysql Integration was unable to require `mysql` package.");return}let i;try{r.prototype.connect=new Proxy(r.prototype.connect,{apply(a,c,u){return i||(i=c.config),a.apply(c,u)}})}catch{BG.DEBUG_BUILD&&xl.logger.error("Mysql Integration was unable to instrument `mysql` config.")}function s(){return i?{"server.address":i.host,"server.port":i.port,"db.user":i.user}:{}}function o(a){if(!a||a.endTimestamp)return;let c=s();Object.keys(c).forEach(u=>{a.setData(u,c[u])}),a.end()}xl.fill(r,"createQuery",function(a){return function(c,u,l){let p=n().getScope().getSpan(),m=SCe([p,"optionalAccess",h=>h.startChild,"call",h=>h({description:typeof c=="string"?c:c.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof l=="function")return a.call(this,c,u,function(h,I,b){o(m),l(h,I,b)});if(typeof u=="function")return a.call(this,c,function(h,I,b){o(m),u(h,I,b)});let f=a.call(this,c,u);return f.on("end",()=>{o(m)}),f}})}};Pa.__initStatic();vG.Mysql=Pa});var HD=g(ZG=>{var{_optionalChain:io}=A();Object.defineProperty(ZG,"__esModule",{value:!0});var Xl=A(),TD=Pt(),BCe=xi(),vCe=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],ZCe={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};function ECe(e){return e&&typeof e=="object"&&e.once&&typeof e.once=="function"}var za=class{static __initStatic(){this.id="Mongo"}constructor(t={}){this.name=za.id,this._operations=Array.isArray(t.operations)?t.operations:vCe,this._describeOperations="describeOperations"in t?t.describeOperations:!0,this._useMongoose=!!t.useMongoose}loadDependency(){let t=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||Xl.loadModule(t)}setupOnce(t,n){if(BCe.shouldDisableAutoInstrumentation(n)){TD.DEBUG_BUILD&&Xl.logger.log("Mongo Integration is skipped because of instrumenter configuration.");return}let r=this.loadDependency();if(!r){let i=this._useMongoose?"mongoose":"mongodb";TD.DEBUG_BUILD&&Xl.logger.error(`Mongo Integration was unable to require \`${i}\` package.`);return}this._instrumentOperations(r.Collection,this._operations,n)}_instrumentOperations(t,n,r){n.forEach(i=>this._patchOperation(t,i,r))}_patchOperation(t,n,r){if(!(n in t.prototype))return;let i=this._getSpanContextFromOperationArguments.bind(this);Xl.fill(t.prototype,n,function(s){return function(...o){let a=o[o.length-1],u=r().getScope().getSpan();if(typeof a!="function"||n==="mapReduce"&&o.length===2){let d=io([u,"optionalAccess",m=>m.startChild,"call",m=>m(i(this,n,o))]),p=s.call(this,...o);if(Xl.isThenable(p))return p.then(m=>(io([d,"optionalAccess",f=>f.end,"call",f=>f()]),m));if(ECe(p)){let m=p;try{m.once("close",()=>{io([d,"optionalAccess",f=>f.end,"call",f=>f()])})}catch{io([d,"optionalAccess",h=>h.end,"call",h=>h()])}return m}else return io([d,"optionalAccess",m=>m.end,"call",m=>m()]),p}let l=io([u,"optionalAccess",d=>d.startChild,"call",d=>d(i(this,n,o.slice(0,-1)))]);return s.call(this,...o.slice(0,-1),function(d,p){io([l,"optionalAccess",m=>m.end,"call",m=>m()]),a(d,p)})}})}_getSpanContextFromOperationArguments(t,n,r){let i={"db.system":"mongodb","db.name":t.dbName,"db.operation":n,"db.mongodb.collection":t.collectionName},s={op:"db",origin:"auto.db.mongo",description:n,data:i},o=ZCe[n],a=Array.isArray(this._describeOperations)?this._describeOperations.includes(n):this._describeOperations;if(!o||!a)return s;try{if(n==="mapReduce"){let[c,u]=r;i[o[0]]=typeof c=="string"?c:c.name||"<anonymous>",i[o[1]]=typeof u=="string"?u:u.name||"<anonymous>"}else for(let c=0;c<o.length;c++)i[`db.mongodb.${o[c]}`]=JSON.stringify(r[c])}catch{}return s}};za.__initStatic();ZG.Mongo=za});var YD=g(EG=>{Object.defineProperty(EG,"__esModule",{value:!0});var kD=O(),VD=A(),RCe=Pt(),WCe=xi();function wCe(e){return!!e&&!!e.$use}var ja=class{static __initStatic(){this.id="Prisma"}constructor(t={}){if(this.name=ja.id,wCe(t.client)&&!t.client._sentryInstrumented){VD.addNonEnumerableProperty(t.client,"_sentryInstrumented",!0);let n={};try{let r=t.client._engineConfig;if(r){let{activeProvider:i,clientVersion:s}=r;i&&(n["db.system"]=i),s&&(n["db.prisma.version"]=s)}}catch{}t.client.$use((r,i)=>{if(WCe.shouldDisableAutoInstrumentation(kD.getCurrentHub))return i(r);let s=r.action,o=r.model;return kD.startSpan({name:o?`${o} ${s}`:s,op:"db.prisma",origin:"auto.db.prisma",data:{...n,"db.operation":s}},()=>i(r))})}else RCe.DEBUG_BUILD&&VD.logger.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",t.client)}setupOnce(){}};ja.__initStatic();EG.Prisma=ja});var xD=g(RG=>{var{_optionalChain:Qa}=A();Object.defineProperty(RG,"__esModule",{value:!0});var Jl=A(),FD=Pt(),NCe=xi(),$a=class{static __initStatic(){this.id="GraphQL"}constructor(){this.name=$a.id}loadDependency(){return this._module=this._module||Jl.loadModule("graphql/execution/execute.js")}setupOnce(t,n){if(NCe.shouldDisableAutoInstrumentation(n)){FD.DEBUG_BUILD&&Jl.logger.log("GraphQL Integration is skipped because of instrumenter configuration.");return}let r=this.loadDependency();if(!r){FD.DEBUG_BUILD&&Jl.logger.error("GraphQL Integration was unable to require graphql/execution package.");return}Jl.fill(r,"execute",function(i){return function(...s){let o=n().getScope(),a=o.getSpan(),c=Qa([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);Qa([o,"optionalAccess",l=>l.setSpan,"call",l=>l(c)]);let u=i.call(this,...s);return Jl.isThenable(u)?u.then(l=>(Qa([c,"optionalAccess",d=>d.end,"call",d=>d()]),Qa([o,"optionalAccess",d=>d.setSpan,"call",d=>d(a)]),l)):(Qa([c,"optionalAccess",l=>l.end,"call",l=>l()]),Qa([o,"optionalAccess",l=>l.setSpan,"call",l=>l(a)]),u)}})}};$a.__initStatic();RG.GraphQL=$a});var JD=g(wG=>{var{_optionalChain:WG}=A();Object.defineProperty(wG,"__esModule",{value:!0});var st=A(),cf=Pt(),TCe=xi(),ec=class{static __initStatic(){this.id="Apollo"}constructor(t={useNestjs:!1}){this.name=ec.id,this._useNest=!!t.useNestjs}loadDependency(){return this._useNest?this._module=this._module||st.loadModule("@nestjs/graphql"):this._module=this._module||st.loadModule("apollo-server-core"),this._module}setupOnce(t,n){if(TCe.shouldDisableAutoInstrumentation(n)){cf.DEBUG_BUILD&&st.logger.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){let r=this.loadDependency();if(!r){cf.DEBUG_BUILD&&st.logger.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}st.fill(r.GraphQLFactory.prototype,"mergeWithSchema",function(i){return function(...s){return st.fill(this.resolversExplorerService,"explore",function(o){return function(){let a=st.arrayify(o.call(this));return XD(a,n)}}),i.call(this,...s)}})}else{let r=this.loadDependency();if(!r){cf.DEBUG_BUILD&&st.logger.error("Apollo Integration was unable to require apollo-server-core package.");return}st.fill(r.ApolloServerBase.prototype,"constructSchema",function(i){return function(){if(!this.config.resolvers)return cf.DEBUG_BUILD&&(this.config.schema?(st.logger.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),st.logger.warn()):this.config.modules&&st.logger.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),st.logger.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),i.call(this);let s=st.arrayify(this.config.resolvers);return this.config.resolvers=XD(s,n),i.call(this)}})}}};ec.__initStatic();function XD(e,t){return e.map(n=>(Object.keys(n).forEach(r=>{Object.keys(n[r]).forEach(i=>{typeof n[r][i]=="function"&&HCe(n,r,i,t)})}),n))}function HCe(e,t,n,r){st.fill(e[t],n,function(i){return function(...s){let a=r().getScope().getSpan(),c=WG([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),u=i.call(this,...s);return st.isThenable(u)?u.then(l=>(WG([c,"optionalAccess",d=>d.end,"call",d=>d()]),l)):(WG([c,"optionalAccess",l=>l.end,"call",l=>l()]),u)}})}wG.Apollo=ec});var DD=g((NG,Xi)=>{Object.defineProperty(NG,"__esModule",{value:!0});var so=A(),kCe=[()=>{let e=so.dynamicRequire(Xi,"./apollo");return new e.Apollo},()=>{let e=so.dynamicRequire(Xi,"./apollo");return new e.Apollo({useNestjs:!0})},()=>{let e=so.dynamicRequire(Xi,"./graphql");return new e.GraphQL},()=>{let e=so.dynamicRequire(Xi,"./mongo");return new e.Mongo},()=>{let e=so.dynamicRequire(Xi,"./mongo");return new e.Mongo({mongoose:!0})},()=>{let e=so.dynamicRequire(Xi,"./mysql");return new e.Mysql},()=>{let e=so.dynamicRequire(Xi,"./postgres");return new e.Postgres}];NG.lazyLoadedNodePerformanceMonitoringIntegrations=kCe});var Ur=g(TG=>{Object.defineProperty(TG,"__esModule",{value:!0});var VCe=A(),YCe=VCe.GLOBAL_OBJ;TG.WINDOW=YCe});var KD=g(HG=>{Object.defineProperty(HG,"__esModule",{value:!0});var FCe=O(),OD=A(),UD=Pt(),uf=Ur();function xCe(){uf.WINDOW&&uf.WINDOW.document?uf.WINDOW.document.addEventListener("visibilitychange",()=>{let e=FCe.getActiveTransaction();if(uf.WINDOW.document.hidden&&e){let t="cancelled";UD.DEBUG_BUILD&&OD.logger.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):UD.DEBUG_BUILD&&OD.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}HG.registerBackgroundTabDetection=xCe});var lf=g(kG=>{Object.defineProperty(kG,"__esModule",{value:!0});var XCe=(e,t,n)=>{let r,i;return s=>{t.value>=0&&(s||n)&&(i=t.value-(r||0),(i||r===void 0)&&(r=t.value,t.delta=i,e(t)))}};kG.bindReporter=XCe});var LD=g(VG=>{Object.defineProperty(VG,"__esModule",{value:!0});var JCe=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`;VG.generateUniqueID=JCe});var FG=g(YG=>{Object.defineProperty(YG,"__esModule",{value:!0});var Dl=Ur(),DCe=()=>{let e=Dl.WINDOW.performance.timing,t=Dl.WINDOW.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(let r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},OCe=()=>Dl.WINDOW.__WEB_VITALS_POLYFILL__?Dl.WINDOW.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||DCe()):Dl.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];YG.getNavigationEntry=OCe});var XG=g(xG=>{Object.defineProperty(xG,"__esModule",{value:!0});var UCe=FG(),KCe=()=>{let e=UCe.getNavigationEntry();return e&&e.activationStart||0};xG.getActivationStart=KCe});var df=g(JG=>{Object.defineProperty(JG,"__esModule",{value:!0});var LCe=Ur(),MCe=LD(),qCe=XG(),PCe=FG(),zCe=(e,t)=>{let n=PCe.getNavigationEntry(),r="navigate";return n&&(LCe.WINDOW.document.prerendering||qCe.getActivationStart()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:MCe.generateUniqueID(),navigationType:r}};JG.initMetric=zCe});var Ol=g(DG=>{Object.defineProperty(DG,"__esModule",{value:!0});var jCe=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(i=>{t(i.getEntries())});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}};DG.observe=jCe});var Ul=g(OG=>{Object.defineProperty(OG,"__esModule",{value:!0});var QCe=Ur(),$Ce=(e,t)=>{let n=r=>{(r.type==="pagehide"||QCe.WINDOW.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)};OG.onHidden=$Ce});var MD=g(UG=>{Object.defineProperty(UG,"__esModule",{value:!0});var eye=lf(),tye=df(),nye=Ol(),rye=Ul(),iye=e=>{let t=tye.initMetric("CLS",0),n,r=0,i=[],s=a=>{a.forEach(c=>{if(!c.hadRecentInput){let u=i[0],l=i[i.length-1];r&&i.length!==0&&c.startTime-l.startTime<1e3&&c.startTime-u.startTime<5e3?(r+=c.value,i.push(c)):(r=c.value,i=[c]),r>t.value&&(t.value=r,t.entries=i,n&&n())}})},o=nye.observe("layout-shift",s);if(o){n=eye.bindReporter(e,t);let a=()=>{s(o.takeRecords()),n(!0)};return rye.onHidden(a),a}};UG.onCLS=iye});var pf=g(KG=>{Object.defineProperty(KG,"__esModule",{value:!0});var qD=Ur(),sye=Ul(),gf=-1,oye=()=>qD.WINDOW.document.visibilityState==="hidden"&&!qD.WINDOW.document.prerendering?0:1/0,aye=()=>{sye.onHidden(({timeStamp:e})=>{gf=e},!0)},cye=()=>(gf<0&&(gf=oye(),aye()),{get firstHiddenTime(){return gf}});KG.getVisibilityWatcher=cye});var PD=g(LG=>{Object.defineProperty(LG,"__esModule",{value:!0});var uye=lf(),lye=pf(),dye=df(),gye=Ol(),pye=Ul(),mye=e=>{let t=lye.getVisibilityWatcher(),n=dye.initMetric("FID"),r,i=a=>{a.startTime<t.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),r(!0))},s=a=>{a.forEach(i)},o=gye.observe("first-input",s);r=uye.bindReporter(e,n),o&&pye.onHidden(()=>{s(o.takeRecords()),o.disconnect()},!0)};LG.onFID=mye});var jD=g(MG=>{Object.defineProperty(MG,"__esModule",{value:!0});var fye=lf(),hye=XG(),Iye=pf(),Cye=df(),yye=Ol(),bye=Ul(),zD={},Aye=e=>{let t=Iye.getVisibilityWatcher(),n=Cye.initMetric("LCP"),r,i=o=>{let a=o[o.length-1];if(a){let c=Math.max(a.startTime-hye.getActivationStart(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[a],r())}},s=yye.observe("largest-contentful-paint",i);if(s){r=fye.bindReporter(e,n);let o=()=>{zD[n.id]||(i(s.takeRecords()),s.disconnect(),zD[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,o,{once:!0,capture:!0})}),bye.onHidden(o,!0),o}};MG.onLCP=Aye});var hf=g(tc=>{Object.defineProperty(tc,"__esModule",{value:!0});var QD=A(),_ye=Pt(),Sye=MD(),Gye=PD(),Bye=jD(),vye=Ol(),Kl={},mf={},$D,eO,tO;function Zye(e){return qG("cls",e,wye,$D)}function Eye(e){return qG("lcp",e,Tye,tO)}function Rye(e){return qG("fid",e,Nye,eO)}function Wye(e,t){return nO(e,t),mf[e]||(Hye(e),mf[e]=!0),rO(e,t)}function ff(e,t){let n=Kl[e];if(!(!n||!n.length))for(let r of n)try{r(t)}catch(i){_ye.DEBUG_BUILD&&QD.logger.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${QD.getFunctionName(r)}
Error:`,i)}}function wye(){Sye.onCLS(e=>{ff("cls",{metric:e}),$D=e})}function Nye(){Gye.onFID(e=>{ff("fid",{metric:e}),eO=e})}function Tye(){Bye.onLCP(e=>{ff("lcp",{metric:e}),tO=e})}function qG(e,t,n,r){return nO(e,t),mf[e]||(n(),mf[e]=!0),r&&t({metric:r}),rO(e,t)}function Hye(e){let t={};e==="event"&&(t.durationThreshold=0),vye.observe(e,n=>{ff(e,{entries:n})},t)}function nO(e,t){Kl[e]=Kl[e]||[],Kl[e].push(t)}function rO(e,t){return()=>{let n=Kl[e];if(!n)return;let r=n.indexOf(t);r!==-1&&n.splice(r,1)}}tc.addClsInstrumentationHandler=Zye;tc.addFidInstrumentationHandler=Rye;tc.addLcpInstrumentationHandler=Eye;tc.addPerformanceInstrumentationHandler=Wye});var iO=g(If=>{Object.defineProperty(If,"__esModule",{value:!0});function kye(e){return typeof e=="number"&&isFinite(e)}function Vye(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}If._startChild=Vye;If.isMeasurementValue=kye});var lO=g(Ji=>{Object.defineProperty(Ji,"__esModule",{value:!0});var oO=O(),_e=A(),ur=Pt(),Ml=hf(),oo=Ur(),Yye=pf(),Kr=iO(),Fye=2147483647;function Ne(e){return e/1e3}function aO(){return oo.WINDOW&&oo.WINDOW.addEventListener&&oo.WINDOW.performance}var sO=0,pe={},cr,Ll;function xye(){let e=aO();if(e&&_e.browserPerformanceTimeOrigin){e.mark&&oo.WINDOW.performance.mark("sentry-tracing-init");let t=Uye(),n=Dye(),r=Oye();return()=>{t(),n(),r()}}return()=>{}}function Xye(){Ml.addPerformanceInstrumentationHandler("longtask",({entries:e})=>{for(let t of e){let n=oO.getActiveTransaction();if(!n)return;let r=Ne(_e.browserPerformanceTimeOrigin+t.startTime),i=Ne(t.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+i})}})}function Jye(){Ml.addPerformanceInstrumentationHandler("event",({entries:e})=>{for(let t of e){let n=oO.getActiveTransaction();if(!n)return;if(t.name==="click"){let r=Ne(_e.browserPerformanceTimeOrigin+t.startTime),i=Ne(t.duration),s={description:_e.htmlTreeAsString(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+i},o=_e.getComponentName(t.target);o&&(s.data={"ui.component_name":o}),n.startChild(s)}}})}function Dye(){return Ml.addClsInstrumentationHandler(({metric:e})=>{let t=e.entries.pop();!t||(ur.DEBUG_BUILD&&_e.logger.log("[Measurements] Adding CLS"),pe.cls={value:e.value,unit:""},Ll=t)})}function Oye(){return Ml.addLcpInstrumentationHandler(({metric:e})=>{let t=e.entries.pop();!t||(ur.DEBUG_BUILD&&_e.logger.log("[Measurements] Adding LCP"),pe.lcp={value:e.value,unit:"millisecond"},cr=t)})}function Uye(){return Ml.addFidInstrumentationHandler(({metric:e})=>{let t=e.entries.pop();if(!t)return;let n=Ne(_e.browserPerformanceTimeOrigin),r=Ne(t.startTime);ur.DEBUG_BUILD&&_e.logger.log("[Measurements] Adding FID"),pe.fid={value:e.value,unit:"millisecond"},pe["mark.fid"]={value:n+r,unit:"second"}})}function Kye(e){let t=aO();if(!t||!oo.WINDOW.performance.getEntries||!_e.browserPerformanceTimeOrigin)return;ur.DEBUG_BUILD&&_e.logger.log("[Tracing] Adding & adjusting spans using Performance API");let n=Ne(_e.browserPerformanceTimeOrigin),r=t.getEntries(),i,s;if(r.slice(sO).forEach(o=>{let a=Ne(o.startTime),c=Ne(o.duration);if(!(e.op==="navigation"&&n+a<e.startTimestamp))switch(o.entryType){case"navigation":{Lye(e,o,n),i=n+Ne(o.responseStart),s=n+Ne(o.requestStart);break}case"mark":case"paint":case"measure":{cO(e,o,a,c,n);let u=Yye.getVisibilityWatcher(),l=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&l&&(ur.DEBUG_BUILD&&_e.logger.log("[Measurements] Adding FP"),pe.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&l&&(ur.DEBUG_BUILD&&_e.logger.log("[Measurements] Adding FCP"),pe.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{let u=o.name.replace(oo.WINDOW.location.origin,"");uO(e,o,u,a,c,n);break}}}),sO=Math.max(r.length-1,0),qye(e),e.op==="pageload"){typeof i=="number"&&(ur.DEBUG_BUILD&&_e.logger.log("[Measurements] Adding TTFB"),pe.ttfb={value:(i-e.startTimestamp)*1e3,unit:"millisecond"},typeof s=="number"&&s<=i&&(pe["ttfb.requestTime"]={value:(i-s)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(a=>{if(!pe[a]||n>=e.startTimestamp)return;let c=pe[a].value,u=n+Ne(c),l=Math.abs((u-e.startTimestamp)*1e3),d=l-c;ur.DEBUG_BUILD&&_e.logger.log(`[Measurements] Normalized ${a} from ${c} to ${l} (${d})`),pe[a].value=l});let o=pe["mark.fid"];o&&pe.fid&&(Kr._startChild(e,{description:"first input delay",endTimestamp:o.value+Ne(pe.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:o.value}),delete pe["mark.fid"]),"fcp"in pe||delete pe.cls,Object.keys(pe).forEach(a=>{e.setMeasurement(a,pe[a].value,pe[a].unit)}),Pye(e)}cr=void 0,Ll=void 0,pe={}}function cO(e,t,n,r,i){let s=i+n,o=s+r;return Kr._startChild(e,{description:t.name,endTimestamp:o,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s}),s}function Lye(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Cf(e,t,r,n)}),Cf(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Cf(e,t,"fetch",n,"cache","domainLookupStart"),Cf(e,t,"domainLookup",n,"DNS"),Mye(e,t,n)}function Cf(e,t,n,r,i,s){let o=s?t[s]:t[`${n}End`],a=t[`${n}Start`];!a||!o||Kr._startChild(e,{op:"browser",origin:"auto.browser.browser.metrics",description:i||n,startTimestamp:r+Ne(a),endTimestamp:r+Ne(o)})}function Mye(e,t,n){Kr._startChild(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Ne(t.requestStart),endTimestamp:n+Ne(t.responseEnd)}),Kr._startChild(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Ne(t.responseStart),endTimestamp:n+Ne(t.responseEnd)})}function uO(e,t,n,r,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let o={};PG(o,t,"transferSize","http.response_transfer_size"),PG(o,t,"encodedBodySize","http.response_content_length"),PG(o,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(o["resource.render_blocking_status"]=t.renderBlockingStatus);let a=s+r,c=a+i;Kr._startChild(e,{description:n,endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:a,data:o})}function qye(e){let t=oo.WINDOW.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Kr.isMeasurementValue(n.rtt)&&(pe["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Kr.isMeasurementValue(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),Kr.isMeasurementValue(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function Pye(e){cr&&(ur.DEBUG_BUILD&&_e.logger.log("[Measurements] Adding LCP Data"),cr.element&&e.setTag("lcp.element",_e.htmlTreeAsString(cr.element)),cr.id&&e.setTag("lcp.id",cr.id),cr.url&&e.setTag("lcp.url",cr.url.trim().slice(0,200)),e.setTag("lcp.size",cr.size)),Ll&&Ll.sources&&(ur.DEBUG_BUILD&&_e.logger.log("[Measurements] Adding CLS Data"),Ll.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,_e.htmlTreeAsString(t.node))))}function PG(e,t,n,r){let i=t[n];i!=null&&i<Fye&&(e[r]=i)}Ji._addMeasureSpans=cO;Ji._addResourceSpans=uO;Ji.addPerformanceEntries=Kye;Ji.startTrackingInteractions=Jye;Ji.startTrackingLongTasks=Xye;Ji.startTrackingWebVitals=xye});var zG=g(yf=>{Object.defineProperty(yf,"__esModule",{value:!0});var ql=O(),nc=A();function zye(e,t,n,r,i="auto.http.browser"){if(!ql.hasTracingEnabled()||!e.fetchData)return;let s=t(e.fetchData.url);if(e.endTimestamp&&s){let p=e.fetchData.__span;if(!p)return;let m=r[p];if(m){if(e.response){m.setHttpStatus(e.response.status);let f=e.response&&e.response.headers&&e.response.headers.get("content-length");if(f){let h=parseInt(f);h>0&&m.setData("http.response_content_length",h)}}else e.error&&m.setStatus("internal_error");m.end(),delete r[p]}return}let o=ql.getCurrentScope(),a=ql.getClient(),c=o.getSpan(),{method:u,url:l}=e.fetchData,d=s&&c?c.startChild({data:{url:l,type:"fetch","http.method":u},description:`${u} ${l}`,op:"http.client",origin:i}):void 0;if(d&&(e.fetchData.__span=d.spanId,r[d.spanId]=d),n(e.fetchData.url)&&a){let p=e.args[0];e.args[1]=e.args[1]||{};let m=e.args[1];m.headers=dO(p,a,o,m,d)}return d}function dO(e,t,n,r,i){let s=i||n.getSpan(),o=s&&s.transaction,{traceId:a,sampled:c,dsc:u}=n.getPropagationContext(),l=s?ql.spanToTraceHeader(s):nc.generateSentryTraceHeader(a,void 0,c),d=o?o.getDynamicSamplingContext():u||ql.getDynamicSamplingContextFromClient(a,t,n),p=nc.dynamicSamplingContextToSentryBaggageHeader(d),m=typeof Request<"u"&&nc.isInstanceOf(e,Request)?e.headers:r.headers;if(m)if(typeof Headers<"u"&&nc.isInstanceOf(m,Headers)){let f=new Headers(m);return f.append("sentry-trace",l),p&&f.append(nc.BAGGAGE_HEADER_NAME,p),f}else if(Array.isArray(m)){let f=[...m,["sentry-trace",l]];return p&&f.push([nc.BAGGAGE_HEADER_NAME,p]),f}else{let f="baggage"in m?m.baggage:void 0,h=[];return Array.isArray(f)?h.push(...f):f&&h.push(f),p&&h.push(p),{...m,"sentry-trace":l,baggage:h.length>0?h.join(","):void 0}}else return{"sentry-trace":l,baggage:p}}yf.addTracingHeadersToFetchRequest=dO;yf.instrumentFetchRequest=zye});var QG=g(Di=>{Object.defineProperty(Di,"__esModule",{value:!0});var Pl=O(),dr=A(),jye=zG(),Qye=hf(),bf=["localhost",/^\/(?!\/)/],jG={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:bf,tracePropagationTargets:bf};function $ye(e){let{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:i,shouldCreateSpanForRequest:s,enableHTTPTimings:o}={traceFetch:jG.traceFetch,traceXHR:jG.traceXHR,...e},a=typeof s=="function"?s:l=>!0,c=l=>fO(l,r||i),u={};t&&dr.addFetchInstrumentationHandler(l=>{let d=jye.instrumentFetchRequest(l,a,c,u);o&&d&&gO(d)}),n&&dr.addXhrInstrumentationHandler(l=>{let d=hO(l,a,c,u);o&&d&&gO(d)})}function ebe(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function gO(e){let t=e.data.url;if(!t)return;let n=Qye.addPerformanceInstrumentationHandler("resource",({entries:r})=>{r.forEach(i=>{ebe(i)&&i.name.endsWith(t)&&(tbe(i).forEach(o=>e.setData(...o)),setTimeout(n))})})}function mO(e){let t="unknown",n="unknown",r="";for(let i of e){if(i==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=i}return r===e&&(t=r),{name:t,version:n}}function lr(e=0){return((dr.browserPerformanceTimeOrigin||performance.timeOrigin)+e)/1e3}function tbe(e){let{name:t,version:n}=mO(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),dr.browserPerformanceTimeOrigin?[...r,["http.request.redirect_start",lr(e.redirectStart)],["http.request.fetch_start",lr(e.fetchStart)],["http.request.domain_lookup_start",lr(e.domainLookupStart)],["http.request.domain_lookup_end",lr(e.domainLookupEnd)],["http.request.connect_start",lr(e.connectStart)],["http.request.secure_connection_start",lr(e.secureConnectionStart)],["http.request.connection_end",lr(e.connectEnd)],["http.request.request_start",lr(e.requestStart)],["http.request.response_start",lr(e.responseStart)],["http.request.response_end",lr(e.responseEnd)]]:r}function fO(e,t){return dr.stringMatchesSomePattern(e,t||bf)}function hO(e,t,n,r){let i=e.xhr,s=i&&i[dr.SENTRY_XHR_DATA_KEY];if(!Pl.hasTracingEnabled()||!i||i.__sentry_own_request__||!s)return;let o=t(s.url);if(e.endTimestamp&&o){let l=i.__sentry_xhr_span_id__;if(!l)return;let d=r[l];d&&s.status_code!==void 0&&(d.setHttpStatus(s.status_code),d.end(),delete r[l]);return}let a=Pl.getCurrentScope(),c=a.getSpan(),u=o&&c?c.startChild({data:{type:"xhr","http.method":s.method,url:s.url},description:`${s.method} ${s.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(u&&(i.__sentry_xhr_span_id__=u.spanId,r[i.__sentry_xhr_span_id__]=u),i.setRequestHeader&&n(s.url))if(u){let l=u&&u.transaction,d=l&&l.getDynamicSamplingContext(),p=dr.dynamicSamplingContextToSentryBaggageHeader(d);pO(i,Pl.spanToTraceHeader(u),p)}else{let l=Pl.getClient(),{traceId:d,sampled:p,dsc:m}=a.getPropagationContext(),f=dr.generateSentryTraceHeader(d,void 0,p),h=m||(l?Pl.getDynamicSamplingContextFromClient(d,l,a):void 0),I=dr.dynamicSamplingContextToSentryBaggageHeader(h);pO(i,f,I)}return u}function pO(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(dr.BAGGAGE_HEADER_NAME,n)}catch{}}Di.DEFAULT_TRACE_PROPAGATION_TARGETS=bf;Di.defaultRequestInstrumentationOptions=jG;Di.extractNetworkProtocol=mO;Di.instrumentOutgoingRequests=$ye;Di.shouldAttachHeaders=fO;Di.xhrCallback=hO});var CO=g($G=>{Object.defineProperty($G,"__esModule",{value:!0});var zl=A(),IO=Pt(),jl=Ur();function nbe(e,t=!0,n=!0){if(!jl.WINDOW||!jl.WINDOW.location){IO.DEBUG_BUILD&&zl.logger.warn("Could not initialize routing instrumentation due to invalid location");return}let r=jl.WINDOW.location.href,i;t&&(i=e({name:jl.WINDOW.location.pathname,startTimestamp:zl.browserPerformanceTimeOrigin?zl.browserPerformanceTimeOrigin/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&zl.addHistoryInstrumentationHandler(({to:s,from:o})=>{if(o===void 0&&r&&r.indexOf(s)!==-1){r=void 0;return}o!==s&&(r=void 0,i&&(IO.DEBUG_BUILD&&zl.logger.log(`[Tracing] Finishing current transaction with op: ${i.op}`),i.end()),i=e({name:jl.WINDOW.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}$G.instrumentRoutingWithDefaults=nbe});var _O=g($l=>{Object.defineProperty($l,"__esModule",{value:!0});var Ql=O(),Lr=A(),Oi=Pt(),rbe=KD(),Af=lO(),bO=QG(),ibe=CO(),yO=Ur(),AO="BrowserTracing",sbe={...Ql.TRACING_DEFAULTS,markBackgroundTransactions:!0,routingInstrumentation:ibe.instrumentRoutingWithDefaults,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...bO.defaultRequestInstrumentationOptions},eB=class{constructor(t){this.name=AO,this._hasSetTracePropagationTargets=!1,Ql.addTracingExtensions(),Oi.DEBUG_BUILD&&(this._hasSetTracePropagationTargets=!!(t&&(t.tracePropagationTargets||t.tracingOrigins))),this.options={...sbe,...t},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=Af.startTrackingWebVitals(),this.options.enableLongTask&&Af.startTrackingLongTasks(),this.options._experiments.enableInteractions&&Af.startTrackingInteractions()}setupOnce(t,n){this._getCurrentHub=n;let i=n().getClient(),s=i&&i.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:l,traceXHR:d,shouldCreateSpanForRequest:p,enableHTTPTimings:m,_experiments:f}=this.options,h=s&&s.tracePropagationTargets,I=h||this.options.tracePropagationTargets;Oi.DEBUG_BUILD&&this._hasSetTracePropagationTargets&&h&&Lr.logger.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o(b=>{let R=this._createRouteTransaction(b);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(R,b,n),R},c,a),u&&rbe.registerBackgroundTabDetection(),f.enableInteractions&&this._registerInteractionListener(),bO.instrumentOutgoingRequests({traceFetch:l,traceXHR:d,tracePropagationTargets:I,shouldCreateSpanForRequest:p,enableHTTPTimings:m})}_createRouteTransaction(t){if(!this._getCurrentHub){Oi.DEBUG_BUILD&&Lr.logger.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}let n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:i,finalTimeout:s,heartbeatInterval:o}=this.options,a=t.op==="pageload",c=a?tB("sentry-trace"):"",u=a?tB("baggage"):"",{traceparentData:l,dynamicSamplingContext:d,propagationContext:p}=Lr.tracingContextFromHeaders(c,u),m={...t,...l,metadata:{...t.metadata,dynamicSamplingContext:l&&!d?{}:d},trimEnd:!0},f=typeof r=="function"?r(m):m,h=f===void 0?{...m,sampled:!1}:f;h.metadata=h.name!==m.name?{...h.metadata,source:"custom"}:h.metadata,this._latestRouteName=h.name,this._latestRouteSource=h.metadata&&h.metadata.source,h.sampled===!1&&Oi.DEBUG_BUILD&&Lr.logger.log(`[Tracing] Will not send ${h.op} transaction because of beforeNavigate.`),Oi.DEBUG_BUILD&&Lr.logger.log(`[Tracing] Starting ${h.op} transaction on scope`);let{location:I}=yO.WINDOW,b=Ql.startIdleTransaction(n,h,i,s,!0,{location:I},o),R=n.getScope();return a&&l?R.setPropagationContext(p):R.setPropagationContext({traceId:b.traceId,spanId:b.spanId,parentSpanId:b.parentSpanId,sampled:b.sampled}),b.registerBeforeFinishCallback(W=>{this._collectWebVitals(),Af.addPerformanceEntries(W)}),b}_registerInteractionListener(){let t,n=()=>{let{idleTimeout:r,finalTimeout:i,heartbeatInterval:s}=this.options,o="ui.action.click",a=Ql.getActiveTransaction();if(a&&a.op&&["navigation","pageload"].includes(a.op)){Oi.DEBUG_BUILD&&Lr.logger.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.end(),t=void 0),!this._getCurrentHub){Oi.DEBUG_BUILD&&Lr.logger.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){Oi.DEBUG_BUILD&&Lr.logger.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}let c=this._getCurrentHub(),{location:u}=yO.WINDOW,l={name:this._latestRouteName,op:o,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};t=Ql.startIdleTransaction(c,l,r,i,!0,{location:u},s)};["click"].forEach(r=>{addEventListener(r,n,{once:!1,capture:!0})})}};function tB(e){let t=Lr.getDomElement(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}$l.BROWSER_TRACING_INTEGRATION_ID=AO;$l.BrowserTracing=eB;$l.getMetaContent=tB});var GO=g((nB,ed)=>{Object.defineProperty(nB,"__esModule",{value:!0});var SO=O(),rc=A();function obe(){let e=SO.getMainCarrier();if(!e.__SENTRY__)return;let t={mongodb(){let r=rc.dynamicRequire(ed,"./node/integrations/mongo");return new r.Mongo},mongoose(){let r=rc.dynamicRequire(ed,"./node/integrations/mongo");return new r.Mongo},mysql(){let r=rc.dynamicRequire(ed,"./node/integrations/mysql");return new r.Mysql},pg(){let r=rc.dynamicRequire(ed,"./node/integrations/postgres");return new r.Postgres}},n=Object.keys(t).filter(r=>!!rc.loadModule(r)).map(r=>{try{return t[r]()}catch{return}}).filter(r=>r);n.length>0&&(e.__SENTRY__.integrations=[...e.__SENTRY__.integrations||[],...n])}function abe(){SO.addTracingExtensions(),rc.isNodeEnv()&&obe()}nB.addExtensionMethods=abe});var rB=g(M=>{Object.defineProperty(M,"__esModule",{value:!0});var Mr=O(),BO=A(),cbe=WD(),ube=wD(),lbe=ND(),dbe=HD(),gbe=YD(),pbe=xD(),mbe=JD(),fbe=DD(),vO=_O(),ZO=QG(),_f=hf(),EO=zG(),hbe=GO();M.IdleTransaction=Mr.IdleTransaction;M.Span=Mr.Span;M.SpanStatus=Mr.SpanStatus;M.Transaction=Mr.Transaction;M.extractTraceparentData=Mr.extractTraceparentData;M.getActiveTransaction=Mr.getActiveTransaction;M.hasTracingEnabled=Mr.hasTracingEnabled;M.spanStatusfromHttpCode=Mr.spanStatusfromHttpCode;M.startIdleTransaction=Mr.startIdleTransaction;M.TRACEPARENT_REGEXP=BO.TRACEPARENT_REGEXP;M.stripUrlQueryAndFragment=BO.stripUrlQueryAndFragment;M.Express=cbe.Express;M.Postgres=ube.Postgres;M.Mysql=lbe.Mysql;M.Mongo=dbe.Mongo;M.Prisma=gbe.Prisma;M.GraphQL=pbe.GraphQL;M.Apollo=mbe.Apollo;M.lazyLoadedNodePerformanceMonitoringIntegrations=fbe.lazyLoadedNodePerformanceMonitoringIntegrations;M.BROWSER_TRACING_INTEGRATION_ID=vO.BROWSER_TRACING_INTEGRATION_ID;M.BrowserTracing=vO.BrowserTracing;M.defaultRequestInstrumentationOptions=ZO.defaultRequestInstrumentationOptions;M.instrumentOutgoingRequests=ZO.instrumentOutgoingRequests;M.addClsInstrumentationHandler=_f.addClsInstrumentationHandler;M.addFidInstrumentationHandler=_f.addFidInstrumentationHandler;M.addLcpInstrumentationHandler=_f.addLcpInstrumentationHandler;M.addPerformanceInstrumentationHandler=_f.addPerformanceInstrumentationHandler;M.addTracingHeadersToFetchRequest=EO.addTracingHeadersToFetchRequest;M.instrumentFetchRequest=EO.instrumentFetchRequest;M.addExtensionMethods=hbe.addExtensionMethods});var RO=g(iB=>{Object.defineProperty(iB,"__esModule",{value:!0});var Ibe=rB(),Cbe=A();function ybe(){let e=Ibe.lazyLoadedNodePerformanceMonitoringIntegrations.map(t=>{try{return t()}catch{return}}).filter(t=>!!t);return e.length===0&&Cbe.logger.warn("Performance monitoring integrations could not be automatically loaded."),e.filter(t=>!!t.loadDependency())}iB.autoDiscoverNodePerformanceMonitoringIntegrations=ybe});var cB=g(aB=>{Object.defineProperty(aB,"__esModule",{value:!0});var bbe=require("os"),Abe=require("util"),sB=O(),oB=class extends sB.ServerRuntimeClient{constructor(t){t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:sB.SDK_VERSION}],version:sB.SDK_VERSION},t.transportOptions={textEncoder:new Abe.TextEncoder,...t.transportOptions};let n={...t,platform:"node",runtime:{name:"node",version:global.process.version},serverName:t.serverName||global.process.env.SENTRY_NAME||bbe.hostname()};super(n)}};aB.NodeClient=oB});var dB=g(lB=>{var{_nullishCoalesce:uB}=A();Object.defineProperty(lB,"__esModule",{value:!0});var _be=require("http"),Sbe=require("https"),Gbe=require("stream"),wO=require("url"),Bbe=require("zlib"),WO=O(),vbe=A(),Zbe=wy(),Ebe=1024*32;function Rbe(e){return new Gbe.Readable({read(){this.push(e),this.push(null)}})}function Wbe(e){let t;try{t=new wO.URL(e.url)}catch{return vbe.consoleSandbox(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),WO.createTransport(e,()=>Promise.resolve({}))}let n=t.protocol==="https:",r=wbe(t,e.proxy||(n?process.env.https_proxy:void 0)||process.env.http_proxy),i=n?Sbe:_be,s=e.keepAlive===void 0?!1:e.keepAlive,o=r?new Zbe.HttpsProxyAgent(r):new i.Agent({keepAlive:s,maxSockets:30,timeout:2e3}),a=Nbe(e,uB(e.httpModule,()=>i),o);return WO.createTransport(e,a)}function wbe(e,t){let{no_proxy:n}=process.env;if(!(n&&n.split(",").some(i=>e.host.endsWith(i)||e.hostname.endsWith(i))))return t}function Nbe(e,t,n){let{hostname:r,pathname:i,port:s,protocol:o,search:a}=new wO.URL(e.url);return function(u){return new Promise((l,d)=>{let p=Rbe(u.body),m={...e.headers};u.body.length>Ebe&&(m["content-encoding"]="gzip",p=p.pipe(Bbe.createGzip()));let f=t.request({method:"POST",agent:n,headers:m,hostname:r,path:`${i}${a}`,port:s,protocol:o,ca:e.caCerts},h=>{h.on("data",()=>{}),h.on("end",()=>{}),h.setEncoding("utf8");let I=uB(h.headers["retry-after"],()=>null),b=uB(h.headers["x-sentry-rate-limits"],()=>null);l({statusCode:h.statusCode,headers:{"retry-after":I,"x-sentry-rate-limits":Array.isArray(b)?b[0]:b}})});f.on("error",d),p.pipe(f)})}}lB.makeNodeTransport=Wbe});var Ui=g(gB=>{Object.defineProperty(gB,"__esModule",{value:!0});var Tbe=A(),Hbe=Tbe.parseSemver(process.versions.node);gB.NODE_VERSION=Hbe});var HO=g(pB=>{var{_optionalChain:kbe}=A();Object.defineProperty(pB,"__esModule",{value:!0});var NO=require("domain"),ao=O();function TO(){return NO.active}function Vbe(){let e=TO();if(!!e)return ao.ensureHubOnCarrier(e),ao.getHubFromCarrier(e)}function Ybe(e){let t={};return ao.ensureHubOnCarrier(t,e),ao.getHubFromCarrier(t)}function Fbe(e,t){let n=TO();if(n&&kbe([t,"optionalAccess",o=>o.reuseExisting]))return e();let r=NO.create(),i=n?ao.getHubFromCarrier(n):void 0,s=Ybe(i);return ao.setHubOnCarrier(r,s),r.bind(()=>e())()}function xbe(){ao.setAsyncContextStrategy({getCurrentHub:Vbe,runWithAsyncContext:Fbe})}pB.setDomainAsyncContextStrategy=xbe});var kO=g(fB=>{var{_optionalChain:Xbe}=A();Object.defineProperty(fB,"__esModule",{value:!0});var mB=O(),Jbe=require("async_hooks"),Sf;function Dbe(){Sf||(Sf=new Jbe.AsyncLocalStorage);function e(){return Sf.getStore()}function t(r){let i={};return mB.ensureHubOnCarrier(i,r),mB.getHubFromCarrier(i)}function n(r,i){let s=e();if(s&&Xbe([i,"optionalAccess",a=>a.reuseExisting]))return r();let o=t(s);return Sf.run(o,()=>r())}mB.setAsyncContextStrategy({getCurrentHub:e,runWithAsyncContext:n})}fB.setHooksAsyncContextStrategy=Dbe});var VO=g(hB=>{Object.defineProperty(hB,"__esModule",{value:!0});var Obe=Ui(),Ube=HO(),Kbe=kO();function Lbe(){Obe.NODE_VERSION.major>=14?Kbe.setHooksAsyncContextStrategy():Ube.setDomainAsyncContextStrategy()}hB.setNodeAsyncContextStrategy=Lbe});var yB=g(CB=>{Object.defineProperty(CB,"__esModule",{value:!0});var Mbe=require("util"),IB=O(),YO=A(),FO="Console",qbe=()=>({name:FO,setup(e){YO.addConsoleInstrumentationHandler(({args:t,level:n})=>{IB.getClient()===e&&IB.addBreadcrumb({category:"console",level:YO.severityLevelFromString(n),message:Mbe.format.apply(void 0,t)},{input:[...t],level:n})})}}),Pbe=IB.convertIntegrationFnToClass(FO,qbe);CB.Console=Pbe});var td=g(bB=>{Object.defineProperty(bB,"__esModule",{value:!0});var zbe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;bB.DEBUG_BUILD=zbe});var JO=g(co=>{var{_optionalChain:gr}=A();Object.defineProperty(co,"__esModule",{value:!0});var AB=require("url"),jbe=Ui();function Qbe(e){let{protocol:t,hostname:n,port:r}=XO(e),i=e.path?e.path:"/";return`${t}//${n}${r}${i}`}function xO(e){let{protocol:t,hostname:n,port:r}=XO(e),i=e.pathname||"/",s=e.auth?$be(e.auth):"";return`${t}//${s}${n}${r}${i}`}function $be(e){let[t,n]=e.split(":");return`${t?"[Filtered]":""}:${n?"[Filtered]":""}@`}function eAe(e,t,n){if(!e)return e;let[r,i]=e.split(" ");return t.host&&!t.protocol&&(t.protocol=gr([n,"optionalAccess",s=>s.agent,"optionalAccess",s=>s.protocol]),i=xO(t)),gr([i,"optionalAccess",s=>s.startsWith,"call",s=>s("///")])&&(i=i.slice(2)),`${r} ${i}`}function _B(e){let t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}function tAe(e,t){let n,r;if(typeof t[t.length-1]=="function"&&(n=t.pop()),typeof t[0]=="string")r=_B(new AB.URL(t[0]));else if(t[0]instanceof AB.URL)r=_B(t[0]);else{r=t[0];try{let i=new AB.URL(r.path||"",`${r.protocol||"http:"}//${r.hostname}`);r={pathname:i.pathname,search:i.search,hash:i.hash,...r}}catch{}}return t.length===2&&(r={...r,...t[1]}),r.protocol===void 0&&(jbe.NODE_VERSION.major>8?r.protocol=gr([gr([e,"optionalAccess",i=>i.globalAgent]),"optionalAccess",i=>i.protocol])||gr([r.agent,"optionalAccess",i=>i.protocol])||gr([r._defaultAgent,"optionalAccess",i=>i.protocol]):r.protocol=gr([r.agent,"optionalAccess",i=>i.protocol])||gr([r._defaultAgent,"optionalAccess",i=>i.protocol])||gr([gr([e,"optionalAccess",i=>i.globalAgent]),"optionalAccess",i=>i.protocol])),n?[r,n]:[r]}function XO(e){let t=e.protocol||"",n=e.hostname||e.host||"",r=!e.port||e.port===80||e.port===443||/^(.*):(\d+)$/.test(n)?"":`:${e.port}`;return{protocol:t,hostname:n,port:r}}co.cleanSpanDescription=eAe;co.extractRawUrl=Qbe;co.extractUrl=xO;co.normalizeRequestArgs=tAe;co.urlToOptions=_B});var BB=g(GB=>{var{_optionalChain:uo}=A();Object.defineProperty(GB,"__esModule",{value:!0});var Ki=O(),In=A(),SB=td(),nAe=Ui(),nd=JO(),Li=class{static __initStatic(){this.id="Http"}__init(){this.name=Li.id}constructor(t={}){Li.prototype.__init.call(this),this._breadcrumbs=typeof t.breadcrumbs>"u"?!0:t.breadcrumbs,this._tracing=t.tracing?t.tracing===!0?{}:t.tracing:void 0}setupOnce(t,n){if(!this._breadcrumbs&&!this._tracing)return;let r=uo([n,"call",c=>c(),"access",c=>c.getClient,"call",c=>c(),"optionalAccess",c=>c.getOptions,"call",c=>c()]);if(r&&r.instrumenter!=="sentry"){SB.DEBUG_BUILD&&In.logger.log("HTTP Integration is skipped because of instrumenter configuration.");return}let i=uo([this,"access",c=>c._tracing,"optionalAccess",c=>c.shouldCreateSpanForRequest])||uo([r,"optionalAccess",c=>c.shouldCreateSpanForRequest]),s=uo([r,"optionalAccess",c=>c.tracePropagationTargets])||uo([this,"access",c=>c._tracing,"optionalAccess",c=>c.tracePropagationTargets]),o=require("http"),a=DO(o,this._breadcrumbs,i,s);if(In.fill(o,"get",a),In.fill(o,"request",a),nAe.NODE_VERSION.major>8){let c=require("https"),u=DO(c,this._breadcrumbs,i,s);In.fill(c,"get",u),In.fill(c,"request",u)}}};Li.__initStatic();function DO(e,t,n,r){let i=new In.LRUMap(100),s=new In.LRUMap(100),o=u=>{if(n===void 0)return!0;let l=i.get(u);if(l!==void 0)return l;let d=n(u);return i.set(u,d),d},a=u=>{if(r===void 0)return!0;let l=s.get(u);if(l!==void 0)return l;let d=In.stringMatchesSomePattern(u,r);return s.set(u,d),d};function c(u,l,d,p){!Ki.getCurrentHub().getIntegration(Li)||Ki.addBreadcrumb({category:"http",data:{status_code:p&&p.statusCode,...l},type:"http"},{event:u,request:d,response:p})}return function(l){return function(...p){let m=nd.normalizeRequestArgs(e,p),f=m[0],h=nd.extractRawUrl(f),I=nd.extractUrl(f);if(Ki.isSentryRequestUrl(I,Ki.getClient()))return l.apply(e,m);let b=Ki.getCurrentScope(),R=b.getSpan(),W=rAe(I,f),F=o(h)?uo([R,"optionalAccess",H=>H.startChild,"call",H=>H({op:"http.client",origin:"auto.http.node.http",description:`${W["http.method"]} ${W.url}`,data:W})]):void 0;if(a(h))if(F){let H=Ki.spanToTraceHeader(F),x=uo([F,"optionalAccess",ne=>ne.transaction,"optionalAccess",ne=>ne.getDynamicSamplingContext,"call",ne=>ne()]);OO(f,I,H,x)}else{let H=Ki.getClient(),{traceId:x,sampled:ne,dsc:ce}=b.getPropagationContext(),T=In.generateSentryTraceHeader(x,void 0,ne),J=ce||(H?Ki.getDynamicSamplingContextFromClient(x,H,b):void 0);OO(f,I,T,J)}else SB.DEBUG_BUILD&&In.logger.log(`[Tracing] Not adding sentry-trace header to outgoing request (${I}) due to mismatching tracePropagationTargets option.`);return l.apply(e,m).once("response",function(H){let x=this;t&&c("response",W,x,H),F&&(H.statusCode&&F.setHttpStatus(H.statusCode),F.description=nd.cleanSpanDescription(F.description,f,x),F.end())}).once("error",function(){let H=this;t&&c("error",W,H),F&&(F.setHttpStatus(500),F.description=nd.cleanSpanDescription(F.description,f,H),F.end())})}}}function OO(e,t,n,r){if((e.headers||{})["sentry-trace"])return;SB.DEBUG_BUILD&&In.logger.log(`[Tracing] Adding sentry-trace header ${n} to outgoing request to "${t}": `);let s=In.dynamicSamplingContextToSentryBaggageHeader(r),o=s&&s.length>0?iAe(e,s):void 0;e.headers={...e.headers,"sentry-trace":n,...o&&{baggage:o}}}function rAe(e,t){let n=t.method||"GET",r={url:e,"http.method":n};return t.hash&&(r["http.fragment"]=t.hash.substring(1)),t.search&&(r["http.query"]=t.search.substring(1)),r}function iAe(e,t){if(!e.headers||!e.headers.baggage)return t;if(t){if(Array.isArray(e.headers.baggage))return[...e.headers.baggage,t]}else return e.headers.baggage;return[e.headers.baggage,t]}GB.Http=Li});var EB=g(ZB=>{Object.defineProperty(ZB,"__esModule",{value:!0});var sAe=O(),Gf=A(),vB=td(),oAe=2e3;function aAe(e){Gf.consoleSandbox(()=>{console.error(e)});let t=sAe.getClient();t===void 0&&(vB.DEBUG_BUILD&&Gf.logger.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1));let n=t.getOptions(),r=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||oAe;t.close(r).then(i=>{i||vB.DEBUG_BUILD&&Gf.logger.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)},i=>{vB.DEBUG_BUILD&&Gf.logger.error(i)})}ZB.logAndExitProcess=aAe});var WB=g(Bf=>{Object.defineProperty(Bf,"__esModule",{value:!0});var RB=O(),cAe=A(),uAe=td(),UO=EB(),KO="OnUncaughtException",lAe=(e={})=>{let t={exitEvenIfOtherHandlersAreRegistered:!0,...e};return{name:KO,setup(n){global.process.on("uncaughtException",LO(n,t))}}},dAe=RB.convertIntegrationFnToClass(KO,lAe);function LO(e,t){let r=!1,i=!1,s=!1,o,a=e.getOptions();return Object.assign(c=>{let u=UO.logAndExitProcess;t.onFatalError?u=t.onFatalError:a.onFatalError&&(u=a.onFatalError);let d=global.process.listeners("uncaughtException").reduce((m,f)=>f.name==="domainUncaughtExceptionClear"||f.tag&&f.tag==="sentry_tracingErrorCallback"||f._errorHandler?m:m+1,0)===0,p=t.exitEvenIfOtherHandlersAreRegistered||d;r?p&&(s?(uAe.DEBUG_BUILD&&cAe.logger.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),UO.logAndExitProcess(c)):i||(i=!0,setTimeout(()=>{s||(s=!0,u(o,c))},2e3))):(o=c,r=!0,RB.getClient()===e&&RB.captureException(c,{originalException:c,captureContext:{level:"fatal"},mechanism:{handled:!1,type:"onuncaughtexception"}}),!s&&p&&(s=!0,u(c)))},{_errorHandler:!0})}Bf.OnUncaughtException=dAe;Bf.makeErrorHandler=LO});var NB=g(vf=>{Object.defineProperty(vf,"__esModule",{value:!0});var wB=O(),MO=A(),gAe=EB(),qO="OnUnhandledRejection",pAe=(e={})=>{let t=e.mode||"warn";return{name:qO,setup(n){global.process.on("unhandledRejection",PO(n,{mode:t}))}}},mAe=wB.convertIntegrationFnToClass(qO,pAe);function PO(e,t){return function(r,i){wB.getClient()===e&&(wB.captureException(r,{originalException:i,captureContext:{extra:{unhandledPromiseRejection:!0}},mechanism:{handled:!1,type:"onunhandledrejection"}}),fAe(r,t))}}function fAe(e,t){let n="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";t.mode==="warn"?MO.consoleSandbox(()=>{console.warn(n),console.error(e&&e.stack?e.stack:e)}):t.mode==="strict"&&(MO.consoleSandbox(()=>{console.warn(n)}),gAe.logAndExitProcess(e))}vf.OnUnhandledRejection=mAe;vf.makeUnhandledPromiseHandler=PO});var kB=g(HB=>{Object.defineProperty(HB,"__esModule",{value:!0});var zO=require("fs"),jO=require("path"),hAe=O(),TB,QO="Modules";function IAe(){try{return require.cache?Object.keys(require.cache):[]}catch{return[]}}function CAe(){let e=require.main&&require.main.paths||[],t=IAe(),n={},r={};return t.forEach(i=>{let s=i,o=()=>{let a=s;if(s=jO.dirname(a),!s||a===s||r[a])return;if(e.indexOf(s)<0)return o();let c=jO.join(a,"package.json");if(r[a]=!0,!zO.existsSync(c))return o();try{let u=JSON.parse(zO.readFileSync(c,"utf8"));n[u.name]=u.version}catch{}};o()}),n}function yAe(){return TB||(TB=CAe()),TB}var bAe=()=>({name:QO,processEvent(e){return e.modules={...e.modules,...yAe()},e}}),AAe=hAe.convertIntegrationFnToClass(QO,bAe);HB.Modules=AAe});var FB=g(YB=>{var{_optionalChain:VB}=A();Object.defineProperty(YB,"__esModule",{value:!0});var _Ae=require("fs"),SAe=O(),$O=A(),Zf=new $O.LRUMap(100),GAe=7,eU="ContextLines";function BAe(e){return new Promise((t,n)=>{_Ae.readFile(e,"utf8",(r,i)=>{r?n(r):t(i)})})}var vAe=(e={})=>{let t=e.frameContextLines!==void 0?e.frameContextLines:GAe;return{name:eU,processEvent(n){return EAe(n,t)}}},ZAe=SAe.convertIntegrationFnToClass(eU,vAe);async function EAe(e,t){let n={},r=[];if(t>0&&VB([e,"access",i=>i.exception,"optionalAccess",i=>i.values])){for(let i of e.exception.values)if(!!VB([i,"access",s=>s.stacktrace,"optionalAccess",s=>s.frames]))for(let s=i.stacktrace.frames.length-1;s>=0;s--){let o=i.stacktrace.frames[s];o.filename&&!n[o.filename]&&!Zf.get(o.filename)&&(r.push(WAe(o.filename)),n[o.filename]=1)}}if(r.length>0&&await Promise.all(r),t>0&&VB([e,"access",i=>i.exception,"optionalAccess",i=>i.values]))for(let i of e.exception.values)i.stacktrace&&i.stacktrace.frames&&await RAe(i.stacktrace.frames,t);return e}function RAe(e,t){for(let n of e)if(n.filename&&n.context_line===void 0){let r=Zf.get(n.filename);if(r)try{$O.addContextToFrame(r,n,t)}catch{}}}async function WAe(e){let t=Zf.get(e);if(t===null)return null;if(t!==void 0)return t;let n=null;try{n=(await BAe(e)).split(`
`)}catch{}return Zf.set(e,n),n}YB.ContextLines=ZAe});var xB=g(ic=>{var{_optionalChain:lo}=A();Object.defineProperty(ic,"__esModule",{value:!0});var wAe=require("child_process"),nU=require("fs"),Cn=require("os"),NAe=require("path"),rU=require("util"),TAe=O(),iU=rU.promisify(nU.readFile),sU=rU.promisify(nU.readdir),oU="Context",HAe=(e={})=>{let t,n={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0,...e};async function r(s){t===void 0&&(t=i());let o=VAe(await t);return s.contexts={...s.contexts,app:{...o.app,...lo([s,"access",a=>a.contexts,"optionalAccess",a=>a.app])},os:{...o.os,...lo([s,"access",a=>a.contexts,"optionalAccess",a=>a.os])},device:{...o.device,...lo([s,"access",a=>a.contexts,"optionalAccess",a=>a.device])},culture:{...o.culture,...lo([s,"access",a=>a.contexts,"optionalAccess",a=>a.culture])},cloud_resource:{...o.cloud_resource,...lo([s,"access",a=>a.contexts,"optionalAccess",a=>a.cloud_resource])}},s}async function i(){let s={};if(n.os&&(s.os=await YAe()),n.app&&(s.app=xAe()),n.device&&(s.device=aU(n.device)),n.culture){let o=FAe();o&&(s.culture=o)}return n.cloudResource&&(s.cloud_resource=KAe()),s}return{name:oU,processEvent(s){return r(s)}}},kAe=TAe.convertIntegrationFnToClass(oU,HAe);function VAe(e){return lo([e,"optionalAccess",t=>t.app,"optionalAccess",t=>t.app_memory])&&(e.app.app_memory=process.memoryUsage().rss),lo([e,"optionalAccess",t=>t.device,"optionalAccess",t=>t.free_memory])&&(e.device.free_memory=Cn.freemem()),e}async function YAe(){let e=Cn.platform();switch(e){case"darwin":return OAe();case"linux":return UAe();default:return{name:XAe[e]||e,version:Cn.release()}}}function FAe(){try{if(typeof process.versions.icu!="string")return;let e=new Date(9e8);if(new Intl.DateTimeFormat("es",{month:"long"}).format(e)==="enero"){let n=Intl.DateTimeFormat().resolvedOptions();return{locale:n.locale,timezone:n.timeZone}}}catch{}}function xAe(){let e=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-process.uptime()*1e3).toISOString(),app_memory:e}}function aU(e){let t={},n;try{n=Cn.uptime&&Cn.uptime()}catch{}if(typeof n=="number"&&(t.boot_time=new Date(Date.now()-n*1e3).toISOString()),t.arch=Cn.arch(),(e===!0||e.memory)&&(t.memory_size=Cn.totalmem(),t.free_memory=Cn.freemem()),e===!0||e.cpu){let r=Cn.cpus();if(r&&r.length){let i=r[0];t.processor_count=r.length,t.cpu_description=i.model,t.processor_frequency=i.speed}}return t}var XAe={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},JAe=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],DAe={alpine:e=>e,arch:e=>pr(/distrib_release=(.*)/,e),centos:e=>pr(/release ([^ ]+)/,e),debian:e=>e,fedora:e=>pr(/release (..)/,e),mint:e=>pr(/distrib_release=(.*)/,e),red:e=>pr(/release ([^ ]+)/,e),suse:e=>pr(/VERSION = (.*)\n/,e),ubuntu:e=>pr(/distrib_release=(.*)/,e)};function pr(e,t){let n=e.exec(t);return n?n[1]:void 0}async function OAe(){let e={kernel_version:Cn.release(),name:"Mac OS X",version:`10.${Number(Cn.release().split(".")[0])-4}`};try{let t=await new Promise((n,r)=>{wAe.execFile("/usr/bin/sw_vers",(i,s)=>{if(i){r(i);return}n(s)})});e.name=pr(/^ProductName:\s+(.*)$/m,t),e.version=pr(/^ProductVersion:\s+(.*)$/m,t),e.build=pr(/^BuildVersion:\s+(.*)$/m,t)}catch{}return e}function tU(e){return e.split(" ")[0].toLowerCase()}async function UAe(){let e={kernel_version:Cn.release(),name:"Linux"};try{let t=await sU("/etc"),n=JAe.find(a=>t.includes(a.name));if(!n)return e;let r=NAe.join("/etc",n.name),i=(await iU(r,{encoding:"utf-8"})).toLowerCase(),{distros:s}=n;e.name=s.find(a=>i.indexOf(tU(a))>=0)||s[0];let o=tU(e.name);e.version=DAe[o](i)}catch{}return e}function KAe(){return process.env.VERCEL?{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION}:process.env.AWS_REGION?{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV}:process.env.GCP_PROJECT?{"cloud.provider":"gcp"}:process.env.ALIYUN_REGION_ID?{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID}:process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME?{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME}:process.env.IBM_CLOUD_REGION?{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION}:process.env.TENCENTCLOUD_REGION?{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE}:process.env.NETLIFY?{"cloud.provider":"netlify"}:process.env.FLY_REGION?{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION}:process.env.DYNO?{"cloud.provider":"heroku"}:void 0}ic.Context=kAe;ic.getDeviceContext=aU;ic.readDirAsync=sU;ic.readFileAsync=iU});var JB=g(go=>{Object.defineProperty(go,"__esModule",{value:!0});function LAe(e,t,n){let r=0,i=5,s=0;return setInterval(()=>{s===0?r>e&&(i*=2,n(i),i>86400&&(i=86400),s=i):(s-=1,s===0&&t()),r=0},1e3).unref(),()=>{r+=1}}function XB(e){return e!==void 0&&(e.length===0||e==="?"||e==="<anonymous>")}function MAe(e,t){return e===t||XB(e)&&XB(t)}function cU(e){if(e!==void 0)return e.slice(-10).reduce((t,n)=>`${t},${n.function},${n.lineno},${n.colno}`,"")}function qAe(e,t){if(t!==void 0)return cU(e(t,1))}go.createRateLimiter=LAe;go.functionNamesMatch=MAe;go.hashFrames=cU;go.hashFromStack=qAe;go.isAnonymous=XB});var gU=g((DB,dU)=>{var{_optionalChain:Fe}=A();Object.defineProperty(DB,"__esModule",{value:!0});var PAe=O(),sc=A(),Ef=JB();async function zAe(e,t,n,r){let i=await e.post("Runtime.getProperties",{objectId:t,ownProperties:!0});r[n]=i.result.filter(s=>s.name!=="length"&&!isNaN(parseInt(s.name,10))).sort((s,o)=>parseInt(s.name,10)-parseInt(o.name,10)).map(s=>Fe([s,"access",o=>o.value,"optionalAccess",o=>o.value]))}async function jAe(e,t,n,r){let i=await e.post("Runtime.getProperties",{objectId:t,ownProperties:!0});r[n]=i.result.map(s=>[s.name,Fe([s,"access",o=>o.value,"optionalAccess",o=>o.value])]).reduce((s,[o,a])=>(s[o]=a,s),{})}function QAe(e,t){Fe([e,"optionalAccess",n=>n.value,"optionalAccess",n=>n.value])?t[e.name]=e.value.value:Fe([e,"optionalAccess",n=>n.value,"optionalAccess",n=>n.description])&&Fe([e,"optionalAccess",n=>n.value,"optionalAccess",n=>n.type])!=="function"&&(t[e.name]=`<${e.value.description}>`)}async function $Ae(e,t){let n=await e.post("Runtime.getProperties",{objectId:t,ownProperties:!0}),r={};for(let i of n.result)if(Fe([i,"optionalAccess",s=>s.value,"optionalAccess",s=>s.objectId])&&Fe([i,"optionalAccess",s=>s.value,"access",s=>s.className])==="Array"){let s=i.value.objectId;await zAe(e,s,i.name,r)}else if(Fe([i,"optionalAccess",s=>s.value,"optionalAccess",s=>s.objectId])&&Fe([i,"optionalAccess",s=>s.value,"optionalAccess",s=>s.className])==="Object"){let s=i.value.objectId;await jAe(e,s,i.name,r)}else(Fe([i,"optionalAccess",s=>s.value,"optionalAccess",s=>s.value])||Fe([i,"optionalAccess",s=>s.value,"optionalAccess",s=>s.description]))&&QAe(i,r);return r}var uU="LocalVariablesAsync",lU=(e={})=>{let t=new sc.LRUMap(20),n,r=!1;async function i(c,u,{reason:l,data:d,callFrames:p}){if(l!=="exception"&&l!=="promiseRejection")return;Fe([n,"optionalCall",h=>h()]);let m=Ef.hashFromStack(u,Fe([d,"optionalAccess",h=>h.description]));if(m==null)return;let f=[];for(let h=0;h<p.length;h++){let{scopeChain:I,functionName:b,this:R}=p[h],W=I.find(H=>H.type==="local"),F=R.className==="global"||!R.className?b:`${R.className}.${b}`;if(Fe([W,"optionalAccess",H=>H.object,"access",H=>H.objectId])===void 0)f[h]={function:F};else{let H=await $Ae(c,W.object.objectId);f[h]={function:F,vars:H}}}t.set(m,f)}async function s(c,u){c.connect();let l=!1;c.on("Debugger.resumed",()=>{l=!1}),c.on("Debugger.paused",p=>{l=!0,i(c,u.stackParser,p.params).then(()=>l?c.post("Debugger.resume"):Promise.resolve(),m=>{})}),await c.post("Debugger.enable");let d=e.captureAllExceptions!==!1;if(await c.post("Debugger.setPauseOnExceptions",{state:d?"all":"uncaught"}),d){let p=e.maxExceptionsPerSecond||50;n=Ef.createRateLimiter(p,()=>(sc.logger.log("Local variables rate-limit lifted."),c.post("Debugger.setPauseOnExceptions",{state:"all"})),m=>(sc.logger.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${m} seconds.`),c.post("Debugger.setPauseOnExceptions",{state:"uncaught"})))}r=!0}function o(c){let u=Ef.hashFrames(Fe([c,"access",p=>p.stacktrace,"optionalAccess",p=>p.frames]));if(u===void 0)return;let l=t.remove(u);if(l===void 0)return;let d=Fe([c,"access",p=>p.stacktrace,"optionalAccess",p=>p.frames,"optionalAccess",p=>p.length])||0;for(let p=0;p<d;p++){let m=d-p-1;if(!Fe([c,"access",f=>f.stacktrace,"optionalAccess",f=>f.frames,"optionalAccess",f=>f[m]])||!l[p])break;l[p].vars===void 0||c.stacktrace.frames[m].in_app===!1||!Ef.functionNamesMatch(c.stacktrace.frames[m].function,l[p].function)||(c.stacktrace.frames[m].vars=l[p].vars)}}function a(c){for(let u of Fe([c,"access",l=>l.exception,"optionalAccess",l=>l.values])||[])o(u);return c}return{name:uU,setup(c){let u=c.getOptions();if(!!u.includeLocalVariables)try{let{Session:l}=sc.dynamicRequire(dU,"node:inspector/promises");s(new l,u).catch(d=>{sc.logger.error("Failed to start inspector session",d)})}catch(l){sc.logger.error("Failed to load inspector API",l);return}},processEvent(c){return r?a(c):c}}};PAe.convertIntegrationFnToClass(uU,lU);DB.localVariablesAsync=lU});var fU=g(wf=>{var{_optionalChain:he}=A();Object.defineProperty(wf,"__esModule",{value:!0});var e_e=O(),Rf=A(),t_e=Ui(),Wf=JB();function UB(e){let t=[],n=!1;function r(o){t=[],!n&&(n=!0,e(o))}t.push(r);function i(o){t.push(o)}function s(o){let a=t.pop()||r;try{a(o)}catch{r(o)}}return{add:i,next:s}}var OB=class{constructor(){let{Session:t}=require("inspector");this._session=new t}configureAndConnect(t,n){this._session.connect(),this._session.on("Debugger.paused",r=>{t(r,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:n?"all":"uncaught"})}setPauseOnExceptions(t){this._session.post("Debugger.setPauseOnExceptions",{state:t?"all":"uncaught"})}getLocalVariables(t,n){this._getProperties(t,r=>{let{add:i,next:s}=UB(n);for(let o of r)if(he([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.objectId])&&he([o,"optionalAccess",a=>a.value,"access",a=>a.className])==="Array"){let a=o.value.objectId;i(c=>this._unrollArray(a,o.name,c,s))}else if(he([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.objectId])&&he([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.className])==="Object"){let a=o.value.objectId;i(c=>this._unrollObject(a,o.name,c,s))}else(he([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.value])||he([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.description]))&&i(a=>this._unrollOther(o,a,s));s({})})}_getProperties(t,n){this._session.post("Runtime.getProperties",{objectId:t,ownProperties:!0},(r,i)=>{n(r?[]:i.result)})}_unrollArray(t,n,r,i){this._getProperties(t,s=>{r[n]=s.filter(o=>o.name!=="length"&&!isNaN(parseInt(o.name,10))).sort((o,a)=>parseInt(o.name,10)-parseInt(a.name,10)).map(o=>he([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.value])),i(r)})}_unrollObject(t,n,r,i){this._getProperties(t,s=>{r[n]=s.map(o=>[o.name,he([o,"optionalAccess",a=>a.value,"optionalAccess",a=>a.value])]).reduce((o,[a,c])=>(o[a]=c,o),{}),i(r)})}_unrollOther(t,n,r){he([t,"optionalAccess",i=>i.value,"optionalAccess",i=>i.value])?n[t.name]=t.value.value:he([t,"optionalAccess",i=>i.value,"optionalAccess",i=>i.description])&&he([t,"optionalAccess",i=>i.value,"optionalAccess",i=>i.type])!=="function"&&(n[t.name]=`<${t.value.description}>`),r(n)}};function n_e(){try{return new OB}catch{return}}var pU="LocalVariablesSync",mU=(e={},t=n_e())=>{let n=new Rf.LRUMap(20),r,i=!1;function s(c,{params:{reason:u,data:l,callFrames:d}},p){if(u!=="exception"&&u!=="promiseRejection"){p();return}he([r,"optionalCall",I=>I()]);let m=Wf.hashFromStack(c,he([l,"optionalAccess",I=>I.description]));if(m==null){p();return}let{add:f,next:h}=UB(I=>{n.set(m,I),p()});for(let I=0;I<Math.min(d.length,5);I++){let{scopeChain:b,functionName:R,this:W}=d[I],F=b.find(x=>x.type==="local"),H=W.className==="global"||!W.className?R:`${W.className}.${R}`;if(he([F,"optionalAccess",x=>x.object,"access",x=>x.objectId])===void 0)f(x=>{x[I]={function:H},h(x)});else{let x=F.object.objectId;f(ne=>he([t,"optionalAccess",ce=>ce.getLocalVariables,"call",ce=>ce(x,T=>{ne[I]={function:H,vars:T},h(ne)})]))}}h([])}function o(c){let u=Wf.hashFrames(he([c,"optionalAccess",p=>p.stacktrace,"optionalAccess",p=>p.frames]));if(u===void 0)return;let l=n.remove(u);if(l===void 0)return;let d=he([c,"access",p=>p.stacktrace,"optionalAccess",p=>p.frames,"optionalAccess",p=>p.length])||0;for(let p=0;p<d;p++){let m=d-p-1;if(!he([c,"optionalAccess",f=>f.stacktrace,"optionalAccess",f=>f.frames,"optionalAccess",f=>f[m]])||!l[p])break;l[p].vars===void 0||c.stacktrace.frames[m].in_app===!1||!Wf.functionNamesMatch(c.stacktrace.frames[m].function,l[p].function)||(c.stacktrace.frames[m].vars=l[p].vars)}}function a(c){for(let u of he([c,"optionalAccess",l=>l.exception,"optionalAccess",l=>l.values])||[])o(u);return c}return{name:pU,setup(c){let u=c.getOptions();if(t&&u.includeLocalVariables){if(t_e.NODE_VERSION.major<18){Rf.logger.log("The `LocalVariables` integration is only supported on Node >= v18.");return}let d=e.captureAllExceptions!==!1;if(t.configureAndConnect((p,m)=>s(u.stackParser,p,m),d),d){let p=e.maxExceptionsPerSecond||50;r=Wf.createRateLimiter(p,()=>{Rf.logger.log("Local variables rate-limit lifted."),he([t,"optionalAccess",m=>m.setPauseOnExceptions,"call",m=>m(!0)])},m=>{Rf.logger.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${m} seconds.`),he([t,"optionalAccess",f=>f.setPauseOnExceptions,"call",f=>f(!1)])})}i=!0}},processEvent(c){return i?a(c):c},_getCachedFramesCount(){return n.size},_getFirstCachedFrame(){return n.values()[0]}}};e_e.convertIntegrationFnToClass(pU,mU);wf.createCallbackList=UB;wf.localVariablesSync=mU});var LB=g(KB=>{Object.defineProperty(KB,"__esModule",{value:!0});var r_e=O(),i_e=Ui(),s_e=gU(),o_e=fU(),a_e="LocalVariables",c_e=(e={})=>i_e.NODE_VERSION.major<19?o_e.localVariablesSync(e):s_e.localVariablesAsync(e),u_e=r_e.convertIntegrationFnToClass(a_e,c_e);KB.LocalVariables=u_e});var MB=g((Pr,CU)=>{var{_optionalChain:IU}=A();Object.defineProperty(Pr,"__esModule",{value:!0});var Tt=O(),qr=A(),l_e=Ui();Pr.ChannelName=void 0;(function(e){let t="undici:request:create";e.RequestCreate=t;let n="undici:request:headers";e.RequestEnd=n;let r="undici:request:error";e.RequestError=r})(Pr.ChannelName||(Pr.ChannelName={}));var yt=class{static __initStatic(){this.id="Undici"}__init(){this.name=yt.id}__init2(){this._createSpanUrlMap=new qr.LRUMap(100)}__init3(){this._headersUrlMap=new qr.LRUMap(100)}constructor(t={}){yt.prototype.__init.call(this),yt.prototype.__init2.call(this),yt.prototype.__init3.call(this),yt.prototype.__init4.call(this),yt.prototype.__init5.call(this),yt.prototype.__init6.call(this),this._options={breadcrumbs:t.breadcrumbs===void 0?!0:t.breadcrumbs,shouldCreateSpanForRequest:t.shouldCreateSpanForRequest}}setupOnce(t){if(l_e.NODE_VERSION.major<16)return;let n;try{n=qr.dynamicRequire(CU,"diagnostics_channel")}catch{}!n||!n.subscribe||(n.subscribe(Pr.ChannelName.RequestCreate,this._onRequestCreate),n.subscribe(Pr.ChannelName.RequestEnd,this._onRequestEnd),n.subscribe(Pr.ChannelName.RequestError,this._onRequestError))}_shouldCreateSpan(t){if(this._options.shouldCreateSpanForRequest===void 0)return!0;let n=this._createSpanUrlMap.get(t);if(n!==void 0)return n;let r=this._options.shouldCreateSpanForRequest(t);return this._createSpanUrlMap.set(t,r),r}__init4(){this._onRequestCreate=t=>{if(!Tt.getCurrentHub().getIntegration(yt))return;let{request:r}=t,i=r.origin?r.origin.toString()+r.path:r.path,s=Tt.getClient();if(!s||Tt.isSentryRequestUrl(i,s)||r.__sentry_span__!==void 0)return;let o=s.getOptions(),a=Tt.getCurrentScope(),c=a.getSpan(),u=this._shouldCreateSpan(i)?d_e(c,r,i):void 0;if(u&&(r.__sentry_span__=u),(d=>{if(o.tracePropagationTargets===void 0)return!0;let p=this._headersUrlMap.get(d);if(p!==void 0)return p;let m=qr.stringMatchesSomePattern(d,o.tracePropagationTargets);return this._headersUrlMap.set(d,m),m})(i))if(u){let d=IU([u,"optionalAccess",m=>m.transaction,"optionalAccess",m=>m.getDynamicSamplingContext,"call",m=>m()]),p=qr.dynamicSamplingContextToSentryBaggageHeader(d);hU(r,Tt.spanToTraceHeader(u),p)}else{let{traceId:d,sampled:p,dsc:m}=a.getPropagationContext(),f=qr.generateSentryTraceHeader(d,void 0,p),h=m||Tt.getDynamicSamplingContextFromClient(d,s,a),I=qr.dynamicSamplingContextToSentryBaggageHeader(h);hU(r,f,I)}}}__init5(){this._onRequestEnd=t=>{if(!Tt.getCurrentHub().getIntegration(yt))return;let{request:r,response:i}=t,s=r.origin?r.origin.toString()+r.path:r.path;if(Tt.isSentryRequestUrl(s,Tt.getClient()))return;let o=r.__sentry_span__;o&&(o.setHttpStatus(i.statusCode),o.end()),this._options.breadcrumbs&&Tt.addBreadcrumb({category:"http",data:{method:r.method,status_code:i.statusCode,url:s},type:"http"},{event:"response",request:r,response:i})}}__init6(){this._onRequestError=t=>{if(!Tt.getCurrentHub().getIntegration(yt))return;let{request:r}=t,i=r.origin?r.origin.toString()+r.path:r.path;if(Tt.isSentryRequestUrl(i,Tt.getClient()))return;let s=r.__sentry_span__;s&&(s.setStatus("internal_error"),s.end()),this._options.breadcrumbs&&Tt.addBreadcrumb({category:"http",data:{method:r.method,url:i},level:"error",type:"http"},{event:"error",request:r})}}};yt.__initStatic();function hU(e,t,n){e.headers.split(`\r
`).some(s=>s.startsWith("sentry-trace:"))||(e.addHeader("sentry-trace",t),n&&e.addHeader("baggage",n))}function d_e(e,t,n){let r=qr.parseUrl(n),i=t.method||"GET",s={"http.method":i};return r.search&&(s["http.query"]=r.search),r.hash&&(s["http.fragment"]=r.hash),IU([e,"optionalAccess",o=>o.startChild,"call",o=>o({op:"http.client",origin:"auto.http.node.undici",description:`${i} ${qr.getSanitizedUrlString(r)}`,data:s})])}Pr.Undici=yt});var PB=g(qB=>{Object.defineProperty(qB,"__esModule",{value:!0});var g_e=require("http"),p_e=require("url"),m_e=O(),oc=A(),yU="Spotlight",f_e=(e={})=>{let t={sidecarUrl:e.sidecarUrl||"http://localhost:8969/stream"};return{name:yU,setup(n){typeof process=="object"&&process.env&&process.env.NODE_ENV!=="development"&&oc.logger.warn("[Spotlight] It seems you're not in dev mode. Do you really want to have Spotlight enabled?"),I_e(n,t)}}},h_e=m_e.convertIntegrationFnToClass(yU,f_e);function I_e(e,t){let n=C_e(t.sidecarUrl);if(!n)return;let r=0;if(typeof e.on!="function"){oc.logger.warn("[Spotlight] Cannot connect to spotlight due to missing method on SDK client (`client.on`)");return}e.on("beforeEnvelope",i=>{if(r>3){oc.logger.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}let s=oc.serializeEnvelope(i),o=g_e.request({method:"POST",path:n.pathname,hostname:n.hostname,port:n.port,headers:{"Content-Type":"application/x-sentry-envelope"}},a=>{a.on("data",()=>{}),a.on("end",()=>{}),a.setEncoding("utf8")});o.on("error",()=>{r++,oc.logger.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),o.write(s),o.end()})}function C_e(e){try{return new p_e.URL(`${e}`)}catch{oc.logger.warn(`[Spotlight] Invalid sidecar URL: ${e}`);return}}qB.Spotlight=h_e});var AU=g(bU=>{bU.base64WorkerScript="aW1wb3J0IHsgU2Vzc2lvbiB9IGZyb20gJ2luc3BlY3Rvcic7CmltcG9ydCB7IHdvcmtlckRhdGEsIHBhcmVudFBvcnQgfSBmcm9tICd3b3JrZXJfdGhyZWFkcyc7CmltcG9ydCAqIGFzIGh0dHAgZnJvbSAnaHR0cCc7CmltcG9ydCAqIGFzIGh0dHBzIGZyb20gJ2h0dHBzJzsKaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzdHJlYW0nOwppbXBvcnQgcmVxdWlyZSQkMiwgeyBVUkwgfSBmcm9tICd1cmwnOwppbXBvcnQgeyBjcmVhdGVHemlwIH0gZnJvbSAnemxpYic7CmltcG9ydCByZXF1aXJlJCQwJDIgZnJvbSAnbmV0JzsKaW1wb3J0IHJlcXVpcmUkJDEkMSBmcm9tICd0bHMnOwppbXBvcnQgcmVxdWlyZSQkMyBmcm9tICdhc3NlcnQnOwppbXBvcnQgcmVxdWlyZSQkMCBmcm9tICd0dHknOwppbXBvcnQgcmVxdWlyZSQkMSBmcm9tICd1dGlsJzsKaW1wb3J0IHJlcXVpcmUkJDAkMSBmcm9tICdldmVudHMnOwoKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmJvdW5kLW1ldGhvZApjb25zdCBvYmplY3RUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIG9uZSBvZiBhIGZldyBFcnJvciBvciBFcnJvci1saWtlCiAqIHtAbGluayBpc0Vycm9yfS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzRXJyb3Iod2F0KSB7CiAgc3dpdGNoIChvYmplY3RUb1N0cmluZy5jYWxsKHdhdCkpIHsKICAgIGNhc2UgJ1tvYmplY3QgRXJyb3JdJzoKICAgIGNhc2UgJ1tvYmplY3QgRXhjZXB0aW9uXSc6CiAgICBjYXNlICdbb2JqZWN0IERPTUV4Y2VwdGlvbl0nOgogICAgICByZXR1cm4gdHJ1ZTsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBpc0luc3RhbmNlT2Yod2F0LCBFcnJvcik7CiAgfQp9Ci8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW4gYnVpbHQtaW4gY2xhc3MuCiAqCiAqIEBwYXJhbSB3YXQgVGhlIHZhbHVlIHRvIGJlIGNoZWNrZWQKICogQHBhcmFtIGNsYXNzTmFtZQogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc0J1aWx0aW4od2F0LCBjbGFzc05hbWUpIHsKICByZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbCh3YXQpID09PSBgW29iamVjdCAke2NsYXNzTmFtZX1dYDsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhIHN0cmluZwogKiB7QGxpbmsgaXNTdHJpbmd9LgogKgogKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNTdHJpbmcod2F0KSB7CiAgcmV0dXJuIGlzQnVpbHRpbih3YXQsICdTdHJpbmcnKTsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiBvYmplY3QgbGl0ZXJhbAogKiB7QGxpbmsgaXNQbGFpbk9iamVjdH0uCiAqCiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHdhdCkgewogIHJldHVybiBpc0J1aWx0aW4od2F0LCAnT2JqZWN0Jyk7Cn0KCi8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYW4gRXZlbnQgaW5zdGFuY2UKICoge0BsaW5rIGlzRXZlbnR9LgogKgogKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC4KICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gaXNFdmVudCh3YXQpIHsKICByZXR1cm4gdHlwZW9mIEV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiBpc0luc3RhbmNlT2Yod2F0LCBFdmVudCk7Cn0KCi8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYW4gRWxlbWVudCBpbnN0YW5jZQogKiB7QGxpbmsgaXNFbGVtZW50fS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzRWxlbWVudCh3YXQpIHsKICByZXR1cm4gdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGlzSW5zdGFuY2VPZih3YXQsIEVsZW1lbnQpOwp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUgaGFzIGEgdGhlbiBmdW5jdGlvbi4KICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqLwpmdW5jdGlvbiBpc1RoZW5hYmxlKHdhdCkgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MKICByZXR1cm4gQm9vbGVhbih3YXQgJiYgd2F0LnRoZW4gJiYgdHlwZW9mIHdhdC50aGVuID09PSAnZnVuY3Rpb24nKTsKfQoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhIFN5bnRoZXRpY0V2ZW50CiAqIHtAbGluayBpc1N5bnRoZXRpY0V2ZW50fS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzU3ludGhldGljRXZlbnQod2F0KSB7CiAgcmV0dXJuIGlzUGxhaW5PYmplY3Qod2F0KSAmJiAnbmF0aXZlRXZlbnQnIGluIHdhdCAmJiAncHJldmVudERlZmF1bHQnIGluIHdhdCAmJiAnc3RvcFByb3BhZ2F0aW9uJyBpbiB3YXQ7Cn0KCi8qKgogKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSBpcyBOYU4KICoge0BsaW5rIGlzTmFOfS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzTmFOJDEod2F0KSB7CiAgcmV0dXJuIHR5cGVvZiB3YXQgPT09ICdudW1iZXInICYmIHdhdCAhPT0gd2F0Owp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGFuIGluc3RhbmNlIG9mIHByb3ZpZGVkIGNvbnN0cnVjdG9yLgogKiB7QGxpbmsgaXNJbnN0YW5jZU9mfS4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEBwYXJhbSBiYXNlIEEgY29uc3RydWN0b3IgdG8gYmUgdXNlZCBpbiBhIGNoZWNrLgogKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBpc0luc3RhbmNlT2Yod2F0LCBiYXNlKSB7CiAgdHJ5IHsKICAgIHJldHVybiB3YXQgaW5zdGFuY2VvZiBiYXNlOwogIH0gY2F0Y2ggKF9lKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQp9CgovKioKICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGEgVnVlIFZpZXdNb2RlbC4KICoKICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuCiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC4KICovCmZ1bmN0aW9uIGlzVnVlVmlld01vZGVsKHdhdCkgewogIC8vIE5vdCB1c2luZyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nIGJlY2F1c2UgaW4gVnVlIDMgaXQgd291bGQgcmVhZCB0aGUgaW5zdGFuY2UncyBTeW1ib2woU3ltYm9sLnRvU3RyaW5nVGFnKSBwcm9wZXJ0eS4KICByZXR1cm4gISEodHlwZW9mIHdhdCA9PT0gJ29iamVjdCcgJiYgd2F0ICE9PSBudWxsICYmICgod2F0ICkuX19pc1Z1ZSB8fCAod2F0ICkuX2lzVnVlKSk7Cn0KCi8qKiBJbnRlcm5hbCBnbG9iYWwgd2l0aCBjb21tb24gcHJvcGVydGllcyBhbmQgU2VudHJ5IGV4dGVuc2lvbnMgICovCgovLyBUaGUgY29kZSBiZWxvdyBmb3IgJ2lzR2xvYmFsT2JqJyBhbmQgJ0dMT0JBTF9PQkonIHdhcyBjb3BpZWQgZnJvbSBjb3JlLWpzIGJlZm9yZSBtb2RpZmljYXRpb24KLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvYmxvYi8xYjk0NGRmNTUyODJjZGM5OWM5MGRiNWY0OWViMGI2ZWRhMmNjMGEzL3BhY2thZ2VzL2NvcmUtanMvaW50ZXJuYWxzL2dsb2JhbC5qcwovLyBjb3JlLWpzIGhhcyB0aGUgZm9sbG93aW5nIGxpY2VuY2U6Ci8vCi8vIENvcHlyaWdodCAoYykgMjAxNC0yMDIyIERlbmlzIFB1c2hrYXJldgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5Ci8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsCi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAovLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAovLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgovLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLAovLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCi8vIFRIRSBTT0ZUV0FSRS4KCi8qKiBSZXR1cm5zICdvYmonIGlmIGl0J3MgdGhlIGdsb2JhbCBvYmplY3QsIG90aGVyd2lzZSByZXR1cm5zIHVuZGVmaW5lZCAqLwpmdW5jdGlvbiBpc0dsb2JhbE9iaihvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5NYXRoID09IE1hdGggPyBvYmogOiB1bmRlZmluZWQ7Cn0KCi8qKiBHZXQncyB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgdGhlIGN1cnJlbnQgSmF2YVNjcmlwdCBydW50aW1lICovCmNvbnN0IEdMT0JBTF9PQkogPQogICh0eXBlb2YgZ2xvYmFsVGhpcyA9PSAnb2JqZWN0JyAmJiBpc0dsb2JhbE9iaihnbG9iYWxUaGlzKSkgfHwKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCiAgKHR5cGVvZiB3aW5kb3cgPT0gJ29iamVjdCcgJiYgaXNHbG9iYWxPYmood2luZG93KSkgfHwKICAodHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgaXNHbG9iYWxPYmooc2VsZikpIHx8CiAgKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgaXNHbG9iYWxPYmooZ2xvYmFsKSkgfHwKICAoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXM7CiAgfSkoKSB8fAogIHt9OwoKLyoqCiAqIEBkZXByZWNhdGVkIFVzZSBHTE9CQUxfT0JKIGluc3RlYWQgb3IgV0lORE9XIGZyb20gQHNlbnRyeS9icm93c2VyLiBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBpbiB2OAogKi8KZnVuY3Rpb24gZ2V0R2xvYmFsT2JqZWN0KCkgewogIHJldHVybiBHTE9CQUxfT0JKIDsKfQoKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uCmNvbnN0IFdJTkRPVyQxID0gZ2V0R2xvYmFsT2JqZWN0KCk7Cgpjb25zdCBERUZBVUxUX01BWF9TVFJJTkdfTEVOR1RIID0gODA7CgovKioKICogR2l2ZW4gYSBjaGlsZCBET00gZWxlbWVudCwgcmV0dXJucyBhIHF1ZXJ5LXNlbGVjdG9yIHN0YXRlbWVudCBkZXNjcmliaW5nIHRoYXQKICogYW5kIGl0cyBhbmNlc3RvcnMKICogZS5nLiBbSFRNTEVsZW1lbnRdID0+IGJvZHkgPiBkaXYgPiBpbnB1dCNmb28uYnRuW25hbWU9YmF6XQogKiBAcmV0dXJucyBnZW5lcmF0ZWQgRE9NIHBhdGgKICovCmZ1bmN0aW9uIGh0bWxUcmVlQXNTdHJpbmcoCiAgZWxlbSwKICBvcHRpb25zID0ge30sCikgewogIGlmICghZWxlbSkgewogICAgcmV0dXJuICc8dW5rbm93bj4nOwogIH0KCiAgLy8gdHJ5L2NhdGNoIGJvdGg6CiAgLy8gLSBhY2Nlc3NpbmcgZXZlbnQudGFyZ2V0IChzZWUgZ2V0c2VudHJ5L3JhdmVuLWpzIzgzOCwgIzc2OCkKICAvLyAtIGBodG1sVHJlZUFzU3RyaW5nYCBiZWNhdXNlIGl0J3MgY29tcGxleCwgYW5kIGp1c3QgYWNjZXNzaW5nIHRoZSBET00gaW5jb3JyZWN0bHkKICAvLyAtIGNhbiB0aHJvdyBhbiBleGNlcHRpb24gaW4gc29tZSBjaXJjdW1zdGFuY2VzLgogIHRyeSB7CiAgICBsZXQgY3VycmVudEVsZW0gPSBlbGVtIDsKICAgIGNvbnN0IE1BWF9UUkFWRVJTRV9IRUlHSFQgPSA1OwogICAgY29uc3Qgb3V0ID0gW107CiAgICBsZXQgaGVpZ2h0ID0gMDsKICAgIGxldCBsZW4gPSAwOwogICAgY29uc3Qgc2VwYXJhdG9yID0gJyA+ICc7CiAgICBjb25zdCBzZXBMZW5ndGggPSBzZXBhcmF0b3IubGVuZ3RoOwogICAgbGV0IG5leHRTdHI7CiAgICBjb25zdCBrZXlBdHRycyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucykgPyBvcHRpb25zIDogb3B0aW9ucy5rZXlBdHRyczsKICAgIGNvbnN0IG1heFN0cmluZ0xlbmd0aCA9ICghQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLm1heFN0cmluZ0xlbmd0aCkgfHwgREVGQVVMVF9NQVhfU1RSSU5HX0xFTkdUSDsKCiAgICB3aGlsZSAoY3VycmVudEVsZW0gJiYgaGVpZ2h0KysgPCBNQVhfVFJBVkVSU0VfSEVJR0hUKSB7CiAgICAgIG5leHRTdHIgPSBfaHRtbEVsZW1lbnRBc1N0cmluZyhjdXJyZW50RWxlbSwga2V5QXR0cnMpOwogICAgICAvLyBiYWlsIG91dCBpZgogICAgICAvLyAtIG5leHRTdHIgaXMgdGhlICdodG1sJyBlbGVtZW50CiAgICAgIC8vIC0gdGhlIGxlbmd0aCBvZiB0aGUgc3RyaW5nIHRoYXQgd291bGQgYmUgY3JlYXRlZCBleGNlZWRzIG1heFN0cmluZ0xlbmd0aAogICAgICAvLyAgIChpZ25vcmUgdGhpcyBsaW1pdCBpZiB3ZSBhcmUgb24gdGhlIGZpcnN0IGl0ZXJhdGlvbikKICAgICAgaWYgKG5leHRTdHIgPT09ICdodG1sJyB8fCAoaGVpZ2h0ID4gMSAmJiBsZW4gKyBvdXQubGVuZ3RoICogc2VwTGVuZ3RoICsgbmV4dFN0ci5sZW5ndGggPj0gbWF4U3RyaW5nTGVuZ3RoKSkgewogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICBvdXQucHVzaChuZXh0U3RyKTsKCiAgICAgIGxlbiArPSBuZXh0U3RyLmxlbmd0aDsKICAgICAgY3VycmVudEVsZW0gPSBjdXJyZW50RWxlbS5wYXJlbnROb2RlOwogICAgfQoKICAgIHJldHVybiBvdXQucmV2ZXJzZSgpLmpvaW4oc2VwYXJhdG9yKTsKICB9IGNhdGNoIChfb08pIHsKICAgIHJldHVybiAnPHVua25vd24+JzsKICB9Cn0KCi8qKgogKiBSZXR1cm5zIGEgc2ltcGxlLCBxdWVyeS1zZWxlY3RvciByZXByZXNlbnRhdGlvbiBvZiBhIERPTSBlbGVtZW50CiAqIGUuZy4gW0hUTUxFbGVtZW50XSA9PiBpbnB1dCNmb28uYnRuW25hbWU9YmF6XQogKiBAcmV0dXJucyBnZW5lcmF0ZWQgRE9NIHBhdGgKICovCmZ1bmN0aW9uIF9odG1sRWxlbWVudEFzU3RyaW5nKGVsLCBrZXlBdHRycykgewogIGNvbnN0IGVsZW0gPSBlbAoKOwoKICBjb25zdCBvdXQgPSBbXTsKICBsZXQgY2xhc3NOYW1lOwogIGxldCBjbGFzc2VzOwogIGxldCBrZXk7CiAgbGV0IGF0dHI7CiAgbGV0IGk7CgogIGlmICghZWxlbSB8fCAhZWxlbS50YWdOYW1lKSB7CiAgICByZXR1cm4gJyc7CiAgfQoKICAvLyBAdHMtZXhwZWN0LWVycm9yIFdJTkRPVyBoYXMgSFRNTEVsZW1lbnQKICBpZiAoV0lORE9XJDEuSFRNTEVsZW1lbnQpIHsKICAgIC8vIElmIHVzaW5nIHRoZSBjb21wb25lbnQgbmFtZSBhbm5vdGF0aW9uIHBsdWdpbiwgdGhpcyB2YWx1ZSBtYXkgYmUgYXZhaWxhYmxlIG9uIHRoZSBET00gbm9kZQogICAgaWYgKGVsZW0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBlbGVtLmRhdGFzZXQgJiYgZWxlbS5kYXRhc2V0WydzZW50cnlDb21wb25lbnQnXSkgewogICAgICByZXR1cm4gZWxlbS5kYXRhc2V0WydzZW50cnlDb21wb25lbnQnXTsKICAgIH0KICB9CgogIG91dC5wdXNoKGVsZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKTsKCiAgLy8gUGFpcnMgb2YgYXR0cmlidXRlIGtleXMgZGVmaW5lZCBpbiBgc2VyaWFsaXplQXR0cmlidXRlYCBhbmQgdGhlaXIgdmFsdWVzIG9uIGVsZW1lbnQuCiAgY29uc3Qga2V5QXR0clBhaXJzID0KICAgIGtleUF0dHJzICYmIGtleUF0dHJzLmxlbmd0aAogICAgICA/IGtleUF0dHJzLmZpbHRlcihrZXlBdHRyID0+IGVsZW0uZ2V0QXR0cmlidXRlKGtleUF0dHIpKS5tYXAoa2V5QXR0ciA9PiBba2V5QXR0ciwgZWxlbS5nZXRBdHRyaWJ1dGUoa2V5QXR0cildKQogICAgICA6IG51bGw7CgogIGlmIChrZXlBdHRyUGFpcnMgJiYga2V5QXR0clBhaXJzLmxlbmd0aCkgewogICAga2V5QXR0clBhaXJzLmZvckVhY2goa2V5QXR0clBhaXIgPT4gewogICAgICBvdXQucHVzaChgWyR7a2V5QXR0clBhaXJbMF19PSIke2tleUF0dHJQYWlyWzFdfSJdYCk7CiAgICB9KTsKICB9IGVsc2UgewogICAgaWYgKGVsZW0uaWQpIHsKICAgICAgb3V0LnB1c2goYCMke2VsZW0uaWR9YCk7CiAgICB9CgogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdAogICAgY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWU7CiAgICBpZiAoY2xhc3NOYW1lICYmIGlzU3RyaW5nKGNsYXNzTmFtZSkpIHsKICAgICAgY2xhc3NlcyA9IGNsYXNzTmFtZS5zcGxpdCgvXHMrLyk7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgb3V0LnB1c2goYC4ke2NsYXNzZXNbaV19YCk7CiAgICAgIH0KICAgIH0KICB9CiAgY29uc3QgYWxsb3dlZEF0dHJzID0gWydhcmlhLWxhYmVsJywgJ3R5cGUnLCAnbmFtZScsICd0aXRsZScsICdhbHQnXTsKICBmb3IgKGkgPSAwOyBpIDwgYWxsb3dlZEF0dHJzLmxlbmd0aDsgaSsrKSB7CiAgICBrZXkgPSBhbGxvd2VkQXR0cnNbaV07CiAgICBhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoa2V5KTsKICAgIGlmIChhdHRyKSB7CiAgICAgIG91dC5wdXNoKGBbJHtrZXl9PSIke2F0dHJ9Il1gKTsKICAgIH0KICB9CiAgcmV0dXJuIG91dC5qb2luKCcnKTsKfQoKLyoqCiAqIFRoaXMgc2VydmVzIGFzIGEgYnVpbGQgdGltZSBmbGFnIHRoYXQgd2lsbCBiZSB0cnVlIGJ5IGRlZmF1bHQsIGJ1dCBmYWxzZSBpbiBub24tZGVidWcgYnVpbGRzIG9yIGlmIHVzZXJzIHJlcGxhY2UgYF9fU0VOVFJZX0RFQlVHX19gIGluIHRoZWlyIGdlbmVyYXRlZCBjb2RlLgogKgogKiBBVFRFTlRJT046IFRoaXMgY29uc3RhbnQgbXVzdCBuZXZlciBjcm9zcyBwYWNrYWdlIGJvdW5kYXJpZXMgKGkuZS4gYmUgZXhwb3J0ZWQpIHRvIGd1YXJhbnRlZSB0aGF0IGl0IGNhbiBiZSB1c2VkIGZvciB0cmVlIHNoYWtpbmcuCiAqLwpjb25zdCBERUJVR19CVUlMRCQxID0gKHR5cGVvZiBfX1NFTlRSWV9ERUJVR19fID09PSAndW5kZWZpbmVkJyB8fCBfX1NFTlRSWV9ERUJVR19fKTsKCi8qKiBQcmVmaXggZm9yIGxvZ2dpbmcgc3RyaW5ncyAqLwpjb25zdCBQUkVGSVggPSAnU2VudHJ5IExvZ2dlciAnOwoKY29uc3QgQ09OU09MRV9MRVZFTFMgPSBbCiAgJ2RlYnVnJywKICAnaW5mbycsCiAgJ3dhcm4nLAogICdlcnJvcicsCiAgJ2xvZycsCiAgJ2Fzc2VydCcsCiAgJ3RyYWNlJywKXSA7CgovKiogVGhpcyBtYXkgYmUgbXV0YXRlZCBieSB0aGUgY29uc29sZSBpbnN0cnVtZW50YXRpb24uICovCmNvbnN0IG9yaWdpbmFsQ29uc29sZU1ldGhvZHMKCiA9IHt9OwoKLyoqIEpTRG9jICovCgovKioKICogVGVtcG9yYXJpbHkgZGlzYWJsZSBzZW50cnkgY29uc29sZSBpbnN0cnVtZW50YXRpb25zLgogKgogKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIHJ1biBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBgY29uc29sZWAgbWVzc2FnZXMKICogQHJldHVybnMgVGhlIHJlc3VsdHMgb2YgdGhlIGNhbGxiYWNrCiAqLwpmdW5jdGlvbiBjb25zb2xlU2FuZGJveChjYWxsYmFjaykgewogIGlmICghKCdjb25zb2xlJyBpbiBHTE9CQUxfT0JKKSkgewogICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgfQoKICBjb25zdCBjb25zb2xlID0gR0xPQkFMX09CSi5jb25zb2xlIDsKICBjb25zdCB3cmFwcGVkRnVuY3MgPSB7fTsKCiAgY29uc3Qgd3JhcHBlZExldmVscyA9IE9iamVjdC5rZXlzKG9yaWdpbmFsQ29uc29sZU1ldGhvZHMpIDsKCiAgLy8gUmVzdG9yZSBhbGwgd3JhcHBlZCBjb25zb2xlIG1ldGhvZHMKICB3cmFwcGVkTGV2ZWxzLmZvckVhY2gobGV2ZWwgPT4gewogICAgY29uc3Qgb3JpZ2luYWxDb25zb2xlTWV0aG9kID0gb3JpZ2luYWxDb25zb2xlTWV0aG9kc1tsZXZlbF0gOwogICAgd3JhcHBlZEZ1bmNzW2xldmVsXSA9IGNvbnNvbGVbbGV2ZWxdIDsKICAgIGNvbnNvbGVbbGV2ZWxdID0gb3JpZ2luYWxDb25zb2xlTWV0aG9kOwogIH0pOwoKICB0cnkgewogICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgfSBmaW5hbGx5IHsKICAgIC8vIFJldmVydCByZXN0b3JhdGlvbiB0byB3cmFwcGVkIHN0YXRlCiAgICB3cmFwcGVkTGV2ZWxzLmZvckVhY2gobGV2ZWwgPT4gewogICAgICBjb25zb2xlW2xldmVsXSA9IHdyYXBwZWRGdW5jc1tsZXZlbF0gOwogICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBtYWtlTG9nZ2VyKCkgewogIGxldCBlbmFibGVkID0gZmFsc2U7CiAgY29uc3QgbG9nZ2VyID0gewogICAgZW5hYmxlOiAoKSA9PiB7CiAgICAgIGVuYWJsZWQgPSB0cnVlOwogICAgfSwKICAgIGRpc2FibGU6ICgpID0+IHsKICAgICAgZW5hYmxlZCA9IGZhbHNlOwogICAgfSwKICAgIGlzRW5hYmxlZDogKCkgPT4gZW5hYmxlZCwKICB9OwoKICBpZiAoREVCVUdfQlVJTEQkMSkgewogICAgQ09OU09MRV9MRVZFTFMuZm9yRWFjaChuYW1lID0+IHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgICAgbG9nZ2VyW25hbWVdID0gKC4uLmFyZ3MpID0+IHsKICAgICAgICBpZiAoZW5hYmxlZCkgewogICAgICAgICAgY29uc29sZVNhbmRib3goKCkgPT4gewogICAgICAgICAgICBHTE9CQUxfT0JKLmNvbnNvbGVbbmFtZV0oYCR7UFJFRklYfVske25hbWV9XTpgLCAuLi5hcmdzKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBDT05TT0xFX0xFVkVMUy5mb3JFYWNoKG5hbWUgPT4gewogICAgICBsb2dnZXJbbmFtZV0gPSAoKSA9PiB1bmRlZmluZWQ7CiAgICB9KTsKICB9CgogIHJldHVybiBsb2dnZXIgOwp9Cgpjb25zdCBsb2dnZXIgPSBtYWtlTG9nZ2VyKCk7CgovKioKICogUmVuZGVycyB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHNuLgogKgogKiBCeSBkZWZhdWx0LCB0aGlzIHdpbGwgcmVuZGVyIHRoZSBwdWJsaWMgcmVwcmVzZW50YXRpb24gd2l0aG91dCB0aGUgcGFzc3dvcmQKICogY29tcG9uZW50LiBUbyBnZXQgdGhlIGRlcHJlY2F0ZWQgcHJpdmF0ZSByZXByZXNlbnRhdGlvbiwgc2V0IGB3aXRoUGFzc3dvcmRgCiAqIHRvIHRydWUuCiAqCiAqIEBwYXJhbSB3aXRoUGFzc3dvcmQgV2hlbiBzZXQgdG8gdHJ1ZSwgdGhlIHBhc3N3b3JkIHdpbGwgYmUgaW5jbHVkZWQuCiAqLwpmdW5jdGlvbiBkc25Ub1N0cmluZyhkc24sIHdpdGhQYXNzd29yZCA9IGZhbHNlKSB7CiAgY29uc3QgeyBob3N0LCBwYXRoLCBwYXNzLCBwb3J0LCBwcm9qZWN0SWQsIHByb3RvY29sLCBwdWJsaWNLZXkgfSA9IGRzbjsKICByZXR1cm4gKAogICAgYCR7cHJvdG9jb2x9Oi8vJHtwdWJsaWNLZXl9JHt3aXRoUGFzc3dvcmQgJiYgcGFzcyA/IGA6JHtwYXNzfWAgOiAnJ31gICsKICAgIGBAJHtob3N0fSR7cG9ydCA/IGA6JHtwb3J0fWAgOiAnJ30vJHtwYXRoID8gYCR7cGF0aH0vYCA6IHBhdGh9JHtwcm9qZWN0SWR9YAogICk7Cn0KCi8qKiBBbiBlcnJvciBlbWl0dGVkIGJ5IFNlbnRyeSBTREtzIGFuZCByZWxhdGVkIHV0aWxpdGllcy4gKi8KY2xhc3MgU2VudHJ5RXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgLyoqIERpc3BsYXkgbmFtZSBvZiB0aGlzIGVycm9yIGluc3RhbmNlLiAqLwoKICAgY29uc3RydWN0b3IoIG1lc3NhZ2UsIGxvZ0xldmVsID0gJ3dhcm4nKSB7CiAgICBzdXBlcihtZXNzYWdlKTt0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgdGhpcy5uYW1lID0gbmV3LnRhcmdldC5wcm90b3R5cGUuY29uc3RydWN0b3IubmFtZTsKICAgIC8vIFRoaXMgc2V0cyB0aGUgcHJvdG90eXBlIHRvIGJlIGBFcnJvcmAsIG5vdCBgU2VudHJ5RXJyb3JgLiBJdCdzIHVuY2xlYXIgd2h5IHdlIGRvIHRoaXMsIGJ1dCBjb21tZW50aW5nIHRoaXMgbGluZQogICAgLy8gb3V0IGNhdXNlcyB2YXJpb3VzIChzZWVtaW5nbHkgdG90YWxseSB1bnJlbGF0ZWQpIHBsYXl3cmlnaHQgdGVzdHMgY29uc2lzdGVudGx5IHRpbWUgb3V0LiBGWUksIHRoaXMgbWFrZXMKICAgIC8vIGluc3RhbmNlcyBvZiBgU2VudHJ5RXJyb3JgIGZhaWwgYG9iaiBpbnN0YW5jZW9mIFNlbnRyeUVycm9yYCBjaGVja3MuCiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpOwogICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsOwogIH0KfQoKLyoqCiAqIEVuY29kZXMgZ2l2ZW4gb2JqZWN0IGludG8gdXJsLWZyaWVuZGx5IGZvcm1hdAogKgogKiBAcGFyYW0gb2JqZWN0IEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNlcmlhbGl6YWJsZSB2YWx1ZXMKICogQHJldHVybnMgc3RyaW5nIEVuY29kZWQKICovCmZ1bmN0aW9uIHVybEVuY29kZShvYmplY3QpIHsKICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KQogICAgLm1hcChrZXkgPT4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KG9iamVjdFtrZXldKX1gKQogICAgLmpvaW4oJyYnKTsKfQoKLyoqCiAqIFRyYW5zZm9ybXMgYW55IGBFcnJvcmAgb3IgYEV2ZW50YCBpbnRvIGEgcGxhaW4gb2JqZWN0IHdpdGggYWxsIG9mIHRoZWlyIGVudW1lcmFibGUgcHJvcGVydGllcywgYW5kIHNvbWUgb2YgdGhlaXIKICogbm9uLWVudW1lcmFibGUgcHJvcGVydGllcyBhdHRhY2hlZC4KICoKICogQHBhcmFtIHZhbHVlIEluaXRpYWwgc291cmNlIHRoYXQgd2UgaGF2ZSB0byB0cmFuc2Zvcm0gaW4gb3JkZXIgZm9yIGl0IHRvIGJlIHVzYWJsZSBieSB0aGUgc2VyaWFsaXplcgogKiBAcmV0dXJucyBBbiBFdmVudCBvciBFcnJvciB0dXJuZWQgaW50byBhbiBvYmplY3QgLSBvciB0aGUgdmFsdWUgYXJndXJtZW50IGl0c2VsZiwgd2hlbiB2YWx1ZSBpcyBuZWl0aGVyIGFuIEV2ZW50IG5vcgogKiAgYW4gRXJyb3IuCiAqLwpmdW5jdGlvbiBjb252ZXJ0VG9QbGFpbk9iamVjdCgKICB2YWx1ZSwKKQoKIHsKICBpZiAoaXNFcnJvcih2YWx1ZSkpIHsKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2U6IHZhbHVlLm1lc3NhZ2UsCiAgICAgIG5hbWU6IHZhbHVlLm5hbWUsCiAgICAgIHN0YWNrOiB2YWx1ZS5zdGFjaywKICAgICAgLi4uZ2V0T3duUHJvcGVydGllcyh2YWx1ZSksCiAgICB9OwogIH0gZWxzZSBpZiAoaXNFdmVudCh2YWx1ZSkpIHsKICAgIGNvbnN0IG5ld09iagoKID0gewogICAgICB0eXBlOiB2YWx1ZS50eXBlLAogICAgICB0YXJnZXQ6IHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHZhbHVlLnRhcmdldCksCiAgICAgIGN1cnJlbnRUYXJnZXQ6IHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHZhbHVlLmN1cnJlbnRUYXJnZXQpLAogICAgICAuLi5nZXRPd25Qcm9wZXJ0aWVzKHZhbHVlKSwKICAgIH07CgogICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNJbnN0YW5jZU9mKHZhbHVlLCBDdXN0b21FdmVudCkpIHsKICAgICAgbmV3T2JqLmRldGFpbCA9IHZhbHVlLmRldGFpbDsKICAgIH0KCiAgICByZXR1cm4gbmV3T2JqOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfQp9CgovKiogQ3JlYXRlcyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGFyZ2V0IG9mIGFuIGBFdmVudGAgb2JqZWN0ICovCmZ1bmN0aW9uIHNlcmlhbGl6ZUV2ZW50VGFyZ2V0KHRhcmdldCkgewogIHRyeSB7CiAgICByZXR1cm4gaXNFbGVtZW50KHRhcmdldCkgPyBodG1sVHJlZUFzU3RyaW5nKHRhcmdldCkgOiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGFyZ2V0KTsKICB9IGNhdGNoIChfb08pIHsKICAgIHJldHVybiAnPHVua25vd24+JzsKICB9Cn0KCi8qKiBGaWx0ZXJzIG91dCBhbGwgYnV0IGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzICovCmZ1bmN0aW9uIGdldE93blByb3BlcnRpZXMob2JqKSB7CiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbCkgewogICAgY29uc3QgZXh0cmFjdGVkUHJvcHMgPSB7fTsKICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gb2JqKSB7CiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wZXJ0eSkpIHsKICAgICAgICBleHRyYWN0ZWRQcm9wc1twcm9wZXJ0eV0gPSAob2JqIClbcHJvcGVydHldOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZXh0cmFjdGVkUHJvcHM7CiAgfSBlbHNlIHsKICAgIHJldHVybiB7fTsKICB9Cn0KCi8qKgogKiBHaXZlbiBhbnkgb2JqZWN0LCByZXR1cm4gYSBuZXcgb2JqZWN0IGhhdmluZyByZW1vdmVkIGFsbCBmaWVsZHMgd2hvc2UgdmFsdWUgd2FzIGB1bmRlZmluZWRgLgogKiBXb3JrcyByZWN1cnNpdmVseSBvbiBvYmplY3RzIGFuZCBhcnJheXMuCiAqCiAqIEF0dGVudGlvbjogVGhpcyBmdW5jdGlvbiBrZWVwcyBjaXJjdWxhciByZWZlcmVuY2VzIGluIHRoZSByZXR1cm5lZCBvYmplY3QuCiAqLwpmdW5jdGlvbiBkcm9wVW5kZWZpbmVkS2V5cyhpbnB1dFZhbHVlKSB7CiAgLy8gVGhpcyBtYXAga2VlcHMgdHJhY2sgb2Ygd2hhdCBhbHJlYWR5IHZpc2l0ZWQgbm9kZXMgbWFwIHRvLgogIC8vIE91ciBTZXQgLSBiYXNlZCBtZW1vQnVpbGRlciBkb2Vzbid0IHdvcmsgaGVyZSBiZWNhdXNlIHdlIHdhbnQgdG8gdGhlIG91dHB1dCBvYmplY3QgdG8gaGF2ZSB0aGUgc2FtZSBjaXJjdWxhcgogIC8vIHJlZmVyZW5jZXMgYXMgdGhlIGlucHV0IG9iamVjdC4KICBjb25zdCBtZW1vaXphdGlvbk1hcCA9IG5ldyBNYXAoKTsKCiAgLy8gVGhpcyBmdW5jdGlvbiBqdXN0IHByb3hpZXMgYF9kcm9wVW5kZWZpbmVkS2V5c2AgdG8ga2VlcCB0aGUgYG1lbW9CdWlsZGVyYCBvdXQgb2YgdGhpcyBmdW5jdGlvbidzIEFQSQogIHJldHVybiBfZHJvcFVuZGVmaW5lZEtleXMoaW5wdXRWYWx1ZSwgbWVtb2l6YXRpb25NYXApOwp9CgpmdW5jdGlvbiBfZHJvcFVuZGVmaW5lZEtleXMoaW5wdXRWYWx1ZSwgbWVtb2l6YXRpb25NYXApIHsKICBpZiAoaXNQbGFpbk9iamVjdChpbnB1dFZhbHVlKSkgewogICAgLy8gSWYgdGhpcyBub2RlIGhhcyBhbHJlYWR5IGJlZW4gdmlzaXRlZCBkdWUgdG8gYSBjaXJjdWxhciByZWZlcmVuY2UsIHJldHVybiB0aGUgb2JqZWN0IGl0IHdhcyBtYXBwZWQgdG8gaW4gdGhlIG5ldyBvYmplY3QKICAgIGNvbnN0IG1lbW9WYWwgPSBtZW1vaXphdGlvbk1hcC5nZXQoaW5wdXRWYWx1ZSk7CiAgICBpZiAobWVtb1ZhbCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiBtZW1vVmFsIDsKICAgIH0KCiAgICBjb25zdCByZXR1cm5WYWx1ZSA9IHt9OwogICAgLy8gU3RvcmUgdGhlIG1hcHBpbmcgb2YgdGhpcyB2YWx1ZSBpbiBjYXNlIHdlIHZpc2l0IGl0IGFnYWluLCBpbiBjYXNlIG9mIGNpcmN1bGFyIGRhdGEKICAgIG1lbW9pemF0aW9uTWFwLnNldChpbnB1dFZhbHVlLCByZXR1cm5WYWx1ZSk7CgogICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoaW5wdXRWYWx1ZSkpIHsKICAgICAgaWYgKHR5cGVvZiBpbnB1dFZhbHVlW2tleV0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgcmV0dXJuVmFsdWVba2V5XSA9IF9kcm9wVW5kZWZpbmVkS2V5cyhpbnB1dFZhbHVlW2tleV0sIG1lbW9pemF0aW9uTWFwKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiByZXR1cm5WYWx1ZSA7CiAgfQoKICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dFZhbHVlKSkgewogICAgLy8gSWYgdGhpcyBub2RlIGhhcyBhbHJlYWR5IGJlZW4gdmlzaXRlZCBkdWUgdG8gYSBjaXJjdWxhciByZWZlcmVuY2UsIHJldHVybiB0aGUgYXJyYXkgaXQgd2FzIG1hcHBlZCB0byBpbiB0aGUgbmV3IG9iamVjdAogICAgY29uc3QgbWVtb1ZhbCA9IG1lbW9pemF0aW9uTWFwLmdldChpbnB1dFZhbHVlKTsKICAgIGlmIChtZW1vVmFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIG1lbW9WYWwgOwogICAgfQoKICAgIGNvbnN0IHJldHVyblZhbHVlID0gW107CiAgICAvLyBTdG9yZSB0aGUgbWFwcGluZyBvZiB0aGlzIHZhbHVlIGluIGNhc2Ugd2UgdmlzaXQgaXQgYWdhaW4sIGluIGNhc2Ugb2YgY2lyY3VsYXIgZGF0YQogICAgbWVtb2l6YXRpb25NYXAuc2V0KGlucHV0VmFsdWUsIHJldHVyblZhbHVlKTsKCiAgICBpbnB1dFZhbHVlLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgcmV0dXJuVmFsdWUucHVzaChfZHJvcFVuZGVmaW5lZEtleXMoaXRlbSwgbWVtb2l6YXRpb25NYXApKTsKICAgIH0pOwoKICAgIHJldHVybiByZXR1cm5WYWx1ZSA7CiAgfQoKICByZXR1cm4gaW5wdXRWYWx1ZTsKfQoKLyoqCiAqIERvZXMgdGhpcyBmaWxlbmFtZSBsb29rIGxpa2UgaXQncyBwYXJ0IG9mIHRoZSBhcHAgY29kZT8KICovCmZ1bmN0aW9uIGZpbGVuYW1lSXNJbkFwcChmaWxlbmFtZSwgaXNOYXRpdmUgPSBmYWxzZSkgewogIGNvbnN0IGlzSW50ZXJuYWwgPQogICAgaXNOYXRpdmUgfHwKICAgIChmaWxlbmFtZSAmJgogICAgICAvLyBJdCdzIG5vdCBpbnRlcm5hbCBpZiBpdCdzIGFuIGFic29sdXRlIGxpbnV4IHBhdGgKICAgICAgIWZpbGVuYW1lLnN0YXJ0c1dpdGgoJy8nKSAmJgogICAgICAvLyBJdCdzIG5vdCBpbnRlcm5hbCBpZiBpdCdzIGFuIGFic29sdXRlIHdpbmRvd3MgcGF0aAogICAgICAhZmlsZW5hbWUuaW5jbHVkZXMoJzpcXCcpICYmCiAgICAgIC8vIEl0J3Mgbm90IGludGVybmFsIGlmIHRoZSBwYXRoIGlzIHN0YXJ0aW5nIHdpdGggYSBkb3QKICAgICAgIWZpbGVuYW1lLnN0YXJ0c1dpdGgoJy4nKSAmJgogICAgICAvLyBJdCdzIG5vdCBpbnRlcm5hbCBpZiB0aGUgZnJhbWUgaGFzIGEgcHJvdG9jb2wuIEluIG5vZGUsIHRoaXMgaXMgdXN1YWxseSB0aGUgY2FzZSBpZiB0aGUgZmlsZSBnb3QgcHJlLXByb2Nlc3NlZCB3aXRoIGEgYnVuZGxlciBsaWtlIHdlYnBhY2sKICAgICAgIWZpbGVuYW1lLm1hdGNoKC9eW2EtekEtWl0oW2EtekEtWjAtOS5cLStdKSo6XC9cLy8pKTsgLy8gU2NoZW1hIGZyb206IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zNjQxNzgyCgogIC8vIGluX2FwcCBpcyBhbGwgdGhhdCdzIG5vdCBhbiBpbnRlcm5hbCBOb2RlIGZ1bmN0aW9uIG9yIGEgbW9kdWxlIHdpdGhpbiBub2RlX21vZHVsZXMKICAvLyBub3RlIHRoYXQgaXNOYXRpdmUgYXBwZWFycyB0byByZXR1cm4gdHJ1ZSBldmVuIGZvciBub2RlIGNvcmUgbGlicmFyaWVzCiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvcmF2ZW4tbm9kZS9pc3N1ZXMvMTc2CgogIHJldHVybiAhaXNJbnRlcm5hbCAmJiBmaWxlbmFtZSAhPT0gdW5kZWZpbmVkICYmICFmaWxlbmFtZS5pbmNsdWRlcygnbm9kZV9tb2R1bGVzLycpOwp9Cgpjb25zdCBTVEFDS1RSQUNFX0ZSQU1FX0xJTUlUID0gNTA7CmNvbnN0IFNUUklQX0ZSQU1FX1JFR0VYUCA9IC9jYXB0dXJlTWVzc2FnZXxjYXB0dXJlRXhjZXB0aW9uLzsKCi8qKgogKiBSZW1vdmVzIFNlbnRyeSBmcmFtZXMgZnJvbSB0aGUgdG9wIGFuZCBib3R0b20gb2YgdGhlIHN0YWNrIGlmIHByZXNlbnQgYW5kIGVuZm9yY2VzIGEgbGltaXQgb2YgbWF4IG51bWJlciBvZiBmcmFtZXMuCiAqIEFzc3VtZXMgc3RhY2sgaW5wdXQgaXMgb3JkZXJlZCBmcm9tIHRvcCB0byBib3R0b20gYW5kIHJldHVybnMgdGhlIHJldmVyc2UgcmVwcmVzZW50YXRpb24gc28gY2FsbCBzaXRlIG9mIHRoZQogKiBmdW5jdGlvbiB0aGF0IGNhdXNlZCB0aGUgY3Jhc2ggaXMgdGhlIGxhc3QgZnJhbWUgaW4gdGhlIGFycmF5LgogKiBAaGlkZGVuCiAqLwpmdW5jdGlvbiBzdHJpcFNlbnRyeUZyYW1lc0FuZFJldmVyc2Uoc3RhY2spIHsKICBpZiAoIXN0YWNrLmxlbmd0aCkgewogICAgcmV0dXJuIFtdOwogIH0KCiAgY29uc3QgbG9jYWxTdGFjayA9IEFycmF5LmZyb20oc3RhY2spOwoKICAvLyBJZiBzdGFjayBzdGFydHMgd2l0aCBvbmUgb2Ygb3VyIEFQSSBjYWxscywgcmVtb3ZlIGl0IChzdGFydHMsIG1lYW5pbmcgaXQncyB0aGUgdG9wIG9mIHRoZSBzdGFjayAtIGFrYSBsYXN0IGNhbGwpCiAgaWYgKC9zZW50cnlXcmFwcGVkLy50ZXN0KGxvY2FsU3RhY2tbbG9jYWxTdGFjay5sZW5ndGggLSAxXS5mdW5jdGlvbiB8fCAnJykpIHsKICAgIGxvY2FsU3RhY2sucG9wKCk7CiAgfQoKICAvLyBSZXZlcnNpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgcHJvY2VkdXJlIGFsbG93cyB1cyB0byBqdXN0IHBvcCB0aGUgdmFsdWVzIG9mZiB0aGUgc3RhY2sKICBsb2NhbFN0YWNrLnJldmVyc2UoKTsKCiAgLy8gSWYgc3RhY2sgZW5kcyB3aXRoIG9uZSBvZiBvdXIgaW50ZXJuYWwgQVBJIGNhbGxzLCByZW1vdmUgaXQgKGVuZHMsIG1lYW5pbmcgaXQncyB0aGUgYm90dG9tIG9mIHRoZSBzdGFjayAtIGFrYSB0b3AtbW9zdCBjYWxsKQogIGlmIChTVFJJUF9GUkFNRV9SRUdFWFAudGVzdChsb2NhbFN0YWNrW2xvY2FsU3RhY2subGVuZ3RoIC0gMV0uZnVuY3Rpb24gfHwgJycpKSB7CiAgICBsb2NhbFN0YWNrLnBvcCgpOwoKICAgIC8vIFdoZW4gdXNpbmcgc3ludGhldGljIGV2ZW50cywgd2Ugd2lsbCBoYXZlIGEgMiBsZXZlbHMgZGVlcCBzdGFjaywgYXMgYG5ldyBFcnJvcignU2VudHJ5IHN5bnRoZXRpY0V4Y2VwdGlvbicpYAogICAgLy8gaXMgcHJvZHVjZWQgd2l0aGluIHRoZSBodWIgaXRzZWxmLCBtYWtpbmcgaXQ6CiAgICAvLwogICAgLy8gICBTZW50cnkuY2FwdHVyZUV4Y2VwdGlvbigpCiAgICAvLyAgIGdldEN1cnJlbnRIdWIoKS5jYXB0dXJlRXhjZXB0aW9uKCkKICAgIC8vCiAgICAvLyBpbnN0ZWFkIG9mIGp1c3QgdGhlIHRvcCBgU2VudHJ5YCBjYWxsIGl0c2VsZi4KICAgIC8vIFRoaXMgZm9yY2VzIHVzIHRvIHBvc3NpYmx5IHN0cmlwIGFuIGFkZGl0aW9uYWwgZnJhbWUgaW4gdGhlIGV4YWN0IHNhbWUgd2FzIGFzIGFib3ZlLgogICAgaWYgKFNUUklQX0ZSQU1FX1JFR0VYUC50ZXN0KGxvY2FsU3RhY2tbbG9jYWxTdGFjay5sZW5ndGggLSAxXS5mdW5jdGlvbiB8fCAnJykpIHsKICAgICAgbG9jYWxTdGFjay5wb3AoKTsKICAgIH0KICB9CgogIHJldHVybiBsb2NhbFN0YWNrLnNsaWNlKDAsIFNUQUNLVFJBQ0VfRlJBTUVfTElNSVQpLm1hcChmcmFtZSA9PiAoewogICAgLi4uZnJhbWUsCiAgICBmaWxlbmFtZTogZnJhbWUuZmlsZW5hbWUgfHwgbG9jYWxTdGFja1tsb2NhbFN0YWNrLmxlbmd0aCAtIDFdLmZpbGVuYW1lLAogICAgZnVuY3Rpb246IGZyYW1lLmZ1bmN0aW9uIHx8ICc/JywKICB9KSk7Cn0KCmNvbnN0IGRlZmF1bHRGdW5jdGlvbk5hbWUgPSAnPGFub255bW91cz4nOwoKLyoqCiAqIFNhZmVseSBleHRyYWN0IGZ1bmN0aW9uIG5hbWUgZnJvbSBpdHNlbGYKICovCmZ1bmN0aW9uIGdldEZ1bmN0aW9uTmFtZShmbikgewogIHRyeSB7CiAgICBpZiAoIWZuIHx8IHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm4gZGVmYXVsdEZ1bmN0aW9uTmFtZTsKICAgIH0KICAgIHJldHVybiBmbi5uYW1lIHx8IGRlZmF1bHRGdW5jdGlvbk5hbWU7CiAgfSBjYXRjaCAoZSkgewogICAgLy8gSnVzdCBhY2Nlc3NpbmcgY3VzdG9tIHByb3BzIGluIHNvbWUgU2VsZW5pdW0gZW52aXJvbm1lbnRzCiAgICAvLyBjYW4gY2F1c2UgYSAiUGVybWlzc2lvbiBkZW5pZWQiIGV4Y2VwdGlvbiAoc2VlIHJhdmVuLWpzIzQ5NSkuCiAgICByZXR1cm4gZGVmYXVsdEZ1bmN0aW9uTmFtZTsKICB9Cn0KCi8qKgogKiBVVUlENCBnZW5lcmF0b3IKICoKICogQHJldHVybnMgc3RyaW5nIEdlbmVyYXRlZCBVVUlENC4KICovCmZ1bmN0aW9uIHV1aWQ0KCkgewogIGNvbnN0IGdibCA9IEdMT0JBTF9PQkogOwogIGNvbnN0IGNyeXB0byA9IGdibC5jcnlwdG8gfHwgZ2JsLm1zQ3J5cHRvOwoKICBsZXQgZ2V0UmFuZG9tQnl0ZSA9ICgpID0+IE1hdGgucmFuZG9tKCkgKiAxNjsKICB0cnkgewogICAgaWYgKGNyeXB0byAmJiBjcnlwdG8ucmFuZG9tVVVJRCkgewogICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKTsKICAgIH0KICAgIGlmIChjcnlwdG8gJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcykgewogICAgICBnZXRSYW5kb21CeXRlID0gKCkgPT4gewogICAgICAgIC8vIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgbWlnaHQgcmV0dXJuIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIHRoZSB0eXBlZCBhcnJheQogICAgICAgIC8vIGluIG9sZCBDaHJvbWl1bSB2ZXJzaW9ucyAoZS5nLiAyMy4wLjEyMzUuMCAoMTUxNDIyKSkKICAgICAgICAvLyBIb3dldmVyLCBgdHlwZWRBcnJheWAgaXMgc3RpbGwgZmlsbGVkIGluLXBsYWNlLgogICAgICAgIC8vIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NyeXB0by9nZXRSYW5kb21WYWx1ZXMjdHlwZWRhcnJheQogICAgICAgIGNvbnN0IHR5cGVkQXJyYXkgPSBuZXcgVWludDhBcnJheSgxKTsKICAgICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHR5cGVkQXJyYXkpOwogICAgICAgIHJldHVybiB0eXBlZEFycmF5WzBdOwogICAgICB9OwogICAgfQogIH0gY2F0Y2ggKF8pIHsKICAgIC8vIHNvbWUgcnVudGltZXMgY2FuIGNyYXNoIGludm9raW5nIGNyeXB0bwogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvODkzNQogIH0KCiAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvaG93LXRvLWNyZWF0ZS1hLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0LzIxMTc1MjMjMjExNzUyMwogIC8vIENvbmNhdGVuYXRpbmcgdGhlIGZvbGxvd2luZyBudW1iZXJzIGFzIHN0cmluZ3MgcmVzdWx0cyBpbiAnMTAwMDAwMDAxMDAwNDAwMDgwMDAxMDAwMDAwMDAwMDAnCiAgcmV0dXJuICgoWzFlN10gKSArIDFlMyArIDRlMyArIDhlMyArIDFlMTEpLnJlcGxhY2UoL1swMThdL2csIGMgPT4KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlCiAgICAoKGMgKSBeICgoZ2V0UmFuZG9tQnl0ZSgpICYgMTUpID4+ICgoYyApIC8gNCkpKS50b1N0cmluZygxNiksCiAgKTsKfQoKdmFyIGNvbW1vbmpzR2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307CgovKgogKiBUaGlzIG1vZHVsZSBleGlzdHMgZm9yIG9wdGltaXphdGlvbnMgaW4gdGhlIGJ1aWxkIHByb2Nlc3MgdGhyb3VnaCByb2xsdXAgYW5kIHRlcnNlci4gIFdlIGRlZmluZSBzb21lIGdsb2JhbAogKiBjb25zdGFudHMsIHdoaWNoIGNhbiBiZSBvdmVycmlkZGVuIGR1cmluZyBidWlsZC4gQnkgZ3VhcmRpbmcgY2VydGFpbiBwaWVjZXMgb2YgY29kZSB3aXRoIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB0aGVzZQogKiBjb25zdGFudHMsIHdlIGNhbiBjb250cm9sIHdoZXRoZXIgb3Igbm90IHRoZXkgYXBwZWFyIGluIHRoZSBmaW5hbCBidW5kbGUuIChBbnkgY29kZSBndWFyZGVkIGJ5IGEgZmFsc2UgY29uZGl0aW9uIHdpbGwKICogbmV2ZXIgcnVuLCBhbmQgd2lsbCBoZW5jZSBiZSBkcm9wcGVkIGR1cmluZyB0cmVlc2hha2luZy4pIFRoZSB0d28gcHJpbWFyeSB1c2VzIGZvciB0aGlzIGFyZSBzdHJpcHBpbmcgb3V0IGNhbGxzIHRvCiAqIGBsb2dnZXJgIGFuZCBwcmV2ZW50aW5nIG5vZGUtcmVsYXRlZCBjb2RlIGZyb20gYXBwZWFyaW5nIGluIGJyb3dzZXIgYnVuZGxlcy4KICoKICogQXR0ZW50aW9uOgogKiBUaGlzIGZpbGUgc2hvdWxkIG5vdCBiZSB1c2VkIHRvIGRlZmluZSBjb25zdGFudHMvZmxhZ3MgdGhhdCBhcmUgaW50ZW5kZWQgdG8gYmUgdXNlZCBmb3IgdHJlZS1zaGFraW5nIGNvbmR1Y3RlZCBieQogKiB1c2Vycy4gVGhlc2UgZmxhZ3Mgc2hvdWxkIGxpdmUgaW4gdGhlaXIgcmVzcGVjdGl2ZSBwYWNrYWdlcywgYXMgd2UgaWRlbnRpZmllZCB1c2VyIHRvb2xpbmcgKHNwZWNpZmljYWxseSB3ZWJwYWNrKQogKiBoYXZpbmcgaXNzdWVzIHRyZWUtc2hha2luZyB0aGVzZSBjb25zdGFudHMgYWNyb3NzIHBhY2thZ2UgYm91bmRhcmllcy4KICogQW4gZXhhbXBsZSBmb3IgdGhpcyBpcyB0aGUgX19TRU5UUllfREVCVUdfXyBjb25zdGFudC4gSXQgaXMgZGVjbGFyZWQgaW4gZWFjaCBwYWNrYWdlIGluZGl2aWR1YWxseSBiZWNhdXNlIHdlIHdhbnQKICogdXNlcnMgdG8gYmUgYWJsZSB0byBzaGFrZSBhd2F5IGV4cHJlc3Npb25zIHRoYXQgaXQgZ3VhcmRzLgogKi8KCi8qKgogKiBGaWd1cmVzIG91dCBpZiB3ZSdyZSBidWlsZGluZyBhIGJyb3dzZXIgYnVuZGxlLgogKgogKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgaXMgYSBicm93c2VyIGJ1bmRsZSBidWlsZC4KICovCmZ1bmN0aW9uIGlzQnJvd3NlckJ1bmRsZSgpIHsKICByZXR1cm4gdHlwZW9mIF9fU0VOVFJZX0JST1dTRVJfQlVORExFX18gIT09ICd1bmRlZmluZWQnICYmICEhX19TRU5UUllfQlJPV1NFUl9CVU5ETEVfXzsKfQoKLyoqCiAqIE5PVEU6IEluIG9yZGVyIHRvIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY2llcywgaWYgeW91IGFkZCBhIGZ1bmN0aW9uIHRvIHRoaXMgbW9kdWxlIGFuZCBpdCBuZWVkcyB0byBwcmludCBzb21ldGhpbmcsCiAqIHlvdSBtdXN0IGVpdGhlciBhKSB1c2UgYGNvbnNvbGUubG9nYCByYXRoZXIgdGhhbiB0aGUgbG9nZ2VyLCBvciBiKSBwdXQgeW91ciBmdW5jdGlvbiBlbHNld2hlcmUuCiAqLwoKLyoqCiAqIENoZWNrcyB3aGV0aGVyIHdlJ3JlIGluIHRoZSBOb2RlLmpzIG9yIEJyb3dzZXIgZW52aXJvbm1lbnQKICoKICogQHJldHVybnMgQW5zd2VyIHRvIGdpdmVuIHF1ZXN0aW9uCiAqLwpmdW5jdGlvbiBpc05vZGVFbnYoKSB7CiAgLy8gZXhwbGljaXRseSBjaGVjayBmb3IgYnJvd3NlciBidW5kbGVzIGFzIHRob3NlIGNhbiBiZSBvcHRpbWl6ZWQgc3RhdGljYWxseQogIC8vIGJ5IHRlcnNlci9yb2xsdXAuCiAgcmV0dXJuICgKICAgICFpc0Jyb3dzZXJCdW5kbGUoKSAmJgogICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MgOiAwKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nCiAgKTsKfQoKLyoqCiAqIFJlcXVpcmVzIGEgbW9kdWxlIHdoaWNoIGlzIHByb3RlY3RlZCBhZ2FpbnN0IGJ1bmRsZXIgbWluaWZpY2F0aW9uLgogKgogKiBAcGFyYW0gcmVxdWVzdCBUaGUgbW9kdWxlIHBhdGggdG8gcmVzb2x2ZQogKi8KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKZnVuY3Rpb24gZHluYW1pY1JlcXVpcmUobW9kLCByZXF1ZXN0KSB7CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcwogIHJldHVybiBtb2QucmVxdWlyZShyZXF1ZXN0KTsKfQoKLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzICovCi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi8KCi8qKgogKiBIZWxwZXIgdG8gZGVjeWNsZSBqc29uIG9iamVjdHMKICovCmZ1bmN0aW9uIG1lbW9CdWlsZGVyKCkgewogIGNvbnN0IGhhc1dlYWtTZXQgPSB0eXBlb2YgV2Vha1NldCA9PT0gJ2Z1bmN0aW9uJzsKICBjb25zdCBpbm5lciA9IGhhc1dlYWtTZXQgPyBuZXcgV2Vha1NldCgpIDogW107CiAgZnVuY3Rpb24gbWVtb2l6ZShvYmopIHsKICAgIGlmIChoYXNXZWFrU2V0KSB7CiAgICAgIGlmIChpbm5lci5oYXMob2JqKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGlubmVyLmFkZChvYmopOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1mb3Itb2YKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5uZXIubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgdmFsdWUgPSBpbm5lcltpXTsKICAgICAgaWYgKHZhbHVlID09PSBvYmopIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogICAgaW5uZXIucHVzaChvYmopOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gdW5tZW1vaXplKG9iaikgewogICAgaWYgKGhhc1dlYWtTZXQpIHsKICAgICAgaW5uZXIuZGVsZXRlKG9iaik7CiAgICB9IGVsc2UgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlubmVyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGlubmVyW2ldID09PSBvYmopIHsKICAgICAgICAgIGlubmVyLnNwbGljZShpLCAxKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICByZXR1cm4gW21lbW9pemUsIHVubWVtb2l6ZV07Cn0KCi8qKgogKiBSZWN1cnNpdmVseSBub3JtYWxpemVzIHRoZSBnaXZlbiBvYmplY3QuCiAqCiAqIC0gQ3JlYXRlcyBhIGNvcHkgdG8gcHJldmVudCBvcmlnaW5hbCBpbnB1dCBtdXRhdGlvbgogKiAtIFNraXBzIG5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMKICogLSBXaGVuIHN0cmluZ2lmeWluZywgY2FsbHMgYHRvSlNPTmAgaWYgaW1wbGVtZW50ZWQKICogLSBSZW1vdmVzIGNpcmN1bGFyIHJlZmVyZW5jZXMKICogLSBUcmFuc2xhdGVzIG5vbi1zZXJpYWxpemFibGUgdmFsdWVzIChgdW5kZWZpbmVkYC9gTmFOYC9mdW5jdGlvbnMpIHRvIHNlcmlhbGl6YWJsZSBmb3JtYXQKICogLSBUcmFuc2xhdGVzIGtub3duIGdsb2JhbCBvYmplY3RzL2NsYXNzZXMgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb25zCiAqIC0gVGFrZXMgY2FyZSBvZiBgRXJyb3JgIG9iamVjdCBzZXJpYWxpemF0aW9uCiAqIC0gT3B0aW9uYWxseSBsaW1pdHMgZGVwdGggb2YgZmluYWwgb3V0cHV0CiAqIC0gT3B0aW9uYWxseSBsaW1pdHMgbnVtYmVyIG9mIHByb3BlcnRpZXMvZWxlbWVudHMgaW5jbHVkZWQgaW4gYW55IHNpbmdsZSBvYmplY3QvYXJyYXkKICoKICogQHBhcmFtIGlucHV0IFRoZSBvYmplY3QgdG8gYmUgbm9ybWFsaXplZC4KICogQHBhcmFtIGRlcHRoIFRoZSBtYXggZGVwdGggdG8gd2hpY2ggdG8gbm9ybWFsaXplIHRoZSBvYmplY3QuIChBbnl0aGluZyBkZWVwZXIgc3RyaW5naWZpZWQgd2hvbGUuKQogKiBAcGFyYW0gbWF4UHJvcGVydGllcyBUaGUgbWF4IG51bWJlciBvZiBlbGVtZW50cyBvciBwcm9wZXJ0aWVzIHRvIGJlIGluY2x1ZGVkIGluIGFueSBzaW5nbGUgYXJyYXkgb3IKICogb2JqZWN0IGluIHRoZSBub3JtYWxsaXplZCBvdXRwdXQuCiAqIEByZXR1cm5zIEEgbm9ybWFsaXplZCB2ZXJzaW9uIG9mIHRoZSBvYmplY3QsIG9yIGAiKipub24tc2VyaWFsaXphYmxlKioiYCBpZiBhbnkgZXJyb3JzIGFyZSB0aHJvd24gZHVyaW5nIG5vcm1hbGl6YXRpb24uCiAqLwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQpmdW5jdGlvbiBub3JtYWxpemUoaW5wdXQsIGRlcHRoID0gMTAwLCBtYXhQcm9wZXJ0aWVzID0gK0luZmluaXR5KSB7CiAgdHJ5IHsKICAgIC8vIHNpbmNlIHdlJ3JlIGF0IHRoZSBvdXRlcm1vc3QgbGV2ZWwsIHdlIGRvbid0IHByb3ZpZGUgYSBrZXkKICAgIHJldHVybiB2aXNpdCgnJywgaW5wdXQsIGRlcHRoLCBtYXhQcm9wZXJ0aWVzKTsKICB9IGNhdGNoIChlcnIpIHsKICAgIHJldHVybiB7IEVSUk9SOiBgKipub24tc2VyaWFsaXphYmxlKiogKCR7ZXJyfSlgIH07CiAgfQp9CgovKioKICogVmlzaXRzIGEgbm9kZSB0byBwZXJmb3JtIG5vcm1hbGl6YXRpb24gb24gaXQKICoKICogQHBhcmFtIGtleSBUaGUga2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIG5vZGUKICogQHBhcmFtIHZhbHVlIFRoZSBub2RlIHRvIGJlIHZpc2l0ZWQKICogQHBhcmFtIGRlcHRoIE9wdGlvbmFsIG51bWJlciBpbmRpY2F0aW5nIHRoZSBtYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aAogKiBAcGFyYW0gbWF4UHJvcGVydGllcyBPcHRpb25hbCBtYXhpbXVtIG51bWJlciBvZiBwcm9wZXJ0aWVzL2VsZW1lbnRzIGluY2x1ZGVkIGluIGFueSBzaW5nbGUgb2JqZWN0L2FycmF5CiAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIE1lbW8gY2xhc3MgaGFuZGxpbmcgZGVjeWNsaW5nCiAqLwpmdW5jdGlvbiB2aXNpdCgKICBrZXksCiAgdmFsdWUsCiAgZGVwdGggPSArSW5maW5pdHksCiAgbWF4UHJvcGVydGllcyA9ICtJbmZpbml0eSwKICBtZW1vID0gbWVtb0J1aWxkZXIoKSwKKSB7CiAgY29uc3QgW21lbW9pemUsIHVubWVtb2l6ZV0gPSBtZW1vOwoKICAvLyBHZXQgdGhlIHNpbXBsZSBjYXNlcyBvdXQgb2YgdGhlIHdheSBmaXJzdAogIGlmICgKICAgIHZhbHVlID09IG51bGwgfHwgLy8gdGhpcyBtYXRjaGVzIG51bGwgYW5kIHVuZGVmaW5lZCAtPiBlcWVxIG5vdCBlcWVxZXEKICAgIChbJ251bWJlcicsICdib29sZWFuJywgJ3N0cmluZyddLmluY2x1ZGVzKHR5cGVvZiB2YWx1ZSkgJiYgIWlzTmFOJDEodmFsdWUpKQogICkgewogICAgcmV0dXJuIHZhbHVlIDsKICB9CgogIGNvbnN0IHN0cmluZ2lmaWVkID0gc3RyaW5naWZ5VmFsdWUoa2V5LCB2YWx1ZSk7CgogIC8vIEFueXRoaW5nIHdlIGNvdWxkIHBvdGVudGlhbGx5IGRpZyBpbnRvIG1vcmUgKG9iamVjdHMgb3IgYXJyYXlzKSB3aWxsIGhhdmUgY29tZSBiYWNrIGFzIGAiW29iamVjdCBYWFhYXSJgLgogIC8vIEV2ZXJ5dGhpbmcgZWxzZSB3aWxsIGhhdmUgYWxyZWFkeSBiZWVuIHNlcmlhbGl6ZWQsIHNvIGlmIHdlIGRvbid0IHNlZSB0aGF0IHBhdHRlcm4sIHdlJ3JlIGRvbmUuCiAgaWYgKCFzdHJpbmdpZmllZC5zdGFydHNXaXRoKCdbb2JqZWN0ICcpKSB7CiAgICByZXR1cm4gc3RyaW5naWZpZWQ7CiAgfQoKICAvLyBGcm9tIGhlcmUgb24sIHdlIGNhbiBhc3NlcnQgdGhhdCBgdmFsdWVgIGlzIGVpdGhlciBhbiBvYmplY3Qgb3IgYW4gYXJyYXkuCgogIC8vIERvIG5vdCBub3JtYWxpemUgb2JqZWN0cyB0aGF0IHdlIGtub3cgaGF2ZSBhbHJlYWR5IGJlZW4gbm9ybWFsaXplZC4gQXMgYSBnZW5lcmFsIHJ1bGUsIHRoZQogIC8vICJfX3NlbnRyeV9za2lwX25vcm1hbGl6YXRpb25fXyIgcHJvcGVydHkgc2hvdWxkIG9ubHkgYmUgdXNlZCBzcGFyaW5nbHkgYW5kIG9ubHkgc2hvdWxkIG9ubHkgYmUgc2V0IG9uIG9iamVjdHMgdGhhdAogIC8vIGhhdmUgYWxyZWFkeSBiZWVuIG5vcm1hbGl6ZWQuCiAgaWYgKCh2YWx1ZSApWydfX3NlbnRyeV9za2lwX25vcm1hbGl6YXRpb25fXyddKSB7CiAgICByZXR1cm4gdmFsdWUgOwogIH0KCiAgLy8gV2UgY2FuIHNldCBgX19zZW50cnlfb3ZlcnJpZGVfbm9ybWFsaXphdGlvbl9kZXB0aF9fYCBvbiBhbiBvYmplY3QgdG8gZW5zdXJlIHRoYXQgZnJvbSB0aGVyZQogIC8vIFdlIGtlZXAgYSBjZXJ0YWluIGFtb3VudCBvZiBkZXB0aC4KICAvLyBUaGlzIHNob3VsZCBiZSB1c2VkIHNwYXJpbmdseSwgZS5nLiB3ZSB1c2UgaXQgZm9yIHRoZSByZWR1eCBpbnRlZ3JhdGlvbiB0byBlbnN1cmUgd2UgZ2V0IGEgY2VydGFpbiBhbW91bnQgb2Ygc3RhdGUuCiAgY29uc3QgcmVtYWluaW5nRGVwdGggPQogICAgdHlwZW9mICh2YWx1ZSApWydfX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX18nXSA9PT0gJ251bWJlcicKICAgICAgPyAoKHZhbHVlIClbJ19fc2VudHJ5X292ZXJyaWRlX25vcm1hbGl6YXRpb25fZGVwdGhfXyddICkKICAgICAgOiBkZXB0aDsKCiAgLy8gV2UncmUgYWxzbyBkb25lIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIG1heCBkZXB0aAogIGlmIChyZW1haW5pbmdEZXB0aCA9PT0gMCkgewogICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBrbm93IGBzZXJpYWxpemVkYCBpcyBhIHN0cmluZyBvZiB0aGUgZm9ybSBgIltvYmplY3QgWFhYWF0iYC4gQ2xlYW4gaXQgdXAgc28gaXQncyBqdXN0IGAiW1hYWFhdImAuCiAgICByZXR1cm4gc3RyaW5naWZpZWQucmVwbGFjZSgnb2JqZWN0ICcsICcnKTsKICB9CgogIC8vIElmIHdlJ3ZlIGFscmVhZHkgdmlzaXRlZCB0aGlzIGJyYW5jaCwgYmFpbCBvdXQsIGFzIGl0J3MgY2lyY3VsYXIgcmVmZXJlbmNlLiBJZiBub3QsIG5vdGUgdGhhdCB3ZSdyZSBzZWVpbmcgaXQgbm93LgogIGlmIChtZW1vaXplKHZhbHVlKSkgewogICAgcmV0dXJuICdbQ2lyY3VsYXIgfl0nOwogIH0KCiAgLy8gSWYgdGhlIHZhbHVlIGhhcyBhIGB0b0pTT05gIG1ldGhvZCwgd2UgY2FsbCBpdCB0byBleHRyYWN0IG1vcmUgaW5mb3JtYXRpb24KICBjb25zdCB2YWx1ZVdpdGhUb0pTT04gPSB2YWx1ZSA7CiAgaWYgKHZhbHVlV2l0aFRvSlNPTiAmJiB0eXBlb2YgdmFsdWVXaXRoVG9KU09OLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykgewogICAgdHJ5IHsKICAgICAgY29uc3QganNvblZhbHVlID0gdmFsdWVXaXRoVG9KU09OLnRvSlNPTigpOwogICAgICAvLyBXZSBuZWVkIHRvIG5vcm1hbGl6ZSB0aGUgcmV0dXJuIHZhbHVlIG9mIGAudG9KU09OKClgIGluIGNhc2UgaXQgaGFzIGNpcmN1bGFyIHJlZmVyZW5jZXMKICAgICAgcmV0dXJuIHZpc2l0KCcnLCBqc29uVmFsdWUsIHJlbWFpbmluZ0RlcHRoIC0gMSwgbWF4UHJvcGVydGllcywgbWVtbyk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgLy8gcGFzcyAoVGhlIGJ1aWx0LWluIGB0b0pTT05gIGZhaWxlZCwgYnV0IHdlIGNhbiBzdGlsbCB0cnkgdG8gZG8gaXQgb3Vyc2VsdmVzKQogICAgfQogIH0KCiAgLy8gQXQgdGhpcyBwb2ludCB3ZSBrbm93IHdlIGVpdGhlciBoYXZlIGFuIG9iamVjdCBvciBhbiBhcnJheSwgd2UgaGF2ZW4ndCBzZWVuIGl0IGJlZm9yZSwgYW5kIHdlJ3JlIGdvaW5nIHRvIHJlY3Vyc2UKICAvLyBiZWNhdXNlIHdlIGhhdmVuJ3QgeWV0IHJlYWNoZWQgdGhlIG1heCBkZXB0aC4gQ3JlYXRlIGFuIGFjY3VtdWxhdG9yIHRvIGhvbGQgdGhlIHJlc3VsdHMgb2YgdmlzaXRpbmcgZWFjaAogIC8vIHByb3BlcnR5L2VudHJ5LCBhbmQga2VlcCB0cmFjayBvZiB0aGUgbnVtYmVyIG9mIGl0ZW1zIHdlIGFkZCB0byBpdC4KICBjb25zdCBub3JtYWxpemVkID0gKEFycmF5LmlzQXJyYXkodmFsdWUpID8gW10gOiB7fSkgOwogIGxldCBudW1BZGRlZCA9IDA7CgogIC8vIEJlZm9yZSB3ZSBiZWdpbiwgY29udmVydGBFcnJvcmAgYW5kYEV2ZW50YCBpbnN0YW5jZXMgaW50byBwbGFpbiBvYmplY3RzLCBzaW5jZSBzb21lIG9mIGVhY2ggb2YgdGhlaXIgcmVsZXZhbnQKICAvLyBwcm9wZXJ0aWVzIGFyZSBub24tZW51bWVyYWJsZSBhbmQgb3RoZXJ3aXNlIHdvdWxkIGdldCBtaXNzZWQuCiAgY29uc3QgdmlzaXRhYmxlID0gY29udmVydFRvUGxhaW5PYmplY3QodmFsdWUgKTsKCiAgZm9yIChjb25zdCB2aXNpdEtleSBpbiB2aXNpdGFibGUpIHsKICAgIC8vIEF2b2lkIGl0ZXJhdGluZyBvdmVyIGZpZWxkcyBpbiB0aGUgcHJvdG90eXBlIGlmIHRoZXkndmUgc29tZWhvdyBiZWVuIGV4cG9zZWQgdG8gZW51bWVyYXRpb24uCiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh2aXNpdGFibGUsIHZpc2l0S2V5KSkgewogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBpZiAobnVtQWRkZWQgPj0gbWF4UHJvcGVydGllcykgewogICAgICBub3JtYWxpemVkW3Zpc2l0S2V5XSA9ICdbTWF4UHJvcGVydGllcyB+XSc7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vIFJlY3Vyc2l2ZWx5IHZpc2l0IGFsbCB0aGUgY2hpbGQgbm9kZXMKICAgIGNvbnN0IHZpc2l0VmFsdWUgPSB2aXNpdGFibGVbdmlzaXRLZXldOwogICAgbm9ybWFsaXplZFt2aXNpdEtleV0gPSB2aXNpdCh2aXNpdEtleSwgdmlzaXRWYWx1ZSwgcmVtYWluaW5nRGVwdGggLSAxLCBtYXhQcm9wZXJ0aWVzLCBtZW1vKTsKCiAgICBudW1BZGRlZCsrOwogIH0KCiAgLy8gT25jZSB3ZSd2ZSB2aXNpdGVkIGFsbCB0aGUgYnJhbmNoZXMsIHJlbW92ZSB0aGUgcGFyZW50IGZyb20gbWVtbyBzdG9yYWdlCiAgdW5tZW1vaXplKHZhbHVlKTsKCiAgLy8gUmV0dXJuIGFjY3VtdWxhdGVkIHZhbHVlcwogIHJldHVybiBub3JtYWxpemVkOwp9CgovKiBlc2xpbnQtZGlzYWJsZSBjb21wbGV4aXR5ICovCi8qKgogKiBTdHJpbmdpZnkgdGhlIGdpdmVuIHZhbHVlLiBIYW5kbGVzIHZhcmlvdXMga25vd24gc3BlY2lhbCB2YWx1ZXMgYW5kIHR5cGVzLgogKgogKiBOb3QgbWVhbnQgdG8gYmUgdXNlZCBvbiBzaW1wbGUgcHJpbWl0aXZlcyB3aGljaCBhbHJlYWR5IGhhdmUgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24sIGFzIGl0IHdpbGwsIGZvciBleGFtcGxlLCB0dXJuCiAqIHRoZSBudW1iZXIgMTIzMSBpbnRvICJbT2JqZWN0IE51bWJlcl0iLCBub3Igb24gYG51bGxgLCBhcyBpdCB3aWxsIHRocm93LgogKgogKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHN0cmluZ2lmeQogKiBAcmV0dXJucyBBIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiB2YWx1ZQogKi8KZnVuY3Rpb24gc3RyaW5naWZ5VmFsdWUoCiAga2V5LAogIC8vIHRoaXMgdHlwZSBpcyBhIHRpbnkgYml0IG9mIGEgY2hlYXQsIHNpbmNlIHRoaXMgZnVuY3Rpb24gZG9lcyBoYW5kbGUgTmFOICh3aGljaCBpcyB0ZWNobmljYWxseSBhIG51bWJlciksIGJ1dCBmb3IKICAvLyBvdXIgaW50ZXJuYWwgdXNlLCBpdCdsbCBkbwogIHZhbHVlLAopIHsKICB0cnkgewogICAgaWYgKGtleSA9PT0gJ2RvbWFpbicgJiYgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAodmFsdWUgKS5fZXZlbnRzKSB7CiAgICAgIHJldHVybiAnW0RvbWFpbl0nOwogICAgfQoKICAgIGlmIChrZXkgPT09ICdkb21haW5FbWl0dGVyJykgewogICAgICByZXR1cm4gJ1tEb21haW5FbWl0dGVyXSc7CiAgICB9CgogICAgLy8gSXQncyBzYWZlIHRvIHVzZSBgZ2xvYmFsYCwgYHdpbmRvd2AsIGFuZCBgZG9jdW1lbnRgIGhlcmUgaW4gdGhpcyBtYW5uZXIsIGFzIHdlIGFyZSBhc3NlcnRpbmcgdXNpbmcgYHR5cGVvZmAgZmlyc3QKICAgIC8vIHdoaWNoIHdvbid0IHRocm93IGlmIHRoZXkgYXJlIG5vdCBwcmVzZW50LgoKICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSA9PT0gZ2xvYmFsKSB7CiAgICAgIHJldHVybiAnW0dsb2JhbF0nOwogICAgfQoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHMKICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSA9PT0gd2luZG93KSB7CiAgICAgIHJldHVybiAnW1dpbmRvd10nOwogICAgfQoKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHMKICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlID09PSBkb2N1bWVudCkgewogICAgICByZXR1cm4gJ1tEb2N1bWVudF0nOwogICAgfQoKICAgIGlmIChpc1Z1ZVZpZXdNb2RlbCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuICdbVnVlVmlld01vZGVsXSc7CiAgICB9CgogICAgLy8gUmVhY3QncyBTeW50aGV0aWNFdmVudCB0aGluZ3kKICAgIGlmIChpc1N5bnRoZXRpY0V2ZW50KHZhbHVlKSkgewogICAgICByZXR1cm4gJ1tTeW50aGV0aWNFdmVudF0nOwogICAgfQoKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHZhbHVlICE9PSB2YWx1ZSkgewogICAgICByZXR1cm4gJ1tOYU5dJzsKICAgIH0KCiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldHVybiBgW0Z1bmN0aW9uOiAke2dldEZ1bmN0aW9uTmFtZSh2YWx1ZSl9XWA7CiAgICB9CgogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N5bWJvbCcpIHsKICAgICAgcmV0dXJuIGBbJHtTdHJpbmcodmFsdWUpfV1gOwogICAgfQoKICAgIC8vIHN0cmluZ2lmaWVkIEJpZ0ludHMgYXJlIGluZGlzdGluZ3Vpc2hhYmxlIGZyb20gcmVndWxhciBudW1iZXJzLCBzbyB3ZSBuZWVkIHRvIGxhYmVsIHRoZW0gdG8gYXZvaWQgY29uZnVzaW9uCiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnYmlnaW50JykgewogICAgICByZXR1cm4gYFtCaWdJbnQ6ICR7U3RyaW5nKHZhbHVlKX1dYDsKICAgIH0KCiAgICAvLyBOb3cgdGhhdCB3ZSd2ZSBrbm9ja2VkIG91dCBhbGwgdGhlIHNwZWNpYWwgY2FzZXMgYW5kIHRoZSBwcmltaXRpdmVzLCBhbGwgd2UgaGF2ZSBsZWZ0IGFyZSBvYmplY3RzLiBTaW1wbHkgY2FzdGluZwogICAgLy8gdGhlbSB0byBzdHJpbmdzIG1lYW5zIHRoYXQgaW5zdGFuY2VzIG9mIGNsYXNzZXMgd2hpY2ggaGF2ZW4ndCBkZWZpbmVkIHRoZWlyIGB0b1N0cmluZ1RhZ2Agd2lsbCBqdXN0IGNvbWUgb3V0IGFzCiAgICAvLyBgIltvYmplY3QgT2JqZWN0XSJgLiBJZiB3ZSBpbnN0ZWFkIGxvb2sgYXQgdGhlIGNvbnN0cnVjdG9yJ3MgbmFtZSAod2hpY2ggaXMgdGhlIHNhbWUgYXMgdGhlIG5hbWUgb2YgdGhlIGNsYXNzKSwKICAgIC8vIHdlIGNhbiBtYWtlIHN1cmUgdGhhdCBvbmx5IHBsYWluIG9iamVjdHMgY29tZSBvdXQgdGhhdCB3YXkuCiAgICBjb25zdCBvYmpOYW1lID0gZ2V0Q29uc3RydWN0b3JOYW1lKHZhbHVlKTsKCiAgICAvLyBIYW5kbGUgSFRNTCBFbGVtZW50cwogICAgaWYgKC9eSFRNTChcdyopRWxlbWVudCQvLnRlc3Qob2JqTmFtZSkpIHsKICAgICAgcmV0dXJuIGBbSFRNTEVsZW1lbnQ6ICR7b2JqTmFtZX1dYDsKICAgIH0KCiAgICByZXR1cm4gYFtvYmplY3QgJHtvYmpOYW1lfV1gOwogIH0gY2F0Y2ggKGVycikgewogICAgcmV0dXJuIGAqKm5vbi1zZXJpYWxpemFibGUqKiAoJHtlcnJ9KWA7CiAgfQp9Ci8qIGVzbGludC1lbmFibGUgY29tcGxleGl0eSAqLwoKZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3JOYW1lKHZhbHVlKSB7CiAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTsKCiAgcmV0dXJuIHByb3RvdHlwZSA/IHByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lIDogJ251bGwgcHJvdG90eXBlJzsKfQoKLyoqCiAqIE5vcm1hbGl6ZXMgVVJMcyBpbiBleGNlcHRpb25zIGFuZCBzdGFja3RyYWNlcyB0byBhIGJhc2UgcGF0aCBzbyBTZW50cnkgY2FuIGZpbmdlcnByaW50CiAqIGFjcm9zcyBwbGF0Zm9ybXMgYW5kIHdvcmtpbmcgZGlyZWN0b3J5LgogKgogKiBAcGFyYW0gdXJsIFRoZSBVUkwgdG8gYmUgbm9ybWFsaXplZC4KICogQHBhcmFtIGJhc2VQYXRoIFRoZSBhcHBsaWNhdGlvbiBiYXNlIHBhdGguCiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIFVSTC4KICovCmZ1bmN0aW9uIG5vcm1hbGl6ZVVybFRvQmFzZSh1cmwsIGJhc2VQYXRoKSB7CiAgY29uc3QgZXNjYXBlZEJhc2UgPSBiYXNlUGF0aAogICAgLy8gQmFja3NsYXNoIHRvIGZvcndhcmQKICAgIC5yZXBsYWNlKC9cXC9nLCAnLycpCiAgICAvLyBFc2NhcGUgUmVnRXhwIHNwZWNpYWwgY2hhcmFjdGVycwogICAgLnJlcGxhY2UoL1t8XFx7fSgpW1xdXiQrKj8uXS9nLCAnXFwkJicpOwoKICBsZXQgbmV3VXJsID0gdXJsOwogIHRyeSB7CiAgICBuZXdVcmwgPSBkZWNvZGVVUkkodXJsKTsKICB9IGNhdGNoIChfT28pIHsKICAgIC8vIFNvbWV0aW1lIHRoaXMgYnJlYWtzCiAgfQogIHJldHVybiAoCiAgICBuZXdVcmwKICAgICAgLnJlcGxhY2UoL1xcL2csICcvJykKICAgICAgLnJlcGxhY2UoL3dlYnBhY2s6XC8/L2csICcnKSAvLyBSZW1vdmUgaW50ZXJtZWRpYXRlIGJhc2UgcGF0aAogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHNlbnRyeS1pbnRlcm5hbC9zZGsvbm8tcmVnZXhwLWNvbnN0cnVjdG9yCiAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAoYChmaWxlOi8vKT8vKiR7ZXNjYXBlZEJhc2V9LypgLCAnaWcnKSwgJ2FwcDovLy8nKQogICk7Cn0KCi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1mdW5jdGlvbi1yZXR1cm4tdHlwZSAqLwoKLyoqIFN5bmNQcm9taXNlIGludGVybmFsIHN0YXRlcyAqLwp2YXIgU3RhdGVzOyAoZnVuY3Rpb24gKFN0YXRlcykgewogIC8qKiBQZW5kaW5nICovCiAgY29uc3QgUEVORElORyA9IDA7IFN0YXRlc1tTdGF0ZXNbIlBFTkRJTkciXSA9IFBFTkRJTkddID0gIlBFTkRJTkciOwogIC8qKiBSZXNvbHZlZCAvIE9LICovCiAgY29uc3QgUkVTT0xWRUQgPSAxOyBTdGF0ZXNbU3RhdGVzWyJSRVNPTFZFRCJdID0gUkVTT0xWRURdID0gIlJFU09MVkVEIjsKICAvKiogUmVqZWN0ZWQgLyBFcnJvciAqLwogIGNvbnN0IFJFSkVDVEVEID0gMjsgU3RhdGVzW1N0YXRlc1siUkVKRUNURUQiXSA9IFJFSkVDVEVEXSA9ICJSRUpFQ1RFRCI7Cn0pKFN0YXRlcyB8fCAoU3RhdGVzID0ge30pKTsKCi8vIE92ZXJsb2FkcyBzbyB3ZSBjYW4gY2FsbCByZXNvbHZlZFN5bmNQcm9taXNlIHdpdGhvdXQgYXJndW1lbnRzIGFuZCBnZW5lcmljIGFyZ3VtZW50CgovKioKICogQ3JlYXRlcyBhIHJlc29sdmVkIHN5bmMgcHJvbWlzZS4KICoKICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSB0byByZXNvbHZlIHRoZSBwcm9taXNlIHdpdGgKICogQHJldHVybnMgdGhlIHJlc29sdmVkIHN5bmMgcHJvbWlzZQogKi8KZnVuY3Rpb24gcmVzb2x2ZWRTeW5jUHJvbWlzZSh2YWx1ZSkgewogIHJldHVybiBuZXcgU3luY1Byb21pc2UocmVzb2x2ZSA9PiB7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9KTsKfQoKLyoqCiAqIENyZWF0ZXMgYSByZWplY3RlZCBzeW5jIHByb21pc2UuCiAqCiAqIEBwYXJhbSB2YWx1ZSB0aGUgdmFsdWUgdG8gcmVqZWN0IHRoZSBwcm9taXNlIHdpdGgKICogQHJldHVybnMgdGhlIHJlamVjdGVkIHN5bmMgcHJvbWlzZQogKi8KZnVuY3Rpb24gcmVqZWN0ZWRTeW5jUHJvbWlzZShyZWFzb24pIHsKICByZXR1cm4gbmV3IFN5bmNQcm9taXNlKChfLCByZWplY3QpID0+IHsKICAgIHJlamVjdChyZWFzb24pOwogIH0pOwp9CgovKioKICogVGhlbmFibGUgY2xhc3MgdGhhdCBiZWhhdmVzIGxpa2UgYSBQcm9taXNlIGFuZCBmb2xsb3dzIGl0J3MgaW50ZXJmYWNlCiAqIGJ1dCBpcyBub3QgYXN5bmMgaW50ZXJuYWxseQogKi8KY2xhc3MgU3luY1Byb21pc2UgewoKICAgY29uc3RydWN0b3IoCiAgICBleGVjdXRvciwKICApIHtTeW5jUHJvbWlzZS5wcm90b3R5cGUuX19pbml0LmNhbGwodGhpcyk7U3luY1Byb21pc2UucHJvdG90eXBlLl9faW5pdDIuY2FsbCh0aGlzKTtTeW5jUHJvbWlzZS5wcm90b3R5cGUuX19pbml0My5jYWxsKHRoaXMpO1N5bmNQcm9taXNlLnByb3RvdHlwZS5fX2luaXQ0LmNhbGwodGhpcyk7CiAgICB0aGlzLl9zdGF0ZSA9IFN0YXRlcy5QRU5ESU5HOwogICAgdGhpcy5faGFuZGxlcnMgPSBbXTsKCiAgICB0cnkgewogICAgICBleGVjdXRvcih0aGlzLl9yZXNvbHZlLCB0aGlzLl9yZWplY3QpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aGlzLl9yZWplY3QoZSk7CiAgICB9CiAgfQoKICAvKiogSlNEb2MgKi8KICAgdGhlbigKICAgIG9uZnVsZmlsbGVkLAogICAgb25yZWplY3RlZCwKICApIHsKICAgIHJldHVybiBuZXcgU3luY1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICB0aGlzLl9oYW5kbGVycy5wdXNoKFsKICAgICAgICBmYWxzZSwKICAgICAgICByZXN1bHQgPT4gewogICAgICAgICAgaWYgKCFvbmZ1bGZpbGxlZCkgewogICAgICAgICAgICAvLyBUT0RPOiDCr1xfKOODhClfL8KvCiAgICAgICAgICAgIC8vIFRPRE86IEZJWE1FCiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0ICk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJlc29sdmUob25mdWxmaWxsZWQocmVzdWx0KSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZWplY3QoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHJlYXNvbiA9PiB7CiAgICAgICAgICBpZiAoIW9ucmVqZWN0ZWQpIHsKICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJlc29sdmUob25yZWplY3RlZChyZWFzb24pKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIF0pOwogICAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnMoKTsKICAgIH0pOwogIH0KCiAgLyoqIEpTRG9jICovCiAgIGNhdGNoKAogICAgb25yZWplY3RlZCwKICApIHsKICAgIHJldHVybiB0aGlzLnRoZW4odmFsID0+IHZhbCwgb25yZWplY3RlZCk7CiAgfQoKICAvKiogSlNEb2MgKi8KICAgZmluYWxseShvbmZpbmFsbHkpIHsKICAgIHJldHVybiBuZXcgU3luY1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBsZXQgdmFsOwogICAgICBsZXQgaXNSZWplY3RlZDsKCiAgICAgIHJldHVybiB0aGlzLnRoZW4oCiAgICAgICAgdmFsdWUgPT4gewogICAgICAgICAgaXNSZWplY3RlZCA9IGZhbHNlOwogICAgICAgICAgdmFsID0gdmFsdWU7CiAgICAgICAgICBpZiAob25maW5hbGx5KSB7CiAgICAgICAgICAgIG9uZmluYWxseSgpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVhc29uID0+IHsKICAgICAgICAgIGlzUmVqZWN0ZWQgPSB0cnVlOwogICAgICAgICAgdmFsID0gcmVhc29uOwogICAgICAgICAgaWYgKG9uZmluYWxseSkgewogICAgICAgICAgICBvbmZpbmFsbHkoKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICApLnRoZW4oKCkgPT4gewogICAgICAgIGlmIChpc1JlamVjdGVkKSB7CiAgICAgICAgICByZWplY3QodmFsKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHJlc29sdmUodmFsICk7CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvKiogSlNEb2MgKi8KICAgIF9faW5pdCgpIHt0aGlzLl9yZXNvbHZlID0gKHZhbHVlKSA9PiB7CiAgICB0aGlzLl9zZXRSZXN1bHQoU3RhdGVzLlJFU09MVkVELCB2YWx1ZSk7CiAgfTt9CgogIC8qKiBKU0RvYyAqLwogICAgX19pbml0MigpIHt0aGlzLl9yZWplY3QgPSAocmVhc29uKSA9PiB7CiAgICB0aGlzLl9zZXRSZXN1bHQoU3RhdGVzLlJFSkVDVEVELCByZWFzb24pOwogIH07fQoKICAvKiogSlNEb2MgKi8KICAgIF9faW5pdDMoKSB7dGhpcy5fc2V0UmVzdWx0ID0gKHN0YXRlLCB2YWx1ZSkgPT4gewogICAgaWYgKHRoaXMuX3N0YXRlICE9PSBTdGF0ZXMuUEVORElORykgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGlzVGhlbmFibGUodmFsdWUpKSB7CiAgICAgIHZvaWQgKHZhbHVlICkudGhlbih0aGlzLl9yZXNvbHZlLCB0aGlzLl9yZWplY3QpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTsKICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7CgogICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzKCk7CiAgfTt9CgogIC8qKiBKU0RvYyAqLwogICAgX19pbml0NCgpIHt0aGlzLl9leGVjdXRlSGFuZGxlcnMgPSAoKSA9PiB7CiAgICBpZiAodGhpcy5fc3RhdGUgPT09IFN0YXRlcy5QRU5ESU5HKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCBjYWNoZWRIYW5kbGVycyA9IHRoaXMuX2hhbmRsZXJzLnNsaWNlKCk7CiAgICB0aGlzLl9oYW5kbGVycyA9IFtdOwoKICAgIGNhY2hlZEhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7CiAgICAgIGlmIChoYW5kbGVyWzBdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5fc3RhdGUgPT09IFN0YXRlcy5SRVNPTFZFRCkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXMKICAgICAgICBoYW5kbGVyWzFdKHRoaXMuX3ZhbHVlICk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gU3RhdGVzLlJFSkVDVEVEKSB7CiAgICAgICAgaGFuZGxlclsyXSh0aGlzLl92YWx1ZSk7CiAgICAgIH0KCiAgICAgIGhhbmRsZXJbMF0gPSB0cnVlOwogICAgfSk7CiAgfTt9Cn0KCi8qKgogKiBDcmVhdGVzIGFuIG5ldyBQcm9taXNlQnVmZmVyIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQgbGltaXQKICogQHBhcmFtIGxpbWl0IG1heCBudW1iZXIgb2YgcHJvbWlzZXMgdGhhdCBjYW4gYmUgc3RvcmVkIGluIHRoZSBidWZmZXIKICovCmZ1bmN0aW9uIG1ha2VQcm9taXNlQnVmZmVyKGxpbWl0KSB7CiAgY29uc3QgYnVmZmVyID0gW107CgogIGZ1bmN0aW9uIGlzUmVhZHkoKSB7CiAgICByZXR1cm4gbGltaXQgPT09IHVuZGVmaW5lZCB8fCBidWZmZXIubGVuZ3RoIDwgbGltaXQ7CiAgfQoKICAvKioKICAgKiBSZW1vdmUgYSBwcm9taXNlIGZyb20gdGhlIHF1ZXVlLgogICAqCiAgICogQHBhcmFtIHRhc2sgQ2FuIGJlIGFueSBQcm9taXNlTGlrZTxUPgogICAqIEByZXR1cm5zIFJlbW92ZWQgcHJvbWlzZS4KICAgKi8KICBmdW5jdGlvbiByZW1vdmUodGFzaykgewogICAgcmV0dXJuIGJ1ZmZlci5zcGxpY2UoYnVmZmVyLmluZGV4T2YodGFzayksIDEpWzBdOwogIH0KCiAgLyoqCiAgICogQWRkIGEgcHJvbWlzZSAocmVwcmVzZW50aW5nIGFuIGluLWZsaWdodCBhY3Rpb24pIHRvIHRoZSBxdWV1ZSwgYW5kIHNldCBpdCB0byByZW1vdmUgaXRzZWxmIG9uIGZ1bGZpbGxtZW50LgogICAqCiAgICogQHBhcmFtIHRhc2tQcm9kdWNlciBBIGZ1bmN0aW9uIHByb2R1Y2luZyBhbnkgUHJvbWlzZUxpa2U8VD47IEluIHByZXZpb3VzIHZlcnNpb25zIHRoaXMgdXNlZCB0byBiZSBgdGFzazoKICAgKiAgICAgICAgUHJvbWlzZUxpa2U8VD5gLCBidXQgdW5kZXIgdGhhdCBtb2RlbCwgUHJvbWlzZXMgd2VyZSBpbnN0YW50bHkgY3JlYXRlZCBvbiB0aGUgY2FsbC1zaXRlIGFuZCB0aGVpciBleGVjdXRvcgogICAqICAgICAgICBmdW5jdGlvbnMgdGhlcmVmb3JlIHJhbiBpbW1lZGlhdGVseS4gVGh1cywgZXZlbiBpZiB0aGUgYnVmZmVyIHdhcyBmdWxsLCB0aGUgYWN0aW9uIHN0aWxsIGhhcHBlbmVkLiBCeQogICAqICAgICAgICByZXF1aXJpbmcgdGhlIHByb21pc2UgdG8gYmUgd3JhcHBlZCBpbiBhIGZ1bmN0aW9uLCB3ZSBjYW4gZGVmZXIgcHJvbWlzZSBjcmVhdGlvbiB1bnRpbCBhZnRlciB0aGUgYnVmZmVyCiAgICogICAgICAgIGxpbWl0IGNoZWNrLgogICAqIEByZXR1cm5zIFRoZSBvcmlnaW5hbCBwcm9taXNlLgogICAqLwogIGZ1bmN0aW9uIGFkZCh0YXNrUHJvZHVjZXIpIHsKICAgIGlmICghaXNSZWFkeSgpKSB7CiAgICAgIHJldHVybiByZWplY3RlZFN5bmNQcm9taXNlKG5ldyBTZW50cnlFcnJvcignTm90IGFkZGluZyBQcm9taXNlIGJlY2F1c2UgYnVmZmVyIGxpbWl0IHdhcyByZWFjaGVkLicpKTsKICAgIH0KCiAgICAvLyBzdGFydCB0aGUgdGFzayBhbmQgYWRkIGl0cyBwcm9taXNlIHRvIHRoZSBxdWV1ZQogICAgY29uc3QgdGFzayA9IHRhc2tQcm9kdWNlcigpOwogICAgaWYgKGJ1ZmZlci5pbmRleE9mKHRhc2spID09PSAtMSkgewogICAgICBidWZmZXIucHVzaCh0YXNrKTsKICAgIH0KICAgIHZvaWQgdGFzawogICAgICAudGhlbigoKSA9PiByZW1vdmUodGFzaykpCiAgICAgIC8vIFVzZSBgdGhlbihudWxsLCByZWplY3Rpb25IYW5kbGVyKWAgcmF0aGVyIHRoYW4gYGNhdGNoKHJlamVjdGlvbkhhbmRsZXIpYCBzbyB0aGF0IHdlIGNhbiB1c2UgYFByb21pc2VMaWtlYAogICAgICAvLyByYXRoZXIgdGhhbiBgUHJvbWlzZWAuIGBQcm9taXNlTGlrZWAgZG9lc24ndCBoYXZlIGEgYC5jYXRjaGAgbWV0aG9kLCBtYWtpbmcgaXRzIHBvbHlmaWxsIHNtYWxsZXIuIChFUzUgZGlkbid0CiAgICAgIC8vIGhhdmUgcHJvbWlzZXMsIHNvIFRTIGhhcyB0byBwb2x5ZmlsbCB3aGVuIGRvd24tY29tcGlsaW5nLikKICAgICAgLnRoZW4obnVsbCwgKCkgPT4KICAgICAgICByZW1vdmUodGFzaykudGhlbihudWxsLCAoKSA9PiB7CiAgICAgICAgICAvLyBXZSBoYXZlIHRvIGFkZCBhbm90aGVyIGNhdGNoIGhlcmUgYmVjYXVzZSBgcmVtb3ZlKClgIHN0YXJ0cyBhIG5ldyBwcm9taXNlIGNoYWluLgogICAgICAgIH0pLAogICAgICApOwogICAgcmV0dXJuIHRhc2s7CiAgfQoKICAvKioKICAgKiBXYWl0IGZvciBhbGwgcHJvbWlzZXMgaW4gdGhlIHF1ZXVlIHRvIHJlc29sdmUgb3IgZm9yIHRpbWVvdXQgdG8gZXhwaXJlLCB3aGljaGV2ZXIgY29tZXMgZmlyc3QuCiAgICoKICAgKiBAcGFyYW0gdGltZW91dCBUaGUgdGltZSwgaW4gbXMsIGFmdGVyIHdoaWNoIHRvIHJlc29sdmUgdG8gYGZhbHNlYCBpZiB0aGUgcXVldWUgaXMgc3RpbGwgbm9uLWVtcHR5LiBQYXNzaW5nIGAwYCAob3IKICAgKiBub3QgcGFzc2luZyBhbnl0aGluZykgd2lsbCBtYWtlIHRoZSBwcm9taXNlIHdhaXQgYXMgbG9uZyBhcyBpdCB0YWtlcyBmb3IgdGhlIHF1ZXVlIHRvIGRyYWluIGJlZm9yZSByZXNvbHZpbmcgdG8KICAgKiBgdHJ1ZWAuCiAgICogQHJldHVybnMgQSBwcm9taXNlIHdoaWNoIHdpbGwgcmVzb2x2ZSB0byBgdHJ1ZWAgaWYgdGhlIHF1ZXVlIGlzIGFscmVhZHkgZW1wdHkgb3IgZHJhaW5zIGJlZm9yZSB0aGUgdGltZW91dCwgYW5kCiAgICogYGZhbHNlYCBvdGhlcndpc2UKICAgKi8KICBmdW5jdGlvbiBkcmFpbih0aW1lb3V0KSB7CiAgICByZXR1cm4gbmV3IFN5bmNQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgbGV0IGNvdW50ZXIgPSBidWZmZXIubGVuZ3RoOwoKICAgICAgaWYgKCFjb3VudGVyKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSk7CiAgICAgIH0KCiAgICAgIC8vIHdhaXQgZm9yIGB0aW1lb3V0YCBtcyBhbmQgdGhlbiByZXNvbHZlIHRvIGBmYWxzZWAgKGlmIG5vdCBjYW5jZWxsZWQgZmlyc3QpCiAgICAgIGNvbnN0IGNhcHR1cmVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICh0aW1lb3V0ICYmIHRpbWVvdXQgPiAwKSB7CiAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0sIHRpbWVvdXQpOwoKICAgICAgLy8gaWYgYWxsIHByb21pc2VzIHJlc29sdmUgaW4gdGltZSwgY2FuY2VsIHRoZSB0aW1lciBhbmQgcmVzb2x2ZSB0byBgdHJ1ZWAKICAgICAgYnVmZmVyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgdm9pZCByZXNvbHZlZFN5bmNQcm9taXNlKGl0ZW0pLnRoZW4oKCkgPT4gewogICAgICAgICAgaWYgKCEtLWNvdW50ZXIpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNhcHR1cmVkU2V0VGltZW91dCk7CiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgfSk7CiAgICB9KTsKICB9CgogIHJldHVybiB7CiAgICAkOiBidWZmZXIsCiAgICBhZGQsCiAgICBkcmFpbiwKICB9Owp9CgovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KY29uc3QgV0lORE9XID0gZ2V0R2xvYmFsT2JqZWN0KCk7CgovKioKICogQW4gb2JqZWN0IHRoYXQgY2FuIHJldHVybiB0aGUgY3VycmVudCB0aW1lc3RhbXAgaW4gc2Vjb25kcyBzaW5jZSB0aGUgVU5JWCBlcG9jaC4KICovCgovKioKICogQSBUaW1lc3RhbXBTb3VyY2UgaW1wbGVtZW50YXRpb24gZm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBzdXBwb3J0IHRoZSBQZXJmb3JtYW5jZSBXZWIgQVBJIG5hdGl2ZWx5LgogKgogKiBOb3RlIHRoYXQgdGhpcyBUaW1lc3RhbXBTb3VyY2UgZG9lcyBub3QgdXNlIGEgbW9ub3RvbmljIGNsb2NrLiBBIGNhbGwgdG8gYG5vd1NlY29uZHNgIG1heSByZXR1cm4gYSB0aW1lc3RhbXAgZWFybGllcgogKiB0aGFuIGEgcHJldmlvdXNseSByZXR1cm5lZCB2YWx1ZS4gV2UgZG8gbm90IHRyeSB0byBlbXVsYXRlIGEgbW9ub3RvbmljIGJlaGF2aW9yIGluIG9yZGVyIHRvIGZhY2lsaXRhdGUgZGVidWdnaW5nLiBJdAogKiBpcyBtb3JlIG9idmlvdXMgdG8gZXhwbGFpbiAid2h5IGRvZXMgbXkgc3BhbiBoYXZlIG5lZ2F0aXZlIGR1cmF0aW9uIiB0aGFuICJ3aHkgbXkgc3BhbnMgaGF2ZSB6ZXJvIGR1cmF0aW9uIi4KICovCmNvbnN0IGRhdGVUaW1lc3RhbXBTb3VyY2UgPSB7CiAgbm93U2Vjb25kczogKCkgPT4gRGF0ZS5ub3coKSAvIDEwMDAsCn07CgovKioKICogQSBwYXJ0aWFsIGRlZmluaXRpb24gb2YgdGhlIFtQZXJmb3JtYW5jZSBXZWIgQVBJXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUGVyZm9ybWFuY2V9CiAqIGZvciBhY2Nlc3NpbmcgYSBoaWdoLXJlc29sdXRpb24gbW9ub3RvbmljIGNsb2NrLgogKi8KCi8qKgogKiBSZXR1cm5zIGEgd3JhcHBlciBhcm91bmQgdGhlIG5hdGl2ZSBQZXJmb3JtYW5jZSBBUEkgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiwgb3IgdW5kZWZpbmVkIGZvciBicm93c2VycyB0aGF0IGRvIG5vdAogKiBzdXBwb3J0IHRoZSBBUEkuCiAqCiAqIFdyYXBwaW5nIHRoZSBuYXRpdmUgQVBJIHdvcmtzIGFyb3VuZCBkaWZmZXJlbmNlcyBpbiBiZWhhdmlvciBmcm9tIGRpZmZlcmVudCBicm93c2Vycy4KICovCmZ1bmN0aW9uIGdldEJyb3dzZXJQZXJmb3JtYW5jZSgpIHsKICBjb25zdCB7IHBlcmZvcm1hbmNlIH0gPSBXSU5ET1c7CiAgaWYgKCFwZXJmb3JtYW5jZSB8fCAhcGVyZm9ybWFuY2Uubm93KSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgLy8gUmVwbGFjZSBwZXJmb3JtYW5jZS50aW1lT3JpZ2luIHdpdGggb3VyIG93biB0aW1lT3JpZ2luIGJhc2VkIG9uIERhdGUubm93KCkuCiAgLy8KICAvLyBUaGlzIGlzIGEgcGFydGlhbCB3b3JrYXJvdW5kIGZvciBicm93c2VycyByZXBvcnRpbmcgcGVyZm9ybWFuY2UudGltZU9yaWdpbiBzdWNoIHRoYXQgcGVyZm9ybWFuY2UudGltZU9yaWdpbiArCiAgLy8gcGVyZm9ybWFuY2Uubm93KCkgZ2l2ZXMgYSBkYXRlIGFyYml0cmFyaWx5IGluIHRoZSBwYXN0LgogIC8vCiAgLy8gQWRkaXRpb25hbGx5LCBjb21wdXRpbmcgdGltZU9yaWdpbiBpbiB0aGlzIHdheSBmaWxscyB0aGUgZ2FwIGZvciBicm93c2VycyB3aGVyZSBwZXJmb3JtYW5jZS50aW1lT3JpZ2luIGlzCiAgLy8gdW5kZWZpbmVkLgogIC8vCiAgLy8gVGhlIGFzc3VtcHRpb24gdGhhdCBwZXJmb3JtYW5jZS50aW1lT3JpZ2luICsgcGVyZm9ybWFuY2Uubm93KCkgfj0gRGF0ZS5ub3coKSBpcyBmbGF3ZWQsIGJ1dCB3ZSBkZXBlbmQgb24gaXQgdG8KICAvLyBpbnRlcmFjdCB3aXRoIGRhdGEgY29taW5nIG91dCBvZiBwZXJmb3JtYW5jZSBlbnRyaWVzLgogIC8vCiAgLy8gTm90ZSB0aGF0IGRlc3BpdGUgcmVjb21tZW5kYXRpb25zIGFnYWluc3QgaXQgaW4gdGhlIHNwZWMsIGJyb3dzZXJzIGltcGxlbWVudCB0aGUgUGVyZm9ybWFuY2UgQVBJIHdpdGggYSBjbG9jayB0aGF0CiAgLy8gbWlnaHQgc3RvcCB3aGVuIHRoZSBjb21wdXRlciBpcyBhc2xlZXAgKGFuZCBwZXJoYXBzIHVuZGVyIG90aGVyIGNpcmN1bXN0YW5jZXMpLiBTdWNoIGJlaGF2aW9yIGNhdXNlcwogIC8vIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4gKyBwZXJmb3JtYW5jZS5ub3coKSB0byBoYXZlIGFuIGFyYml0cmFyeSBza2V3IG92ZXIgRGF0ZS5ub3coKS4gSW4gbGFwdG9wIGNvbXB1dGVycywgd2UgaGF2ZQogIC8vIG9ic2VydmVkIHNrZXdzIHRoYXQgY2FuIGJlIGFzIGxvbmcgYXMgZGF5cywgd2Vla3Mgb3IgbW9udGhzLgogIC8vCiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzI1OTAuCiAgLy8KICAvLyBCVUc6IGRlc3BpdGUgb3VyIGJlc3QgaW50ZW50aW9ucywgdGhpcyB3b3JrYXJvdW5kIGhhcyBpdHMgbGltaXRhdGlvbnMuIEl0IG1vc3RseSBhZGRyZXNzZXMgdGltaW5ncyBvZiBwYWdlbG9hZAogIC8vIHRyYW5zYWN0aW9ucywgYnV0IGlnbm9yZXMgdGhlIHNrZXcgYnVpbHQgdXAgb3ZlciB0aW1lIHRoYXQgY2FuIGF2ZXJzZWx5IGFmZmVjdCB0aW1lc3RhbXBzIG9mIG5hdmlnYXRpb24KICAvLyB0cmFuc2FjdGlvbnMgb2YgbG9uZy1saXZlZCB3ZWIgcGFnZXMuCiAgY29uc3QgdGltZU9yaWdpbiA9IERhdGUubm93KCkgLSBwZXJmb3JtYW5jZS5ub3coKTsKCiAgcmV0dXJuIHsKICAgIG5vdzogKCkgPT4gcGVyZm9ybWFuY2Uubm93KCksCiAgICB0aW1lT3JpZ2luLAogIH07Cn0KCi8qKgogKiBSZXR1cm5zIHRoZSBuYXRpdmUgUGVyZm9ybWFuY2UgQVBJIGltcGxlbWVudGF0aW9uIGZyb20gTm9kZS5qcy4gUmV0dXJucyB1bmRlZmluZWQgaW4gb2xkIE5vZGUuanMgdmVyc2lvbnMgdGhhdCBkb24ndAogKiBpbXBsZW1lbnQgdGhlIEFQSS4KICovCmZ1bmN0aW9uIGdldE5vZGVQZXJmb3JtYW5jZSgpIHsKICB0cnkgewogICAgY29uc3QgcGVyZkhvb2tzID0gZHluYW1pY1JlcXVpcmUobW9kdWxlLCAncGVyZl9ob29rcycpIDsKICAgIHJldHVybiBwZXJmSG9va3MucGVyZm9ybWFuY2U7CiAgfSBjYXRjaCAoXykgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9Cn0KCi8qKgogKiBUaGUgUGVyZm9ybWFuY2UgQVBJIGltcGxlbWVudGF0aW9uIGZvciB0aGUgY3VycmVudCBwbGF0Zm9ybSwgaWYgYXZhaWxhYmxlLgogKi8KY29uc3QgcGxhdGZvcm1QZXJmb3JtYW5jZSA9IGlzTm9kZUVudigpID8gZ2V0Tm9kZVBlcmZvcm1hbmNlKCkgOiBnZXRCcm93c2VyUGVyZm9ybWFuY2UoKTsKCmNvbnN0IHRpbWVzdGFtcFNvdXJjZSA9CiAgcGxhdGZvcm1QZXJmb3JtYW5jZSA9PT0gdW5kZWZpbmVkCiAgICA/IGRhdGVUaW1lc3RhbXBTb3VyY2UKICAgIDogewogICAgICAgIG5vd1NlY29uZHM6ICgpID0+IChwbGF0Zm9ybVBlcmZvcm1hbmNlLnRpbWVPcmlnaW4gKyBwbGF0Zm9ybVBlcmZvcm1hbmNlLm5vdygpKSAvIDEwMDAsCiAgICAgIH07CgovKioKICogUmV0dXJucyBhIHRpbWVzdGFtcCBpbiBzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoIHVzaW5nIHRoZSBEYXRlIEFQSS4KICovCmRhdGVUaW1lc3RhbXBTb3VyY2Uubm93U2Vjb25kcy5iaW5kKGRhdGVUaW1lc3RhbXBTb3VyY2UpOwoKLyoqCiAqIFJldHVybnMgYSB0aW1lc3RhbXAgaW4gc2Vjb25kcyBzaW5jZSB0aGUgVU5JWCBlcG9jaCB1c2luZyBlaXRoZXIgdGhlIFBlcmZvcm1hbmNlIG9yIERhdGUgQVBJcywgZGVwZW5kaW5nIG9uIHRoZQogKiBhdmFpbGFiaWxpdHkgb2YgdGhlIFBlcmZvcm1hbmNlIEFQSS4KICoKICogU2VlIGB1c2luZ1BlcmZvcm1hbmNlQVBJYCB0byB0ZXN0IHdoZXRoZXIgdGhlIFBlcmZvcm1hbmNlIEFQSSBpcyB1c2VkLgogKgogKiBCVUc6IE5vdGUgdGhhdCBiZWNhdXNlIG9mIGhvdyBicm93c2VycyBpbXBsZW1lbnQgdGhlIFBlcmZvcm1hbmNlIEFQSSwgdGhlIGNsb2NrIG1pZ2h0IHN0b3Agd2hlbiB0aGUgY29tcHV0ZXIgaXMKICogYXNsZWVwLiBUaGlzIGNyZWF0ZXMgYSBza2V3IGJldHdlZW4gYGRhdGVUaW1lc3RhbXBJblNlY29uZHNgIGFuZCBgdGltZXN0YW1wSW5TZWNvbmRzYC4gVGhlCiAqIHNrZXcgY2FuIGdyb3cgdG8gYXJiaXRyYXJ5IGFtb3VudHMgbGlrZSBkYXlzLCB3ZWVrcyBvciBtb250aHMuCiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8yNTkwLgogKi8KY29uc3QgdGltZXN0YW1wSW5TZWNvbmRzID0gdGltZXN0YW1wU291cmNlLm5vd1NlY29uZHMuYmluZCh0aW1lc3RhbXBTb3VyY2UpOwoKLyoqCiAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoLiBUaGlzIHZhbHVlIGlzIG9ubHkgdXNhYmxlIGluIGEgYnJvd3NlciwgYW5kIG9ubHkgd2hlbiB0aGUKICogcGVyZm9ybWFuY2UgQVBJIGlzIGF2YWlsYWJsZS4KICovCigoKSA9PiB7CiAgLy8gVW5mb3J0dW5hdGVseSBicm93c2VycyBtYXkgcmVwb3J0IGFuIGluYWNjdXJhdGUgdGltZSBvcmlnaW4gZGF0YSwgdGhyb3VnaCBlaXRoZXIgcGVyZm9ybWFuY2UudGltZU9yaWdpbiBvcgogIC8vIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQsIHdoaWNoIHJlc3VsdHMgaW4gcG9vciByZXN1bHRzIGluIHBlcmZvcm1hbmNlIGRhdGEuIFdlIG9ubHkgdHJlYXQgdGltZSBvcmlnaW4KICAvLyBkYXRhIGFzIHJlbGlhYmxlIGlmIHRoZXkgYXJlIHdpdGhpbiBhIHJlYXNvbmFibGUgdGhyZXNob2xkIG9mIHRoZSBjdXJyZW50IHRpbWUuCgogIGNvbnN0IHsgcGVyZm9ybWFuY2UgfSA9IFdJTkRPVzsKICBpZiAoIXBlcmZvcm1hbmNlIHx8ICFwZXJmb3JtYW5jZS5ub3cpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQoKICBjb25zdCB0aHJlc2hvbGQgPSAzNjAwICogMTAwMDsKICBjb25zdCBwZXJmb3JtYW5jZU5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwogIGNvbnN0IGRhdGVOb3cgPSBEYXRlLm5vdygpOwoKICAvLyBpZiB0aW1lT3JpZ2luIGlzbid0IGF2YWlsYWJsZSBzZXQgZGVsdGEgdG8gdGhyZXNob2xkIHNvIGl0IGlzbid0IHVzZWQKICBjb25zdCB0aW1lT3JpZ2luRGVsdGEgPSBwZXJmb3JtYW5jZS50aW1lT3JpZ2luCiAgICA/IE1hdGguYWJzKHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4gKyBwZXJmb3JtYW5jZU5vdyAtIGRhdGVOb3cpCiAgICA6IHRocmVzaG9sZDsKICBjb25zdCB0aW1lT3JpZ2luSXNSZWxpYWJsZSA9IHRpbWVPcmlnaW5EZWx0YSA8IHRocmVzaG9sZDsKCiAgLy8gV2hpbGUgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCBpcyBkZXByZWNhdGVkIGluIGZhdm9yIG9mIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4sIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4KICAvLyBpcyBub3QgYXMgd2lkZWx5IHN1cHBvcnRlZC4gTmFtZWx5LCBwZXJmb3JtYW5jZS50aW1lT3JpZ2luIGlzIHVuZGVmaW5lZCBpbiBTYWZhcmkgYXMgb2Ygd3JpdGluZy4KICAvLyBBbHNvIGFzIG9mIHdyaXRpbmcsIHBlcmZvcm1hbmNlLnRpbWluZyBpcyBub3QgYXZhaWxhYmxlIGluIFdlYiBXb3JrZXJzIGluIG1haW5zdHJlYW0gYnJvd3NlcnMsIHNvIGl0IGlzIG5vdCBhbHdheXMKICAvLyBhIHZhbGlkIGZhbGxiYWNrLiBJbiB0aGUgYWJzZW5jZSBvZiBhbiBpbml0aWFsIHRpbWUgcHJvdmlkZWQgYnkgdGhlIGJyb3dzZXIsIGZhbGxiYWNrIHRvIHRoZSBjdXJyZW50IHRpbWUgZnJvbSB0aGUKICAvLyBEYXRlIEFQSS4KICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb24KICBjb25zdCBuYXZpZ2F0aW9uU3RhcnQgPSBwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydDsKICBjb25zdCBoYXNOYXZpZ2F0aW9uU3RhcnQgPSB0eXBlb2YgbmF2aWdhdGlvblN0YXJ0ID09PSAnbnVtYmVyJzsKICAvLyBpZiBuYXZpZ2F0aW9uU3RhcnQgaXNuJ3QgYXZhaWxhYmxlIHNldCBkZWx0YSB0byB0aHJlc2hvbGQgc28gaXQgaXNuJ3QgdXNlZAogIGNvbnN0IG5hdmlnYXRpb25TdGFydERlbHRhID0gaGFzTmF2aWdhdGlvblN0YXJ0ID8gTWF0aC5hYnMobmF2aWdhdGlvblN0YXJ0ICsgcGVyZm9ybWFuY2VOb3cgLSBkYXRlTm93KSA6IHRocmVzaG9sZDsKICBjb25zdCBuYXZpZ2F0aW9uU3RhcnRJc1JlbGlhYmxlID0gbmF2aWdhdGlvblN0YXJ0RGVsdGEgPCB0aHJlc2hvbGQ7CgogIGlmICh0aW1lT3JpZ2luSXNSZWxpYWJsZSB8fCBuYXZpZ2F0aW9uU3RhcnRJc1JlbGlhYmxlKSB7CiAgICAvLyBVc2UgdGhlIG1vcmUgcmVsaWFibGUgdGltZSBvcmlnaW4KICAgIGlmICh0aW1lT3JpZ2luRGVsdGEgPD0gbmF2aWdhdGlvblN0YXJ0RGVsdGEpIHsKICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW47CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmF2aWdhdGlvblN0YXJ0OwogICAgfQogIH0KICByZXR1cm4gZGF0ZU5vdzsKfSkoKTsKCi8qKgogKiBDcmVhdGVzIGFuIGVudmVsb3BlLgogKiBNYWtlIHN1cmUgdG8gYWx3YXlzIGV4cGxpY2l0bHkgcHJvdmlkZSB0aGUgZ2VuZXJpYyB0byB0aGlzIGZ1bmN0aW9uCiAqIHNvIHRoYXQgdGhlIGVudmVsb3BlIHR5cGVzIHJlc29sdmUgY29ycmVjdGx5LgogKi8KZnVuY3Rpb24gY3JlYXRlRW52ZWxvcGUoaGVhZGVycywgaXRlbXMgPSBbXSkgewogIHJldHVybiBbaGVhZGVycywgaXRlbXNdIDsKfQoKLyoqCiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIGxvb3AgdGhyb3VnaCB0aGUgaXRlbXMgYW5kIGl0ZW0gdHlwZXMgb2YgYW4gZW52ZWxvcGUuCiAqIChUaGlzIGZ1bmN0aW9uIHdhcyBtb3N0bHkgY3JlYXRlZCBiZWNhdXNlIHdvcmtpbmcgd2l0aCBlbnZlbG9wZSB0eXBlcyBpcyBwYWluZnVsIGF0IHRoZSBtb21lbnQpCiAqCiAqIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWUsIHRoZSByZXN0IG9mIHRoZSBpdGVtcyB3aWxsIGJlIHNraXBwZWQuCiAqLwpmdW5jdGlvbiBmb3JFYWNoRW52ZWxvcGVJdGVtKAogIGVudmVsb3BlLAogIGNhbGxiYWNrLAopIHsKICBjb25zdCBlbnZlbG9wZUl0ZW1zID0gZW52ZWxvcGVbMV07CgogIGZvciAoY29uc3QgZW52ZWxvcGVJdGVtIG9mIGVudmVsb3BlSXRlbXMpIHsKICAgIGNvbnN0IGVudmVsb3BlSXRlbVR5cGUgPSBlbnZlbG9wZUl0ZW1bMF0udHlwZTsKICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxiYWNrKGVudmVsb3BlSXRlbSwgZW52ZWxvcGVJdGVtVHlwZSk7CgogICAgaWYgKHJlc3VsdCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIHJldHVybiBmYWxzZTsKfQoKLyoqCiAqIEVuY29kZSBhIHN0cmluZyB0byBVVEY4LgogKi8KZnVuY3Rpb24gZW5jb2RlVVRGOChpbnB1dCwgdGV4dEVuY29kZXIpIHsKICBjb25zdCB1dGY4ID0gdGV4dEVuY29kZXIgfHwgbmV3IFRleHRFbmNvZGVyKCk7CiAgcmV0dXJuIHV0ZjguZW5jb2RlKGlucHV0KTsKfQoKLyoqCiAqIFNlcmlhbGl6ZXMgYW4gZW52ZWxvcGUuCiAqLwpmdW5jdGlvbiBzZXJpYWxpemVFbnZlbG9wZShlbnZlbG9wZSwgdGV4dEVuY29kZXIpIHsKICBjb25zdCBbZW52SGVhZGVycywgaXRlbXNdID0gZW52ZWxvcGU7CgogIC8vIEluaXRpYWxseSB3ZSBjb25zdHJ1Y3Qgb3VyIGVudmVsb3BlIGFzIGEgc3RyaW5nIGFuZCBvbmx5IGNvbnZlcnQgdG8gYmluYXJ5IGNodW5rcyBpZiB3ZSBlbmNvdW50ZXIgYmluYXJ5IGRhdGEKICBsZXQgcGFydHMgPSBKU09OLnN0cmluZ2lmeShlbnZIZWFkZXJzKTsKCiAgZnVuY3Rpb24gYXBwZW5kKG5leHQpIHsKICAgIGlmICh0eXBlb2YgcGFydHMgPT09ICdzdHJpbmcnKSB7CiAgICAgIHBhcnRzID0gdHlwZW9mIG5leHQgPT09ICdzdHJpbmcnID8gcGFydHMgKyBuZXh0IDogW2VuY29kZVVURjgocGFydHMsIHRleHRFbmNvZGVyKSwgbmV4dF07CiAgICB9IGVsc2UgewogICAgICBwYXJ0cy5wdXNoKHR5cGVvZiBuZXh0ID09PSAnc3RyaW5nJyA/IGVuY29kZVVURjgobmV4dCwgdGV4dEVuY29kZXIpIDogbmV4dCk7CiAgICB9CiAgfQoKICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHsKICAgIGNvbnN0IFtpdGVtSGVhZGVycywgcGF5bG9hZF0gPSBpdGVtOwoKICAgIGFwcGVuZChgXG4ke0pTT04uc3RyaW5naWZ5KGl0ZW1IZWFkZXJzKX1cbmApOwoKICAgIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ3N0cmluZycgfHwgcGF5bG9hZCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHsKICAgICAgYXBwZW5kKHBheWxvYWQpOwogICAgfSBlbHNlIHsKICAgICAgbGV0IHN0cmluZ2lmaWVkUGF5bG9hZDsKICAgICAgdHJ5IHsKICAgICAgICBzdHJpbmdpZmllZFBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8vIEluIGNhc2UsIGRlc3BpdGUgYWxsIG91ciBlZmZvcnRzIHRvIGtlZXAgYHBheWxvYWRgIGNpcmN1bGFyLWRlcGVuZGVuY3ktZnJlZSwgYEpTT04uc3RyaW5pZnkoKWAgc3RpbGwKICAgICAgICAvLyBmYWlscywgd2UgdHJ5IGFnYWluIGFmdGVyIG5vcm1hbGl6aW5nIGl0IGFnYWluIHdpdGggaW5maW5pdGUgbm9ybWFsaXphdGlvbiBkZXB0aC4gVGhpcyBvZiBjb3Vyc2UgaGFzIGEKICAgICAgICAvLyBwZXJmb3JtYW5jZSBpbXBhY3QgYnV0IGluIHRoaXMgY2FzZSBhIHBlcmZvcm1hbmNlIGhpdCBpcyBiZXR0ZXIgdGhhbiB0aHJvd2luZy4KICAgICAgICBzdHJpbmdpZmllZFBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShub3JtYWxpemUocGF5bG9hZCkpOwogICAgICB9CiAgICAgIGFwcGVuZChzdHJpbmdpZmllZFBheWxvYWQpOwogICAgfQogIH0KCiAgcmV0dXJuIHR5cGVvZiBwYXJ0cyA9PT0gJ3N0cmluZycgPyBwYXJ0cyA6IGNvbmNhdEJ1ZmZlcnMocGFydHMpOwp9CgpmdW5jdGlvbiBjb25jYXRCdWZmZXJzKGJ1ZmZlcnMpIHsKICBjb25zdCB0b3RhbExlbmd0aCA9IGJ1ZmZlcnMucmVkdWNlKChhY2MsIGJ1ZikgPT4gYWNjICsgYnVmLmxlbmd0aCwgMCk7CgogIGNvbnN0IG1lcmdlZCA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTsKICBsZXQgb2Zmc2V0ID0gMDsKICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7CiAgICBtZXJnZWQuc2V0KGJ1ZmZlciwgb2Zmc2V0KTsKICAgIG9mZnNldCArPSBidWZmZXIubGVuZ3RoOwogIH0KCiAgcmV0dXJuIG1lcmdlZDsKfQoKY29uc3QgSVRFTV9UWVBFX1RPX0RBVEFfQ0FURUdPUllfTUFQID0gewogIHNlc3Npb246ICdzZXNzaW9uJywKICBzZXNzaW9uczogJ3Nlc3Npb24nLAogIGF0dGFjaG1lbnQ6ICdhdHRhY2htZW50JywKICB0cmFuc2FjdGlvbjogJ3RyYW5zYWN0aW9uJywKICBldmVudDogJ2Vycm9yJywKICBjbGllbnRfcmVwb3J0OiAnaW50ZXJuYWwnLAogIHVzZXJfcmVwb3J0OiAnZGVmYXVsdCcsCiAgcHJvZmlsZTogJ3Byb2ZpbGUnLAogIHJlcGxheV9ldmVudDogJ3JlcGxheScsCiAgcmVwbGF5X3JlY29yZGluZzogJ3JlcGxheScsCiAgY2hlY2tfaW46ICdtb25pdG9yJywKICBmZWVkYmFjazogJ2ZlZWRiYWNrJywKICAvLyBUT0RPOiBUaGlzIGlzIGEgdGVtcG9yYXJ5IHdvcmthcm91bmQgdW50aWwgd2UgaGF2ZSBhIHByb3BlciBkYXRhIGNhdGVnb3J5IGZvciBtZXRyaWNzCiAgc3RhdHNkOiAndW5rbm93bicsCn07CgovKioKICogTWFwcyB0aGUgdHlwZSBvZiBhbiBlbnZlbG9wZSBpdGVtIHRvIGEgZGF0YSBjYXRlZ29yeS4KICovCmZ1bmN0aW9uIGVudmVsb3BlSXRlbVR5cGVUb0RhdGFDYXRlZ29yeSh0eXBlKSB7CiAgcmV0dXJuIElURU1fVFlQRV9UT19EQVRBX0NBVEVHT1JZX01BUFt0eXBlXTsKfQoKLyoqIEV4dHJhY3RzIHRoZSBtaW5pbWFsIFNESyBpbmZvIGZyb20gZnJvbSB0aGUgbWV0YWRhdGEgb3IgYW4gZXZlbnRzICovCmZ1bmN0aW9uIGdldFNka01ldGFkYXRhRm9yRW52ZWxvcGVIZWFkZXIobWV0YWRhdGFPckV2ZW50KSB7CiAgaWYgKCFtZXRhZGF0YU9yRXZlbnQgfHwgIW1ldGFkYXRhT3JFdmVudC5zZGspIHsKICAgIHJldHVybjsKICB9CiAgY29uc3QgeyBuYW1lLCB2ZXJzaW9uIH0gPSBtZXRhZGF0YU9yRXZlbnQuc2RrOwogIHJldHVybiB7IG5hbWUsIHZlcnNpb24gfTsKfQoKLyoqCiAqIENyZWF0ZXMgZXZlbnQgZW52ZWxvcGUgaGVhZGVycywgYmFzZWQgb24gZXZlbnQsIHNkayBpbmZvIGFuZCB0dW5uZWwKICogTm90ZTogVGhpcyBmdW5jdGlvbiB3YXMgZXh0cmFjdGVkIGZyb20gdGhlIGNvcmUgcGFja2FnZSB0byBtYWtlIGl0IGF2YWlsYWJsZSBpbiBSZXBsYXkKICovCmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RW52ZWxvcGVIZWFkZXJzKAogIGV2ZW50LAogIHNka0luZm8sCiAgdHVubmVsLAogIGRzbiwKKSB7CiAgY29uc3QgZHluYW1pY1NhbXBsaW5nQ29udGV4dCA9IGV2ZW50LnNka1Byb2Nlc3NpbmdNZXRhZGF0YSAmJiBldmVudC5zZGtQcm9jZXNzaW5nTWV0YWRhdGEuZHluYW1pY1NhbXBsaW5nQ29udGV4dDsKICByZXR1cm4gewogICAgZXZlbnRfaWQ6IGV2ZW50LmV2ZW50X2lkICwKICAgIHNlbnRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgIC4uLihzZGtJbmZvICYmIHsgc2RrOiBzZGtJbmZvIH0pLAogICAgLi4uKCEhdHVubmVsICYmIGRzbiAmJiB7IGRzbjogZHNuVG9TdHJpbmcoZHNuKSB9KSwKICAgIC4uLihkeW5hbWljU2FtcGxpbmdDb250ZXh0ICYmIHsKICAgICAgdHJhY2U6IGRyb3BVbmRlZmluZWRLZXlzKHsgLi4uZHluYW1pY1NhbXBsaW5nQ29udGV4dCB9KSwKICAgIH0pLAogIH07Cn0KCi8vIEludGVudGlvbmFsbHkga2VlcGluZyB0aGUga2V5IGJyb2FkLCBhcyB3ZSBkb24ndCBrbm93IGZvciBzdXJlIHdoYXQgcmF0ZSBsaW1pdCBoZWFkZXJzIGdldCByZXR1cm5lZCBmcm9tIGJhY2tlbmQKCmNvbnN0IERFRkFVTFRfUkVUUllfQUZURVIgPSA2MCAqIDEwMDA7IC8vIDYwIHNlY29uZHMKCi8qKgogKiBFeHRyYWN0cyBSZXRyeS1BZnRlciB2YWx1ZSBmcm9tIHRoZSByZXF1ZXN0IGhlYWRlciBvciByZXR1cm5zIGRlZmF1bHQgdmFsdWUKICogQHBhcmFtIGhlYWRlciBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgJ1JldHJ5LUFmdGVyJyBoZWFkZXIKICogQHBhcmFtIG5vdyBjdXJyZW50IHVuaXggdGltZXN0YW1wCiAqCiAqLwpmdW5jdGlvbiBwYXJzZVJldHJ5QWZ0ZXJIZWFkZXIoaGVhZGVyLCBub3cgPSBEYXRlLm5vdygpKSB7CiAgY29uc3QgaGVhZGVyRGVsYXkgPSBwYXJzZUludChgJHtoZWFkZXJ9YCwgMTApOwogIGlmICghaXNOYU4oaGVhZGVyRGVsYXkpKSB7CiAgICByZXR1cm4gaGVhZGVyRGVsYXkgKiAxMDAwOwogIH0KCiAgY29uc3QgaGVhZGVyRGF0ZSA9IERhdGUucGFyc2UoYCR7aGVhZGVyfWApOwogIGlmICghaXNOYU4oaGVhZGVyRGF0ZSkpIHsKICAgIHJldHVybiBoZWFkZXJEYXRlIC0gbm93OwogIH0KCiAgcmV0dXJuIERFRkFVTFRfUkVUUllfQUZURVI7Cn0KCi8qKgogKiBHZXRzIHRoZSB0aW1lIHRoYXQgdGhlIGdpdmVuIGNhdGVnb3J5IGlzIGRpc2FibGVkIHVudGlsIGZvciByYXRlIGxpbWl0aW5nLgogKiBJbiBjYXNlIG5vIGNhdGVnb3J5LXNwZWNpZmljIGxpbWl0IGlzIHNldCBidXQgYSBnZW5lcmFsIHJhdGUgbGltaXQgYWNyb3NzIGFsbCBjYXRlZ29yaWVzIGlzIGFjdGl2ZSwKICogdGhhdCB0aW1lIGlzIHJldHVybmVkLgogKgogKiBAcmV0dXJuIHRoZSB0aW1lIGluIG1zIHRoYXQgdGhlIGNhdGVnb3J5IGlzIGRpc2FibGVkIHVudGlsIG9yIDAgaWYgdGhlcmUncyBubyBhY3RpdmUgcmF0ZSBsaW1pdC4KICovCmZ1bmN0aW9uIGRpc2FibGVkVW50aWwobGltaXRzLCBjYXRlZ29yeSkgewogIHJldHVybiBsaW1pdHNbY2F0ZWdvcnldIHx8IGxpbWl0cy5hbGwgfHwgMDsKfQoKLyoqCiAqIENoZWNrcyBpZiBhIGNhdGVnb3J5IGlzIHJhdGUgbGltaXRlZAogKi8KZnVuY3Rpb24gaXNSYXRlTGltaXRlZChsaW1pdHMsIGNhdGVnb3J5LCBub3cgPSBEYXRlLm5vdygpKSB7CiAgcmV0dXJuIGRpc2FibGVkVW50aWwobGltaXRzLCBjYXRlZ29yeSkgPiBub3c7Cn0KCi8qKgogKiBVcGRhdGUgcmF0ZWxpbWl0cyBmcm9tIGluY29taW5nIGhlYWRlcnMuCiAqCiAqIEByZXR1cm4gdGhlIHVwZGF0ZWQgUmF0ZUxpbWl0cyBvYmplY3QuCiAqLwpmdW5jdGlvbiB1cGRhdGVSYXRlTGltaXRzKAogIGxpbWl0cywKICB7IHN0YXR1c0NvZGUsIGhlYWRlcnMgfSwKICBub3cgPSBEYXRlLm5vdygpLAopIHsKICBjb25zdCB1cGRhdGVkUmF0ZUxpbWl0cyA9IHsKICAgIC4uLmxpbWl0cywKICB9OwoKICAvLyAiVGhlIG5hbWUgaXMgY2FzZS1pbnNlbnNpdGl2ZS4iCiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hlYWRlcnMvZ2V0CiAgY29uc3QgcmF0ZUxpbWl0SGVhZGVyID0gaGVhZGVycyAmJiBoZWFkZXJzWyd4LXNlbnRyeS1yYXRlLWxpbWl0cyddOwogIGNvbnN0IHJldHJ5QWZ0ZXJIZWFkZXIgPSBoZWFkZXJzICYmIGhlYWRlcnNbJ3JldHJ5LWFmdGVyJ107CgogIGlmIChyYXRlTGltaXRIZWFkZXIpIHsKICAgIC8qKgogICAgICogcmF0ZSBsaW1pdCBoZWFkZXJzIGFyZSBvZiB0aGUgZm9ybQogICAgICogICAgIDxoZWFkZXI+LDxoZWFkZXI+LC4uCiAgICAgKiB3aGVyZSBlYWNoIDxoZWFkZXI+IGlzIG9mIHRoZSBmb3JtCiAgICAgKiAgICAgPHJldHJ5X2FmdGVyPjogPGNhdGVnb3JpZXM+OiA8c2NvcGU+OiA8cmVhc29uX2NvZGU+CiAgICAgKiB3aGVyZQogICAgICogICAgIDxyZXRyeV9hZnRlcj4gaXMgYSBkZWxheSBpbiBzZWNvbmRzCiAgICAgKiAgICAgPGNhdGVnb3JpZXM+IGlzIHRoZSBldmVudCB0eXBlKHMpIChlcnJvciwgdHJhbnNhY3Rpb24sIGV0YykgYmVpbmcgcmF0ZSBsaW1pdGVkIGFuZCBpcyBvZiB0aGUgZm9ybQogICAgICogICAgICAgICA8Y2F0ZWdvcnk+OzxjYXRlZ29yeT47Li4uCiAgICAgKiAgICAgPHNjb3BlPiBpcyB3aGF0J3MgYmVpbmcgbGltaXRlZCAob3JnLCBwcm9qZWN0LCBvciBrZXkpIC0gaWdub3JlZCBieSBTREsKICAgICAqICAgICA8cmVhc29uX2NvZGU+IGlzIGFuIGFyYml0cmFyeSBzdHJpbmcgbGlrZSAib3JnX3F1b3RhIiAtIGlnbm9yZWQgYnkgU0RLCiAgICAgKi8KICAgIGZvciAoY29uc3QgbGltaXQgb2YgcmF0ZUxpbWl0SGVhZGVyLnRyaW0oKS5zcGxpdCgnLCcpKSB7CiAgICAgIGNvbnN0IFtyZXRyeUFmdGVyLCBjYXRlZ29yaWVzXSA9IGxpbWl0LnNwbGl0KCc6JywgMik7CiAgICAgIGNvbnN0IGhlYWRlckRlbGF5ID0gcGFyc2VJbnQocmV0cnlBZnRlciwgMTApOwogICAgICBjb25zdCBkZWxheSA9ICghaXNOYU4oaGVhZGVyRGVsYXkpID8gaGVhZGVyRGVsYXkgOiA2MCkgKiAxMDAwOyAvLyA2MHNlYyBkZWZhdWx0CiAgICAgIGlmICghY2F0ZWdvcmllcykgewogICAgICAgIHVwZGF0ZWRSYXRlTGltaXRzLmFsbCA9IG5vdyArIGRlbGF5OwogICAgICB9IGVsc2UgewogICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcy5zcGxpdCgnOycpKSB7CiAgICAgICAgICB1cGRhdGVkUmF0ZUxpbWl0c1tjYXRlZ29yeV0gPSBub3cgKyBkZWxheTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9IGVsc2UgaWYgKHJldHJ5QWZ0ZXJIZWFkZXIpIHsKICAgIHVwZGF0ZWRSYXRlTGltaXRzLmFsbCA9IG5vdyArIHBhcnNlUmV0cnlBZnRlckhlYWRlcihyZXRyeUFmdGVySGVhZGVyLCBub3cpOwogIH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNDI5KSB7CiAgICB1cGRhdGVkUmF0ZUxpbWl0cy5hbGwgPSBub3cgKyA2MCAqIDEwMDA7CiAgfQoKICByZXR1cm4gdXBkYXRlZFJhdGVMaW1pdHM7Cn0KCi8qKgogKiBBIG5vZGUuanMgd2F0Y2hkb2cgdGltZXIKICogQHBhcmFtIHBvbGxJbnRlcnZhbCBUaGUgaW50ZXJ2YWwgdGhhdCB3ZSBleHBlY3QgdG8gZ2V0IHBvbGxlZCBhdAogKiBAcGFyYW0gYW5yVGhyZXNob2xkIFRoZSB0aHJlc2hvbGQgZm9yIHdoZW4gd2UgY29uc2lkZXIgQU5SCiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gY2FsbCBmb3IgQU5SCiAqIEByZXR1cm5zIEFuIG9iamVjdCB3aXRoIGBwb2xsYCBhbmQgYGVuYWJsZWRgIGZ1bmN0aW9ucyB7QGxpbmsgV2F0Y2hkb2dSZXR1cm59CiAqLwpmdW5jdGlvbiB3YXRjaGRvZ1RpbWVyKAogIGNyZWF0ZVRpbWVyLAogIHBvbGxJbnRlcnZhbCwKICBhbnJUaHJlc2hvbGQsCiAgY2FsbGJhY2ssCikgewogIGNvbnN0IHRpbWVyID0gY3JlYXRlVGltZXIoKTsKICBsZXQgdHJpZ2dlcmVkID0gZmFsc2U7CiAgbGV0IGVuYWJsZWQgPSB0cnVlOwoKICBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICBjb25zdCBkaWZmTXMgPSB0aW1lci5nZXRUaW1lTXMoKTsKCiAgICBpZiAodHJpZ2dlcmVkID09PSBmYWxzZSAmJiBkaWZmTXMgPiBwb2xsSW50ZXJ2YWwgKyBhbnJUaHJlc2hvbGQpIHsKICAgICAgdHJpZ2dlcmVkID0gdHJ1ZTsKICAgICAgaWYgKGVuYWJsZWQpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9CgogICAgaWYgKGRpZmZNcyA8IHBvbGxJbnRlcnZhbCArIGFuclRocmVzaG9sZCkgewogICAgICB0cmlnZ2VyZWQgPSBmYWxzZTsKICAgIH0KICB9LCAyMCk7CgogIHJldHVybiB7CiAgICBwb2xsOiAoKSA9PiB7CiAgICAgIHRpbWVyLnJlc2V0KCk7CiAgICB9LAogICAgZW5hYmxlZDogKHN0YXRlKSA9PiB7CiAgICAgIGVuYWJsZWQgPSBzdGF0ZTsKICAgIH0sCiAgfTsKfQoKLy8gdHlwZXMgY29waWVkIGZyb20gaW5zcGVjdG9yLmQudHMKCi8qKgogKiBDb252ZXJ0cyBEZWJ1Z2dlci5DYWxsRnJhbWUgdG8gU2VudHJ5IFN0YWNrRnJhbWUKICovCmZ1bmN0aW9uIGNhbGxGcmFtZVRvU3RhY2tGcmFtZSgKICBmcmFtZSwKICB1cmwsCiAgZ2V0TW9kdWxlRnJvbUZpbGVuYW1lLAopIHsKICBjb25zdCBmaWxlbmFtZSA9IHVybCA/IHVybC5yZXBsYWNlKC9eZmlsZTpcL1wvLywgJycpIDogdW5kZWZpbmVkOwoKICAvLyBDYWxsRnJhbWUgcm93L2NvbCBhcmUgMCBiYXNlZCwgd2hlcmVhcyBTdGFja0ZyYW1lIGFyZSAxIGJhc2VkCiAgY29uc3QgY29sbm8gPSBmcmFtZS5sb2NhdGlvbi5jb2x1bW5OdW1iZXIgPyBmcmFtZS5sb2NhdGlvbi5jb2x1bW5OdW1iZXIgKyAxIDogdW5kZWZpbmVkOwogIGNvbnN0IGxpbmVubyA9IGZyYW1lLmxvY2F0aW9uLmxpbmVOdW1iZXIgPyBmcmFtZS5sb2NhdGlvbi5saW5lTnVtYmVyICsgMSA6IHVuZGVmaW5lZDsKCiAgcmV0dXJuIGRyb3BVbmRlZmluZWRLZXlzKHsKICAgIGZpbGVuYW1lLAogICAgbW9kdWxlOiBnZXRNb2R1bGVGcm9tRmlsZW5hbWUoZmlsZW5hbWUpLAogICAgZnVuY3Rpb246IGZyYW1lLmZ1bmN0aW9uTmFtZSB8fCAnPycsCiAgICBjb2xubywKICAgIGxpbmVubywKICAgIGluX2FwcDogZmlsZW5hbWUgPyBmaWxlbmFtZUlzSW5BcHAoZmlsZW5hbWUpIDogdW5kZWZpbmVkLAogIH0pOwp9CgovKioKICogVGhpcyBzZXJ2ZXMgYXMgYSBidWlsZCB0aW1lIGZsYWcgdGhhdCB3aWxsIGJlIHRydWUgYnkgZGVmYXVsdCwgYnV0IGZhbHNlIGluIG5vbi1kZWJ1ZyBidWlsZHMgb3IgaWYgdXNlcnMgcmVwbGFjZSBgX19TRU5UUllfREVCVUdfX2AgaW4gdGhlaXIgZ2VuZXJhdGVkIGNvZGUuCiAqCiAqIEFUVEVOVElPTjogVGhpcyBjb25zdGFudCBtdXN0IG5ldmVyIGNyb3NzIHBhY2thZ2UgYm91bmRhcmllcyAoaS5lLiBiZSBleHBvcnRlZCkgdG8gZ3VhcmFudGVlIHRoYXQgaXQgY2FuIGJlIHVzZWQgZm9yIHRyZWUgc2hha2luZy4KICovCmNvbnN0IERFQlVHX0JVSUxEID0gKHR5cGVvZiBfX1NFTlRSWV9ERUJVR19fID09PSAndW5kZWZpbmVkJyB8fCBfX1NFTlRSWV9ERUJVR19fKTsKCi8qKgogKiBDcmVhdGVzIGEgbmV3IGBTZXNzaW9uYCBvYmplY3QgYnkgc2V0dGluZyBjZXJ0YWluIGRlZmF1bHQgcGFyYW1ldGVycy4gSWYgb3B0aW9uYWwgQHBhcmFtIGNvbnRleHQKICogaXMgcGFzc2VkLCB0aGUgcGFzc2VkIHByb3BlcnRpZXMgYXJlIGFwcGxpZWQgdG8gdGhlIHNlc3Npb24gb2JqZWN0LgogKgogKiBAcGFyYW0gY29udGV4dCAob3B0aW9uYWwpIGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBiZSBhcHBsaWVkIHRvIHRoZSByZXR1cm5lZCBzZXNzaW9uIG9iamVjdAogKgogKiBAcmV0dXJucyBhIG5ldyBgU2Vzc2lvbmAgb2JqZWN0CiAqLwpmdW5jdGlvbiBtYWtlU2Vzc2lvbihjb250ZXh0KSB7CiAgLy8gQm90aCB0aW1lc3RhbXAgYW5kIHN0YXJ0ZWQgYXJlIGluIHNlY29uZHMgc2luY2UgdGhlIFVOSVggZXBvY2guCiAgY29uc3Qgc3RhcnRpbmdUaW1lID0gdGltZXN0YW1wSW5TZWNvbmRzKCk7CgogIGNvbnN0IHNlc3Npb24gPSB7CiAgICBzaWQ6IHV1aWQ0KCksCiAgICBpbml0OiB0cnVlLAogICAgdGltZXN0YW1wOiBzdGFydGluZ1RpbWUsCiAgICBzdGFydGVkOiBzdGFydGluZ1RpbWUsCiAgICBkdXJhdGlvbjogMCwKICAgIHN0YXR1czogJ29rJywKICAgIGVycm9yczogMCwKICAgIGlnbm9yZUR1cmF0aW9uOiBmYWxzZSwKICAgIHRvSlNPTjogKCkgPT4gc2Vzc2lvblRvSlNPTihzZXNzaW9uKSwKICB9OwoKICBpZiAoY29udGV4dCkgewogICAgdXBkYXRlU2Vzc2lvbihzZXNzaW9uLCBjb250ZXh0KTsKICB9CgogIHJldHVybiBzZXNzaW9uOwp9CgovKioKICogVXBkYXRlcyBhIHNlc3Npb24gb2JqZWN0IHdpdGggdGhlIHByb3BlcnRpZXMgcGFzc2VkIGluIHRoZSBjb250ZXh0LgogKgogKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBtdXRhdGVzIHRoZSBwYXNzZWQgb2JqZWN0IGFuZCByZXR1cm5zIHZvaWQuCiAqIChIYWQgdG8gZG8gdGhpcyBpbnN0ZWFkIG9mIHJldHVybmluZyBhIG5ldyBhbmQgdXBkYXRlZCBzZXNzaW9uIGJlY2F1c2UgY2xvc2luZyBhbmQgc2VuZGluZyBhIHNlc3Npb24KICogbWFrZXMgYW4gdXBkYXRlIHRvIHRoZSBzZXNzaW9uIGFmdGVyIGl0IHdhcyBwYXNzZWQgdG8gdGhlIHNlbmRpbmcgbG9naWMuCiAqIEBzZWUgQmFzZUNsaWVudC5jYXB0dXJlU2Vzc2lvbiApCiAqCiAqIEBwYXJhbSBzZXNzaW9uIHRoZSBgU2Vzc2lvbmAgdG8gdXBkYXRlCiAqIEBwYXJhbSBjb250ZXh0IHRoZSBgU2Vzc2lvbkNvbnRleHRgIGhvbGRpbmcgdGhlIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgdXBkYXRlZCBpbiBAcGFyYW0gc2Vzc2lvbgogKi8KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHkKZnVuY3Rpb24gdXBkYXRlU2Vzc2lvbihzZXNzaW9uLCBjb250ZXh0ID0ge30pIHsKICBpZiAoY29udGV4dC51c2VyKSB7CiAgICBpZiAoIXNlc3Npb24uaXBBZGRyZXNzICYmIGNvbnRleHQudXNlci5pcF9hZGRyZXNzKSB7CiAgICAgIHNlc3Npb24uaXBBZGRyZXNzID0gY29udGV4dC51c2VyLmlwX2FkZHJlc3M7CiAgICB9CgogICAgaWYgKCFzZXNzaW9uLmRpZCAmJiAhY29udGV4dC5kaWQpIHsKICAgICAgc2Vzc2lvbi5kaWQgPSBjb250ZXh0LnVzZXIuaWQgfHwgY29udGV4dC51c2VyLmVtYWlsIHx8IGNvbnRleHQudXNlci51c2VybmFtZTsKICAgIH0KICB9CgogIHNlc3Npb24udGltZXN0YW1wID0gY29udGV4dC50aW1lc3RhbXAgfHwgdGltZXN0YW1wSW5TZWNvbmRzKCk7CgogIGlmIChjb250ZXh0LmFibm9ybWFsX21lY2hhbmlzbSkgewogICAgc2Vzc2lvbi5hYm5vcm1hbF9tZWNoYW5pc20gPSBjb250ZXh0LmFibm9ybWFsX21lY2hhbmlzbTsKICB9CgogIGlmIChjb250ZXh0Lmlnbm9yZUR1cmF0aW9uKSB7CiAgICBzZXNzaW9uLmlnbm9yZUR1cmF0aW9uID0gY29udGV4dC5pZ25vcmVEdXJhdGlvbjsKICB9CiAgaWYgKGNvbnRleHQuc2lkKSB7CiAgICAvLyBHb29kIGVub3VnaCB1dWlkIHZhbGlkYXRpb24uIOKAlCBLYW1pbAogICAgc2Vzc2lvbi5zaWQgPSBjb250ZXh0LnNpZC5sZW5ndGggPT09IDMyID8gY29udGV4dC5zaWQgOiB1dWlkNCgpOwogIH0KICBpZiAoY29udGV4dC5pbml0ICE9PSB1bmRlZmluZWQpIHsKICAgIHNlc3Npb24uaW5pdCA9IGNvbnRleHQuaW5pdDsKICB9CiAgaWYgKCFzZXNzaW9uLmRpZCAmJiBjb250ZXh0LmRpZCkgewogICAgc2Vzc2lvbi5kaWQgPSBgJHtjb250ZXh0LmRpZH1gOwogIH0KICBpZiAodHlwZW9mIGNvbnRleHQuc3RhcnRlZCA9PT0gJ251bWJlcicpIHsKICAgIHNlc3Npb24uc3RhcnRlZCA9IGNvbnRleHQuc3RhcnRlZDsKICB9CiAgaWYgKHNlc3Npb24uaWdub3JlRHVyYXRpb24pIHsKICAgIHNlc3Npb24uZHVyYXRpb24gPSB1bmRlZmluZWQ7CiAgfSBlbHNlIGlmICh0eXBlb2YgY29udGV4dC5kdXJhdGlvbiA9PT0gJ251bWJlcicpIHsKICAgIHNlc3Npb24uZHVyYXRpb24gPSBjb250ZXh0LmR1cmF0aW9uOwogIH0gZWxzZSB7CiAgICBjb25zdCBkdXJhdGlvbiA9IHNlc3Npb24udGltZXN0YW1wIC0gc2Vzc2lvbi5zdGFydGVkOwogICAgc2Vzc2lvbi5kdXJhdGlvbiA9IGR1cmF0aW9uID49IDAgPyBkdXJhdGlvbiA6IDA7CiAgfQogIGlmIChjb250ZXh0LnJlbGVhc2UpIHsKICAgIHNlc3Npb24ucmVsZWFzZSA9IGNvbnRleHQucmVsZWFzZTsKICB9CiAgaWYgKGNvbnRleHQuZW52aXJvbm1lbnQpIHsKICAgIHNlc3Npb24uZW52aXJvbm1lbnQgPSBjb250ZXh0LmVudmlyb25tZW50OwogIH0KICBpZiAoIXNlc3Npb24uaXBBZGRyZXNzICYmIGNvbnRleHQuaXBBZGRyZXNzKSB7CiAgICBzZXNzaW9uLmlwQWRkcmVzcyA9IGNvbnRleHQuaXBBZGRyZXNzOwogIH0KICBpZiAoIXNlc3Npb24udXNlckFnZW50ICYmIGNvbnRleHQudXNlckFnZW50KSB7CiAgICBzZXNzaW9uLnVzZXJBZ2VudCA9IGNvbnRleHQudXNlckFnZW50OwogIH0KICBpZiAodHlwZW9mIGNvbnRleHQuZXJyb3JzID09PSAnbnVtYmVyJykgewogICAgc2Vzc2lvbi5lcnJvcnMgPSBjb250ZXh0LmVycm9yczsKICB9CiAgaWYgKGNvbnRleHQuc3RhdHVzKSB7CiAgICBzZXNzaW9uLnN0YXR1cyA9IGNvbnRleHQuc3RhdHVzOwogIH0KfQoKLyoqCiAqIFNlcmlhbGl6ZXMgYSBwYXNzZWQgc2Vzc2lvbiBvYmplY3QgdG8gYSBKU09OIG9iamVjdCB3aXRoIGEgc2xpZ2h0bHkgZGlmZmVyZW50IHN0cnVjdHVyZS4KICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSB0aGUgU2VudHJ5IGJhY2tlbmQgcmVxdWlyZXMgYSBzbGlnaHRseSBkaWZmZXJlbnQgc2NoZW1hIG9mIGEgc2Vzc2lvbgogKiB0aGFuIHRoZSBvbmUgdGhlIEpTIFNES3MgdXNlIGludGVybmFsbHkuCiAqCiAqIEBwYXJhbSBzZXNzaW9uIHRoZSBzZXNzaW9uIHRvIGJlIGNvbnZlcnRlZAogKgogKiBAcmV0dXJucyBhIEpTT04gb2JqZWN0IG9mIHRoZSBwYXNzZWQgc2Vzc2lvbgogKi8KZnVuY3Rpb24gc2Vzc2lvblRvSlNPTihzZXNzaW9uKSB7CiAgcmV0dXJuIGRyb3BVbmRlZmluZWRLZXlzKHsKICAgIHNpZDogYCR7c2Vzc2lvbi5zaWR9YCwKICAgIGluaXQ6IHNlc3Npb24uaW5pdCwKICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHNlYyBpcyBjb252ZXJ0ZWQgdG8gbXMgZm9yIGRhdGUgY29uc3RydWN0b3IKICAgIHN0YXJ0ZWQ6IG5ldyBEYXRlKHNlc3Npb24uc3RhcnRlZCAqIDEwMDApLnRvSVNPU3RyaW5nKCksCiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKHNlc3Npb24udGltZXN0YW1wICogMTAwMCkudG9JU09TdHJpbmcoKSwKICAgIHN0YXR1czogc2Vzc2lvbi5zdGF0dXMsCiAgICBlcnJvcnM6IHNlc3Npb24uZXJyb3JzLAogICAgZGlkOiB0eXBlb2Ygc2Vzc2lvbi5kaWQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBzZXNzaW9uLmRpZCA9PT0gJ3N0cmluZycgPyBgJHtzZXNzaW9uLmRpZH1gIDogdW5kZWZpbmVkLAogICAgZHVyYXRpb246IHNlc3Npb24uZHVyYXRpb24sCiAgICBhYm5vcm1hbF9tZWNoYW5pc206IHNlc3Npb24uYWJub3JtYWxfbWVjaGFuaXNtLAogICAgYXR0cnM6IHsKICAgICAgcmVsZWFzZTogc2Vzc2lvbi5yZWxlYXNlLAogICAgICBlbnZpcm9ubWVudDogc2Vzc2lvbi5lbnZpcm9ubWVudCwKICAgICAgaXBfYWRkcmVzczogc2Vzc2lvbi5pcEFkZHJlc3MsCiAgICAgIHVzZXJfYWdlbnQ6IHNlc3Npb24udXNlckFnZW50LAogICAgfSwKICB9KTsKfQoKLyoqCiAqIEFwcGx5IFNka0luZm8gKG5hbWUsIHZlcnNpb24sIHBhY2thZ2VzLCBpbnRlZ3JhdGlvbnMpIHRvIHRoZSBjb3JyZXNwb25kaW5nIGV2ZW50IGtleS4KICogTWVyZ2Ugd2l0aCBleGlzdGluZyBkYXRhIGlmIGFueS4KICoqLwpmdW5jdGlvbiBlbmhhbmNlRXZlbnRXaXRoU2RrSW5mbyhldmVudCwgc2RrSW5mbykgewogIGlmICghc2RrSW5mbykgewogICAgcmV0dXJuIGV2ZW50OwogIH0KICBldmVudC5zZGsgPSBldmVudC5zZGsgfHwge307CiAgZXZlbnQuc2RrLm5hbWUgPSBldmVudC5zZGsubmFtZSB8fCBzZGtJbmZvLm5hbWU7CiAgZXZlbnQuc2RrLnZlcnNpb24gPSBldmVudC5zZGsudmVyc2lvbiB8fCBzZGtJbmZvLnZlcnNpb247CiAgZXZlbnQuc2RrLmludGVncmF0aW9ucyA9IFsuLi4oZXZlbnQuc2RrLmludGVncmF0aW9ucyB8fCBbXSksIC4uLihzZGtJbmZvLmludGVncmF0aW9ucyB8fCBbXSldOwogIGV2ZW50LnNkay5wYWNrYWdlcyA9IFsuLi4oZXZlbnQuc2RrLnBhY2thZ2VzIHx8IFtdKSwgLi4uKHNka0luZm8ucGFja2FnZXMgfHwgW10pXTsKICByZXR1cm4gZXZlbnQ7Cn0KCi8qKiBDcmVhdGVzIGFuIGVudmVsb3BlIGZyb20gYSBTZXNzaW9uICovCmZ1bmN0aW9uIGNyZWF0ZVNlc3Npb25FbnZlbG9wZSgKICBzZXNzaW9uLAogIGRzbiwKICBtZXRhZGF0YSwKICB0dW5uZWwsCikgewogIGNvbnN0IHNka0luZm8gPSBnZXRTZGtNZXRhZGF0YUZvckVudmVsb3BlSGVhZGVyKG1ldGFkYXRhKTsKICBjb25zdCBlbnZlbG9wZUhlYWRlcnMgPSB7CiAgICBzZW50X2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAuLi4oc2RrSW5mbyAmJiB7IHNkazogc2RrSW5mbyB9KSwKICAgIC4uLighIXR1bm5lbCAmJiBkc24gJiYgeyBkc246IGRzblRvU3RyaW5nKGRzbikgfSksCiAgfTsKCiAgY29uc3QgZW52ZWxvcGVJdGVtID0KICAgICdhZ2dyZWdhdGVzJyBpbiBzZXNzaW9uID8gW3sgdHlwZTogJ3Nlc3Npb25zJyB9LCBzZXNzaW9uXSA6IFt7IHR5cGU6ICdzZXNzaW9uJyB9LCBzZXNzaW9uLnRvSlNPTigpXTsKCiAgcmV0dXJuIGNyZWF0ZUVudmVsb3BlKGVudmVsb3BlSGVhZGVycywgW2VudmVsb3BlSXRlbV0pOwp9CgovKioKICogQ3JlYXRlIGFuIEVudmVsb3BlIGZyb20gYW4gZXZlbnQuCiAqLwpmdW5jdGlvbiBjcmVhdGVFdmVudEVudmVsb3BlKAogIGV2ZW50LAogIGRzbiwKICBtZXRhZGF0YSwKICB0dW5uZWwsCikgewogIGNvbnN0IHNka0luZm8gPSBnZXRTZGtNZXRhZGF0YUZvckVudmVsb3BlSGVhZGVyKG1ldGFkYXRhKTsKCiAgLyoKICAgIE5vdGU6IER1ZSB0byBUUywgZXZlbnQudHlwZSBtYXkgYmUgYHJlcGxheV9ldmVudGAsIHRoZW9yZXRpY2FsbHkuCiAgICBJbiBwcmFjdGljZSwgd2UgbmV2ZXIgY2FsbCBgY3JlYXRlRXZlbnRFbnZlbG9wZWAgd2l0aCBgcmVwbGF5X2V2ZW50YCB0eXBlLAogICAgYW5kIHdlJ2QgaGF2ZSB0byBhZGp1dCBhIGxvb290IG9mIHR5cGVzIHRvIG1ha2UgdGhpcyB3b3JrIHByb3Blcmx5LgogICAgV2Ugd2FudCB0byBhdm9pZCBjYXN0aW5nIHRoaXMgYXJvdW5kLCBhcyB0aGF0IGNvdWxkIGxlYWQgdG8gYnVncyAoZS5nLiB3aGVuIHdlIGFkZCBhbm90aGVyIHR5cGUpCiAgICBTbyB0aGUgc2FmZSBjaG9pY2UgaXMgdG8gcmVhbGx5IGd1YXJkIGFnYWluc3QgdGhlIHJlcGxheV9ldmVudCB0eXBlIGhlcmUuCiAgKi8KICBjb25zdCBldmVudFR5cGUgPSBldmVudC50eXBlICYmIGV2ZW50LnR5cGUgIT09ICdyZXBsYXlfZXZlbnQnID8gZXZlbnQudHlwZSA6ICdldmVudCc7CgogIGVuaGFuY2VFdmVudFdpdGhTZGtJbmZvKGV2ZW50LCBtZXRhZGF0YSAmJiBtZXRhZGF0YS5zZGspOwoKICBjb25zdCBlbnZlbG9wZUhlYWRlcnMgPSBjcmVhdGVFdmVudEVudmVsb3BlSGVhZGVycyhldmVudCwgc2RrSW5mbywgdHVubmVsLCBkc24pOwoKICAvLyBQcmV2ZW50IHRoaXMgZGF0YSAod2hpY2gsIGlmIGl0IGV4aXN0cywgd2FzIHVzZWQgaW4gZWFybGllciBzdGVwcyBpbiB0aGUgcHJvY2Vzc2luZyBwaXBlbGluZSkgZnJvbSBiZWluZyBzZW50IHRvCiAgLy8gc2VudHJ5LiAoTm90ZTogT3VyIHVzZSBvZiB0aGlzIHByb3BlcnR5IGNvbWVzIGFuZCBnb2VzIHdpdGggd2hhdGV2ZXIgd2UgbWlnaHQgYmUgZGVidWdnaW5nLCB3aGF0ZXZlciBoYWNrcyB3ZSBtYXkKICAvLyBoYXZlIHRlbXBvcmFyaWx5IGFkZGVkLCBldGMuIEV2ZW4gaWYgd2UgZG9uJ3QgaGFwcGVuIHRvIGJlIHVzaW5nIGl0IGF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZSwgbGV0J3Mgbm90IGdldCByaWQKICAvLyBvZiB0aGlzIGBkZWxldGVgLCBsZXN0IHdlIG1pc3MgcHV0dGluZyBpdCBiYWNrIGluIHRoZSBuZXh0IHRpbWUgdGhlIHByb3BlcnR5IGlzIGluIHVzZS4pCiAgZGVsZXRlIGV2ZW50LnNka1Byb2Nlc3NpbmdNZXRhZGF0YTsKCiAgY29uc3QgZXZlbnRJdGVtID0gW3sgdHlwZTogZXZlbnRUeXBlIH0sIGV2ZW50XTsKICByZXR1cm4gY3JlYXRlRW52ZWxvcGUoZW52ZWxvcGVIZWFkZXJzLCBbZXZlbnRJdGVtXSk7Cn0KCmNvbnN0IFNFTlRSWV9BUElfVkVSU0lPTiA9ICc3JzsKCi8qKiBSZXR1cm5zIHRoZSBwcmVmaXggdG8gY29uc3RydWN0IFNlbnRyeSBpbmdlc3Rpb24gQVBJIGVuZHBvaW50cy4gKi8KZnVuY3Rpb24gZ2V0QmFzZUFwaUVuZHBvaW50KGRzbikgewogIGNvbnN0IHByb3RvY29sID0gZHNuLnByb3RvY29sID8gYCR7ZHNuLnByb3RvY29sfTpgIDogJyc7CiAgY29uc3QgcG9ydCA9IGRzbi5wb3J0ID8gYDoke2Rzbi5wb3J0fWAgOiAnJzsKICByZXR1cm4gYCR7cHJvdG9jb2x9Ly8ke2Rzbi5ob3N0fSR7cG9ydH0ke2Rzbi5wYXRoID8gYC8ke2Rzbi5wYXRofWAgOiAnJ30vYXBpL2A7Cn0KCi8qKiBSZXR1cm5zIHRoZSBpbmdlc3QgQVBJIGVuZHBvaW50IGZvciB0YXJnZXQuICovCmZ1bmN0aW9uIF9nZXRJbmdlc3RFbmRwb2ludChkc24pIHsKICByZXR1cm4gYCR7Z2V0QmFzZUFwaUVuZHBvaW50KGRzbil9JHtkc24ucHJvamVjdElkfS9lbnZlbG9wZS9gOwp9CgovKiogUmV0dXJucyBhIFVSTC1lbmNvZGVkIHN0cmluZyB3aXRoIGF1dGggY29uZmlnIHN1aXRhYmxlIGZvciBhIHF1ZXJ5IHN0cmluZy4gKi8KZnVuY3Rpb24gX2VuY29kZWRBdXRoKGRzbiwgc2RrSW5mbykgewogIHJldHVybiB1cmxFbmNvZGUoewogICAgLy8gV2Ugc2VuZCBvbmx5IHRoZSBtaW5pbXVtIHNldCBvZiByZXF1aXJlZCBpbmZvcm1hdGlvbi4gU2VlCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L2lzc3Vlcy8yNTcyLgogICAgc2VudHJ5X2tleTogZHNuLnB1YmxpY0tleSwKICAgIHNlbnRyeV92ZXJzaW9uOiBTRU5UUllfQVBJX1ZFUlNJT04sCiAgICAuLi4oc2RrSW5mbyAmJiB7IHNlbnRyeV9jbGllbnQ6IGAke3Nka0luZm8ubmFtZX0vJHtzZGtJbmZvLnZlcnNpb259YCB9KSwKICB9KTsKfQoKLyoqCiAqIFJldHVybnMgdGhlIGVudmVsb3BlIGVuZHBvaW50IFVSTCB3aXRoIGF1dGggaW4gdGhlIHF1ZXJ5IHN0cmluZy4KICoKICogU2VuZGluZyBhdXRoIGFzIHBhcnQgb2YgdGhlIHF1ZXJ5IHN0cmluZyBhbmQgbm90IGFzIGN1c3RvbSBIVFRQIGhlYWRlcnMgYXZvaWRzIENPUlMgcHJlZmxpZ2h0IHJlcXVlc3RzLgogKi8KZnVuY3Rpb24gZ2V0RW52ZWxvcGVFbmRwb2ludFdpdGhVcmxFbmNvZGVkQXV0aCgKICBkc24sCiAgLy8gVE9ETyAodjgpOiBSZW1vdmUgYHR1bm5lbE9yT3B0aW9uc2AgaW4gZmF2b3Igb2YgYG9wdGlvbnNgLCBhbmQgdXNlIHRoZSBzdWJzdGl0dXRlIGNvZGUgYmVsb3cKICAvLyBvcHRpb25zOiBDbGllbnRPcHRpb25zID0ge30gYXMgQ2xpZW50T3B0aW9ucywKICB0dW5uZWxPck9wdGlvbnMgPSB7fSAsCikgewogIC8vIFRPRE8gKHY4KTogVXNlIHRoaXMgY29kZSBpbnN0ZWFkCiAgLy8gY29uc3QgeyB0dW5uZWwsIF9tZXRhZGF0YSA9IHt9IH0gPSBvcHRpb25zOwogIC8vIHJldHVybiB0dW5uZWwgPyB0dW5uZWwgOiBgJHtfZ2V0SW5nZXN0RW5kcG9pbnQoZHNuKX0/JHtfZW5jb2RlZEF1dGgoZHNuLCBfbWV0YWRhdGEuc2RrKX1gOwoKICBjb25zdCB0dW5uZWwgPSB0eXBlb2YgdHVubmVsT3JPcHRpb25zID09PSAnc3RyaW5nJyA/IHR1bm5lbE9yT3B0aW9ucyA6IHR1bm5lbE9yT3B0aW9ucy50dW5uZWw7CiAgY29uc3Qgc2RrSW5mbyA9CiAgICB0eXBlb2YgdHVubmVsT3JPcHRpb25zID09PSAnc3RyaW5nJyB8fCAhdHVubmVsT3JPcHRpb25zLl9tZXRhZGF0YSA/IHVuZGVmaW5lZCA6IHR1bm5lbE9yT3B0aW9ucy5fbWV0YWRhdGEuc2RrOwoKICByZXR1cm4gdHVubmVsID8gdHVubmVsIDogYCR7X2dldEluZ2VzdEVuZHBvaW50KGRzbil9PyR7X2VuY29kZWRBdXRoKGRzbiwgc2RrSW5mbyl9YDsKfQoKY29uc3QgREVGQVVMVF9UUkFOU1BPUlRfQlVGRkVSX1NJWkUgPSAzMDsKCi8qKgogKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGEgU2VudHJ5IGBUcmFuc3BvcnRgCiAqCiAqIEBwYXJhbSBvcHRpb25zCiAqIEBwYXJhbSBtYWtlUmVxdWVzdAogKi8KZnVuY3Rpb24gY3JlYXRlVHJhbnNwb3J0KAogIG9wdGlvbnMsCiAgbWFrZVJlcXVlc3QsCiAgYnVmZmVyID0gbWFrZVByb21pc2VCdWZmZXIoCiAgICBvcHRpb25zLmJ1ZmZlclNpemUgfHwgREVGQVVMVF9UUkFOU1BPUlRfQlVGRkVSX1NJWkUsCiAgKSwKKSB7CiAgbGV0IHJhdGVMaW1pdHMgPSB7fTsKICBjb25zdCBmbHVzaCA9ICh0aW1lb3V0KSA9PiBidWZmZXIuZHJhaW4odGltZW91dCk7CgogIGZ1bmN0aW9uIHNlbmQoZW52ZWxvcGUpIHsKICAgIGNvbnN0IGZpbHRlcmVkRW52ZWxvcGVJdGVtcyA9IFtdOwoKICAgIC8vIERyb3AgcmF0ZSBsaW1pdGVkIGl0ZW1zIGZyb20gZW52ZWxvcGUKICAgIGZvckVhY2hFbnZlbG9wZUl0ZW0oZW52ZWxvcGUsIChpdGVtLCB0eXBlKSA9PiB7CiAgICAgIGNvbnN0IGVudmVsb3BlSXRlbURhdGFDYXRlZ29yeSA9IGVudmVsb3BlSXRlbVR5cGVUb0RhdGFDYXRlZ29yeSh0eXBlKTsKICAgICAgaWYgKGlzUmF0ZUxpbWl0ZWQocmF0ZUxpbWl0cywgZW52ZWxvcGVJdGVtRGF0YUNhdGVnb3J5KSkgewogICAgICAgIGNvbnN0IGV2ZW50ID0gZ2V0RXZlbnRGb3JFbnZlbG9wZUl0ZW0oaXRlbSwgdHlwZSk7CiAgICAgICAgb3B0aW9ucy5yZWNvcmREcm9wcGVkRXZlbnQoJ3JhdGVsaW1pdF9iYWNrb2ZmJywgZW52ZWxvcGVJdGVtRGF0YUNhdGVnb3J5LCBldmVudCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlsdGVyZWRFbnZlbG9wZUl0ZW1zLnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIFNraXAgc2VuZGluZyBpZiBlbnZlbG9wZSBpcyBlbXB0eSBhZnRlciBmaWx0ZXJpbmcgb3V0IHJhdGUgbGltaXRlZCBldmVudHMKICAgIGlmIChmaWx0ZXJlZEVudmVsb3BlSXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybiByZXNvbHZlZFN5bmNQcm9taXNlKCk7CiAgICB9CgogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgIGNvbnN0IGZpbHRlcmVkRW52ZWxvcGUgPSBjcmVhdGVFbnZlbG9wZShlbnZlbG9wZVswXSwgZmlsdGVyZWRFbnZlbG9wZUl0ZW1zICk7CgogICAgLy8gQ3JlYXRlcyBjbGllbnQgcmVwb3J0IGZvciBlYWNoIGl0ZW0gaW4gYW4gZW52ZWxvcGUKICAgIGNvbnN0IHJlY29yZEVudmVsb3BlTG9zcyA9IChyZWFzb24pID0+IHsKICAgICAgZm9yRWFjaEVudmVsb3BlSXRlbShmaWx0ZXJlZEVudmVsb3BlLCAoaXRlbSwgdHlwZSkgPT4gewogICAgICAgIGNvbnN0IGV2ZW50ID0gZ2V0RXZlbnRGb3JFbnZlbG9wZUl0ZW0oaXRlbSwgdHlwZSk7CiAgICAgICAgb3B0aW9ucy5yZWNvcmREcm9wcGVkRXZlbnQocmVhc29uLCBlbnZlbG9wZUl0ZW1UeXBlVG9EYXRhQ2F0ZWdvcnkodHlwZSksIGV2ZW50KTsKICAgICAgfSk7CiAgICB9OwoKICAgIGNvbnN0IHJlcXVlc3RUYXNrID0gKCkgPT4KICAgICAgbWFrZVJlcXVlc3QoeyBib2R5OiBzZXJpYWxpemVFbnZlbG9wZShmaWx0ZXJlZEVudmVsb3BlLCBvcHRpb25zLnRleHRFbmNvZGVyKSB9KS50aGVuKAogICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gdGhyb3cgb24gTk9LIHJlc3BvbnNlcywgYnV0IHdlIHdhbnQgdG8gYXQgbGVhc3QgbG9nIHRoZW0KICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlICE9PSB1bmRlZmluZWQgJiYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPCAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSAzMDApKSB7CiAgICAgICAgICAgIERFQlVHX0JVSUxEICYmIGxvZ2dlci53YXJuKGBTZW50cnkgcmVzcG9uZGVkIHdpdGggc3RhdHVzIGNvZGUgJHtyZXNwb25zZS5zdGF0dXNDb2RlfSB0byBzZW50IGV2ZW50LmApOwogICAgICAgICAgfQoKICAgICAgICAgIHJhdGVMaW1pdHMgPSB1cGRhdGVSYXRlTGltaXRzKHJhdGVMaW1pdHMsIHJlc3BvbnNlKTsKICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICB9LAogICAgICAgIGVycm9yID0+IHsKICAgICAgICAgIHJlY29yZEVudmVsb3BlTG9zcygnbmV0d29ya19lcnJvcicpOwogICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgfSwKICAgICAgKTsKCiAgICByZXR1cm4gYnVmZmVyLmFkZChyZXF1ZXN0VGFzaykudGhlbigKICAgICAgcmVzdWx0ID0+IHJlc3VsdCwKICAgICAgZXJyb3IgPT4gewogICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFNlbnRyeUVycm9yKSB7CiAgICAgICAgICBERUJVR19CVUlMRCAmJiBsb2dnZXIuZXJyb3IoJ1NraXBwZWQgc2VuZGluZyBldmVudCBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsLicpOwogICAgICAgICAgcmVjb3JkRW52ZWxvcGVMb3NzKCdxdWV1ZV9vdmVyZmxvdycpOwogICAgICAgICAgcmV0dXJuIHJlc29sdmVkU3luY1Byb21pc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgfQogICAgICB9LAogICAgKTsKICB9CgogIC8vIFdlIHVzZSB0aGlzIHRvIGlkZW50aWZpZnkgaWYgdGhlIHRyYW5zcG9ydCBpcyB0aGUgYmFzZSB0cmFuc3BvcnQKICAvLyBUT0RPICh2OCk6IFJlbW92ZSB0aGlzIGFnYWluIGFzIHdlJ2xsIG5vIGxvbmdlciBuZWVkIGl0CiAgc2VuZC5fX3NlbnRyeV9fYmFzZVRyYW5zcG9ydF9fID0gdHJ1ZTsKCiAgcmV0dXJuIHsKICAgIHNlbmQsCiAgICBmbHVzaCwKICB9Owp9CgpmdW5jdGlvbiBnZXRFdmVudEZvckVudmVsb3BlSXRlbShpdGVtLCB0eXBlKSB7CiAgaWYgKHR5cGUgIT09ICdldmVudCcgJiYgdHlwZSAhPT0gJ3RyYW5zYWN0aW9uJykgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CgogIHJldHVybiBBcnJheS5pc0FycmF5KGl0ZW0pID8gKGl0ZW0gKVsxXSA6IHVuZGVmaW5lZDsKfQoKdmFyIGFnZW50ID0ge307Cgp2YXIgc3JjJDEgPSB7ZXhwb3J0czoge319OwoKdmFyIGJyb3dzZXIgPSB7ZXhwb3J0czoge319OwoKLyoqCiAqIEhlbHBlcnMuCiAqLwoKdmFyIHMgPSAxMDAwOwp2YXIgbSA9IHMgKiA2MDsKdmFyIGggPSBtICogNjA7CnZhciBkID0gaCAqIDI0Owp2YXIgdyA9IGQgKiA3Owp2YXIgeSA9IGQgKiAzNjUuMjU7CgovKioKICogUGFyc2Ugb3IgZm9ybWF0IHRoZSBnaXZlbiBgdmFsYC4KICoKICogT3B0aW9uczoKICoKICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdCiAqCiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gdmFsCiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10KICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyCiAqIEByZXR1cm4ge1N0cmluZ3xOdW1iZXJ9CiAqIEBhcGkgcHVibGljCiAqLwoKdmFyIG1zID0gZnVuY3Rpb24odmFsLCBvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsOwogIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkgewogICAgcmV0dXJuIHBhcnNlKHZhbCk7CiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWwpKSB7CiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTsKICB9CiAgdGhyb3cgbmV3IEVycm9yKAogICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArCiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbCkKICApOwp9OwoKLyoqCiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy4KICoKICogQHBhcmFtIHtTdHJpbmd9IHN0cgogKiBAcmV0dXJuIHtOdW1iZXJ9CiAqIEBhcGkgcHJpdmF0ZQogKi8KCmZ1bmN0aW9uIHBhcnNlKHN0cikgewogIHN0ciA9IFN0cmluZyhzdHIpOwogIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7CiAgICByZXR1cm47CiAgfQogIHZhciBtYXRjaCA9IC9eKC0/KD86XGQrKT9cLj9cZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYygKICAgIHN0cgogICk7CiAgaWYgKCFtYXRjaCkgewogICAgcmV0dXJuOwogIH0KICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pOwogIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8ICdtcycpLnRvTG93ZXJDYXNlKCk7CiAgc3dpdGNoICh0eXBlKSB7CiAgICBjYXNlICd5ZWFycyc6CiAgICBjYXNlICd5ZWFyJzoKICAgIGNhc2UgJ3lycyc6CiAgICBjYXNlICd5cic6CiAgICBjYXNlICd5JzoKICAgICAgcmV0dXJuIG4gKiB5OwogICAgY2FzZSAnd2Vla3MnOgogICAgY2FzZSAnd2Vlayc6CiAgICBjYXNlICd3JzoKICAgICAgcmV0dXJuIG4gKiB3OwogICAgY2FzZSAnZGF5cyc6CiAgICBjYXNlICdkYXknOgogICAgY2FzZSAnZCc6CiAgICAgIHJldHVybiBuICogZDsKICAgIGNhc2UgJ2hvdXJzJzoKICAgIGNhc2UgJ2hvdXInOgogICAgY2FzZSAnaHJzJzoKICAgIGNhc2UgJ2hyJzoKICAgIGNhc2UgJ2gnOgogICAgICByZXR1cm4gbiAqIGg7CiAgICBjYXNlICdtaW51dGVzJzoKICAgIGNhc2UgJ21pbnV0ZSc6CiAgICBjYXNlICdtaW5zJzoKICAgIGNhc2UgJ21pbic6CiAgICBjYXNlICdtJzoKICAgICAgcmV0dXJuIG4gKiBtOwogICAgY2FzZSAnc2Vjb25kcyc6CiAgICBjYXNlICdzZWNvbmQnOgogICAgY2FzZSAnc2Vjcyc6CiAgICBjYXNlICdzZWMnOgogICAgY2FzZSAncyc6CiAgICAgIHJldHVybiBuICogczsKICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6CiAgICBjYXNlICdtaWxsaXNlY29uZCc6CiAgICBjYXNlICdtc2Vjcyc6CiAgICBjYXNlICdtc2VjJzoKICAgIGNhc2UgJ21zJzoKICAgICAgcmV0dXJuIG47CiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KfQoKLyoqCiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC4KICoKICogQHBhcmFtIHtOdW1iZXJ9IG1zCiAqIEByZXR1cm4ge1N0cmluZ30KICogQGFwaSBwcml2YXRlCiAqLwoKZnVuY3Rpb24gZm10U2hvcnQobXMpIHsKICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7CiAgaWYgKG1zQWJzID49IGQpIHsKICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7CiAgfQogIGlmIChtc0FicyA+PSBoKSB7CiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnOwogIH0KICBpZiAobXNBYnMgPj0gbSkgewogICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJzsKICB9CiAgaWYgKG1zQWJzID49IHMpIHsKICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7CiAgfQogIHJldHVybiBtcyArICdtcyc7Cn0KCi8qKgogKiBMb25nIGZvcm1hdCBmb3IgYG1zYC4KICoKICogQHBhcmFtIHtOdW1iZXJ9IG1zCiAqIEByZXR1cm4ge1N0cmluZ30KICogQGFwaSBwcml2YXRlCiAqLwoKZnVuY3Rpb24gZm10TG9uZyhtcykgewogIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTsKICBpZiAobXNBYnMgPj0gZCkgewogICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGQsICdkYXknKTsKICB9CiAgaWYgKG1zQWJzID49IGgpIHsKICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBoLCAnaG91cicpOwogIH0KICBpZiAobXNBYnMgPj0gbSkgewogICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIG0sICdtaW51dGUnKTsKICB9CiAgaWYgKG1zQWJzID49IHMpIHsKICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBzLCAnc2Vjb25kJyk7CiAgfQogIHJldHVybiBtcyArICcgbXMnOwp9CgovKioKICogUGx1cmFsaXphdGlvbiBoZWxwZXIuCiAqLwoKZnVuY3Rpb24gcGx1cmFsKG1zLCBtc0FicywgbiwgbmFtZSkgewogIHZhciBpc1BsdXJhbCA9IG1zQWJzID49IG4gKiAxLjU7CiAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBuKSArICcgJyArIG5hbWUgKyAoaXNQbHVyYWwgPyAncycgOiAnJyk7Cn0KCi8qKgogKiBUaGlzIGlzIHRoZSBjb21tb24gbG9naWMgZm9yIGJvdGggdGhlIE5vZGUuanMgYW5kIHdlYiBicm93c2VyCiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuCiAqLwoKZnVuY3Rpb24gc2V0dXAoZW52KSB7CgljcmVhdGVEZWJ1Zy5kZWJ1ZyA9IGNyZWF0ZURlYnVnOwoJY3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnOwoJY3JlYXRlRGVidWcuY29lcmNlID0gY29lcmNlOwoJY3JlYXRlRGVidWcuZGlzYWJsZSA9IGRpc2FibGU7CgljcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7CgljcmVhdGVEZWJ1Zy5lbmFibGVkID0gZW5hYmxlZDsKCWNyZWF0ZURlYnVnLmh1bWFuaXplID0gbXM7CgljcmVhdGVEZWJ1Zy5kZXN0cm95ID0gZGVzdHJveTsKCglPYmplY3Qua2V5cyhlbnYpLmZvckVhY2goa2V5ID0+IHsKCQljcmVhdGVEZWJ1Z1trZXldID0gZW52W2tleV07Cgl9KTsKCgkvKioKCSogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuCgkqLwoKCWNyZWF0ZURlYnVnLm5hbWVzID0gW107CgljcmVhdGVEZWJ1Zy5za2lwcyA9IFtdOwoKCS8qKgoJKiBNYXAgb2Ygc3BlY2lhbCAiJW4iIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyAiZm9ybWF0IiBhcmd1bWVudC4KCSoKCSogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gIm4iIGFuZCAiTiIuCgkqLwoJY3JlYXRlRGVidWcuZm9ybWF0dGVycyA9IHt9OwoKCS8qKgoJKiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlCgkqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UgVGhlIG5hbWVzcGFjZSBzdHJpbmcgZm9yIHRoZSBkZWJ1ZyBpbnN0YW5jZSB0byBiZSBjb2xvcmVkCgkqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IEFuIEFOU0kgY29sb3IgY29kZSBmb3IgdGhlIGdpdmVuIG5hbWVzcGFjZQoJKiBAYXBpIHByaXZhdGUKCSovCglmdW5jdGlvbiBzZWxlY3RDb2xvcihuYW1lc3BhY2UpIHsKCQlsZXQgaGFzaCA9IDA7CgoJCWZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXNwYWNlLmxlbmd0aDsgaSsrKSB7CgkJCWhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpOwoJCQloYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlcgoJCX0KCgkJcmV0dXJuIGNyZWF0ZURlYnVnLmNvbG9yc1tNYXRoLmFicyhoYXNoKSAlIGNyZWF0ZURlYnVnLmNvbG9ycy5sZW5ndGhdOwoJfQoJY3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjsKCgkvKioKCSogQ3JlYXRlIGEgZGVidWdnZXIgd2l0aCB0aGUgZ2l2ZW4gYG5hbWVzcGFjZWAuCgkqCgkqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UKCSogQHJldHVybiB7RnVuY3Rpb259CgkqIEBhcGkgcHVibGljCgkqLwoJZnVuY3Rpb24gY3JlYXRlRGVidWcobmFtZXNwYWNlKSB7CgkJbGV0IHByZXZUaW1lOwoJCWxldCBlbmFibGVPdmVycmlkZSA9IG51bGw7CgkJbGV0IG5hbWVzcGFjZXNDYWNoZTsKCQlsZXQgZW5hYmxlZENhY2hlOwoKCQlmdW5jdGlvbiBkZWJ1ZyguLi5hcmdzKSB7CgkJCS8vIERpc2FibGVkPwoJCQlpZiAoIWRlYnVnLmVuYWJsZWQpIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJY29uc3Qgc2VsZiA9IGRlYnVnOwoKCQkJLy8gU2V0IGBkaWZmYCB0aW1lc3RhbXAKCQkJY29uc3QgY3VyciA9IE51bWJlcihuZXcgRGF0ZSgpKTsKCQkJY29uc3QgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpOwoJCQlzZWxmLmRpZmYgPSBtczsKCQkJc2VsZi5wcmV2ID0gcHJldlRpbWU7CgkJCXNlbGYuY3VyciA9IGN1cnI7CgkJCXByZXZUaW1lID0gY3VycjsKCgkJCWFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7CgoJCQlpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnKSB7CgkJCQkvLyBBbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlTwoJCQkJYXJncy51bnNoaWZ0KCclTycpOwoJCQl9CgoJCQkvLyBBcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9ucwoJCQlsZXQgaW5kZXggPSAwOwoJCQlhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywgKG1hdGNoLCBmb3JtYXQpID0+IHsKCQkJCS8vIElmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXgKCQkJCWlmIChtYXRjaCA9PT0gJyUlJykgewoJCQkJCXJldHVybiAnJSc7CgkJCQl9CgkJCQlpbmRleCsrOwoJCQkJY29uc3QgZm9ybWF0dGVyID0gY3JlYXRlRGVidWcuZm9ybWF0dGVyc1tmb3JtYXRdOwoJCQkJaWYgKHR5cGVvZiBmb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHsKCQkJCQljb25zdCB2YWwgPSBhcmdzW2luZGV4XTsKCQkJCQltYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7CgoJCQkJCS8vIE5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGAKCQkJCQlhcmdzLnNwbGljZShpbmRleCwgMSk7CgkJCQkJaW5kZXgtLTsKCQkJCX0KCQkJCXJldHVybiBtYXRjaDsKCQkJfSk7CgoJCQkvLyBBcHBseSBlbnYtc3BlY2lmaWMgZm9ybWF0dGluZyAoY29sb3JzLCBldGMuKQoJCQljcmVhdGVEZWJ1Zy5mb3JtYXRBcmdzLmNhbGwoc2VsZiwgYXJncyk7CgoJCQljb25zdCBsb2dGbiA9IHNlbGYubG9nIHx8IGNyZWF0ZURlYnVnLmxvZzsKCQkJbG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7CgkJfQoKCQlkZWJ1Zy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7CgkJZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7CgkJZGVidWcuY29sb3IgPSBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcihuYW1lc3BhY2UpOwoJCWRlYnVnLmV4dGVuZCA9IGV4dGVuZDsKCQlkZWJ1Zy5kZXN0cm95ID0gY3JlYXRlRGVidWcuZGVzdHJveTsgLy8gWFhYIFRlbXBvcmFyeS4gV2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuCgoJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWJ1ZywgJ2VuYWJsZWQnLCB7CgkJCWVudW1lcmFibGU6IHRydWUsCgkJCWNvbmZpZ3VyYWJsZTogZmFsc2UsCgkJCWdldDogKCkgPT4gewoJCQkJaWYgKGVuYWJsZU92ZXJyaWRlICE9PSBudWxsKSB7CgkJCQkJcmV0dXJuIGVuYWJsZU92ZXJyaWRlOwoJCQkJfQoJCQkJaWYgKG5hbWVzcGFjZXNDYWNoZSAhPT0gY3JlYXRlRGVidWcubmFtZXNwYWNlcykgewoJCQkJCW5hbWVzcGFjZXNDYWNoZSA9IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXM7CgkJCQkJZW5hYmxlZENhY2hlID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpOwoJCQkJfQoKCQkJCXJldHVybiBlbmFibGVkQ2FjaGU7CgkJCX0sCgkJCXNldDogdiA9PiB7CgkJCQllbmFibGVPdmVycmlkZSA9IHY7CgkJCX0KCQl9KTsKCgkJLy8gRW52LXNwZWNpZmljIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBkZWJ1ZyBpbnN0YW5jZXMKCQlpZiAodHlwZW9mIGNyZWF0ZURlYnVnLmluaXQgPT09ICdmdW5jdGlvbicpIHsKCQkJY3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7CgkJfQoKCQlyZXR1cm4gZGVidWc7Cgl9CgoJZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7CgkJY29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpOwoJCW5ld0RlYnVnLmxvZyA9IHRoaXMubG9nOwoJCXJldHVybiBuZXdEZWJ1ZzsKCX0KCgkvKioKCSogRW5hYmxlcyBhIGRlYnVnIG1vZGUgYnkgbmFtZXNwYWNlcy4gVGhpcyBjYW4gaW5jbHVkZSBtb2RlcwoJKiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLgoJKgoJKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlcwoJKiBAYXBpIHB1YmxpYwoJKi8KCWZ1bmN0aW9uIGVuYWJsZShuYW1lc3BhY2VzKSB7CgkJY3JlYXRlRGVidWcuc2F2ZShuYW1lc3BhY2VzKTsKCQljcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzID0gbmFtZXNwYWNlczsKCgkJY3JlYXRlRGVidWcubmFtZXMgPSBbXTsKCQljcmVhdGVEZWJ1Zy5za2lwcyA9IFtdOwoKCQlsZXQgaTsKCQljb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpLnNwbGl0KC9bXHMsXSsvKTsKCQljb25zdCBsZW4gPSBzcGxpdC5sZW5ndGg7CgoJCWZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewoJCQlpZiAoIXNwbGl0W2ldKSB7CgkJCQkvLyBpZ25vcmUgZW1wdHkgc3RyaW5ncwoJCQkJY29udGludWU7CgkJCX0KCgkJCW5hbWVzcGFjZXMgPSBzcGxpdFtpXS5yZXBsYWNlKC9cKi9nLCAnLio/Jyk7CgoJCQlpZiAobmFtZXNwYWNlc1swXSA9PT0gJy0nKSB7CgkJCQljcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zbGljZSgxKSArICckJykpOwoJCQl9IGVsc2UgewoJCQkJY3JlYXRlRGVidWcubmFtZXMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWVzcGFjZXMgKyAnJCcpKTsKCQkJfQoJCX0KCX0KCgkvKioKCSogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuCgkqCgkqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlcwoJKiBAYXBpIHB1YmxpYwoJKi8KCWZ1bmN0aW9uIGRpc2FibGUoKSB7CgkJY29uc3QgbmFtZXNwYWNlcyA9IFsKCQkJLi4uY3JlYXRlRGVidWcubmFtZXMubWFwKHRvTmFtZXNwYWNlKSwKCQkJLi4uY3JlYXRlRGVidWcuc2tpcHMubWFwKHRvTmFtZXNwYWNlKS5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSkKCQldLmpvaW4oJywnKTsKCQljcmVhdGVEZWJ1Zy5lbmFibGUoJycpOwoJCXJldHVybiBuYW1lc3BhY2VzOwoJfQoKCS8qKgoJKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG1vZGUgbmFtZSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuCgkqCgkqIEBwYXJhbSB7U3RyaW5nfSBuYW1lCgkqIEByZXR1cm4ge0Jvb2xlYW59CgkqIEBhcGkgcHVibGljCgkqLwoJZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7CgkJaWYgKG5hbWVbbmFtZS5sZW5ndGggLSAxXSA9PT0gJyonKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCgkJbGV0IGk7CgkJbGV0IGxlbjsKCgkJZm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcuc2tpcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKCQkJaWYgKGNyZWF0ZURlYnVnLnNraXBzW2ldLnRlc3QobmFtZSkpIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0KCgkJZm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKCQkJaWYgKGNyZWF0ZURlYnVnLm5hbWVzW2ldLnRlc3QobmFtZSkpIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJLyoqCgkqIENvbnZlcnQgcmVnZXhwIHRvIG5hbWVzcGFjZQoJKgoJKiBAcGFyYW0ge1JlZ0V4cH0gcmVneGVwCgkqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlCgkqIEBhcGkgcHJpdmF0ZQoJKi8KCWZ1bmN0aW9uIHRvTmFtZXNwYWNlKHJlZ2V4cCkgewoJCXJldHVybiByZWdleHAudG9TdHJpbmcoKQoJCQkuc3Vic3RyaW5nKDIsIHJlZ2V4cC50b1N0cmluZygpLmxlbmd0aCAtIDIpCgkJCS5yZXBsYWNlKC9cLlwqXD8kLywgJyonKTsKCX0KCgkvKioKCSogQ29lcmNlIGB2YWxgLgoJKgoJKiBAcGFyYW0ge01peGVkfSB2YWwKCSogQHJldHVybiB7TWl4ZWR9CgkqIEBhcGkgcHJpdmF0ZQoJKi8KCWZ1bmN0aW9uIGNvZXJjZSh2YWwpIHsKCQlpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHsKCQkJcmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTsKCQl9CgkJcmV0dXJuIHZhbDsKCX0KCgkvKioKCSogWFhYIERPIE5PVCBVU0UuIFRoaXMgaXMgYSB0ZW1wb3Jhcnkgc3R1YiBmdW5jdGlvbi4KCSogWFhYIEl0IFdJTEwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLgoJKi8KCWZ1bmN0aW9uIGRlc3Ryb3koKSB7CgkJY29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7Cgl9CgoJY3JlYXRlRGVidWcuZW5hYmxlKGNyZWF0ZURlYnVnLmxvYWQoKSk7CgoJcmV0dXJuIGNyZWF0ZURlYnVnOwp9Cgp2YXIgY29tbW9uID0gc2V0dXA7CgovKiBlc2xpbnQtZW52IGJyb3dzZXIgKi8KCihmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7Ci8qKgogKiBUaGlzIGlzIHRoZSB3ZWIgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuCiAqLwoKZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJnczsKZXhwb3J0cy5zYXZlID0gc2F2ZTsKZXhwb3J0cy5sb2FkID0gbG9hZDsKZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7CmV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpOwpleHBvcnRzLmRlc3Ryb3kgPSAoKCkgPT4gewoJbGV0IHdhcm5lZCA9IGZhbHNlOwoKCXJldHVybiAoKSA9PiB7CgkJaWYgKCF3YXJuZWQpIHsKCQkJd2FybmVkID0gdHJ1ZTsKCQkJY29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7CgkJfQoJfTsKfSkoKTsKCi8qKgogKiBDb2xvcnMuCiAqLwoKZXhwb3J0cy5jb2xvcnMgPSBbCgknIzAwMDBDQycsCgknIzAwMDBGRicsCgknIzAwMzNDQycsCgknIzAwMzNGRicsCgknIzAwNjZDQycsCgknIzAwNjZGRicsCgknIzAwOTlDQycsCgknIzAwOTlGRicsCgknIzAwQ0MwMCcsCgknIzAwQ0MzMycsCgknIzAwQ0M2NicsCgknIzAwQ0M5OScsCgknIzAwQ0NDQycsCgknIzAwQ0NGRicsCgknIzMzMDBDQycsCgknIzMzMDBGRicsCgknIzMzMzNDQycsCgknIzMzMzNGRicsCgknIzMzNjZDQycsCgknIzMzNjZGRicsCgknIzMzOTlDQycsCgknIzMzOTlGRicsCgknIzMzQ0MwMCcsCgknIzMzQ0MzMycsCgknIzMzQ0M2NicsCgknIzMzQ0M5OScsCgknIzMzQ0NDQycsCgknIzMzQ0NGRicsCgknIzY2MDBDQycsCgknIzY2MDBGRicsCgknIzY2MzNDQycsCgknIzY2MzNGRicsCgknIzY2Q0MwMCcsCgknIzY2Q0MzMycsCgknIzk5MDBDQycsCgknIzk5MDBGRicsCgknIzk5MzNDQycsCgknIzk5MzNGRicsCgknIzk5Q0MwMCcsCgknIzk5Q0MzMycsCgknI0NDMDAwMCcsCgknI0NDMDAzMycsCgknI0NDMDA2NicsCgknI0NDMDA5OScsCgknI0NDMDBDQycsCgknI0NDMDBGRicsCgknI0NDMzMwMCcsCgknI0NDMzMzMycsCgknI0NDMzM2NicsCgknI0NDMzM5OScsCgknI0NDMzNDQycsCgknI0NDMzNGRicsCgknI0NDNjYwMCcsCgknI0NDNjYzMycsCgknI0NDOTkwMCcsCgknI0NDOTkzMycsCgknI0NDQ0MwMCcsCgknI0NDQ0MzMycsCgknI0ZGMDAwMCcsCgknI0ZGMDAzMycsCgknI0ZGMDA2NicsCgknI0ZGMDA5OScsCgknI0ZGMDBDQycsCgknI0ZGMDBGRicsCgknI0ZGMzMwMCcsCgknI0ZGMzMzMycsCgknI0ZGMzM2NicsCgknI0ZGMzM5OScsCgknI0ZGMzNDQycsCgknI0ZGMzNGRicsCgknI0ZGNjYwMCcsCgknI0ZGNjYzMycsCgknI0ZGOTkwMCcsCgknI0ZGOTkzMycsCgknI0ZGQ0MwMCcsCgknI0ZGQ0MzMycKXTsKCi8qKgogKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLAogKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd24KICogdG8gc3VwcG9ydCAiJWMiIENTUyBjdXN0b21pemF0aW9ucy4KICoKICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnMKICovCgovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eQpmdW5jdGlvbiB1c2VDb2xvcnMoKSB7CgkvLyBOQjogSW4gYW4gRWxlY3Ryb24gcHJlbG9hZCBzY3JpcHQsIGRvY3VtZW50IHdpbGwgYmUgZGVmaW5lZCBidXQgbm90IGZ1bGx5CgkvLyBpbml0aWFsaXplZC4gU2luY2Ugd2Uga25vdyB3ZSdyZSBpbiBDaHJvbWUsIHdlJ2xsIGp1c3QgZGV0ZWN0IHRoaXMgY2FzZQoJLy8gZXhwbGljaXRseQoJaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wcm9jZXNzICYmICh3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInIHx8IHdpbmRvdy5wcm9jZXNzLl9fbndqcykpIHsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvLyBJbnRlcm5ldCBFeHBsb3JlciBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydCBjb2xvcnMuCglpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXC8oXGQrKS8pKSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCS8vIElzIHdlYmtpdD8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY0NTk2MDYvMzc2NzczCgkvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMgoJcmV0dXJuICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2UpIHx8CgkJLy8gSXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3MwoJCSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUuZmlyZWJ1ZyB8fCAod2luZG93LmNvbnNvbGUuZXhjZXB0aW9uICYmIHdpbmRvdy5jb25zb2xlLnRhYmxlKSkpIHx8CgkJLy8gSXMgZmlyZWZveCA+PSB2MzE/CgkJLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzCgkJKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XC8oXGQrKS8pICYmIHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApID49IDMxKSB8fAoJCS8vIERvdWJsZSBjaGVjayB3ZWJraXQgaW4gdXNlckFnZW50IGp1c3QgaW4gY2FzZSB3ZSBhcmUgaW4gYSB3b3JrZXIKCQkodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2FwcGxld2Via2l0XC8oXGQrKS8pKTsKfQoKLyoqCiAqIENvbG9yaXplIGxvZyBhcmd1bWVudHMgaWYgZW5hYmxlZC4KICoKICogQGFwaSBwdWJsaWMKICovCgpmdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHsKCWFyZ3NbMF0gPSAodGhpcy51c2VDb2xvcnMgPyAnJWMnIDogJycpICsKCQl0aGlzLm5hbWVzcGFjZSArCgkJKHRoaXMudXNlQ29sb3JzID8gJyAlYycgOiAnICcpICsKCQlhcmdzWzBdICsKCQkodGhpcy51c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgKwoJCScrJyArIG1vZHVsZS5leHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7CgoJaWYgKCF0aGlzLnVzZUNvbG9ycykgewoJCXJldHVybjsKCX0KCgljb25zdCBjID0gJ2NvbG9yOiAnICsgdGhpcy5jb2xvcjsKCWFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpOwoKCS8vIFRoZSBmaW5hbCAiJWMiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlcgoJLy8gYXJndW1lbnRzIHBhc3NlZCBlaXRoZXIgYmVmb3JlIG9yIGFmdGVyIHRoZSAlYywgc28gd2UgbmVlZCB0bwoJLy8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvCglsZXQgaW5kZXggPSAwOwoJbGV0IGxhc3RDID0gMDsKCWFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBtYXRjaCA9PiB7CgkJaWYgKG1hdGNoID09PSAnJSUnKSB7CgkJCXJldHVybjsKCQl9CgkJaW5kZXgrKzsKCQlpZiAobWF0Y2ggPT09ICclYycpIHsKCQkJLy8gV2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjCgkJCS8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pCgkJCWxhc3RDID0gaW5kZXg7CgkJfQoJfSk7CgoJYXJncy5zcGxpY2UobGFzdEMsIDAsIGMpOwp9CgovKioKICogSW52b2tlcyBgY29uc29sZS5kZWJ1ZygpYCB3aGVuIGF2YWlsYWJsZS4KICogTm8tb3Agd2hlbiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGEgImZ1bmN0aW9uIi4KICogSWYgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxzIGJhY2sKICogdG8gYGNvbnNvbGUubG9nYC4KICoKICogQGFwaSBwdWJsaWMKICovCmV4cG9ydHMubG9nID0gY29uc29sZS5kZWJ1ZyB8fCBjb25zb2xlLmxvZyB8fCAoKCkgPT4ge30pOwoKLyoqCiAqIFNhdmUgYG5hbWVzcGFjZXNgLgogKgogKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlcwogKiBAYXBpIHByaXZhdGUKICovCmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykgewoJdHJ5IHsKCQlpZiAobmFtZXNwYWNlcykgewoJCQlleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTsKCQl9IGVsc2UgewoJCQlleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVidWcnKTsKCQl9Cgl9IGNhdGNoIChlcnJvcikgewoJCS8vIFN3YWxsb3cKCQkvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT8KCX0KfQoKLyoqCiAqIExvYWQgYG5hbWVzcGFjZXNgLgogKgogKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzCiAqIEBhcGkgcHJpdmF0ZQogKi8KZnVuY3Rpb24gbG9hZCgpIHsKCWxldCByOwoJdHJ5IHsKCQlyID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJyk7Cgl9IGNhdGNoIChlcnJvcikgewoJCS8vIFN3YWxsb3cKCQkvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT8KCX0KCgkvLyBJZiBkZWJ1ZyBpc24ndCBzZXQgaW4gTFMsIGFuZCB3ZSdyZSBpbiBFbGVjdHJvbiwgdHJ5IHRvIGxvYWQgJERFQlVHCglpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHsKCQlyID0gcHJvY2Vzcy5lbnYuREVCVUc7Cgl9CgoJcmV0dXJuIHI7Cn0KCi8qKgogKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuCiAqCiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93cwogKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZQogKiBhbmQgeW91IGF0dGVtcHQgdG8gYWNjZXNzIGl0LgogKgogKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9CiAqIEBhcGkgcHJpdmF0ZQogKi8KCmZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpIHsKCXRyeSB7CgkJLy8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dAoJCS8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuCgkJcmV0dXJuIGxvY2FsU3RvcmFnZTsKCX0gY2F0Y2ggKGVycm9yKSB7CgkJLy8gU3dhbGxvdwoJCS8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlPwoJfQp9Cgptb2R1bGUuZXhwb3J0cyA9IGNvbW1vbihleHBvcnRzKTsKCmNvbnN0IHtmb3JtYXR0ZXJzfSA9IG1vZHVsZS5leHBvcnRzOwoKLyoqCiAqIE1hcCAlaiB0byBgSlNPTi5zdHJpbmdpZnkoKWAsIHNpbmNlIG5vIFdlYiBJbnNwZWN0b3JzIGRvIHRoYXQgYnkgZGVmYXVsdC4KICovCgpmb3JtYXR0ZXJzLmogPSBmdW5jdGlvbiAodikgewoJdHJ5IHsKCQlyZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7Cgl9IGNhdGNoIChlcnJvcikgewoJCXJldHVybiAnW1VuZXhwZWN0ZWRKU09OUGFyc2VFcnJvcl06ICcgKyBlcnJvci5tZXNzYWdlOwoJfQp9Owp9KGJyb3dzZXIsIGJyb3dzZXIuZXhwb3J0cykpOwoKdmFyIG5vZGUgPSB7ZXhwb3J0czoge319OwoKLyoqCiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuCiAqLwoKKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKY29uc3QgdHR5ID0gcmVxdWlyZSQkMDsKY29uc3QgdXRpbCA9IHJlcXVpcmUkJDE7CgovKioKICogVGhpcyBpcyB0aGUgTm9kZS5qcyBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuCiAqLwoKZXhwb3J0cy5pbml0ID0gaW5pdDsKZXhwb3J0cy5sb2cgPSBsb2c7CmV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7CmV4cG9ydHMuc2F2ZSA9IHNhdmU7CmV4cG9ydHMubG9hZCA9IGxvYWQ7CmV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzOwpleHBvcnRzLmRlc3Ryb3kgPSB1dGlsLmRlcHJlY2F0ZSgKCSgpID0+IHt9LAoJJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nCik7CgovKioKICogQ29sb3JzLgogKi8KCmV4cG9ydHMuY29sb3JzID0gWzYsIDIsIDMsIDQsIDUsIDFdOwoKdHJ5IHsKCS8vIE9wdGlvbmFsIGRlcGVuZGVuY3kgKGFzIGluLCBkb2Vzbid0IG5lZWQgdG8gYmUgaW5zdGFsbGVkLCBOT1QgbGlrZSBvcHRpb25hbERlcGVuZGVuY2llcyBpbiBwYWNrYWdlLmpzb24pCgkvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzCgljb25zdCBzdXBwb3J0c0NvbG9yID0gcmVxdWlyZSgnc3VwcG9ydHMtY29sb3InKTsKCglpZiAoc3VwcG9ydHNDb2xvciAmJiAoc3VwcG9ydHNDb2xvci5zdGRlcnIgfHwgc3VwcG9ydHNDb2xvcikubGV2ZWwgPj0gMikgewoJCWV4cG9ydHMuY29sb3JzID0gWwoJCQkyMCwKCQkJMjEsCgkJCTI2LAoJCQkyNywKCQkJMzIsCgkJCTMzLAoJCQkzOCwKCQkJMzksCgkJCTQwLAoJCQk0MSwKCQkJNDIsCgkJCTQzLAoJCQk0NCwKCQkJNDUsCgkJCTU2LAoJCQk1NywKCQkJNjIsCgkJCTYzLAoJCQk2OCwKCQkJNjksCgkJCTc0LAoJCQk3NSwKCQkJNzYsCgkJCTc3LAoJCQk3OCwKCQkJNzksCgkJCTgwLAoJCQk4MSwKCQkJOTIsCgkJCTkzLAoJCQk5OCwKCQkJOTksCgkJCTExMiwKCQkJMTEzLAoJCQkxMjgsCgkJCTEyOSwKCQkJMTM0LAoJCQkxMzUsCgkJCTE0OCwKCQkJMTQ5LAoJCQkxNjAsCgkJCTE2MSwKCQkJMTYyLAoJCQkxNjMsCgkJCTE2NCwKCQkJMTY1LAoJCQkxNjYsCgkJCTE2NywKCQkJMTY4LAoJCQkxNjksCgkJCTE3MCwKCQkJMTcxLAoJCQkxNzIsCgkJCTE3MywKCQkJMTc4LAoJCQkxNzksCgkJCTE4NCwKCQkJMTg1LAoJCQkxOTYsCgkJCTE5NywKCQkJMTk4LAoJCQkxOTksCgkJCTIwMCwKCQkJMjAxLAoJCQkyMDIsCgkJCTIwMywKCQkJMjA0LAoJCQkyMDUsCgkJCTIwNiwKCQkJMjA3LAoJCQkyMDgsCgkJCTIwOSwKCQkJMjE0LAoJCQkyMTUsCgkJCTIyMCwKCQkJMjIxCgkJXTsKCX0KfSBjYXRjaCAoZXJyb3IpIHsKCS8vIFN3YWxsb3cgLSB3ZSBvbmx5IGNhcmUgaWYgYHN1cHBvcnRzLWNvbG9yYCBpcyBhdmFpbGFibGU7IGl0IGRvZXNuJ3QgaGF2ZSB0byBiZS4KfQoKLyoqCiAqIEJ1aWxkIHVwIHRoZSBkZWZhdWx0IGBpbnNwZWN0T3B0c2Agb2JqZWN0IGZyb20gdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcy4KICoKICogICAkIERFQlVHX0NPTE9SUz1ubyBERUJVR19ERVBUSD0xMCBERUJVR19TSE9XX0hJRERFTj1lbmFibGVkIG5vZGUgc2NyaXB0LmpzCiAqLwoKZXhwb3J0cy5pbnNwZWN0T3B0cyA9IE9iamVjdC5rZXlzKHByb2Nlc3MuZW52KS5maWx0ZXIoa2V5ID0+IHsKCXJldHVybiAvXmRlYnVnXy9pLnRlc3Qoa2V5KTsKfSkucmVkdWNlKChvYmosIGtleSkgPT4gewoJLy8gQ2FtZWwtY2FzZQoJY29uc3QgcHJvcCA9IGtleQoJCS5zdWJzdHJpbmcoNikKCQkudG9Mb3dlckNhc2UoKQoJCS5yZXBsYWNlKC9fKFthLXpdKS9nLCAoXywgaykgPT4gewoJCQlyZXR1cm4gay50b1VwcGVyQ2FzZSgpOwoJCX0pOwoKCS8vIENvZXJjZSBzdHJpbmcgdmFsdWUgaW50byBKUyB2YWx1ZQoJbGV0IHZhbCA9IHByb2Nlc3MuZW52W2tleV07CglpZiAoL14oeWVzfG9ufHRydWV8ZW5hYmxlZCkkL2kudGVzdCh2YWwpKSB7CgkJdmFsID0gdHJ1ZTsKCX0gZWxzZSBpZiAoL14obm98b2ZmfGZhbHNlfGRpc2FibGVkKSQvaS50ZXN0KHZhbCkpIHsKCQl2YWwgPSBmYWxzZTsKCX0gZWxzZSBpZiAodmFsID09PSAnbnVsbCcpIHsKCQl2YWwgPSBudWxsOwoJfSBlbHNlIHsKCQl2YWwgPSBOdW1iZXIodmFsKTsKCX0KCglvYmpbcHJvcF0gPSB2YWw7CglyZXR1cm4gb2JqOwp9LCB7fSk7CgovKioKICogSXMgc3Rkb3V0IGEgVFRZPyBDb2xvcmVkIG91dHB1dCBpcyBlbmFibGVkIHdoZW4gYHRydWVgLgogKi8KCmZ1bmN0aW9uIHVzZUNvbG9ycygpIHsKCXJldHVybiAnY29sb3JzJyBpbiBleHBvcnRzLmluc3BlY3RPcHRzID8KCQlCb29sZWFuKGV4cG9ydHMuaW5zcGVjdE9wdHMuY29sb3JzKSA6CgkJdHR5LmlzYXR0eShwcm9jZXNzLnN0ZGVyci5mZCk7Cn0KCi8qKgogKiBBZGRzIEFOU0kgY29sb3IgZXNjYXBlIGNvZGVzIGlmIGVuYWJsZWQuCiAqCiAqIEBhcGkgcHVibGljCiAqLwoKZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7Cgljb25zdCB7bmFtZXNwYWNlOiBuYW1lLCB1c2VDb2xvcnN9ID0gdGhpczsKCglpZiAodXNlQ29sb3JzKSB7CgkJY29uc3QgYyA9IHRoaXMuY29sb3I7CgkJY29uc3QgY29sb3JDb2RlID0gJ1x1MDAxQlszJyArIChjIDwgOCA/IGMgOiAnODs1OycgKyBjKTsKCQljb25zdCBwcmVmaXggPSBgICAke2NvbG9yQ29kZX07MW0ke25hbWV9IFx1MDAxQlswbWA7CgoJCWFyZ3NbMF0gPSBwcmVmaXggKyBhcmdzWzBdLnNwbGl0KCdcbicpLmpvaW4oJ1xuJyArIHByZWZpeCk7CgkJYXJncy5wdXNoKGNvbG9yQ29kZSArICdtKycgKyBtb2R1bGUuZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpICsgJ1x1MDAxQlswbScpOwoJfSBlbHNlIHsKCQlhcmdzWzBdID0gZ2V0RGF0ZSgpICsgbmFtZSArICcgJyArIGFyZ3NbMF07Cgl9Cn0KCmZ1bmN0aW9uIGdldERhdGUoKSB7CglpZiAoZXhwb3J0cy5pbnNwZWN0T3B0cy5oaWRlRGF0ZSkgewoJCXJldHVybiAnJzsKCX0KCXJldHVybiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgKyAnICc7Cn0KCi8qKgogKiBJbnZva2VzIGB1dGlsLmZvcm1hdCgpYCB3aXRoIHRoZSBzcGVjaWZpZWQgYXJndW1lbnRzIGFuZCB3cml0ZXMgdG8gc3RkZXJyLgogKi8KCmZ1bmN0aW9uIGxvZyguLi5hcmdzKSB7CglyZXR1cm4gcHJvY2Vzcy5zdGRlcnIud3JpdGUodXRpbC5mb3JtYXQoLi4uYXJncykgKyAnXG4nKTsKfQoKLyoqCiAqIFNhdmUgYG5hbWVzcGFjZXNgLgogKgogKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlcwogKiBAYXBpIHByaXZhdGUKICovCmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykgewoJaWYgKG5hbWVzcGFjZXMpIHsKCQlwcm9jZXNzLmVudi5ERUJVRyA9IG5hbWVzcGFjZXM7Cgl9IGVsc2UgewoJCS8vIElmIHlvdSBzZXQgYSBwcm9jZXNzLmVudiBmaWVsZCB0byBudWxsIG9yIHVuZGVmaW5lZCwgaXQgZ2V0cyBjYXN0IHRvIHRoZQoJCS8vIHN0cmluZyAnbnVsbCcgb3IgJ3VuZGVmaW5lZCcuIEp1c3QgZGVsZXRlIGluc3RlYWQuCgkJZGVsZXRlIHByb2Nlc3MuZW52LkRFQlVHOwoJfQp9CgovKioKICogTG9hZCBgbmFtZXNwYWNlc2AuCiAqCiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXMKICogQGFwaSBwcml2YXRlCiAqLwoKZnVuY3Rpb24gbG9hZCgpIHsKCXJldHVybiBwcm9jZXNzLmVudi5ERUJVRzsKfQoKLyoqCiAqIEluaXQgbG9naWMgZm9yIGBkZWJ1Z2AgaW5zdGFuY2VzLgogKgogKiBDcmVhdGUgYSBuZXcgYGluc3BlY3RPcHRzYCBvYmplY3QgaW4gY2FzZSBgdXNlQ29sb3JzYCBpcyBzZXQKICogZGlmZmVyZW50bHkgZm9yIGEgcGFydGljdWxhciBgZGVidWdgIGluc3RhbmNlLgogKi8KCmZ1bmN0aW9uIGluaXQoZGVidWcpIHsKCWRlYnVnLmluc3BlY3RPcHRzID0ge307CgoJY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGV4cG9ydHMuaW5zcGVjdE9wdHMpOwoJZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CgkJZGVidWcuaW5zcGVjdE9wdHNba2V5c1tpXV0gPSBleHBvcnRzLmluc3BlY3RPcHRzW2tleXNbaV1dOwoJfQp9Cgptb2R1bGUuZXhwb3J0cyA9IGNvbW1vbihleHBvcnRzKTsKCmNvbnN0IHtmb3JtYXR0ZXJzfSA9IG1vZHVsZS5leHBvcnRzOwoKLyoqCiAqIE1hcCAlbyB0byBgdXRpbC5pbnNwZWN0KClgLCBhbGwgb24gYSBzaW5nbGUgbGluZS4KICovCgpmb3JtYXR0ZXJzLm8gPSBmdW5jdGlvbiAodikgewoJdGhpcy5pbnNwZWN0T3B0cy5jb2xvcnMgPSB0aGlzLnVzZUNvbG9yczsKCXJldHVybiB1dGlsLmluc3BlY3QodiwgdGhpcy5pbnNwZWN0T3B0cykKCQkuc3BsaXQoJ1xuJykKCQkubWFwKHN0ciA9PiBzdHIudHJpbSgpKQoJCS5qb2luKCcgJyk7Cn07CgovKioKICogTWFwICVPIHRvIGB1dGlsLmluc3BlY3QoKWAsIGFsbG93aW5nIG11bHRpcGxlIGxpbmVzIGlmIG5lZWRlZC4KICovCgpmb3JtYXR0ZXJzLk8gPSBmdW5jdGlvbiAodikgewoJdGhpcy5pbnNwZWN0T3B0cy5jb2xvcnMgPSB0aGlzLnVzZUNvbG9yczsKCXJldHVybiB1dGlsLmluc3BlY3QodiwgdGhpcy5pbnNwZWN0T3B0cyk7Cn07Cn0obm9kZSwgbm9kZS5leHBvcnRzKSk7CgovKioKICogRGV0ZWN0IEVsZWN0cm9uIHJlbmRlcmVyIC8gbndqcyBwcm9jZXNzLCB3aGljaCBpcyBub2RlLCBidXQgd2Ugc2hvdWxkCiAqIHRyZWF0IGFzIGEgYnJvd3Nlci4KICovCgppZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJyB8fCBwcm9jZXNzLmJyb3dzZXIgPT09IHRydWUgfHwgcHJvY2Vzcy5fX253anMpIHsKCXNyYyQxLmV4cG9ydHMgPSBicm93c2VyLmV4cG9ydHM7Cn0gZWxzZSB7CglzcmMkMS5leHBvcnRzID0gbm9kZS5leHBvcnRzOwp9Cgp2YXIgcHJvbWlzaWZ5JDEgPSB7fTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9taXNpZnkkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwpmdW5jdGlvbiBwcm9taXNpZnkoZm4pIHsKICAgIHJldHVybiBmdW5jdGlvbiAocmVxLCBvcHRzKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCByZXEsIG9wdHMsIChlcnIsIHJ0bikgPT4gewogICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShydG4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH07Cn0KcHJvbWlzaWZ5JDEuZGVmYXVsdCA9IHByb21pc2lmeTsKCnZhciBfX2ltcG9ydERlZmF1bHQkMyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHsKICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgImRlZmF1bHQiOiBtb2QgfTsKfTsKY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlJCQwJDE7CmNvbnN0IHByb21pc2lmeV8xID0gX19pbXBvcnREZWZhdWx0JDMocHJvbWlzaWZ5JDEpOwpmdW5jdGlvbiBpc0FnZW50QmFzZSh2KSB7CiAgICByZXR1cm4gQm9vbGVhbih2KSAmJiB0eXBlb2Ygdi5hZGRSZXF1ZXN0ID09PSAnZnVuY3Rpb24nOwp9CmZ1bmN0aW9uIGlzSHR0cEFnZW50KHYpIHsKICAgIHJldHVybiBCb29sZWFuKHYpICYmIHR5cGVvZiB2LmFkZFJlcXVlc3QgPT09ICdmdW5jdGlvbic7Cn0KZnVuY3Rpb24gaXNTZWN1cmVFbmRwb2ludCgpIHsKICAgIGNvbnN0IHsgc3RhY2sgfSA9IG5ldyBFcnJvcigpOwogICAgaWYgKHR5cGVvZiBzdGFjayAhPT0gJ3N0cmluZycpCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHN0YWNrLnNwbGl0KCdcbicpLnNvbWUobCA9PiBsLmluZGV4T2YoJyhodHRwcy5qczonKSAhPT0gLTEpOwp9CmZ1bmN0aW9uIGNyZWF0ZUFnZW50KGNhbGxiYWNrLCBvcHRzKSB7CiAgICByZXR1cm4gbmV3IGNyZWF0ZUFnZW50LkFnZW50KGNhbGxiYWNrLCBvcHRzKTsKfQooZnVuY3Rpb24gKGNyZWF0ZUFnZW50KSB7CiAgICAvKioKICAgICAqIEJhc2UgYGh0dHAuQWdlbnRgIGltcGxlbWVudGF0aW9uLgogICAgICogTm8gcG9vbGluZy9rZWVwLWFsaXZlIGlzIGltcGxlbWVudGVkIGJ5IGRlZmF1bHQuCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAgICAqIEBhcGkgcHVibGljCiAgICAgKi8KICAgIGNsYXNzIEFnZW50IGV4dGVuZHMgZXZlbnRzXzEuRXZlbnRFbWl0dGVyIHsKICAgICAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgX29wdHMpIHsKICAgICAgICAgICAgc3VwZXIoKTsKICAgICAgICAgICAgLy8gVGhlIGNhbGxiYWNrIGdldHMgcHJvbWlzaWZpZWQgbGF6aWx5CiAgICAgICAgICAgIHRoaXMucHJvbWlzaWZpZWRDYWxsYmFjayA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgbGV0IG9wdHMgPSBfb3B0czsKICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICBvcHRzID0gY2FsbGJhY2s7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gdGltZW91dCBmb3IgdGhlIHNvY2tldCB0byBiZSByZXR1cm5lZCBmcm9tIHRoZSBjYWxsYmFjawogICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBudWxsOwogICAgICAgICAgICBpZiAob3B0cyAmJiB0eXBlb2Ygb3B0cy50aW1lb3V0ID09PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgdGhpcy50aW1lb3V0ID0gb3B0cy50aW1lb3V0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdHMgfHwge307CiAgICAgICAgICAgIHRoaXMubWF4RnJlZVNvY2tldHMgPSAxOwogICAgICAgICAgICB0aGlzLm1heFNvY2tldHMgPSAxOwogICAgICAgICAgICB0aGlzLnNvY2tldHMgPSBbXTsKICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IFtdOwogICAgICAgIH0KICAgICAgICBnZXQgZGVmYXVsdFBvcnQoKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5leHBsaWNpdERlZmF1bHRQb3J0ID09PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhwbGljaXREZWZhdWx0UG9ydDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc1NlY3VyZUVuZHBvaW50KCkgPyA0NDMgOiA4MDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXQgZGVmYXVsdFBvcnQodikgewogICAgICAgICAgICB0aGlzLmV4cGxpY2l0RGVmYXVsdFBvcnQgPSB2OwogICAgICAgIH0KICAgICAgICBnZXQgcHJvdG9jb2woKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5leHBsaWNpdFByb3RvY29sID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhwbGljaXRQcm90b2NvbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc1NlY3VyZUVuZHBvaW50KCkgPyAnaHR0cHM6JyA6ICdodHRwOic7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0IHByb3RvY29sKHYpIHsKICAgICAgICAgICAgdGhpcy5leHBsaWNpdFByb3RvY29sID0gdjsKICAgICAgICB9CiAgICAgICAgY2FsbGJhY2socmVxLCBvcHRzLCBmbikgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJyJhZ2VudC1iYXNlIiBoYXMgbm8gZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiwgeW91IG11c3Qgc3ViY2xhc3MgYW5kIG92ZXJyaWRlIGBjYWxsYmFjaygpYCcpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxsZWQgYnkgbm9kZS1jb3JlJ3MgIl9odHRwX2NsaWVudC5qcyIgbW9kdWxlIHdoZW4gY3JlYXRpbmcKICAgICAgICAgKiBhIG5ldyBIVFRQIHJlcXVlc3Qgd2l0aCB0aGlzIEFnZW50IGluc3RhbmNlLgogICAgICAgICAqCiAgICAgICAgICogQGFwaSBwdWJsaWMKICAgICAgICAgKi8KICAgICAgICBhZGRSZXF1ZXN0KHJlcSwgX29wdHMpIHsKICAgICAgICAgICAgY29uc3Qgb3duT3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIF9vcHRzKTsKICAgICAgICAgICAgaWYgKHR5cGVvZiBvd25PcHRzLnNlY3VyZUVuZHBvaW50ICE9PSAnYm9vbGVhbicpIHsKICAgICAgICAgICAgICAgIG93bk9wdHMuc2VjdXJlRW5kcG9pbnQgPSBpc1NlY3VyZUVuZHBvaW50KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gU2V0IGRlZmF1bHQgYGhvc3RgIGZvciBIVFRQIHRvIGxvY2FsaG9zdAogICAgICAgICAgICBpZiAob3duT3B0cy5ob3N0ID09IG51bGwpIHsKICAgICAgICAgICAgICAgIG93bk9wdHMuaG9zdCA9ICdsb2NhbGhvc3QnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNldCBkZWZhdWx0IGBwb3J0YCBmb3IgSFRUUCBpZiBub25lIHdhcyBleHBsaWNpdGx5IHNwZWNpZmllZAogICAgICAgICAgICBpZiAob3duT3B0cy5wb3J0ID09IG51bGwpIHsKICAgICAgICAgICAgICAgIG93bk9wdHMucG9ydCA9IG93bk9wdHMuc2VjdXJlRW5kcG9pbnQgPyA0NDMgOiA4MDsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMpLCBvd25PcHRzKTsKICAgICAgICAgICAgaWYgKG9wdHMuaG9zdCAmJiBvcHRzLnBhdGgpIHsKICAgICAgICAgICAgICAgIC8vIElmIGJvdGggYSBgaG9zdGAgYW5kIGBwYXRoYCBhcmUgc3BlY2lmaWVkIHRoZW4gaXQncyBtb3N0IGxpa2VseSB0aGUKICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBvZiBhIGB1cmwucGFyc2UoKWAgY2FsbC4uLiB3ZSBuZWVkIHRvIHJlbW92ZSB0aGUgYHBhdGhgIHBvcnRpb24gc28KICAgICAgICAgICAgICAgIC8vIHRoYXQgYG5ldC5jb25uZWN0KClgIGRvZXNuJ3QgYXR0ZW1wdCB0byBvcGVuIHRoYXQgYXMgYSB1bml4IHNvY2tldCBmaWxlLgogICAgICAgICAgICAgICAgZGVsZXRlIG9wdHMucGF0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWxldGUgb3B0cy5hZ2VudDsKICAgICAgICAgICAgZGVsZXRlIG9wdHMuaG9zdG5hbWU7CiAgICAgICAgICAgIGRlbGV0ZSBvcHRzLl9kZWZhdWx0QWdlbnQ7CiAgICAgICAgICAgIGRlbGV0ZSBvcHRzLmRlZmF1bHRQb3J0OwogICAgICAgICAgICBkZWxldGUgb3B0cy5jcmVhdGVDb25uZWN0aW9uOwogICAgICAgICAgICAvLyBIaW50IHRvIHVzZSAiQ29ubmVjdGlvbjogY2xvc2UiCiAgICAgICAgICAgIC8vIFhYWDogbm9uLWRvY3VtZW50ZWQgYGh0dHBgIG1vZHVsZSBBUEkgOigKICAgICAgICAgICAgcmVxLl9sYXN0ID0gdHJ1ZTsKICAgICAgICAgICAgcmVxLnNob3VsZEtlZXBBbGl2ZSA9IGZhbHNlOwogICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGBzdHJlYW0uRHVwbGV4YCBpbnN0YW5jZQogICAgICAgICAgICBsZXQgdGltZWRPdXQgPSBmYWxzZTsKICAgICAgICAgICAgbGV0IHRpbWVvdXQgPSBudWxsOwogICAgICAgICAgICBjb25zdCB0aW1lb3V0TXMgPSB0aGlzLnRpbWVvdXQ7CiAgICAgICAgICAgIGNvbnN0IGZyZWVTb2NrZXQgPSB0aGlzLmZyZWVTb2NrZXQ7CiAgICAgICAgICAgIGZ1bmN0aW9uIG9uZXJyb3IoZXJyKSB7CiAgICAgICAgICAgICAgICBpZiAocmVxLl9oYWRFcnJvcikKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICByZXEuZW1pdCgnZXJyb3InLCBlcnIpOwogICAgICAgICAgICAgICAgLy8gRm9yIFNhZmV0eS4gU29tZSBhZGRpdGlvbmFsIGVycm9ycyBtaWdodCBmaXJlIGxhdGVyIG9uCiAgICAgICAgICAgICAgICAvLyBhbmQgd2UgbmVlZCB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgZG91YmxlLWZpcmUgdGhlIGVycm9yIGV2ZW50LgogICAgICAgICAgICAgICAgcmVxLl9oYWRFcnJvciA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gb250aW1lb3V0KCkgewogICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7CiAgICAgICAgICAgICAgICB0aW1lZE91dCA9IHRydWU7CiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoYEEgInNvY2tldCIgd2FzIG5vdCBjcmVhdGVkIGZvciBIVFRQIHJlcXVlc3QgYmVmb3JlICR7dGltZW91dE1zfW1zYCk7CiAgICAgICAgICAgICAgICBlcnIuY29kZSA9ICdFVElNRU9VVCc7CiAgICAgICAgICAgICAgICBvbmVycm9yKGVycik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gY2FsbGJhY2tFcnJvcihlcnIpIHsKICAgICAgICAgICAgICAgIGlmICh0aW1lZE91dCkKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICBpZiAodGltZW91dCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTsKICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG9uZXJyb3IoZXJyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBvbnNvY2tldChzb2NrZXQpIHsKICAgICAgICAgICAgICAgIGxldCBzb2NrOwogICAgICAgICAgICAgICAgZnVuY3Rpb24gb25mcmVlKCkgewogICAgICAgICAgICAgICAgICAgIGZyZWVTb2NrZXQoc29jaywgb3B0cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGltZWRPdXQpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKHRpbWVvdXQgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTsKICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpc0FnZW50QmFzZShzb2NrZXQpIHx8IGlzSHR0cEFnZW50KHNvY2tldCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBgc29ja2V0YCBpcyBhY3R1YWxseSBhbiBgaHR0cC5BZ2VudGAgaW5zdGFuY2UsIHNvCiAgICAgICAgICAgICAgICAgICAgLy8gcmVsaW5xdWlzaCByZXNwb25zaWJpbGl0eSBmb3IgdGhpcyBgcmVxYCB0byB0aGUgQWdlbnQKICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIGhlcmUgb24KICAgICAgICAgICAgICAgICAgICBzb2NrZXQuYWRkUmVxdWVzdChyZXEsIG9wdHMpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzb2NrZXQpIHsKICAgICAgICAgICAgICAgICAgICBzb2NrID0gc29ja2V0OwogICAgICAgICAgICAgICAgICAgIHNvY2sub24oJ2ZyZWUnLCBvbmZyZWUpOwogICAgICAgICAgICAgICAgICAgIHJlcS5vblNvY2tldChzb2NrKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoYG5vIER1cGxleCBzdHJlYW0gd2FzIHJldHVybmVkIHRvIGFnZW50LWJhc2UgZm9yIFxgJHtyZXEubWV0aG9kfSAke3JlcS5wYXRofVxgYCk7CiAgICAgICAgICAgICAgICBvbmVycm9yKGVycik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBvbmVycm9yKG5ldyBFcnJvcignYGNhbGxiYWNrYCBpcyBub3QgZGVmaW5lZCcpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXRoaXMucHJvbWlzaWZpZWRDYWxsYmFjaykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2subGVuZ3RoID49IDMpIHsKICAgICAgICAgICAgICAgICAgICAvLyBMZWdhY3kgY2FsbGJhY2sgZnVuY3Rpb24gLSBjb252ZXJ0IHRvIGEgUHJvbWlzZQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzaWZpZWRDYWxsYmFjayA9IHByb21pc2lmeV8xLmRlZmF1bHQodGhpcy5jYWxsYmFjayk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnByb21pc2lmaWVkQ2FsbGJhY2sgPSB0aGlzLmNhbGxiYWNrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZW91dE1zID09PSAnbnVtYmVyJyAmJiB0aW1lb3V0TXMgPiAwKSB7CiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChvbnRpbWVvdXQsIHRpbWVvdXRNcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCdwb3J0JyBpbiBvcHRzICYmIHR5cGVvZiBvcHRzLnBvcnQgIT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgICBvcHRzLnBvcnQgPSBOdW1iZXIob3B0cy5wb3J0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRoaXMucHJvbWlzaWZpZWRDYWxsYmFjayhyZXEsIG9wdHMpKS50aGVuKG9uc29ja2V0LCBjYWxsYmFja0Vycm9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBQcm9taXNlLnJlamVjdChlcnIpLmNhdGNoKGNhbGxiYWNrRXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZyZWVTb2NrZXQoc29ja2V0LCBvcHRzKSB7CiAgICAgICAgICAgIC8vIFRPRE8gcmV1c2Ugc29ja2V0cwogICAgICAgICAgICBzb2NrZXQuZGVzdHJveSgpOwogICAgICAgIH0KICAgICAgICBkZXN0cm95KCkgeyB9CiAgICB9CiAgICBjcmVhdGVBZ2VudC5BZ2VudCA9IEFnZW50Owp9KShjcmVhdGVBZ2VudCB8fCAoY3JlYXRlQWdlbnQgPSB7fSkpOwovLyBTbyB0aGF0IGBpbnN0YW5jZW9mYCB3b3JrcyBjb3JyZWN0bHkKY3JlYXRlQWdlbnQucHJvdG90eXBlID0gY3JlYXRlQWdlbnQuQWdlbnQucHJvdG90eXBlOwp2YXIgc3JjID0gY3JlYXRlQWdlbnQ7Cgp2YXIgcGFyc2VQcm94eVJlc3BvbnNlJDEgPSB7fTsKCnZhciBfX2ltcG9ydERlZmF1bHQkMiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHsKICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgImRlZmF1bHQiOiBtb2QgfTsKfTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlUHJveHlSZXNwb25zZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CmNvbnN0IGRlYnVnXzEkMSA9IF9faW1wb3J0RGVmYXVsdCQyKHNyYyQxLmV4cG9ydHMpOwpjb25zdCBkZWJ1ZyQxID0gZGVidWdfMSQxLmRlZmF1bHQoJ2h0dHBzLXByb3h5LWFnZW50OnBhcnNlLXByb3h5LXJlc3BvbnNlJyk7CmZ1bmN0aW9uIHBhcnNlUHJveHlSZXNwb25zZShzb2NrZXQpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgLy8gd2UgbmVlZCB0byBidWZmZXIgYW55IEhUVFAgdHJhZmZpYyB0aGF0IGhhcHBlbnMgd2l0aCB0aGUgcHJveHkgYmVmb3JlIHdlIGdldAogICAgICAgIC8vIHRoZSBDT05ORUNUIHJlc3BvbnNlLCBzbyB0aGF0IGlmIHRoZSByZXNwb25zZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGFuICIyMDAiCiAgICAgICAgLy8gcmVzcG9uc2UgY29kZSwgdGhlbiB3ZSBjYW4gcmUtcGxheSB0aGUgImRhdGEiIGV2ZW50cyBvbiB0aGUgc29ja2V0IG9uY2UgdGhlCiAgICAgICAgLy8gSFRUUCBwYXJzZXIgaXMgaG9va2VkIHVwLi4uCiAgICAgICAgbGV0IGJ1ZmZlcnNMZW5ndGggPSAwOwogICAgICAgIGNvbnN0IGJ1ZmZlcnMgPSBbXTsKICAgICAgICBmdW5jdGlvbiByZWFkKCkgewogICAgICAgICAgICBjb25zdCBiID0gc29ja2V0LnJlYWQoKTsKICAgICAgICAgICAgaWYgKGIpCiAgICAgICAgICAgICAgICBvbmRhdGEoYik7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHNvY2tldC5vbmNlKCdyZWFkYWJsZScsIHJlYWQpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjbGVhbnVwKCkgewogICAgICAgICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTsKICAgICAgICAgICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpOwogICAgICAgICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CiAgICAgICAgICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcigncmVhZGFibGUnLCByZWFkKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gb25jbG9zZShlcnIpIHsKICAgICAgICAgICAgZGVidWckMSgnb25jbG9zZSBoYWQgZXJyb3IgJW8nLCBlcnIpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBvbmVuZCgpIHsKICAgICAgICAgICAgZGVidWckMSgnb25lbmQnKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gb25lcnJvcihlcnIpIHsKICAgICAgICAgICAgY2xlYW51cCgpOwogICAgICAgICAgICBkZWJ1ZyQxKCdvbmVycm9yICVvJywgZXJyKTsKICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG9uZGF0YShiKSB7CiAgICAgICAgICAgIGJ1ZmZlcnMucHVzaChiKTsKICAgICAgICAgICAgYnVmZmVyc0xlbmd0aCArPSBiLmxlbmd0aDsKICAgICAgICAgICAgY29uc3QgYnVmZmVyZWQgPSBCdWZmZXIuY29uY2F0KGJ1ZmZlcnMsIGJ1ZmZlcnNMZW5ndGgpOwogICAgICAgICAgICBjb25zdCBlbmRPZkhlYWRlcnMgPSBidWZmZXJlZC5pbmRleE9mKCdcclxuXHJcbicpOwogICAgICAgICAgICBpZiAoZW5kT2ZIZWFkZXJzID09PSAtMSkgewogICAgICAgICAgICAgICAgLy8ga2VlcCBidWZmZXJpbmcKICAgICAgICAgICAgICAgIGRlYnVnJDEoJ2hhdmUgbm90IHJlY2VpdmVkIGVuZCBvZiBIVFRQIGhlYWRlcnMgeWV0Li4uJyk7CiAgICAgICAgICAgICAgICByZWFkKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZmlyc3RMaW5lID0gYnVmZmVyZWQudG9TdHJpbmcoJ2FzY2lpJywgMCwgYnVmZmVyZWQuaW5kZXhPZignXHJcbicpKTsKICAgICAgICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9ICtmaXJzdExpbmUuc3BsaXQoJyAnKVsxXTsKICAgICAgICAgICAgZGVidWckMSgnZ290IHByb3h5IHNlcnZlciByZXNwb25zZTogJW8nLCBmaXJzdExpbmUpOwogICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgIHN0YXR1c0NvZGUsCiAgICAgICAgICAgICAgICBidWZmZXJlZAogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgc29ja2V0Lm9uKCdlcnJvcicsIG9uZXJyb3IpOwogICAgICAgIHNvY2tldC5vbignY2xvc2UnLCBvbmNsb3NlKTsKICAgICAgICBzb2NrZXQub24oJ2VuZCcsIG9uZW5kKTsKICAgICAgICByZWFkKCk7CiAgICB9KTsKfQpwYXJzZVByb3h5UmVzcG9uc2UkMS5kZWZhdWx0ID0gcGFyc2VQcm94eVJlc3BvbnNlOwoKdmFyIF9fYXdhaXRlciA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHsKICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfQogICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQogICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yWyJ0aHJvdyJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQogICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTsKICAgIH0pOwp9Owp2YXIgX19pbXBvcnREZWZhdWx0JDEgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7CiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7ICJkZWZhdWx0IjogbW9kIH07Cn07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShhZ2VudCwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwpjb25zdCBuZXRfMSA9IF9faW1wb3J0RGVmYXVsdCQxKHJlcXVpcmUkJDAkMik7CmNvbnN0IHRsc18xID0gX19pbXBvcnREZWZhdWx0JDEocmVxdWlyZSQkMSQxKTsKY29uc3QgdXJsXzEgPSBfX2ltcG9ydERlZmF1bHQkMShyZXF1aXJlJCQyKTsKY29uc3QgYXNzZXJ0XzEgPSBfX2ltcG9ydERlZmF1bHQkMShyZXF1aXJlJCQzKTsKY29uc3QgZGVidWdfMSA9IF9faW1wb3J0RGVmYXVsdCQxKHNyYyQxLmV4cG9ydHMpOwpjb25zdCBhZ2VudF9iYXNlXzEgPSBzcmM7CmNvbnN0IHBhcnNlX3Byb3h5X3Jlc3BvbnNlXzEgPSBfX2ltcG9ydERlZmF1bHQkMShwYXJzZVByb3h5UmVzcG9uc2UkMSk7CmNvbnN0IGRlYnVnID0gZGVidWdfMS5kZWZhdWx0KCdodHRwcy1wcm94eS1hZ2VudDphZ2VudCcpOwovKioKICogVGhlIGBIdHRwc1Byb3h5QWdlbnRgIGltcGxlbWVudHMgYW4gSFRUUCBBZ2VudCBzdWJjbGFzcyB0aGF0IGNvbm5lY3RzIHRvCiAqIHRoZSBzcGVjaWZpZWQgIkhUVFAocykgcHJveHkgc2VydmVyIiBpbiBvcmRlciB0byBwcm94eSBIVFRQUyByZXF1ZXN0cy4KICoKICogT3V0Z29pbmcgSFRUUCByZXF1ZXN0cyBhcmUgZmlyc3QgdHVubmVsZWQgdGhyb3VnaCB0aGUgcHJveHkgc2VydmVyIHVzaW5nIHRoZQogKiBgQ09OTkVDVGAgSFRUUCByZXF1ZXN0IG1ldGhvZCB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIHRvIHRoZSBwcm94eSBzZXJ2ZXIsCiAqIGFuZCB0aGVuIHRoZSBwcm94eSBzZXJ2ZXIgY29ubmVjdHMgdG8gdGhlIGRlc3RpbmF0aW9uIHRhcmdldCBhbmQgaXNzdWVzIHRoZQogKiBIVFRQIHJlcXVlc3QgZnJvbSB0aGUgcHJveHkgc2VydmVyLgogKgogKiBgaHR0cHM6YCByZXF1ZXN0cyBoYXZlIHRoZWlyIHNvY2tldCBjb25uZWN0aW9uIHVwZ3JhZGVkIHRvIFRMUyBvbmNlCiAqIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBwcm94eSBzZXJ2ZXIgaGFzIGJlZW4gZXN0YWJsaXNoZWQuCiAqCiAqIEBhcGkgcHVibGljCiAqLwpjbGFzcyBIdHRwc1Byb3h5QWdlbnQgZXh0ZW5kcyBhZ2VudF9iYXNlXzEuQWdlbnQgewogICAgY29uc3RydWN0b3IoX29wdHMpIHsKICAgICAgICBsZXQgb3B0czsKICAgICAgICBpZiAodHlwZW9mIF9vcHRzID09PSAnc3RyaW5nJykgewogICAgICAgICAgICBvcHRzID0gdXJsXzEuZGVmYXVsdC5wYXJzZShfb3B0cyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBvcHRzID0gX29wdHM7CiAgICAgICAgfQogICAgICAgIGlmICghb3B0cykgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FuIEhUVFAoUykgcHJveHkgc2VydmVyIGBob3N0YCBhbmQgYHBvcnRgIG11c3QgYmUgc3BlY2lmaWVkIScpOwogICAgICAgIH0KICAgICAgICBkZWJ1ZygnY3JlYXRpbmcgbmV3IEh0dHBzUHJveHlBZ2VudCBpbnN0YW5jZTogJW8nLCBvcHRzKTsKICAgICAgICBzdXBlcihvcHRzKTsKICAgICAgICBjb25zdCBwcm94eSA9IE9iamVjdC5hc3NpZ24oe30sIG9wdHMpOwogICAgICAgIC8vIElmIGB0cnVlYCwgdGhlbiBjb25uZWN0IHRvIHRoZSBwcm94eSBzZXJ2ZXIgb3ZlciBUTFMuCiAgICAgICAgLy8gRGVmYXVsdHMgdG8gYGZhbHNlYC4KICAgICAgICB0aGlzLnNlY3VyZVByb3h5ID0gb3B0cy5zZWN1cmVQcm94eSB8fCBpc0hUVFBTKHByb3h5LnByb3RvY29sKTsKICAgICAgICAvLyBQcmVmZXIgYGhvc3RuYW1lYCBvdmVyIGBob3N0YCwgYW5kIHNldCB0aGUgYHBvcnRgIGlmIG5lZWRlZC4KICAgICAgICBwcm94eS5ob3N0ID0gcHJveHkuaG9zdG5hbWUgfHwgcHJveHkuaG9zdDsKICAgICAgICBpZiAodHlwZW9mIHByb3h5LnBvcnQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHByb3h5LnBvcnQgPSBwYXJzZUludChwcm94eS5wb3J0LCAxMCk7CiAgICAgICAgfQogICAgICAgIGlmICghcHJveHkucG9ydCAmJiBwcm94eS5ob3N0KSB7CiAgICAgICAgICAgIHByb3h5LnBvcnQgPSB0aGlzLnNlY3VyZVByb3h5ID8gNDQzIDogODA7CiAgICAgICAgfQogICAgICAgIC8vIEFMUE4gaXMgc3VwcG9ydGVkIGJ5IE5vZGUuanMgPj0gdjUuCiAgICAgICAgLy8gYXR0ZW1wdCB0byBuZWdvdGlhdGUgaHR0cC8xLjEgZm9yIHByb3h5IHNlcnZlcnMgdGhhdCBzdXBwb3J0IGh0dHAvMgogICAgICAgIGlmICh0aGlzLnNlY3VyZVByb3h5ICYmICEoJ0FMUE5Qcm90b2NvbHMnIGluIHByb3h5KSkgewogICAgICAgICAgICBwcm94eS5BTFBOUHJvdG9jb2xzID0gWydodHRwIDEuMSddOwogICAgICAgIH0KICAgICAgICBpZiAocHJveHkuaG9zdCAmJiBwcm94eS5wYXRoKSB7CiAgICAgICAgICAgIC8vIElmIGJvdGggYSBgaG9zdGAgYW5kIGBwYXRoYCBhcmUgc3BlY2lmaWVkIHRoZW4gaXQncyBtb3N0IGxpa2VseQogICAgICAgICAgICAvLyB0aGUgcmVzdWx0IG9mIGEgYHVybC5wYXJzZSgpYCBjYWxsLi4uIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZQogICAgICAgICAgICAvLyBgcGF0aGAgcG9ydGlvbiBzbyB0aGF0IGBuZXQuY29ubmVjdCgpYCBkb2Vzbid0IGF0dGVtcHQgdG8gb3BlbgogICAgICAgICAgICAvLyB0aGF0IGFzIGEgVW5peCBzb2NrZXQgZmlsZS4KICAgICAgICAgICAgZGVsZXRlIHByb3h5LnBhdGg7CiAgICAgICAgICAgIGRlbGV0ZSBwcm94eS5wYXRobmFtZTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wcm94eSA9IHByb3h5OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgbm9kZS1jb3JlIEhUVFAgY2xpZW50IGxpYnJhcnkgaXMgY3JlYXRpbmcgYQogICAgICogbmV3IEhUVFAgcmVxdWVzdC4KICAgICAqCiAgICAgKiBAYXBpIHByb3RlY3RlZAogICAgICovCiAgICBjYWxsYmFjayhyZXEsIG9wdHMpIHsKICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgewogICAgICAgICAgICBjb25zdCB7IHByb3h5LCBzZWN1cmVQcm94eSB9ID0gdGhpczsKICAgICAgICAgICAgLy8gQ3JlYXRlIGEgc29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIHByb3h5IHNlcnZlci4KICAgICAgICAgICAgbGV0IHNvY2tldDsKICAgICAgICAgICAgaWYgKHNlY3VyZVByb3h5KSB7CiAgICAgICAgICAgICAgICBkZWJ1ZygnQ3JlYXRpbmcgYHRscy5Tb2NrZXRgOiAlbycsIHByb3h5KTsKICAgICAgICAgICAgICAgIHNvY2tldCA9IHRsc18xLmRlZmF1bHQuY29ubmVjdChwcm94eSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBkZWJ1ZygnQ3JlYXRpbmcgYG5ldC5Tb2NrZXRgOiAlbycsIHByb3h5KTsKICAgICAgICAgICAgICAgIHNvY2tldCA9IG5ldF8xLmRlZmF1bHQuY29ubmVjdChwcm94eSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oe30sIHByb3h5LmhlYWRlcnMpOwogICAgICAgICAgICBjb25zdCBob3N0bmFtZSA9IGAke29wdHMuaG9zdH06JHtvcHRzLnBvcnR9YDsKICAgICAgICAgICAgbGV0IHBheWxvYWQgPSBgQ09OTkVDVCAke2hvc3RuYW1lfSBIVFRQLzEuMVxyXG5gOwogICAgICAgICAgICAvLyBJbmplY3QgdGhlIGBQcm94eS1BdXRob3JpemF0aW9uYCBoZWFkZXIgaWYgbmVjZXNzYXJ5LgogICAgICAgICAgICBpZiAocHJveHkuYXV0aCkgewogICAgICAgICAgICAgICAgaGVhZGVyc1snUHJveHktQXV0aG9yaXphdGlvbiddID0gYEJhc2ljICR7QnVmZmVyLmZyb20ocHJveHkuYXV0aCkudG9TdHJpbmcoJ2Jhc2U2NCcpfWA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gVGhlIGBIb3N0YCBoZWFkZXIgc2hvdWxkIG9ubHkgaW5jbHVkZSB0aGUgcG9ydAogICAgICAgICAgICAvLyBudW1iZXIgd2hlbiBpdCBpcyBub3QgdGhlIGRlZmF1bHQgcG9ydC4KICAgICAgICAgICAgbGV0IHsgaG9zdCwgcG9ydCwgc2VjdXJlRW5kcG9pbnQgfSA9IG9wdHM7CiAgICAgICAgICAgIGlmICghaXNEZWZhdWx0UG9ydChwb3J0LCBzZWN1cmVFbmRwb2ludCkpIHsKICAgICAgICAgICAgICAgIGhvc3QgKz0gYDoke3BvcnR9YDsKICAgICAgICAgICAgfQogICAgICAgICAgICBoZWFkZXJzLkhvc3QgPSBob3N0OwogICAgICAgICAgICBoZWFkZXJzLkNvbm5lY3Rpb24gPSAnY2xvc2UnOwogICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMoaGVhZGVycykpIHsKICAgICAgICAgICAgICAgIHBheWxvYWQgKz0gYCR7bmFtZX06ICR7aGVhZGVyc1tuYW1lXX1cclxuYDsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBwcm94eVJlc3BvbnNlUHJvbWlzZSA9IHBhcnNlX3Byb3h5X3Jlc3BvbnNlXzEuZGVmYXVsdChzb2NrZXQpOwogICAgICAgICAgICBzb2NrZXQud3JpdGUoYCR7cGF5bG9hZH1cclxuYCk7CiAgICAgICAgICAgIGNvbnN0IHsgc3RhdHVzQ29kZSwgYnVmZmVyZWQgfSA9IHlpZWxkIHByb3h5UmVzcG9uc2VQcm9taXNlOwogICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICByZXEub25jZSgnc29ja2V0JywgcmVzdW1lKTsKICAgICAgICAgICAgICAgIGlmIChvcHRzLnNlY3VyZUVuZHBvaW50KSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VydmVybmFtZSA9IG9wdHMuc2VydmVybmFtZSB8fCBvcHRzLmhvc3Q7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXJ2ZXJuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGRldGVybWluZSAic2VydmVybmFtZSInKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHByb3h5IGlzIGNvbm5lY3RpbmcgdG8gYSBUTFMgc2VydmVyLCBzbyB1cGdyYWRlCiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBzb2NrZXQgY29ubmVjdGlvbiB0byBhIFRMUyBjb25uZWN0aW9uLgogICAgICAgICAgICAgICAgICAgIGRlYnVnKCdVcGdyYWRpbmcgc29ja2V0IGNvbm5lY3Rpb24gdG8gVExTJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRsc18xLmRlZmF1bHQuY29ubmVjdChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9taXQob3B0cywgJ2hvc3QnLCAnaG9zdG5hbWUnLCAncGF0aCcsICdwb3J0JykpLCB7IHNvY2tldCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVybmFtZSB9KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gc29ja2V0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNvbWUgb3RoZXIgc3RhdHVzIGNvZGUgdGhhdCdzIG5vdCAyMDAuLi4gbmVlZCB0byByZS1wbGF5IHRoZSBIVFRQCiAgICAgICAgICAgIC8vIGhlYWRlciAiZGF0YSIgZXZlbnRzIG9udG8gdGhlIHNvY2tldCBvbmNlIHRoZSBIVFRQIG1hY2hpbmVyeSBpcwogICAgICAgICAgICAvLyBhdHRhY2hlZCBzbyB0aGF0IHRoZSBub2RlIGNvcmUgYGh0dHBgIGNhbiBwYXJzZSBhbmQgaGFuZGxlIHRoZQogICAgICAgICAgICAvLyBlcnJvciBzdGF0dXMgY29kZS4KICAgICAgICAgICAgLy8gQ2xvc2UgdGhlIG9yaWdpbmFsIHNvY2tldCwgYW5kIGEgbmV3ICJmYWtlIiBzb2NrZXQgaXMgcmV0dXJuZWQKICAgICAgICAgICAgLy8gaW5zdGVhZCwgc28gdGhhdCB0aGUgcHJveHkgZG9lc24ndCBnZXQgdGhlIEhUVFAgcmVxdWVzdAogICAgICAgICAgICAvLyB3cml0dGVuIHRvIGl0ICh3aGljaCBtYXkgY29udGFpbiBgQXV0aG9yaXphdGlvbmAgaGVhZGVycyBvciBvdGhlcgogICAgICAgICAgICAvLyBzZW5zaXRpdmUgZGF0YSkuCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIFNlZTogaHR0cHM6Ly9oYWNrZXJvbmUuY29tL3JlcG9ydHMvNTQxNTAyCiAgICAgICAgICAgIHNvY2tldC5kZXN0cm95KCk7CiAgICAgICAgICAgIGNvbnN0IGZha2VTb2NrZXQgPSBuZXcgbmV0XzEuZGVmYXVsdC5Tb2NrZXQoKTsKICAgICAgICAgICAgZmFrZVNvY2tldC5yZWFkYWJsZSA9IHRydWU7CiAgICAgICAgICAgIC8vIE5lZWQgdG8gd2FpdCBmb3IgdGhlICJzb2NrZXQiIGV2ZW50IHRvIHJlLXBsYXkgdGhlICJkYXRhIiBldmVudHMuCiAgICAgICAgICAgIHJlcS5vbmNlKCdzb2NrZXQnLCAocykgPT4gewogICAgICAgICAgICAgICAgZGVidWcoJ3JlcGxheWluZyBwcm94eSBidWZmZXIgZm9yIGZhaWxlZCByZXF1ZXN0Jyk7CiAgICAgICAgICAgICAgICBhc3NlcnRfMS5kZWZhdWx0KHMubGlzdGVuZXJDb3VudCgnZGF0YScpID4gMCk7CiAgICAgICAgICAgICAgICAvLyBSZXBsYXkgdGhlICJidWZmZXJlZCIgQnVmZmVyIG9udG8gdGhlIGZha2UgYHNvY2tldGAsIHNpbmNlIGF0CiAgICAgICAgICAgICAgICAvLyB0aGlzIHBvaW50IHRoZSBIVFRQIG1vZHVsZSBtYWNoaW5lcnkgaGFzIGJlZW4gaG9va2VkIHVwIGZvcgogICAgICAgICAgICAgICAgLy8gdGhlIHVzZXIuCiAgICAgICAgICAgICAgICBzLnB1c2goYnVmZmVyZWQpOwogICAgICAgICAgICAgICAgcy5wdXNoKG51bGwpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZha2VTb2NrZXQ7CiAgICAgICAgfSk7CiAgICB9Cn0KYWdlbnQuZGVmYXVsdCA9IEh0dHBzUHJveHlBZ2VudDsKZnVuY3Rpb24gcmVzdW1lKHNvY2tldCkgewogICAgc29ja2V0LnJlc3VtZSgpOwp9CmZ1bmN0aW9uIGlzRGVmYXVsdFBvcnQocG9ydCwgc2VjdXJlKSB7CiAgICByZXR1cm4gQm9vbGVhbigoIXNlY3VyZSAmJiBwb3J0ID09PSA4MCkgfHwgKHNlY3VyZSAmJiBwb3J0ID09PSA0NDMpKTsKfQpmdW5jdGlvbiBpc0hUVFBTKHByb3RvY29sKSB7CiAgICByZXR1cm4gdHlwZW9mIHByb3RvY29sID09PSAnc3RyaW5nJyA/IC9eaHR0cHM6PyQvaS50ZXN0KHByb3RvY29sKSA6IGZhbHNlOwp9CmZ1bmN0aW9uIG9taXQob2JqLCAuLi5rZXlzKSB7CiAgICBjb25zdCByZXQgPSB7fTsKICAgIGxldCBrZXk7CiAgICBmb3IgKGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoIWtleXMuaW5jbHVkZXMoa2V5KSkgewogICAgICAgICAgICByZXRba2V5XSA9IG9ialtrZXldOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXQ7Cn0KCnZhciBfX2ltcG9ydERlZmF1bHQgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7CiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7ICJkZWZhdWx0IjogbW9kIH07Cn07CmNvbnN0IGFnZW50XzEgPSBfX2ltcG9ydERlZmF1bHQoYWdlbnQpOwpmdW5jdGlvbiBjcmVhdGVIdHRwc1Byb3h5QWdlbnQob3B0cykgewogICAgcmV0dXJuIG5ldyBhZ2VudF8xLmRlZmF1bHQob3B0cyk7Cn0KKGZ1bmN0aW9uIChjcmVhdGVIdHRwc1Byb3h5QWdlbnQpIHsKICAgIGNyZWF0ZUh0dHBzUHJveHlBZ2VudC5IdHRwc1Byb3h5QWdlbnQgPSBhZ2VudF8xLmRlZmF1bHQ7CiAgICBjcmVhdGVIdHRwc1Byb3h5QWdlbnQucHJvdG90eXBlID0gYWdlbnRfMS5kZWZhdWx0LnByb3RvdHlwZTsKfSkoY3JlYXRlSHR0cHNQcm94eUFnZW50IHx8IChjcmVhdGVIdHRwc1Byb3h5QWdlbnQgPSB7fSkpOwp2YXIgZGlzdCA9IGNyZWF0ZUh0dHBzUHJveHlBZ2VudDsKCmZ1bmN0aW9uIF9udWxsaXNoQ29hbGVzY2UobGhzLCByaHNGbikgeyBpZiAobGhzICE9IG51bGwpIHsgcmV0dXJuIGxoczsgfSBlbHNlIHsgcmV0dXJuIHJoc0ZuKCk7IH0gfQovLyBFc3RpbWF0ZWQgbWF4aW11bSBzaXplIGZvciByZWFzb25hYmxlIHN0YW5kYWxvbmUgZXZlbnQKY29uc3QgR1pJUF9USFJFU0hPTEQgPSAxMDI0ICogMzI7CgovKioKICogR2V0cyBhIHN0cmVhbSBmcm9tIGEgVWludDhBcnJheSBvciBzdHJpbmcKICogUmVhZGFibGUuZnJvbSBpcyBpZGVhbCBidXQgd2FzIGFkZGVkIGluIG5vZGUuanMgdjEyLjMuMCBhbmQgdjEwLjE3LjAKICovCmZ1bmN0aW9uIHN0cmVhbUZyb21Cb2R5KGJvZHkpIHsKICByZXR1cm4gbmV3IFJlYWRhYmxlKHsKICAgIHJlYWQoKSB7CiAgICAgIHRoaXMucHVzaChib2R5KTsKICAgICAgdGhpcy5wdXNoKG51bGwpOwogICAgfSwKICB9KTsKfQoKLyoqCiAqIENyZWF0ZXMgYSBUcmFuc3BvcnQgdGhhdCB1c2VzIG5hdGl2ZSB0aGUgbmF0aXZlICdodHRwJyBhbmQgJ2h0dHBzJyBtb2R1bGVzIHRvIHNlbmQgZXZlbnRzIHRvIFNlbnRyeS4KICovCmZ1bmN0aW9uIG1ha2VOb2RlVHJhbnNwb3J0KG9wdGlvbnMpIHsKICBsZXQgdXJsU2VnbWVudHM7CgogIHRyeSB7CiAgICB1cmxTZWdtZW50cyA9IG5ldyBVUkwob3B0aW9ucy51cmwpOwogIH0gY2F0Y2ggKGUpIHsKICAgIGNvbnNvbGVTYW5kYm94KCgpID0+IHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgY29uc29sZS53YXJuKAogICAgICAgICdbQHNlbnRyeS9ub2RlXTogSW52YWxpZCBkc24gb3IgdHVubmVsIG9wdGlvbiwgd2lsbCBub3Qgc2VuZCBhbnkgZXZlbnRzLiBUaGUgdHVubmVsIG9wdGlvbiBtdXN0IGJlIGEgZnVsbCBVUkwgd2hlbiB1c2VkLicsCiAgICAgICk7CiAgICB9KTsKICAgIHJldHVybiBjcmVhdGVUcmFuc3BvcnQob3B0aW9ucywgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHt9KSk7CiAgfQoKICBjb25zdCBpc0h0dHBzID0gdXJsU2VnbWVudHMucHJvdG9jb2wgPT09ICdodHRwczonOwoKICAvLyBQcm94eSBwcmlvcml0aXphdGlvbjogaHR0cCA9PiBgb3B0aW9ucy5wcm94eWAgfCBgcHJvY2Vzcy5lbnYuaHR0cF9wcm94eWAKICAvLyBQcm94eSBwcmlvcml0aXphdGlvbjogaHR0cHMgPT4gYG9wdGlvbnMucHJveHlgIHwgYHByb2Nlc3MuZW52Lmh0dHBzX3Byb3h5YCB8IGBwcm9jZXNzLmVudi5odHRwX3Byb3h5YAogIGNvbnN0IHByb3h5ID0gYXBwbHlOb1Byb3h5T3B0aW9uKAogICAgdXJsU2VnbWVudHMsCiAgICBvcHRpb25zLnByb3h5IHx8IChpc0h0dHBzID8gcHJvY2Vzcy5lbnYuaHR0cHNfcHJveHkgOiB1bmRlZmluZWQpIHx8IHByb2Nlc3MuZW52Lmh0dHBfcHJveHksCiAgKTsKCiAgY29uc3QgbmF0aXZlSHR0cE1vZHVsZSA9IGlzSHR0cHMgPyBodHRwcyA6IGh0dHA7CiAgY29uc3Qga2VlcEFsaXZlID0gb3B0aW9ucy5rZWVwQWxpdmUgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogb3B0aW9ucy5rZWVwQWxpdmU7CgogIC8vIFRPRE8odjcpOiBFdmFsdWF0ZSBpZiB3ZSBjYW4gc2V0IGtlZXBBbGl2ZSB0byB0cnVlLiBUaGlzIHdvdWxkIGludm9sdmUgdGVzdGluZyBmb3IgbWVtb3J5IGxlYWtzIGluIG9sZGVyIG5vZGUKICAvLyB2ZXJzaW9ucyg+PSA4KSBhcyB0aGV5IGhhZCBtZW1vcnkgbGVha3Mgd2hlbiB1c2luZyBpdDogIzI1NTUKICBjb25zdCBhZ2VudCA9IHByb3h5CiAgICA/IChuZXcgZGlzdC5IdHRwc1Byb3h5QWdlbnQocHJveHkpICkKICAgIDogbmV3IG5hdGl2ZUh0dHBNb2R1bGUuQWdlbnQoeyBrZWVwQWxpdmUsIG1heFNvY2tldHM6IDMwLCB0aW1lb3V0OiAyMDAwIH0pOwoKICBjb25zdCByZXF1ZXN0RXhlY3V0b3IgPSBjcmVhdGVSZXF1ZXN0RXhlY3V0b3Iob3B0aW9ucywgX251bGxpc2hDb2FsZXNjZShvcHRpb25zLmh0dHBNb2R1bGUsICgpID0+ICggbmF0aXZlSHR0cE1vZHVsZSkpLCBhZ2VudCk7CiAgcmV0dXJuIGNyZWF0ZVRyYW5zcG9ydChvcHRpb25zLCByZXF1ZXN0RXhlY3V0b3IpOwp9CgovKioKICogSG9ub3JzIHRoZSBgbm9fcHJveHlgIGVudiB2YXJpYWJsZSB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IHRvIGFsbG93IGZvciBob3N0cyBleGNsdXNpb24uCiAqCiAqIEBwYXJhbSB0cmFuc3BvcnRVcmwgVGhlIFVSTCB0aGUgdHJhbnNwb3J0IGludGVuZHMgdG8gc2VuZCBldmVudHMgdG8uCiAqIEBwYXJhbSBwcm94eSBUaGUgY2xpZW50IGNvbmZpZ3VyZWQgcHJveHkuCiAqIEByZXR1cm5zIEEgcHJveHkgdGhlIHRyYW5zcG9ydCBzaG91bGQgdXNlLgogKi8KZnVuY3Rpb24gYXBwbHlOb1Byb3h5T3B0aW9uKHRyYW5zcG9ydFVybFNlZ21lbnRzLCBwcm94eSkgewogIGNvbnN0IHsgbm9fcHJveHkgfSA9IHByb2Nlc3MuZW52OwoKICBjb25zdCB1cmxJc0V4ZW1wdEZyb21Qcm94eSA9CiAgICBub19wcm94eSAmJgogICAgbm9fcHJveHkKICAgICAgLnNwbGl0KCcsJykKICAgICAgLnNvbWUoCiAgICAgICAgZXhlbXB0aW9uID0+IHRyYW5zcG9ydFVybFNlZ21lbnRzLmhvc3QuZW5kc1dpdGgoZXhlbXB0aW9uKSB8fCB0cmFuc3BvcnRVcmxTZWdtZW50cy5ob3N0bmFtZS5lbmRzV2l0aChleGVtcHRpb24pLAogICAgICApOwoKICBpZiAodXJsSXNFeGVtcHRGcm9tUHJveHkpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfSBlbHNlIHsKICAgIHJldHVybiBwcm94eTsKICB9Cn0KCi8qKgogKiBDcmVhdGVzIGEgUmVxdWVzdEV4ZWN1dG9yIHRvIGJlIHVzZWQgd2l0aCBgY3JlYXRlVHJhbnNwb3J0YC4KICovCmZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RFeGVjdXRvcigKICBvcHRpb25zLAogIGh0dHBNb2R1bGUsCiAgYWdlbnQsCikgewogIGNvbnN0IHsgaG9zdG5hbWUsIHBhdGhuYW1lLCBwb3J0LCBwcm90b2NvbCwgc2VhcmNoIH0gPSBuZXcgVVJMKG9wdGlvbnMudXJsKTsKICByZXR1cm4gZnVuY3Rpb24gbWFrZVJlcXVlc3QocmVxdWVzdCkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgbGV0IGJvZHkgPSBzdHJlYW1Gcm9tQm9keShyZXF1ZXN0LmJvZHkpOwoKICAgICAgY29uc3QgaGVhZGVycyA9IHsgLi4ub3B0aW9ucy5oZWFkZXJzIH07CgogICAgICBpZiAocmVxdWVzdC5ib2R5Lmxlbmd0aCA+IEdaSVBfVEhSRVNIT0xEKSB7CiAgICAgICAgaGVhZGVyc1snY29udGVudC1lbmNvZGluZyddID0gJ2d6aXAnOwogICAgICAgIGJvZHkgPSBib2R5LnBpcGUoY3JlYXRlR3ppcCgpKTsKICAgICAgfQoKICAgICAgY29uc3QgcmVxID0gaHR0cE1vZHVsZS5yZXF1ZXN0KAogICAgICAgIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgYWdlbnQsCiAgICAgICAgICBoZWFkZXJzLAogICAgICAgICAgaG9zdG5hbWUsCiAgICAgICAgICBwYXRoOiBgJHtwYXRobmFtZX0ke3NlYXJjaH1gLAogICAgICAgICAgcG9ydCwKICAgICAgICAgIHByb3RvY29sLAogICAgICAgICAgY2E6IG9wdGlvbnMuY2FDZXJ0cywKICAgICAgICB9LAogICAgICAgIHJlcyA9PiB7CiAgICAgICAgICByZXMub24oJ2RhdGEnLCAoKSA9PiB7CiAgICAgICAgICAgIC8vIERyYWluIHNvY2tldAogICAgICAgICAgfSk7CgogICAgICAgICAgcmVzLm9uKCdlbmQnLCAoKSA9PiB7CiAgICAgICAgICAgIC8vIERyYWluIHNvY2tldAogICAgICAgICAgfSk7CgogICAgICAgICAgcmVzLnNldEVuY29kaW5nKCd1dGY4Jyk7CgogICAgICAgICAgLy8gIktleS12YWx1ZSBwYWlycyBvZiBoZWFkZXIgbmFtZXMgYW5kIHZhbHVlcy4gSGVhZGVyIG5hbWVzIGFyZSBsb3dlci1jYXNlZC4iCiAgICAgICAgICAvLyBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVycwogICAgICAgICAgY29uc3QgcmV0cnlBZnRlckhlYWRlciA9IF9udWxsaXNoQ29hbGVzY2UocmVzLmhlYWRlcnNbJ3JldHJ5LWFmdGVyJ10sICgpID0+ICggbnVsbCkpOwogICAgICAgICAgY29uc3QgcmF0ZUxpbWl0c0hlYWRlciA9IF9udWxsaXNoQ29hbGVzY2UocmVzLmhlYWRlcnNbJ3gtc2VudHJ5LXJhdGUtbGltaXRzJ10sICgpID0+ICggbnVsbCkpOwoKICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICBzdGF0dXNDb2RlOiByZXMuc3RhdHVzQ29kZSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdyZXRyeS1hZnRlcic6IHJldHJ5QWZ0ZXJIZWFkZXIsCiAgICAgICAgICAgICAgJ3gtc2VudHJ5LXJhdGUtbGltaXRzJzogQXJyYXkuaXNBcnJheShyYXRlTGltaXRzSGVhZGVyKSA/IHJhdGVMaW1pdHNIZWFkZXJbMF0gOiByYXRlTGltaXRzSGVhZGVyLAogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgKTsKCiAgICAgIHJlcS5vbignZXJyb3InLCByZWplY3QpOwogICAgICBib2R5LnBpcGUocmVxKTsKICAgIH0pOwogIH07Cn0KCmZ1bmN0aW9uIF9vcHRpb25hbENoYWluKG9wcykgeyBsZXQgbGFzdEFjY2Vzc0xIUyA9IHVuZGVmaW5lZDsgbGV0IHZhbHVlID0gb3BzWzBdOyBsZXQgaSA9IDE7IHdoaWxlIChpIDwgb3BzLmxlbmd0aCkgeyBjb25zdCBvcCA9IG9wc1tpXTsgY29uc3QgZm4gPSBvcHNbaSArIDFdOyBpICs9IDI7IGlmICgob3AgPT09ICdvcHRpb25hbEFjY2VzcycgfHwgb3AgPT09ICdvcHRpb25hbENhbGwnKSAmJiB2YWx1ZSA9PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gaWYgKG9wID09PSAnYWNjZXNzJyB8fCBvcCA9PT0gJ29wdGlvbmFsQWNjZXNzJykgeyBsYXN0QWNjZXNzTEhTID0gdmFsdWU7IHZhbHVlID0gZm4odmFsdWUpOyB9IGVsc2UgaWYgKG9wID09PSAnY2FsbCcgfHwgb3AgPT09ICdvcHRpb25hbENhbGwnKSB7IHZhbHVlID0gZm4oKC4uLmFyZ3MpID0+IHZhbHVlLmNhbGwobGFzdEFjY2Vzc0xIUywgLi4uYXJncykpOyBsYXN0QWNjZXNzTEhTID0gdW5kZWZpbmVkOyB9IH0gcmV0dXJuIHZhbHVlOyB9CmNvbnN0IG9wdGlvbnMgPSB3b3JrZXJEYXRhOwpsZXQgc2Vzc2lvbjsKbGV0IGhhc1NlbnRBbnJFdmVudCA9IGZhbHNlOwoKZnVuY3Rpb24gbG9nKG1zZykgewogIGlmIChvcHRpb25zLmRlYnVnKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgY29uc29sZS5sb2coYFtBTlIgV29ya2VyXSAke21zZ31gKTsKICB9Cn0KCmNvbnN0IHVybCA9IGdldEVudmVsb3BlRW5kcG9pbnRXaXRoVXJsRW5jb2RlZEF1dGgob3B0aW9ucy5kc24pOwpjb25zdCB0cmFuc3BvcnQgPSBtYWtlTm9kZVRyYW5zcG9ydCh7CiAgdXJsLAogIHJlY29yZERyb3BwZWRFdmVudDogKCkgPT4gewogICAgLy8KICB9LAp9KTsKCmFzeW5jIGZ1bmN0aW9uIHNlbmRBYm5vcm1hbFNlc3Npb24oKSB7CiAgLy8gb2Ygd2UgaGF2ZSBhbiBleGlzdGluZyBzZXNzaW9uIHBhc3NlZCBmcm9tIHRoZSBtYWluIHRocmVhZCwgc2VuZCBpdCBhcyBhYm5vcm1hbAogIGlmIChzZXNzaW9uKSB7CiAgICBsb2coJ1NlbmRpbmcgYWJub3JtYWwgc2Vzc2lvbicpOwogICAgdXBkYXRlU2Vzc2lvbihzZXNzaW9uLCB7IHN0YXR1czogJ2Fibm9ybWFsJywgYWJub3JtYWxfbWVjaGFuaXNtOiAnYW5yX2ZvcmVncm91bmQnIH0pOwoKICAgIGxvZyhKU09OLnN0cmluZ2lmeShzZXNzaW9uKSk7CgogICAgY29uc3QgZW52ZWxvcGUgPSBjcmVhdGVTZXNzaW9uRW52ZWxvcGUoc2Vzc2lvbiwgb3B0aW9ucy5kc24sIG9wdGlvbnMuc2RrTWV0YWRhdGEpOwogICAgYXdhaXQgdHJhbnNwb3J0LnNlbmQoZW52ZWxvcGUpOwoKICAgIHRyeSB7CiAgICAgIC8vIE5vdGlmeSB0aGUgbWFpbiBwcm9jZXNzIHRoYXQgdGhlIHNlc3Npb24gaGFzIGVuZGVkIHNvIHRoZSBzZXNzaW9uIGNhbiBiZSBjbGVhcmVkIGZyb20gdGhlIHNjb3BlCiAgICAgIF9vcHRpb25hbENoYWluKFtwYXJlbnRQb3J0LCAnb3B0aW9uYWxBY2Nlc3MnLCBfMiA9PiBfMi5wb3N0TWVzc2FnZSwgJ2NhbGwnLCBfMyA9PiBfMygnc2Vzc2lvbi1lbmRlZCcpXSk7CiAgICB9IGNhdGNoIChfKSB7CiAgICAgIC8vIGlnbm9yZQogICAgfQogIH0KfQoKbG9nKCdTdGFydGVkJyk7CgpmdW5jdGlvbiBwcmVwYXJlU3RhY2tGcmFtZXMoc3RhY2tGcmFtZXMpIHsKICBpZiAoIXN0YWNrRnJhbWVzKSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KCiAgLy8gU3RyaXAgU2VudHJ5IGZyYW1lcyBhbmQgcmV2ZXJzZSB0aGUgc3RhY2sgZnJhbWVzIHNvIHRoZXkgYXJlIGluIHRoZSBjb3JyZWN0IG9yZGVyCiAgY29uc3Qgc3RyaXBwZWRGcmFtZXMgPSBzdHJpcFNlbnRyeUZyYW1lc0FuZFJldmVyc2Uoc3RhY2tGcmFtZXMpOwoKICAvLyBJZiB3ZSBoYXZlIGFuIGFwcCByb290IHBhdGgsIHJld3JpdGUgdGhlIGZpbGVuYW1lcyB0byBiZSByZWxhdGl2ZSB0byB0aGUgYXBwIHJvb3QKICBpZiAob3B0aW9ucy5hcHBSb290UGF0aCkgewogICAgZm9yIChjb25zdCBmcmFtZSBvZiBzdHJpcHBlZEZyYW1lcykgewogICAgICBpZiAoIWZyYW1lLmZpbGVuYW1lKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGZyYW1lLmZpbGVuYW1lID0gbm9ybWFsaXplVXJsVG9CYXNlKGZyYW1lLmZpbGVuYW1lLCBvcHRpb25zLmFwcFJvb3RQYXRoKTsKICAgIH0KICB9CgogIHJldHVybiBzdHJpcHBlZEZyYW1lczsKfQoKYXN5bmMgZnVuY3Rpb24gc2VuZEFuckV2ZW50KGZyYW1lcywgdHJhY2VDb250ZXh0KSB7CiAgaWYgKGhhc1NlbnRBbnJFdmVudCkgewogICAgcmV0dXJuOwogIH0KCiAgaGFzU2VudEFuckV2ZW50ID0gdHJ1ZTsKCiAgYXdhaXQgc2VuZEFibm9ybWFsU2Vzc2lvbigpOwoKICBsb2coJ1NlbmRpbmcgZXZlbnQnKTsKCiAgY29uc3QgZXZlbnQgPSB7CiAgICBjb250ZXh0czogeyAuLi5vcHRpb25zLmNvbnRleHRzLCB0cmFjZTogdHJhY2VDb250ZXh0IH0sCiAgICByZWxlYXNlOiBvcHRpb25zLnJlbGVhc2UsCiAgICBlbnZpcm9ubWVudDogb3B0aW9ucy5lbnZpcm9ubWVudCwKICAgIGRpc3Q6IG9wdGlvbnMuZGlzdCwKICAgIHBsYXRmb3JtOiAnbm9kZScsCiAgICBsZXZlbDogJ2Vycm9yJywKICAgIGV4Y2VwdGlvbjogewogICAgICB2YWx1ZXM6IFsKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAnQXBwbGljYXRpb25Ob3RSZXNwb25kaW5nJywKICAgICAgICAgIHZhbHVlOiBgQXBwbGljYXRpb24gTm90IFJlc3BvbmRpbmcgZm9yIGF0IGxlYXN0ICR7b3B0aW9ucy5hbnJUaHJlc2hvbGR9IG1zYCwKICAgICAgICAgIHN0YWNrdHJhY2U6IHsgZnJhbWVzOiBwcmVwYXJlU3RhY2tGcmFtZXMoZnJhbWVzKSB9LAogICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBVSSBkb2Vzbid0IHNheSAnQ3Jhc2hlZCBpbicgZm9yIHRoZSBzdGFjayB0cmFjZQogICAgICAgICAgbWVjaGFuaXNtOiB7IHR5cGU6ICdBTlInIH0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH0sCiAgICB0YWdzOiBvcHRpb25zLnN0YXRpY1RhZ3MsCiAgfTsKCiAgbG9nKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7CgogIGNvbnN0IGVudmVsb3BlID0gY3JlYXRlRXZlbnRFbnZlbG9wZShldmVudCwgb3B0aW9ucy5kc24sIG9wdGlvbnMuc2RrTWV0YWRhdGEpOwogIGF3YWl0IHRyYW5zcG9ydC5zZW5kKGVudmVsb3BlKTsKICBhd2FpdCB0cmFuc3BvcnQuZmx1c2goMjAwMCk7CgogIC8vIERlbGF5IGZvciA1IHNlY29uZHMgc28gdGhhdCBzdGRpbyBjYW4gZmx1c2ggaW4gdGhlIG1haW4gZXZlbnQgbG9vcCBldmVyIHJlc3RhcnRzLgogIC8vIFRoaXMgaXMgbWFpbmx5IGZvciB0aGUgYmVuZWZpdCBvZiBsb2dnaW5nL2RlYnVnZ2luZyBpc3N1ZXMuCiAgc2V0VGltZW91dCgoKSA9PiB7CiAgICBwcm9jZXNzLmV4aXQoMCk7CiAgfSwgNTAwMCk7Cn0KCmxldCBkZWJ1Z2dlclBhdXNlOwoKaWYgKG9wdGlvbnMuY2FwdHVyZVN0YWNrVHJhY2UpIHsKICBsb2coJ0Nvbm5lY3RpbmcgdG8gZGVidWdnZXInKTsKCiAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBTZXNzaW9uKCkgOwogIHNlc3Npb24uY29ubmVjdFRvTWFpblRocmVhZCgpOwoKICBsb2coJ0Nvbm5lY3RlZCB0byBkZWJ1Z2dlcicpOwoKICAvLyBDb2xsZWN0IHNjcmlwdElkIC0+IHVybCBtYXAgc28gd2UgY2FuIGxvb2sgdXAgdGhlIGZpbGVuYW1lcyBsYXRlcgogIGNvbnN0IHNjcmlwdHMgPSBuZXcgTWFwKCk7CgogIHNlc3Npb24ub24oJ0RlYnVnZ2VyLnNjcmlwdFBhcnNlZCcsIGV2ZW50ID0+IHsKICAgIHNjcmlwdHMuc2V0KGV2ZW50LnBhcmFtcy5zY3JpcHRJZCwgZXZlbnQucGFyYW1zLnVybCk7CiAgfSk7CgogIHNlc3Npb24ub24oJ0RlYnVnZ2VyLnBhdXNlZCcsIGV2ZW50ID0+IHsKICAgIGlmIChldmVudC5wYXJhbXMucmVhc29uICE9PSAnb3RoZXInKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0cnkgewogICAgICBsb2coJ0RlYnVnZ2VyIHBhdXNlZCcpOwoKICAgICAgLy8gY29weSB0aGUgZnJhbWVzCiAgICAgIGNvbnN0IGNhbGxGcmFtZXMgPSBbLi4uZXZlbnQucGFyYW1zLmNhbGxGcmFtZXNdOwoKICAgICAgY29uc3Qgc3RhY2tGcmFtZXMgPSBjYWxsRnJhbWVzLm1hcChmcmFtZSA9PgogICAgICAgIGNhbGxGcmFtZVRvU3RhY2tGcmFtZShmcmFtZSwgc2NyaXB0cy5nZXQoZnJhbWUubG9jYXRpb24uc2NyaXB0SWQpLCAoKSA9PiB1bmRlZmluZWQpLAogICAgICApOwoKICAgICAgLy8gRXZhbHVhdGUgYSBzY3JpcHQgaW4gdGhlIGN1cnJlbnRseSBwYXVzZWQgY29udGV4dAogICAgICBzZXNzaW9uLnBvc3QoCiAgICAgICAgJ1J1bnRpbWUuZXZhbHVhdGUnLAogICAgICAgIHsKICAgICAgICAgIC8vIEdyYWIgdGhlIHRyYWNlIGNvbnRleHQgZnJvbSB0aGUgY3VycmVudCBzY29wZQogICAgICAgICAgZXhwcmVzc2lvbjoKICAgICAgICAgICAgJ2NvbnN0IGN0eCA9IF9fU0VOVFJZX18uaHViLmdldFNjb3BlKCkuZ2V0UHJvcGFnYXRpb25Db250ZXh0KCk7IGN0eC50cmFjZUlkICsgIi0iICsgY3R4LnNwYW5JZCArICItIiArIGN0eC5wYXJlbnRTcGFuSWQnLAogICAgICAgICAgLy8gRG9uJ3QgcmUtdHJpZ2dlciB0aGUgZGVidWdnZXIgaWYgdGhpcyBjYXVzZXMgYW4gZXJyb3IKICAgICAgICAgIHNpbGVudDogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIChfLCBwYXJhbSkgPT4gewogICAgICAgICAgY29uc3QgdHJhY2VJZCA9IHBhcmFtICYmIHBhcmFtLnJlc3VsdCA/IChwYXJhbS5yZXN1bHQudmFsdWUgKSA6ICctLSc7CiAgICAgICAgICBjb25zdCBbdHJhY2VfaWQsIHNwYW5faWQsIHBhcmVudF9zcGFuX2lkXSA9IHRyYWNlSWQuc3BsaXQoJy0nKSA7CgogICAgICAgICAgc2Vzc2lvbi5wb3N0KCdEZWJ1Z2dlci5yZXN1bWUnKTsKICAgICAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIuZGlzYWJsZScpOwoKICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBfb3B0aW9uYWxDaGFpbihbdHJhY2VfaWQsICdvcHRpb25hbEFjY2VzcycsIF80ID0+IF80Lmxlbmd0aF0pICYmIF9vcHRpb25hbENoYWluKFtzcGFuX2lkLCAnb3B0aW9uYWxBY2Nlc3MnLCBfNSA9PiBfNS5sZW5ndGhdKSA/IHsgdHJhY2VfaWQsIHNwYW5faWQsIHBhcmVudF9zcGFuX2lkIH0gOiB1bmRlZmluZWQ7CiAgICAgICAgICBzZW5kQW5yRXZlbnQoc3RhY2tGcmFtZXMsIGNvbnRleHQpLnRoZW4obnVsbCwgKCkgPT4gewogICAgICAgICAgICBsb2coJ1NlbmRpbmcgQU5SIGV2ZW50IGZhaWxlZC4nKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIucmVzdW1lJyk7CiAgICAgIHNlc3Npb24ucG9zdCgnRGVidWdnZXIuZGlzYWJsZScpOwogICAgICB0aHJvdyBlOwogICAgfQogIH0pOwoKICBkZWJ1Z2dlclBhdXNlID0gKCkgPT4gewogICAgdHJ5IHsKICAgICAgc2Vzc2lvbi5wb3N0KCdEZWJ1Z2dlci5lbmFibGUnLCAoKSA9PiB7CiAgICAgICAgc2Vzc2lvbi5wb3N0KCdEZWJ1Z2dlci5wYXVzZScpOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgLy8KICAgIH0KICB9Owp9CgpmdW5jdGlvbiBjcmVhdGVIclRpbWVyKCkgewogIC8vIFRPRE8gKHY4KTogV2UgY2FuIHVzZSBwcm9jZXNzLmhydGltZS5iaWdpbnQoKSBhZnRlciB3ZSBkcm9wIG5vZGUgdjgKICBsZXQgbGFzdFBvbGwgPSBwcm9jZXNzLmhydGltZSgpOwoKICByZXR1cm4gewogICAgZ2V0VGltZU1zOiAoKSA9PiB7CiAgICAgIGNvbnN0IFtzZWNvbmRzLCBuYW5vU2Vjb25kc10gPSBwcm9jZXNzLmhydGltZShsYXN0UG9sbCk7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKHNlY29uZHMgKiAxZTMgKyBuYW5vU2Vjb25kcyAvIDFlNik7CiAgICB9LAogICAgcmVzZXQ6ICgpID0+IHsKICAgICAgbGFzdFBvbGwgPSBwcm9jZXNzLmhydGltZSgpOwogICAgfSwKICB9Owp9CgpmdW5jdGlvbiB3YXRjaGRvZ1RpbWVvdXQoKSB7CiAgbG9nKCdXYXRjaGRvZyB0aW1lb3V0Jyk7CgogIGlmIChkZWJ1Z2dlclBhdXNlKSB7CiAgICBsb2coJ1BhdXNpbmcgZGVidWdnZXIgdG8gY2FwdHVyZSBzdGFjayB0cmFjZScpOwogICAgZGVidWdnZXJQYXVzZSgpOwogIH0gZWxzZSB7CiAgICBsb2coJ0NhcHR1cmluZyBldmVudCB3aXRob3V0IGEgc3RhY2sgdHJhY2UnKTsKICAgIHNlbmRBbnJFdmVudCgpLnRoZW4obnVsbCwgKCkgPT4gewogICAgICBsb2coJ1NlbmRpbmcgQU5SIGV2ZW50IGZhaWxlZCBvbiB3YXRjaGRvZyB0aW1lb3V0LicpOwogICAgfSk7CiAgfQp9Cgpjb25zdCB7IHBvbGwgfSA9IHdhdGNoZG9nVGltZXIoY3JlYXRlSHJUaW1lciwgb3B0aW9ucy5wb2xsSW50ZXJ2YWwsIG9wdGlvbnMuYW5yVGhyZXNob2xkLCB3YXRjaGRvZ1RpbWVvdXQpOwoKX29wdGlvbmFsQ2hhaW4oW3BhcmVudFBvcnQsICdvcHRpb25hbEFjY2VzcycsIF82ID0+IF82Lm9uLCAnY2FsbCcsIF83ID0+IF83KCdtZXNzYWdlJywgKG1zZykgPT4gewogIGlmIChtc2cuc2Vzc2lvbikgewogICAgc2Vzc2lvbiA9IG1ha2VTZXNzaW9uKG1zZy5zZXNzaW9uKTsKICB9CgogIHBvbGwoKTsKfSldKTs="});var Nf=g(($B,GU)=>{var{_optionalChain:y_e,_optionalChainDelete:_U}=A();Object.defineProperty($B,"__esModule",{value:!0});var b_e=require("url"),jB=O(),QB=A(),A_e=Ui(),__e=AU(),S_e=50,G_e=5e3;function zB(e,...t){QB.logger.log(`[ANR] ${e}`,...t)}function B_e(){return QB.dynamicRequire(GU,"worker_threads")}async function v_e(e){let t={message:"ANR"},n={};for(let r of e.getEventProcessors()){if(t===null)break;t=await r(t,n)}return y_e([t,"optionalAccess",r=>r.contexts])||{}}var SU="Anr",Z_e=(e={})=>({name:SU,setup(t){if(A_e.NODE_VERSION.major<16)throw new Error("ANR detection requires Node 16 or later");setImmediate(()=>R_e(t,e))}}),E_e=jB.convertIntegrationFnToClass(SU,Z_e);async function R_e(e,t){let n=await v_e(e),r=e.getDsn();if(!r)return;_U([n,"access",l=>l.app,"optionalAccess",l=>delete l.app_memory]),_U([n,"access",l=>l.device,"optionalAccess",l=>delete l.free_memory]);let i=e.getOptions(),s=e.getSdkMetadata()||{};s.sdk&&(s.sdk.integrations=i.integrations.map(l=>l.name));let o={debug:QB.logger.isEnabled(),dsn:r,environment:i.environment||"production",release:i.release,dist:i.dist,sdkMetadata:s,appRootPath:t.appRootPath,pollInterval:t.pollInterval||S_e,anrThreshold:t.anrThreshold||G_e,captureStackTrace:!!t.captureStackTrace,staticTags:t.staticTags||{},contexts:n};if(o.captureStackTrace){let l=require("inspector");l.url()||l.open(0)}let{Worker:a}=B_e(),c=new a(new b_e.URL(`data:application/javascript;base64,${__e.base64WorkerScript}`),{workerData:o});process.on("exit",()=>{c.terminate()});let u=setInterval(()=>{try{let l=jB.getCurrentScope().getSession(),d=l?{...l,toJSON:void 0}:void 0;c.postMessage({session:d})}catch{}},o.pollInterval);u.unref(),c.on("message",l=>{l==="session-ended"&&(zB("ANR event sent from ANR worker. Clearing session in this thread."),jB.getCurrentScope().setSession(void 0))}),c.once("error",l=>{clearInterval(u),zB("ANR worker error",l)}),c.once("exit",l=>{clearInterval(u),zB("ANR worker exit",l)}),c.unref()}$B.Anr=E_e});var Tf=g(rd=>{Object.defineProperty(rd,"__esModule",{value:!0});var Tn=O(),ZU=A();function BU(e){return e&&e.statusCode!==void 0}function W_e(e){return e&&e.isBoom!==void 0}function w_e(e){return e&&e.error!==void 0}function vU(e){Tn.captureException(e,{mechanism:{type:"hapi",handled:!1,data:{function:"hapiErrorPlugin"}}})}var EU={name:"SentryHapiErrorPlugin",version:Tn.SDK_VERSION,register:async function(e){e.events.on("request",(n,r)=>{let i=Tn.getActiveTransaction();n.response&&W_e(n.response)?vU(n.response):w_e(r)&&vU(r.error),i&&(i.setStatus("internal_error"),i.end())})}},RU={name:"SentryHapiTracingPlugin",version:Tn.SDK_VERSION,register:async function(e){let t=e;t.ext("onPreHandler",(n,r)=>{let i=Tn.continueTrace({sentryTrace:n.headers["sentry-trace"]||void 0,baggage:n.headers.baggage||void 0},s=>Tn.startTransaction({...s,op:"hapi.request",name:n.route.path,description:`${n.route.method} ${n.path}`}));return Tn.getCurrentScope().setSpan(i),r.continue}),t.ext("onPreResponse",(n,r)=>{let i=Tn.getActiveTransaction();if(n.response&&BU(n.response)&&i){let s=n.response;s.header("sentry-trace",Tn.spanToTraceHeader(i));let o=ZU.dynamicSamplingContextToSentryBaggageHeader(i.getDynamicSamplingContext());o&&s.header("baggage",o)}return r.continue}),t.ext("onPostHandler",(n,r)=>{let i=Tn.getActiveTransaction();return n.response&&BU(n.response)&&i&&i.setHttpStatus(n.response.statusCode),i&&i.end(),r.continue})}},WU="Hapi",N_e=(e={})=>{let t=e.server;return{name:WU,setupOnce(){!t||ZU.fill(t,"start",n=>async function(){return await this.register(RU),await this.register(EU),n.apply(this)})}}},T_e=Tn.convertIntegrationFnToClass(WU,N_e);rd.Hapi=T_e;rd.hapiErrorPlugin=EU;rd.hapiTracingPlugin=RU});var nv=g(tv=>{Object.defineProperty(tv,"__esModule",{value:!0});var wU=require("path"),H_e=A();function NU(e){return e.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}var ev;function k_e(){return ev||(ev=`${require&&require.main&&require.main.filename?H_e.dirname(require.main.filename):global.process.cwd()}/`),ev}function V_e(e,t=k_e(),n=wU.sep==="\\"){if(!e)return;let r=n?NU(t):t,i=n?NU(e):e,{dir:s,base:o,ext:a}=wU.posix.parse(i);(a===".js"||a===".mjs"||a===".cjs")&&(o=o.slice(0,a.length*-1)),s||(s=".");let c=s.lastIndexOf("/node_modules");if(c>-1)return`${s.slice(c+14).replace(/\//g,".")}:${o}`;if(c=`${s}/`.lastIndexOf(r,0),c===0){let u=s.slice(r.length).replace(/\//g,".");return u&&(u+=":"),u+=o,u}return o}tv.getModuleFromFilename=V_e});var rv=g(mo=>{var{_optionalChain:Y_e}=A();Object.defineProperty(mo,"__esModule",{value:!0});var mr=O(),po=A(),F_e=VO(),x_e=cB(),X_e=yB(),J_e=BB(),D_e=WB(),O_e=NB(),U_e=kB(),K_e=FB(),L_e=xB(),M_e=LB(),q_e=MB(),P_e=PB();Nf();Tf();var z_e=nv(),j_e=dB(),TU=[new mr.Integrations.InboundFilters,new mr.Integrations.FunctionToString,new mr.Integrations.LinkedErrors,new X_e.Console,new J_e.Http,new q_e.Undici,new D_e.OnUncaughtException,new O_e.OnUnhandledRejection,new K_e.ContextLines,new M_e.LocalVariables,new L_e.Context,new U_e.Modules,new mr.RequestData];function Q_e(e={}){let t=mr.getMainCarrier();F_e.setNodeAsyncContextStrategy();let n=Y_e([t,"access",s=>s.__SENTRY__,"optionalAccess",s=>s.integrations])||[];e.defaultIntegrations=e.defaultIntegrations===!1?[]:[...Array.isArray(e.defaultIntegrations)?e.defaultIntegrations:TU,...n],e.dsn===void 0&&(e.dsn="https://cbe9c82c26b9431a9d05cf0a97984f0d@o10801.ingest.sentry.io/6418580");let r=process.env.SENTRY_TRACES_SAMPLE_RATE;if(e.tracesSampleRate===void 0&&r){let s=parseFloat(r);isFinite(s)&&(e.tracesSampleRate=s)}if(e.release===void 0){let s=HU();s!==void 0?e.release=s:e.autoSessionTracking=!1}e.environment===void 0&&process.env.SENTRY_ENVIRONMENT&&(e.environment=process.env.SENTRY_ENVIRONMENT),e.autoSessionTracking===void 0&&e.dsn!==void 0&&(e.autoSessionTracking=!0),e.instrumenter===void 0&&(e.instrumenter="sentry");let i={...e,stackParser:po.stackParserFromStackParserOptions(e.stackParser||kU),integrations:mr.getIntegrationsToSetup(e),transport:e.transport||j_e.makeNodeTransport};if(mr.initAndBind(e.clientClass||x_e.NodeClient,i),e.autoSessionTracking&&eSe(),tSe(),e.spotlight){let s=mr.getClient();s&&s.addIntegration&&(s.setupIntegrations(!0),s.addIntegration(new P_e.Spotlight({sidecarUrl:typeof e.spotlight=="string"?e.spotlight:void 0})))}}function $_e(e){if(e===void 0)return!1;let t=e&&e.getOptions();return t&&t.autoSessionTracking!==void 0?t.autoSessionTracking:!1}function HU(e){return process.env.SENTRY_RELEASE?process.env.SENTRY_RELEASE:po.GLOBAL_OBJ.SENTRY_RELEASE&&po.GLOBAL_OBJ.SENTRY_RELEASE.id?po.GLOBAL_OBJ.SENTRY_RELEASE.id:process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||process.env.CF_PAGES_COMMIT_SHA||e}var kU=po.createStackParser(po.nodeStackLineParser(z_e.getModuleFromFilename));function eSe(){let e=mr.getCurrentHub();e.startSession(),process.on("beforeExit",()=>{let t=e.getScope().getSession();t&&!["exited","crashed"].includes(t.status)&&e.endSession()})}function tSe(){let e=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(e)){let t=process.env.SENTRY_TRACE,n=process.env.SENTRY_BAGGAGE,{propagationContext:r}=po.tracingContextFromHeaders(t,n);mr.getCurrentScope().setPropagationContext(r)}}mo.defaultIntegrations=TU;mo.defaultStackParser=kU;mo.getSentryRelease=HU;mo.init=Q_e;mo.isAutoSessionTrackingEnabled=$_e});var VU=g(sv=>{Object.defineProperty(sv,"__esModule",{value:!0});var Hf=require("fs"),iv=require("path");function nSe(e){let t=iv.resolve(e);if(!Hf.existsSync(t))throw new Error(`Cannot read contents of ${t}. Directory does not exist.`);if(!Hf.statSync(t).isDirectory())throw new Error(`Cannot read contents of ${t}, because it is not a directory.`);let n=r=>Hf.readdirSync(r).reduce((i,s)=>{let o=iv.join(r,s);return Hf.statSync(o).isDirectory()?i.concat(n(o)):(i.push(o),i)},[]);return n(t).map(r=>iv.relative(t,r))}sv.deepReadDirSync=nSe});var YU=g(ov=>{Object.defineProperty(ov,"__esModule",{value:!0});var rSe=O(),iSe=Nf();function sSe(e){let t=rSe.getClient();return new iSe.Anr(e).setup(t),Promise.resolve()}ov.enableAnrDetection=sSe});var xU=g(kf=>{Object.defineProperty(kf,"__esModule",{value:!0});var FU=A();function oSe(e,t){return FU.extractRequestData(e,{include:t})}function aSe(e,t,n={}){return FU.addRequestDataToEvent(e,t,{include:n})}kf.extractRequestData=oSe;kf.parseRequest=aSe});var JU=g(qi=>{var{_optionalChain:ac}=A();Object.defineProperty(qi,"__esModule",{value:!0});var Se=O(),Mi=A(),cSe=td(),Vf=rv(),XU=xU();function uSe(){return function(t,n,r){let i=ac([Se.getClient,"call",l=>l(),"optionalAccess",l=>l.getOptions,"call",l=>l()]);if(!i||i.instrumenter!=="sentry"||ac([t,"access",l=>l.method,"optionalAccess",l=>l.toUpperCase,"call",l=>l()])==="OPTIONS"||ac([t,"access",l=>l.method,"optionalAccess",l=>l.toUpperCase,"call",l=>l()])==="HEAD")return r();let s=t.headers&&Mi.isString(t.headers["sentry-trace"])?t.headers["sentry-trace"]:void 0,o=ac([t,"access",l=>l.headers,"optionalAccess",l=>l.baggage]);if(!Se.hasTracingEnabled(i))return r();let[a,c]=Mi.extractPathForTransaction(t,{path:!0,method:!0}),u=Se.continueTrace({sentryTrace:s,baggage:o},l=>Se.startTransaction({name:a,op:"http.server",origin:"auto.http.node.tracingHandler",...l,metadata:{...l.metadata,request:t,source:c}},{request:Mi.extractRequestData(t)}));Se.getCurrentScope().setSpan(u),n.__sentry_transaction=u,n.once("finish",()=>{setImmediate(()=>{Mi.addRequestDataToTransaction(u,t),u.setHttpStatus(n.statusCode),u.end()})}),r()}}function lSe(e={}){let t;if("include"in e)t={include:e.include};else{let{ip:n,request:r,transaction:i,user:s}=e;(n||r||i||s)&&(t={include:Mi.dropUndefinedKeys({ip:n,request:r,transaction:i,user:s})})}return t}function dSe(e){let t=lSe(e),n=Se.getClient();if(n&&Vf.isAutoSessionTrackingEnabled(n)){n.initSessionFlusher();let r=Se.getCurrentScope();r.getSession()&&r.setSession()}return function(i,s,o){if(e&&e.flushTimeout&&e.flushTimeout>0){let a=s.end;s.end=function(c,u,l){Se.flush(e.flushTimeout).then(()=>{a.call(this,c,u,l)}).then(null,d=>{cSe.DEBUG_BUILD&&Mi.logger.error(d),a.call(this,c,u,l)})}}Se.runWithAsyncContext(()=>{let a=Se.getCurrentScope();a.setSDKProcessingMetadata({request:i,requestDataOptionsFromExpressHandler:t});let c=Se.getClient();Vf.isAutoSessionTrackingEnabled(c)&&a.setRequestSession({status:"ok"}),s.once("finish",()=>{let u=Se.getClient();Vf.isAutoSessionTrackingEnabled(u)&&setImmediate(()=>{u&&u._captureRequestSession&&u._captureRequestSession()})}),o()})}}function gSe(e){let t=e.status||e.statusCode||e.status_code||e.output&&e.output.statusCode;return t?parseInt(t,10):500}function pSe(e){return gSe(e)>=500}function mSe(e){return function(n,r,i,s){if((e&&e.shouldHandleError||pSe)(n)){Se.withScope(a=>{a.setSDKProcessingMetadata({request:r});let c=i.__sentry_transaction;c&&a.getSpan()===void 0&&a.setSpan(c);let u=Se.getClient();if(u&&Vf.isAutoSessionTrackingEnabled(u)&&u._sessionFlusher!==void 0){let p=a.getRequestSession();p&&p.status!==void 0&&(p.status="crashed")}let l=Se.captureException(n,{mechanism:{type:"middleware",handled:!1}});i.sentry=l,s(n)});return}s(n)}}function fSe(e={}){return function({path:t,type:n,next:r,rawInput:i}){let s=ac([Se.getClient,"call",u=>u(),"optionalAccess",u=>u.getOptions,"call",u=>u()]),o=Se.getCurrentScope().getTransaction();if(o){o.updateName(`trpc/${t}`),o.setMetadata({source:"route"}),o.op="rpc.server";let u={procedure_type:n};(e.attachRpcInput!==void 0?e.attachRpcInput:ac([s,"optionalAccess",l=>l.sendDefaultPii]))&&(u.input=Mi.normalize(i)),o.setContext("trpc",u)}function a(u){u.ok||Se.captureException(u.error,{mechanism:{handled:!1,data:{function:"trpcMiddleware"}}})}let c;try{c=r()}catch(u){throw Se.captureException(u,{mechanism:{handled:!1,data:{function:"trpcMiddleware"}}}),u}return Mi.isThenable(c)?Promise.resolve(c).then(u=>{a(u)},u=>{Se.captureException(u,{mechanism:{handled:!1,data:{function:"trpcMiddleware"}}})}):a(c),c}}qi.extractRequestData=XU.extractRequestData;qi.parseRequest=XU.parseRequest;qi.errorHandler=mSe;qi.requestHandler=dSe;qi.tracingHandler=uSe;qi.trpcMiddleware=fSe});var DU=g(bt=>{Object.defineProperty(bt,"__esModule",{value:!0});var hSe=yB(),ISe=BB(),CSe=WB(),ySe=NB(),bSe=kB(),ASe=FB(),_Se=xB(),SSe=O(),GSe=LB(),BSe=MB(),vSe=PB(),ZSe=Nf(),ESe=Tf();bt.Console=hSe.Console;bt.Http=ISe.Http;bt.OnUncaughtException=CSe.OnUncaughtException;bt.OnUnhandledRejection=ySe.OnUnhandledRejection;bt.Modules=bSe.Modules;bt.ContextLines=ASe.ContextLines;bt.Context=_Se.Context;bt.RequestData=SSe.RequestData;bt.LocalVariables=GSe.LocalVariables;bt.Undici=BSe.Undici;bt.Spotlight=vSe.Spotlight;bt.Anr=ZSe.Anr;bt.Hapi=ESe.Hapi});var OU=g(zr=>{Object.defineProperty(zr,"__esModule",{value:!0});var fo=rB();zr.Apollo=fo.Apollo;zr.Express=fo.Express;zr.GraphQL=fo.GraphQL;zr.Mongo=fo.Mongo;zr.Mysql=fo.Mysql;zr.Postgres=fo.Postgres;zr.Prisma=fo.Prisma});var cv=g(av=>{Object.defineProperty(av,"__esModule",{value:!0});var RSe=[["january","1"],["february","2"],["march","3"],["april","4"],["may","5"],["june","6"],["july","7"],["august","8"],["september","9"],["october","10"],["november","11"],["december","12"],["jan","1"],["feb","2"],["mar","3"],["apr","4"],["may","5"],["jun","6"],["jul","7"],["aug","8"],["sep","9"],["oct","10"],["nov","11"],["dec","12"],["sunday","0"],["monday","1"],["tuesday","2"],["wednesday","3"],["thursday","4"],["friday","5"],["saturday","6"],["sun","0"],["mon","1"],["tue","2"],["wed","3"],["thu","4"],["fri","5"],["sat","6"]];function WSe(e){return RSe.reduce((t,[n,r])=>t.replace(new RegExp(n,"gi"),r),e)}av.replaceCronNames=WSe});var MU=g(uv=>{Object.defineProperty(uv,"__esModule",{value:!0});var UU=O(),KU=cv(),LU="Automatic instrumentation of CronJob only supports crontab string";function wSe(e,t){return new Proxy(e,{construct(n,r){let[i,s,o,a,c,...u]=r;if(typeof i!="string")throw new Error(LU);let l=KU.replaceCronNames(i);function d(p,m){return UU.withMonitor(t,()=>s(p,m),{schedule:{type:"crontab",value:l},...c?{timeZone:c}:{}})}return new n(i,d,o,a,c,...u)},get(n,r){return r==="from"?i=>{let{cronTime:s,onTick:o,timeZone:a}=i;if(typeof s!="string")throw new Error(LU);let c=KU.replaceCronNames(s);return i.onTick=(u,l)=>UU.withMonitor(t,()=>o(u,l),{schedule:{type:"crontab",value:c},...a?{timeZone:a}:{}}),n.from(i)}:n[r]}})}uv.instrumentCron=wSe});var PU=g(lv=>{var{_optionalChain:qU}=A();Object.defineProperty(lv,"__esModule",{value:!0});var NSe=O(),TSe=cv();function HSe(e){return new Proxy(e,{get(t,n){return n==="schedule"&&t.schedule?new Proxy(t.schedule,{apply(r,i,s){let[o,,a]=s;if(!qU([a,"optionalAccess",c=>c.name]))throw new Error('Missing "name" for scheduled job. A name is required for Sentry check-in monitoring.');return NSe.withMonitor(a.name,()=>r.apply(i,s),{schedule:{type:"crontab",value:TSe.replaceCronNames(o)},timezone:qU([a,"optionalAccess",c=>c.timezone])})}}):t[n]}})}lv.instrumentNodeCron=HSe});var gv=g(v=>{Object.defineProperty(v,"__esModule",{value:!0});var Y=O(),kSe=RO(),VSe=cB(),YSe=dB(),Yf=rv(),dv=A(),FSe=VU(),xSe=nv(),XSe=YU(),JSe=JU(),DSe=DU(),OSe=OU(),USe=Tf(),KSe=MU(),LSe=PU(),MSe={...Y.Integrations,...DSe,...OSe},qSe={instrumentCron:KSe.instrumentCron,instrumentNodeCron:LSe.instrumentNodeCron};v.Hub=Y.Hub;v.SDK_VERSION=Y.SDK_VERSION;v.Scope=Y.Scope;v.addBreadcrumb=Y.addBreadcrumb;v.addEventProcessor=Y.addEventProcessor;v.addGlobalEventProcessor=Y.addGlobalEventProcessor;v.addIntegration=Y.addIntegration;v.captureCheckIn=Y.captureCheckIn;v.captureEvent=Y.captureEvent;v.captureException=Y.captureException;v.captureMessage=Y.captureMessage;v.close=Y.close;v.configureScope=Y.configureScope;v.continueTrace=Y.continueTrace;v.createTransport=Y.createTransport;v.extractTraceparentData=Y.extractTraceparentData;v.flush=Y.flush;v.getActiveSpan=Y.getActiveSpan;v.getActiveTransaction=Y.getActiveTransaction;v.getClient=Y.getClient;v.getCurrentHub=Y.getCurrentHub;v.getCurrentScope=Y.getCurrentScope;v.getGlobalScope=Y.getGlobalScope;v.getHubFromCarrier=Y.getHubFromCarrier;v.getIsolationScope=Y.getIsolationScope;v.lastEventId=Y.lastEventId;v.makeMain=Y.makeMain;v.metrics=Y.metrics;v.runWithAsyncContext=Y.runWithAsyncContext;v.setContext=Y.setContext;v.setExtra=Y.setExtra;v.setExtras=Y.setExtras;v.setMeasurement=Y.setMeasurement;v.setTag=Y.setTag;v.setTags=Y.setTags;v.setUser=Y.setUser;v.spanStatusfromHttpCode=Y.spanStatusfromHttpCode;v.startActiveSpan=Y.startActiveSpan;v.startInactiveSpan=Y.startInactiveSpan;v.startSpan=Y.startSpan;v.startSpanManual=Y.startSpanManual;v.startTransaction=Y.startTransaction;v.trace=Y.trace;v.withMonitor=Y.withMonitor;v.withScope=Y.withScope;v.autoDiscoverNodePerformanceMonitoringIntegrations=kSe.autoDiscoverNodePerformanceMonitoringIntegrations;v.NodeClient=VSe.NodeClient;v.makeNodeTransport=YSe.makeNodeTransport;v.defaultIntegrations=Yf.defaultIntegrations;v.defaultStackParser=Yf.defaultStackParser;v.getSentryRelease=Yf.getSentryRelease;v.init=Yf.init;v.DEFAULT_USER_INCLUDES=dv.DEFAULT_USER_INCLUDES;v.addRequestDataToEvent=dv.addRequestDataToEvent;v.extractRequestData=dv.extractRequestData;v.deepReadDirSync=FSe.deepReadDirSync;v.getModuleFromFilename=xSe.getModuleFromFilename;v.enableAnrDetection=XSe.enableAnrDetection;v.Handlers=JSe;v.hapiErrorPlugin=USe.hapiErrorPlugin;v.Integrations=MSe;v.cron=qSe});var eK=g((Hke,$U)=>{$U.exports=QU;QU.sync=zSe;var zU=require("fs");function PSe(e,t){var n=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}function jU(e,t,n){return!e.isSymbolicLink()&&!e.isFile()?!1:PSe(t,n)}function QU(e,t,n){zU.stat(e,function(r,i){n(r,r?!1:jU(i,e,t))})}function zSe(e,t){return jU(zU.statSync(e),e,t)}});var sK=g((kke,iK)=>{iK.exports=nK;nK.sync=jSe;var tK=require("fs");function nK(e,t,n){tK.stat(e,function(r,i){n(r,r?!1:rK(i,t))})}function jSe(e,t){return rK(tK.statSync(e),t)}function rK(e,t){return e.isFile()&&QSe(e,t)}function QSe(e,t){var n=e.mode,r=e.uid,i=e.gid,s=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),o=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),l=a|c,d=n&u||n&c&&i===o||n&a&&r===s||n&l&&s===0;return d}});var aK=g((Yke,oK)=>{var Vke=require("fs"),Ff;process.platform==="win32"||global.TESTING_WINDOWS?Ff=eK():Ff=sK();oK.exports=pv;pv.sync=$Se;function pv(e,t,n){if(typeof t=="function"&&(n=t,t={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,i){pv(e,t||{},function(s,o){s?i(s):r(o)})})}Ff(e,t||{},function(r,i){r&&(r.code==="EACCES"||t&&t.ignoreErrors)&&(r=null,i=!1),n(r,i)})}function $Se(e,t){try{return Ff.sync(e,t||{})}catch(n){if(t&&t.ignoreErrors||n.code==="EACCES")return!1;throw n}}});var mK=g((Fke,pK)=>{var cc=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",cK=require("path"),eGe=cc?";":":",uK=aK(),lK=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),dK=(e,t)=>{let n=t.colon||eGe,r=e.match(/\//)||cc&&e.match(/\\/)?[""]:[...cc?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],i=cc?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=cc?i.split(n):[""];return cc&&e.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:r,pathExt:s,pathExtExe:i}},gK=(e,t,n)=>{typeof t=="function"&&(n=t,t={}),t||(t={});let{pathEnv:r,pathExt:i,pathExtExe:s}=dK(e,t),o=[],a=u=>new Promise((l,d)=>{if(u===r.length)return t.all&&o.length?l(o):d(lK(e));let p=r[u],m=/^".*"$/.test(p)?p.slice(1,-1):p,f=cK.join(m,e),h=!m&&/^\.[\\\/]/.test(e)?e.slice(0,2)+f:f;l(c(h,u,0))}),c=(u,l,d)=>new Promise((p,m)=>{if(d===i.length)return p(a(l+1));let f=i[d];uK(u+f,{pathExt:s},(h,I)=>{if(!h&&I)if(t.all)o.push(u+f);else return p(u+f);return p(c(u,l,d+1))})});return n?a(0).then(u=>n(null,u),n):a(0)},tGe=(e,t)=>{t=t||{};let{pathEnv:n,pathExt:r,pathExtExe:i}=dK(e,t),s=[];for(let o=0;o<n.length;o++){let a=n[o],c=/^".*"$/.test(a)?a.slice(1,-1):a,u=cK.join(c,e),l=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let d=0;d<r.length;d++){let p=l+r[d];try{if(uK.sync(p,{pathExt:i}))if(t.all)s.push(p);else return p}catch{}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw lK(e)};pK.exports=gK;gK.sync=tGe});var hK=g((xke,mv)=>{"use strict";var fK=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};mv.exports=fK;mv.exports.default=fK});var bK=g((Xke,yK)=>{"use strict";var IK=require("path"),nGe=mK(),rGe=hK();function CK(e,t){let n=e.options.env||process.env,r=process.cwd(),i=e.options.cwd!=null,s=i&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(e.options.cwd)}catch{}let o;try{o=nGe.sync(e.command,{path:n[rGe({env:n})],pathExt:t?IK.delimiter:void 0})}catch{}finally{s&&process.chdir(r)}return o&&(o=IK.resolve(i?e.options.cwd:"",o)),o}function iGe(e){return CK(e)||CK(e,!0)}yK.exports=iGe});var AK=g((Jke,hv)=>{"use strict";var fv=/([()\][%!^"`<>&|;, *?])/g;function sGe(e){return e=e.replace(fv,"^$1"),e}function oGe(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(fv,"^$1"),t&&(e=e.replace(fv,"^$1")),e}hv.exports.command=sGe;hv.exports.argument=oGe});var SK=g((Dke,_K)=>{"use strict";_K.exports=/^#!(.*)/});var BK=g((Oke,GK)=>{"use strict";var aGe=SK();GK.exports=(e="")=>{let t=e.match(aGe);if(!t)return null;let[n,r]=t[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return i==="env"?r:r?`${i} ${r}`:i}});var ZK=g((Uke,vK)=>{"use strict";var Iv=require("fs"),cGe=BK();function uGe(e){let n=Buffer.alloc(150),r;try{r=Iv.openSync(e,"r"),Iv.readSync(r,n,0,150,0),Iv.closeSync(r)}catch{}return cGe(n.toString())}vK.exports=uGe});var wK=g((Kke,WK)=>{"use strict";var lGe=require("path"),EK=bK(),RK=AK(),dGe=ZK(),gGe=process.platform==="win32",pGe=/\.(?:com|exe)$/i,mGe=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function fGe(e){e.file=EK(e);let t=e.file&&dGe(e.file);return t?(e.args.unshift(e.file),e.command=t,EK(e)):e.file}function hGe(e){if(!gGe)return e;let t=fGe(e),n=!pGe.test(t);if(e.options.forceShell||n){let r=mGe.test(t);e.command=lGe.normalize(e.command),e.command=RK.command(e.command),e.args=e.args.map(s=>RK.argument(s,r));let i=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${i}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function IGe(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null),t=t?t.slice(0):[],n=Object.assign({},n);let r={command:e,args:t,options:n,file:void 0,original:{command:e,args:t}};return n.shell?r:hGe(r)}WK.exports=IGe});var HK=g((Lke,TK)=>{"use strict";var Cv=process.platform==="win32";function yv(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function CGe(e,t){if(!Cv)return;let n=e.emit;e.emit=function(r,i){if(r==="exit"){let s=NK(i,t,"spawn");if(s)return n.call(e,"error",s)}return n.apply(e,arguments)}}function NK(e,t){return Cv&&e===1&&!t.file?yv(t.original,"spawn"):null}function yGe(e,t){return Cv&&e===1&&!t.file?yv(t.original,"spawnSync"):null}TK.exports={hookChildProcess:CGe,verifyENOENT:NK,verifyENOENTSync:yGe,notFoundError:yv}});var YK=g((Mke,uc)=>{"use strict";var kK=require("child_process"),bv=wK(),Av=HK();function VK(e,t,n){let r=bv(e,t,n),i=kK.spawn(r.command,r.args,r.options);return Av.hookChildProcess(i,r),i}function bGe(e,t,n){let r=bv(e,t,n),i=kK.spawnSync(r.command,r.args,r.options);return i.error=i.error||Av.verifyENOENTSync(i.status,r),i}uc.exports=VK;uc.exports.spawn=VK;uc.exports.sync=bGe;uc.exports._parse=bv;uc.exports._enoent=Av});var xK=g((qke,FK)=>{var id;FK.exports=function(){if(!id){try{id=le()("follow-redirects")}catch{}typeof id!="function"&&(id=function(){})}id.apply(null,arguments)}});var UK=g((Pke,Tv)=>{var ad=require("url"),sd=ad.URL,AGe=require("http"),_Ge=require("https"),vv=require("stream").Writable,Zv=require("assert"),XK=xK(),Ev=!1;try{Zv(new sd)}catch(e){Ev=e.code==="ERR_INVALID_URL"}var SGe=["auth","host","hostname","href","path","pathname","port","protocol","query","search"],Rv=["abort","aborted","connect","error","socket","timeout"],Wv=Object.create(null);Rv.forEach(function(e){Wv[e]=function(t,n,r){this._redirectable.emit(e,t,n,r)}});var Sv=cd("ERR_INVALID_URL","Invalid URL",TypeError),Gv=cd("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),GGe=cd("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",Gv),BGe=cd("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),vGe=cd("ERR_STREAM_WRITE_AFTER_END","write after end"),ZGe=vv.prototype.destroy||DK;function Ht(e,t){vv.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(r){try{n._processResponse(r)}catch(i){n.emit("error",i instanceof Gv?i:new Gv({cause:i}))}},this._performRequest()}Ht.prototype=Object.create(vv.prototype);Ht.prototype.abort=function(){Nv(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};Ht.prototype.destroy=function(e){return Nv(this._currentRequest,e),ZGe.call(this,e),this};Ht.prototype.write=function(e,t,n){if(this._ending)throw new vGe;if(!ho(e)&&!WGe(e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(od(t)&&(n=t,t=null),e.length===0){n&&n();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new BGe),this.abort())};Ht.prototype.end=function(e,t,n){if(od(e)?(n=e,e=t=null):od(t)&&(n=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,i=this._currentRequest;this.write(e,t,function(){r._ended=!0,i.end(null,null,n)}),this._ending=!0}};Ht.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};Ht.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};Ht.prototype.setTimeout=function(e,t){var n=this;function r(o){o.setTimeout(e),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),s()},e),r(o)}function s(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",s),n.removeListener("error",s),n.removeListener("response",s),n.removeListener("close",s),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",i)}return t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",r),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){Ht.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(Ht.prototype,e,{get:function(){return this._currentRequest[e]}})});Ht.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};Ht.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=t.request(this._options,this._onNativeResponse);r._redirectable=this;for(var i of Rv)r.on(i,Wv[i]);if(this._currentUrl=/^\//.test(this._options.path)?ad.format(this._options):this._options.path,this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(u){if(r===o._currentRequest)if(u)o.emit("error",u);else if(s<a.length){var l=a[s++];r.finished||r.write(l.data,l.encoding,c)}else o._ended&&r.end()})()}};Ht.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n=e.headers.location;if(!n||this._options.followRedirects===!1||t<300||t>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(Nv(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new GGe;var r,i=this._options.beforeRedirect;i&&(r=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var s=this._options.method;((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],_v(/^content-/i,this._options.headers));var o=_v(/^host$/i,this._options.headers),a=wv(this._currentUrl),c=o||a.host,u=/^\w+:/.test(n)?this._currentUrl:ad.format(Object.assign(a,{host:c})),l=EGe(n,u);if(XK("redirecting to",l.href),this._isRedirect=!0,Bv(l,this._options),(l.protocol!==a.protocol&&l.protocol!=="https:"||l.host!==c&&!RGe(l.host,c))&&_v(/^(?:authorization|cookie)$/i,this._options.headers),od(i)){var d={headers:e.headers,statusCode:t},p={url:u,method:s,headers:r};i(this._options,d,p),this._sanitizeOptions(this._options)}this._performRequest()};function JK(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach(function(r){var i=r+":",s=n[i]=e[r],o=t[r]=Object.create(s);function a(u,l,d){return wGe(u)?u=Bv(u):ho(u)?u=Bv(wv(u)):(d=l,l=OK(u),u={protocol:i}),od(l)&&(d=l,l=null),l=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},u,l),l.nativeProtocols=n,!ho(l.host)&&!ho(l.hostname)&&(l.hostname="::1"),Zv.equal(l.protocol,i,"protocol mismatch"),XK("options",l),new Ht(l,d)}function c(u,l,d){var p=o.request(u,l,d);return p.end(),p}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),t}function DK(){}function wv(e){var t;if(Ev)t=new sd(e);else if(t=OK(ad.parse(e)),!ho(t.protocol))throw new Sv({input:e});return t}function EGe(e,t){return Ev?new sd(e,t):wv(ad.resolve(t,e))}function OK(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new Sv({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new Sv({input:e.href||e});return e}function Bv(e,t){var n=t||{};for(var r of SGe)n[r]=e[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),n.port!==""&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function _v(e,t){var n;for(var r in t)e.test(r)&&(n=t[r],delete t[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function cd(e,t,n){function r(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),r}function Nv(e,t){for(var n of Rv)e.removeListener(n,Wv[n]);e.on("error",DK),e.destroy(t)}function RGe(e,t){Zv(ho(e)&&ho(t));var n=e.length-t.length-1;return n>0&&e[n]==="."&&e.endsWith(t)}function ho(e){return typeof e=="string"||e instanceof String}function od(e){return typeof e=="function"}function WGe(e){return typeof e=="object"&&"length"in e}function wGe(e){return sd&&e instanceof sd}Tv.exports=JK({http:AGe,https:_Ge});Tv.exports.wrap=JK});var KK=g((zke,NGe)=>{NGe.exports={"com.ac":!0,"net.ac":!0,"gov.ac":!0,"org.ac":!0,"mil.ac":!0,"co.ae":!0,"net.ae":!0,"gov.ae":!0,"ac.ae":!0,"sch.ae":!0,"org.ae":!0,"mil.ae":!0,"pro.ae":!0,"name.ae":!0,"com.af":!0,"edu.af":!0,"gov.af":!0,"net.af":!0,"org.af":!0,"com.al":!0,"edu.al":!0,"gov.al":!0,"mil.al":!0,"net.al":!0,"org.al":!0,"ed.ao":!0,"gv.ao":!0,"og.ao":!0,"co.ao":!0,"pb.ao":!0,"it.ao":!0,"com.ar":!0,"edu.ar":!0,"gob.ar":!0,"gov.ar":!0,"int.ar":!0,"mil.ar":!0,"net.ar":!0,"org.ar":!0,"tur.ar":!0,"gv.at":!0,"ac.at":!0,"co.at":!0,"or.at":!0,"com.au":!0,"net.au":!0,"org.au":!0,"edu.au":!0,"gov.au":!0,"csiro.au":!0,"asn.au":!0,"id.au":!0,"vic.au":!0,"sa.au":!0,"wa.au":!0,"nt.au":!0,"tas.au":!0,"qld.au":!0,"act.au":!0,"conf.au":!0,"oz.au":!0,"org.ba":!0,"net.ba":!0,"edu.ba":!0,"gov.ba":!0,"mil.ba":!0,"unsa.ba":!0,"untz.ba":!0,"unmo.ba":!0,"unbi.ba":!0,"unze.ba":!0,"co.ba":!0,"com.ba":!0,"rs.ba":!0,"co.bb":!0,"com.bb":!0,"net.bb":!0,"org.bb":!0,"gov.bb":!0,"edu.bb":!0,"info.bb":!0,"store.bb":!0,"tv.bb":!0,"biz.bb":!0,"com.bh":!0,"info.bh":!0,"cc.bh":!0,"edu.bh":!0,"biz.bh":!0,"net.bh":!0,"org.bh":!0,"gov.bh":!0,"com.bn":!0,"edu.bn":!0,"gov.bn":!0,"net.bn":!0,"org.bn":!0,"com.bo":!0,"net.bo":!0,"org.bo":!0,"tv.bo":!0,"mil.bo":!0,"int.bo":!0,"gob.bo":!0,"gov.bo":!0,"edu.bo":!0,"adm.br":!0,"adv.br":!0,"agr.br":!0,"am.br":!0,"arq.br":!0,"art.br":!0,"ato.br":!0,"b.br":!0,"bio.br":!0,"blog.br":!0,"bmd.br":!0,"cim.br":!0,"cng.br":!0,"cnt.br":!0,"com.br":!0,"coop.br":!0,"ecn.br":!0,"edu.br":!0,"eng.br":!0,"esp.br":!0,"etc.br":!0,"eti.br":!0,"far.br":!0,"flog.br":!0,"fm.br":!0,"fnd.br":!0,"fot.br":!0,"fst.br":!0,"g12.br":!0,"ggf.br":!0,"gov.br":!0,"imb.br":!0,"ind.br":!0,"inf.br":!0,"jor.br":!0,"jus.br":!0,"lel.br":!0,"mat.br":!0,"med.br":!0,"mil.br":!0,"mus.br":!0,"net.br":!0,"nom.br":!0,"not.br":!0,"ntr.br":!0,"odo.br":!0,"org.br":!0,"ppg.br":!0,"pro.br":!0,"psc.br":!0,"psi.br":!0,"qsl.br":!0,"rec.br":!0,"slg.br":!0,"srv.br":!0,"tmp.br":!0,"trd.br":!0,"tur.br":!0,"tv.br":!0,"vet.br":!0,"vlog.br":!0,"wiki.br":!0,"zlg.br":!0,"com.bs":!0,"net.bs":!0,"org.bs":!0,"edu.bs":!0,"gov.bs":!0,"om.bz":!0,"du.bz":!0,"ov.bz":!0,"et.bz":!0,"rg.bz":!0,"ab.ca":!0,"bc.ca":!0,"mb.ca":!0,"nb.ca":!0,"nf.ca":!0,"nl.ca":!0,"ns.ca":!0,"nt.ca":!0,"nu.ca":!0,"on.ca":!0,"pe.ca":!0,"qc.ca":!0,"sk.ca":!0,"yk.ca":!0,"co.ck":!0,"org.ck":!0,"edu.ck":!0,"gov.ck":!0,"net.ck":!0,"gen.ck":!0,"biz.ck":!0,"info.ck":!0,"ac.cn":!0,"com.cn":!0,"edu.cn":!0,"gov.cn":!0,"mil.cn":!0,"net.cn":!0,"org.cn":!0,"ah.cn":!0,"bj.cn":!0,"cq.cn":!0,"fj.cn":!0,"gd.cn":!0,"gs.cn":!0,"gz.cn":!0,"gx.cn":!0,"ha.cn":!0,"hb.cn":!0,"he.cn":!0,"hi.cn":!0,"hl.cn":!0,"hn.cn":!0,"jl.cn":!0,"js.cn":!0,"jx.cn":!0,"ln.cn":!0,"nm.cn":!0,"nx.cn":!0,"qh.cn":!0,"sc.cn":!0,"sd.cn":!0,"sh.cn":!0,"sn.cn":!0,"sx.cn":!0,"tj.cn":!0,"tw.cn":!0,"xj.cn":!0,"xz.cn":!0,"yn.cn":!0,"zj.cn":!0,"com.co":!0,"org.co":!0,"edu.co":!0,"gov.co":!0,"net.co":!0,"mil.co":!0,"nom.co":!0,"ac.cr":!0,"co.cr":!0,"ed.cr":!0,"fi.cr":!0,"go.cr":!0,"or.cr":!0,"sa.cr":!0,cr:!0,"ac.cy":!0,"net.cy":!0,"gov.cy":!0,"org.cy":!0,"pro.cy":!0,"name.cy":!0,"ekloges.cy":!0,"tm.cy":!0,"ltd.cy":!0,"biz.cy":!0,"press.cy":!0,"parliament.cy":!0,"com.cy":!0,"edu.do":!0,"gob.do":!0,"gov.do":!0,"com.do":!0,"sld.do":!0,"org.do":!0,"net.do":!0,"web.do":!0,"mil.do":!0,"art.do":!0,"com.dz":!0,"org.dz":!0,"net.dz":!0,"gov.dz":!0,"edu.dz":!0,"asso.dz":!0,"pol.dz":!0,"art.dz":!0,"com.ec":!0,"info.ec":!0,"net.ec":!0,"fin.ec":!0,"med.ec":!0,"pro.ec":!0,"org.ec":!0,"edu.ec":!0,"gov.ec":!0,"mil.ec":!0,"com.eg":!0,"edu.eg":!0,"eun.eg":!0,"gov.eg":!0,"mil.eg":!0,"name.eg":!0,"net.eg":!0,"org.eg":!0,"sci.eg":!0,"com.er":!0,"edu.er":!0,"gov.er":!0,"mil.er":!0,"net.er":!0,"org.er":!0,"ind.er":!0,"rochest.er":!0,"w.er":!0,"com.es":!0,"nom.es":!0,"org.es":!0,"gob.es":!0,"edu.es":!0,"com.et":!0,"gov.et":!0,"org.et":!0,"edu.et":!0,"net.et":!0,"biz.et":!0,"name.et":!0,"info.et":!0,"ac.fj":!0,"biz.fj":!0,"com.fj":!0,"info.fj":!0,"mil.fj":!0,"name.fj":!0,"net.fj":!0,"org.fj":!0,"pro.fj":!0,"co.fk":!0,"org.fk":!0,"gov.fk":!0,"ac.fk":!0,"nom.fk":!0,"net.fk":!0,fr:!0,"tm.fr":!0,"asso.fr":!0,"nom.fr":!0,"prd.fr":!0,"presse.fr":!0,"com.fr":!0,"gouv.fr":!0,"co.gg":!0,"net.gg":!0,"org.gg":!0,"com.gh":!0,"edu.gh":!0,"gov.gh":!0,"org.gh":!0,"mil.gh":!0,"co.gl":!0,"com.gl":!0,"edu.gl":!0,"net.gl":!0,"org.gl":!0,"com.gn":!0,"ac.gn":!0,"gov.gn":!0,"org.gn":!0,"net.gn":!0,"com.gr":!0,"edu.gr":!0,"net.gr":!0,"org.gr":!0,"gov.gr":!0,"mil.gr":!0,"com.gt":!0,"edu.gt":!0,"net.gt":!0,"gob.gt":!0,"org.gt":!0,"mil.gt":!0,"ind.gt":!0,"com.gu":!0,"net.gu":!0,"gov.gu":!0,"org.gu":!0,"edu.gu":!0,"com.hk":!0,"edu.hk":!0,"gov.hk":!0,"idv.hk":!0,"net.hk":!0,"org.hk":!0,"2000.hu":!0,"agrar.hu":!0,"bolt.hu":!0,"casino.hu":!0,"city.hu":!0,"co.hu":!0,"erotica.hu":!0,"erotika.hu":!0,"film.hu":!0,"forum.hu":!0,"games.hu":!0,"hotel.hu":!0,"info.hu":!0,"ingatlan.hu":!0,"jogasz.hu":!0,"konyvelo.hu":!0,"lakas.hu":!0,"media.hu":!0,"news.hu":!0,"org.hu":!0,"priv.hu":!0,"reklam.hu":!0,"sex.hu":!0,"shop.hu":!0,"sport.hu":!0,"suli.huv":!0,"szex.hu":!0,"tm.hu":!0,"tozsde.hu":!0,"utazas.hu":!0,"video.hu":!0,"ac.id":!0,"co.id":!0,"net.id":!0,"or.id":!0,"web.id":!0,"sch.id":!0,"mil.id":!0,"go.id":!0,"war.net.id":!0,"my.id":!0,"biz.id":!0,"ac.il":!0,"co.il":!0,"org.il":!0,"net.il":!0,"k12.il":!0,"gov.il":!0,"muni.il":!0,"idf.il":!0,in:!0,"4fd.in":!0,"co.in":!0,"firm.in":!0,"net.in":!0,"org.in":!0,"gen.in":!0,"ind.in":!0,"ac.in":!0,"edu.in":!0,"res.in":!0,"ernet.in":!0,"gov.in":!0,"mil.in":!0,"nic.in":!0,iq:!0,"gov.iq":!0,"edu.iq":!0,"com.iq":!0,"mil.iq":!0,"org.iq":!0,"net.iq":!0,ir:!0,"ac.ir":!0,"co.ir":!0,"gov.ir":!0,"id.ir":!0,"net.ir":!0,"org.ir":!0,"sch.ir":!0,"dnssec.ir":!0,"gov.it":!0,"edu.it":!0,"co.je":!0,"net.je":!0,"org.je":!0,"com.jo":!0,"net.jo":!0,"gov.jo":!0,"edu.jo":!0,"org.jo":!0,"mil.jo":!0,"name.jo":!0,"sch.jo":!0,"ac.jp":!0,"ad.jp":!0,"co.jp":!0,"ed.jp":!0,"go.jp":!0,"gr.jp":!0,"lg.jp":!0,"ne.jp":!0,"or.jp":!0,"co.ke":!0,"or.ke":!0,"ne.ke":!0,"go.ke":!0,"ac.ke":!0,"sc.ke":!0,"me.ke":!0,"mobi.ke":!0,"info.ke":!0,"per.kh":!0,"com.kh":!0,"edu.kh":!0,"gov.kh":!0,"mil.kh":!0,"net.kh":!0,"org.kh":!0,"com.ki":!0,"biz.ki":!0,"de.ki":!0,"net.ki":!0,"info.ki":!0,"org.ki":!0,"gov.ki":!0,"edu.ki":!0,"mob.ki":!0,"tel.ki":!0,km:!0,"com.km":!0,"coop.km":!0,"asso.km":!0,"nom.km":!0,"presse.km":!0,"tm.km":!0,"medecin.km":!0,"notaires.km":!0,"pharmaciens.km":!0,"veterinaire.km":!0,"edu.km":!0,"gouv.km":!0,"mil.km":!0,"net.kn":!0,"org.kn":!0,"edu.kn":!0,"gov.kn":!0,kr:!0,"co.kr":!0,"ne.kr":!0,"or.kr":!0,"re.kr":!0,"pe.kr":!0,"go.kr":!0,"mil.kr":!0,"ac.kr":!0,"hs.kr":!0,"ms.kr":!0,"es.kr":!0,"sc.kr":!0,"kg.kr":!0,"seoul.kr":!0,"busan.kr":!0,"daegu.kr":!0,"incheon.kr":!0,"gwangju.kr":!0,"daejeon.kr":!0,"ulsan.kr":!0,"gyeonggi.kr":!0,"gangwon.kr":!0,"chungbuk.kr":!0,"chungnam.kr":!0,"jeonbuk.kr":!0,"jeonnam.kr":!0,"gyeongbuk.kr":!0,"gyeongnam.kr":!0,"jeju.kr":!0,"edu.kw":!0,"com.kw":!0,"net.kw":!0,"org.kw":!0,"gov.kw":!0,"com.ky":!0,"org.ky":!0,"net.ky":!0,"edu.ky":!0,"gov.ky":!0,"com.kz":!0,"edu.kz":!0,"gov.kz":!0,"mil.kz":!0,"net.kz":!0,"org.kz":!0,"com.lb":!0,"edu.lb":!0,"gov.lb":!0,"net.lb":!0,"org.lb":!0,"gov.lk":!0,"sch.lk":!0,"net.lk":!0,"int.lk":!0,"com.lk":!0,"org.lk":!0,"edu.lk":!0,"ngo.lk":!0,"soc.lk":!0,"web.lk":!0,"ltd.lk":!0,"assn.lk":!0,"grp.lk":!0,"hotel.lk":!0,"com.lr":!0,"edu.lr":!0,"gov.lr":!0,"org.lr":!0,"net.lr":!0,"com.lv":!0,"edu.lv":!0,"gov.lv":!0,"org.lv":!0,"mil.lv":!0,"id.lv":!0,"net.lv":!0,"asn.lv":!0,"conf.lv":!0,"com.ly":!0,"net.ly":!0,"gov.ly":!0,"plc.ly":!0,"edu.ly":!0,"sch.ly":!0,"med.ly":!0,"org.ly":!0,"id.ly":!0,ma:!0,"net.ma":!0,"ac.ma":!0,"org.ma":!0,"gov.ma":!0,"press.ma":!0,"co.ma":!0,"tm.mc":!0,"asso.mc":!0,"co.me":!0,"net.me":!0,"org.me":!0,"edu.me":!0,"ac.me":!0,"gov.me":!0,"its.me":!0,"priv.me":!0,"org.mg":!0,"nom.mg":!0,"gov.mg":!0,"prd.mg":!0,"tm.mg":!0,"edu.mg":!0,"mil.mg":!0,"com.mg":!0,"com.mk":!0,"org.mk":!0,"net.mk":!0,"edu.mk":!0,"gov.mk":!0,"inf.mk":!0,"name.mk":!0,"pro.mk":!0,"com.ml":!0,"net.ml":!0,"org.ml":!0,"edu.ml":!0,"gov.ml":!0,"presse.ml":!0,"gov.mn":!0,"edu.mn":!0,"org.mn":!0,"com.mo":!0,"edu.mo":!0,"gov.mo":!0,"net.mo":!0,"org.mo":!0,"com.mt":!0,"org.mt":!0,"net.mt":!0,"edu.mt":!0,"gov.mt":!0,"aero.mv":!0,"biz.mv":!0,"com.mv":!0,"coop.mv":!0,"edu.mv":!0,"gov.mv":!0,"info.mv":!0,"int.mv":!0,"mil.mv":!0,"museum.mv":!0,"name.mv":!0,"net.mv":!0,"org.mv":!0,"pro.mv":!0,"ac.mw":!0,"co.mw":!0,"com.mw":!0,"coop.mw":!0,"edu.mw":!0,"gov.mw":!0,"int.mw":!0,"museum.mw":!0,"net.mw":!0,"org.mw":!0,"com.mx":!0,"net.mx":!0,"org.mx":!0,"edu.mx":!0,"gob.mx":!0,"com.my":!0,"net.my":!0,"org.my":!0,"gov.my":!0,"edu.my":!0,"sch.my":!0,"mil.my":!0,"name.my":!0,"com.nf":!0,"net.nf":!0,"arts.nf":!0,"store.nf":!0,"web.nf":!0,"firm.nf":!0,"info.nf":!0,"other.nf":!0,"per.nf":!0,"rec.nf":!0,"com.ng":!0,"org.ng":!0,"gov.ng":!0,"edu.ng":!0,"net.ng":!0,"sch.ng":!0,"name.ng":!0,"mobi.ng":!0,"biz.ng":!0,"mil.ng":!0,"gob.ni":!0,"co.ni":!0,"com.ni":!0,"ac.ni":!0,"edu.ni":!0,"org.ni":!0,"nom.ni":!0,"net.ni":!0,"mil.ni":!0,"com.np":!0,"edu.np":!0,"gov.np":!0,"org.np":!0,"mil.np":!0,"net.np":!0,"edu.nr":!0,"gov.nr":!0,"biz.nr":!0,"info.nr":!0,"net.nr":!0,"org.nr":!0,"com.nr":!0,"com.om":!0,"co.om":!0,"edu.om":!0,"ac.om":!0,"sch.om":!0,"gov.om":!0,"net.om":!0,"org.om":!0,"mil.om":!0,"museum.om":!0,"biz.om":!0,"pro.om":!0,"med.om":!0,"edu.pe":!0,"gob.pe":!0,"nom.pe":!0,"mil.pe":!0,"sld.pe":!0,"org.pe":!0,"com.pe":!0,"net.pe":!0,"com.ph":!0,"net.ph":!0,"org.ph":!0,"mil.ph":!0,"ngo.ph":!0,"i.ph":!0,"gov.ph":!0,"edu.ph":!0,"com.pk":!0,"net.pk":!0,"edu.pk":!0,"org.pk":!0,"fam.pk":!0,"biz.pk":!0,"web.pk":!0,"gov.pk":!0,"gob.pk":!0,"gok.pk":!0,"gon.pk":!0,"gop.pk":!0,"gos.pk":!0,"pwr.pl":!0,"com.pl":!0,"biz.pl":!0,"net.pl":!0,"art.pl":!0,"edu.pl":!0,"org.pl":!0,"ngo.pl":!0,"gov.pl":!0,"info.pl":!0,"mil.pl":!0,"waw.pl":!0,"warszawa.pl":!0,"wroc.pl":!0,"wroclaw.pl":!0,"krakow.pl":!0,"katowice.pl":!0,"poznan.pl":!0,"lodz.pl":!0,"gda.pl":!0,"gdansk.pl":!0,"slupsk.pl":!0,"radom.pl":!0,"szczecin.pl":!0,"lublin.pl":!0,"bialystok.pl":!0,"olsztyn.pl":!0,"torun.pl":!0,"gorzow.pl":!0,"zgora.pl":!0,"biz.pr":!0,"com.pr":!0,"edu.pr":!0,"gov.pr":!0,"info.pr":!0,"isla.pr":!0,"name.pr":!0,"net.pr":!0,"org.pr":!0,"pro.pr":!0,"est.pr":!0,"prof.pr":!0,"ac.pr":!0,"com.ps":!0,"net.ps":!0,"org.ps":!0,"edu.ps":!0,"gov.ps":!0,"plo.ps":!0,"sec.ps":!0,"co.pw":!0,"ne.pw":!0,"or.pw":!0,"ed.pw":!0,"go.pw":!0,"belau.pw":!0,"arts.ro":!0,"com.ro":!0,"firm.ro":!0,"info.ro":!0,"nom.ro":!0,"nt.ro":!0,"org.ro":!0,"rec.ro":!0,"store.ro":!0,"tm.ro":!0,"www.ro":!0,"co.rs":!0,"org.rs":!0,"edu.rs":!0,"ac.rs":!0,"gov.rs":!0,"in.rs":!0,"com.sb":!0,"net.sb":!0,"edu.sb":!0,"org.sb":!0,"gov.sb":!0,"com.sc":!0,"net.sc":!0,"edu.sc":!0,"gov.sc":!0,"org.sc":!0,"co.sh":!0,"com.sh":!0,"org.sh":!0,"gov.sh":!0,"edu.sh":!0,"net.sh":!0,"nom.sh":!0,"com.sl":!0,"net.sl":!0,"org.sl":!0,"edu.sl":!0,"gov.sl":!0,"gov.st":!0,"saotome.st":!0,"principe.st":!0,"consulado.st":!0,"embaixada.st":!0,"org.st":!0,"edu.st":!0,"net.st":!0,"com.st":!0,"store.st":!0,"mil.st":!0,"co.st":!0,"edu.sv":!0,"gob.sv":!0,"com.sv":!0,"org.sv":!0,"red.sv":!0,"co.sz":!0,"ac.sz":!0,"org.sz":!0,"com.tr":!0,"gen.tr":!0,"org.tr":!0,"biz.tr":!0,"info.tr":!0,"av.tr":!0,"dr.tr":!0,"pol.tr":!0,"bel.tr":!0,"tsk.tr":!0,"bbs.tr":!0,"k12.tr":!0,"edu.tr":!0,"name.tr":!0,"net.tr":!0,"gov.tr":!0,"web.tr":!0,"tel.tr":!0,"tv.tr":!0,"co.tt":!0,"com.tt":!0,"org.tt":!0,"net.tt":!0,"biz.tt":!0,"info.tt":!0,"pro.tt":!0,"int.tt":!0,"coop.tt":!0,"jobs.tt":!0,"mobi.tt":!0,"travel.tt":!0,"museum.tt":!0,"aero.tt":!0,"cat.tt":!0,"tel.tt":!0,"name.tt":!0,"mil.tt":!0,"edu.tt":!0,"gov.tt":!0,"edu.tw":!0,"gov.tw":!0,"mil.tw":!0,"com.tw":!0,"net.tw":!0,"org.tw":!0,"idv.tw":!0,"game.tw":!0,"ebiz.tw":!0,"club.tw":!0,"com.mu":!0,"gov.mu":!0,"net.mu":!0,"org.mu":!0,"ac.mu":!0,"co.mu":!0,"or.mu":!0,"ac.mz":!0,"co.mz":!0,"edu.mz":!0,"org.mz":!0,"gov.mz":!0,"com.na":!0,"co.na":!0,"ac.nz":!0,"co.nz":!0,"cri.nz":!0,"geek.nz":!0,"gen.nz":!0,"govt.nz":!0,"health.nz":!0,"iwi.nz":!0,"maori.nz":!0,"mil.nz":!0,"net.nz":!0,"org.nz":!0,"parliament.nz":!0,"school.nz":!0,"abo.pa":!0,"ac.pa":!0,"com.pa":!0,"edu.pa":!0,"gob.pa":!0,"ing.pa":!0,"med.pa":!0,"net.pa":!0,"nom.pa":!0,"org.pa":!0,"sld.pa":!0,"com.pt":!0,"edu.pt":!0,"gov.pt":!0,"int.pt":!0,"net.pt":!0,"nome.pt":!0,"org.pt":!0,"publ.pt":!0,"com.py":!0,"edu.py":!0,"gov.py":!0,"mil.py":!0,"net.py":!0,"org.py":!0,"com.qa":!0,"edu.qa":!0,"gov.qa":!0,"mil.qa":!0,"net.qa":!0,"org.qa":!0,"asso.re":!0,"com.re":!0,"nom.re":!0,"ac.ru":!0,"adygeya.ru":!0,"altai.ru":!0,"amur.ru":!0,"arkhangelsk.ru":!0,"astrakhan.ru":!0,"bashkiria.ru":!0,"belgorod.ru":!0,"bir.ru":!0,"bryansk.ru":!0,"buryatia.ru":!0,"cbg.ru":!0,"chel.ru":!0,"chelyabinsk.ru":!0,"chita.ru":!0,"chukotka.ru":!0,"chuvashia.ru":!0,"com.ru":!0,"dagestan.ru":!0,"e-burg.ru":!0,"edu.ru":!0,"gov.ru":!0,"grozny.ru":!0,"int.ru":!0,"irkutsk.ru":!0,"ivanovo.ru":!0,"izhevsk.ru":!0,"jar.ru":!0,"joshkar-ola.ru":!0,"kalmykia.ru":!0,"kaluga.ru":!0,"kamchatka.ru":!0,"karelia.ru":!0,"kazan.ru":!0,"kchr.ru":!0,"kemerovo.ru":!0,"khabarovsk.ru":!0,"khakassia.ru":!0,"khv.ru":!0,"kirov.ru":!0,"koenig.ru":!0,"komi.ru":!0,"kostroma.ru":!0,"kranoyarsk.ru":!0,"kuban.ru":!0,"kurgan.ru":!0,"kursk.ru":!0,"lipetsk.ru":!0,"magadan.ru":!0,"mari.ru":!0,"mari-el.ru":!0,"marine.ru":!0,"mil.ru":!0,"mordovia.ru":!0,"mosreg.ru":!0,"msk.ru":!0,"murmansk.ru":!0,"nalchik.ru":!0,"net.ru":!0,"nnov.ru":!0,"nov.ru":!0,"novosibirsk.ru":!0,"nsk.ru":!0,"omsk.ru":!0,"orenburg.ru":!0,"org.ru":!0,"oryol.ru":!0,"penza.ru":!0,"perm.ru":!0,"pp.ru":!0,"pskov.ru":!0,"ptz.ru":!0,"rnd.ru":!0,"ryazan.ru":!0,"sakhalin.ru":!0,"samara.ru":!0,"saratov.ru":!0,"simbirsk.ru":!0,"smolensk.ru":!0,"spb.ru":!0,"stavropol.ru":!0,"stv.ru":!0,"surgut.ru":!0,"tambov.ru":!0,"tatarstan.ru":!0,"tom.ru":!0,"tomsk.ru":!0,"tsaritsyn.ru":!0,"tsk.ru":!0,"tula.ru":!0,"tuva.ru":!0,"tver.ru":!0,"tyumen.ru":!0,"udm.ru":!0,"udmurtia.ru":!0,"ulan-ude.ru":!0,"vladikavkaz.ru":!0,"vladimir.ru":!0,"vladivostok.ru":!0,"volgograd.ru":!0,"vologda.ru":!0,"voronezh.ru":!0,"vrn.ru":!0,"vyatka.ru":!0,"yakutia.ru":!0,"yamal.ru":!0,"yekaterinburg.ru":!0,"yuzhno-sakhalinsk.ru":!0,"ac.rw":!0,"co.rw":!0,"com.rw":!0,"edu.rw":!0,"gouv.rw":!0,"gov.rw":!0,"int.rw":!0,"mil.rw":!0,"net.rw":!0,"com.sa":!0,"edu.sa":!0,"gov.sa":!0,"med.sa":!0,"net.sa":!0,"org.sa":!0,"pub.sa":!0,"sch.sa":!0,"com.sd":!0,"edu.sd":!0,"gov.sd":!0,"info.sd":!0,"med.sd":!0,"net.sd":!0,"org.sd":!0,"tv.sd":!0,"a.se":!0,"ac.se":!0,"b.se":!0,"bd.se":!0,"c.se":!0,"d.se":!0,"e.se":!0,"f.se":!0,"g.se":!0,"h.se":!0,"i.se":!0,"k.se":!0,"l.se":!0,"m.se":!0,"n.se":!0,"o.se":!0,"org.se":!0,"p.se":!0,"parti.se":!0,"pp.se":!0,"press.se":!0,"r.se":!0,"s.se":!0,"t.se":!0,"tm.se":!0,"u.se":!0,"w.se":!0,"x.se":!0,"y.se":!0,"z.se":!0,"com.sg":!0,"edu.sg":!0,"gov.sg":!0,"idn.sg":!0,"net.sg":!0,"org.sg":!0,"per.sg":!0,"art.sn":!0,"com.sn":!0,"edu.sn":!0,"gouv.sn":!0,"org.sn":!0,"perso.sn":!0,"univ.sn":!0,"com.sy":!0,"edu.sy":!0,"gov.sy":!0,"mil.sy":!0,"net.sy":!0,"news.sy":!0,"org.sy":!0,"ac.th":!0,"co.th":!0,"go.th":!0,"in.th":!0,"mi.th":!0,"net.th":!0,"or.th":!0,"ac.tj":!0,"biz.tj":!0,"co.tj":!0,"com.tj":!0,"edu.tj":!0,"go.tj":!0,"gov.tj":!0,"info.tj":!0,"int.tj":!0,"mil.tj":!0,"name.tj":!0,"net.tj":!0,"nic.tj":!0,"org.tj":!0,"test.tj":!0,"web.tj":!0,"agrinet.tn":!0,"com.tn":!0,"defense.tn":!0,"edunet.tn":!0,"ens.tn":!0,"fin.tn":!0,"gov.tn":!0,"ind.tn":!0,"info.tn":!0,"intl.tn":!0,"mincom.tn":!0,"nat.tn":!0,"net.tn":!0,"org.tn":!0,"perso.tn":!0,"rnrt.tn":!0,"rns.tn":!0,"rnu.tn":!0,"tourism.tn":!0,"ac.tz":!0,"co.tz":!0,"go.tz":!0,"ne.tz":!0,"or.tz":!0,"biz.ua":!0,"cherkassy.ua":!0,"chernigov.ua":!0,"chernovtsy.ua":!0,"ck.ua":!0,"cn.ua":!0,"co.ua":!0,"com.ua":!0,"crimea.ua":!0,"cv.ua":!0,"dn.ua":!0,"dnepropetrovsk.ua":!0,"donetsk.ua":!0,"dp.ua":!0,"edu.ua":!0,"gov.ua":!0,"if.ua":!0,"in.ua":!0,"ivano-frankivsk.ua":!0,"kh.ua":!0,"kharkov.ua":!0,"kherson.ua":!0,"khmelnitskiy.ua":!0,"kiev.ua":!0,"kirovograd.ua":!0,"km.ua":!0,"kr.ua":!0,"ks.ua":!0,"kv.ua":!0,"lg.ua":!0,"lugansk.ua":!0,"lutsk.ua":!0,"lviv.ua":!0,"me.ua":!0,"mk.ua":!0,"net.ua":!0,"nikolaev.ua":!0,"od.ua":!0,"odessa.ua":!0,"org.ua":!0,"pl.ua":!0,"poltava.ua":!0,"pp.ua":!0,"rovno.ua":!0,"rv.ua":!0,"sebastopol.ua":!0,"sumy.ua":!0,"te.ua":!0,"ternopil.ua":!0,"uzhgorod.ua":!0,"vinnica.ua":!0,"vn.ua":!0,"zaporizhzhe.ua":!0,"zhitomir.ua":!0,"zp.ua":!0,"zt.ua":!0,"ac.ug":!0,"co.ug":!0,"go.ug":!0,"ne.ug":!0,"or.ug":!0,"org.ug":!0,"sc.ug":!0,"ac.uk":!0,"bl.uk":!0,"british-library.uk":!0,"co.uk":!0,"cym.uk":!0,"gov.uk":!0,"govt.uk":!0,"icnet.uk":!0,"jet.uk":!0,"lea.uk":!0,"ltd.uk":!0,"me.uk":!0,"mil.uk":!0,"mod.uk":!0,"national-library-scotland.uk":!0,"nel.uk":!0,"net.uk":!0,"nhs.uk":!0,"nic.uk":!0,"nls.uk":!0,"org.uk":!0,"orgn.uk":!0,"parliament.uk":!0,"plc.uk":!0,"police.uk":!0,"sch.uk":!0,"scot.uk":!0,"soc.uk":!0,"4fd.us":!0,"dni.us":!0,"fed.us":!0,"isa.us":!0,"kids.us":!0,"nsn.us":!0,"com.uy":!0,"edu.uy":!0,"gub.uy":!0,"mil.uy":!0,"net.uy":!0,"org.uy":!0,"co.ve":!0,"com.ve":!0,"edu.ve":!0,"gob.ve":!0,"info.ve":!0,"mil.ve":!0,"net.ve":!0,"org.ve":!0,"web.ve":!0,"co.vi":!0,"com.vi":!0,"k12.vi":!0,"net.vi":!0,"org.vi":!0,"ac.vn":!0,"biz.vn":!0,"com.vn":!0,"edu.vn":!0,"gov.vn":!0,"health.vn":!0,"info.vn":!0,"int.vn":!0,"name.vn":!0,"net.vn":!0,"org.vn":!0,"pro.vn":!0,"co.ye":!0,"com.ye":!0,"gov.ye":!0,"ltd.ye":!0,"me.ye":!0,"net.ye":!0,"org.ye":!0,"plc.ye":!0,"ac.yu":!0,"co.yu":!0,"edu.yu":!0,"gov.yu":!0,"org.yu":!0,"ac.za":!0,"agric.za":!0,"alt.za":!0,"bourse.za":!0,"city.za":!0,"co.za":!0,"cybernet.za":!0,"db.za":!0,"ecape.school.za":!0,"edu.za":!0,"fs.school.za":!0,"gov.za":!0,"gp.school.za":!0,"grondar.za":!0,"iaccess.za":!0,"imt.za":!0,"inca.za":!0,"kzn.school.za":!0,"landesign.za":!0,"law.za":!0,"lp.school.za":!0,"mil.za":!0,"mpm.school.za":!0,"ncape.school.za":!0,"net.za":!0,"ngo.za":!0,"nis.za":!0,"nom.za":!0,"nw.school.za":!0,"olivetti.za":!0,"org.za":!0,"pix.za":!0,"school.za":!0,"tm.za":!0,"wcape.school.za":!0,"web.za":!0,"ac.zm":!0,"co.zm":!0,"com.zm":!0,"edu.zm":!0,"gov.zm":!0,"net.zm":!0,"org.zm":!0,"sch.zm":!0}});var LK=g((jke,TGe)=>{TGe.exports={ad:!0,ae:!0,af:!0,ag:!0,ai:!0,al:!0,am:!0,ao:!0,aq:!0,ar:!0,as:!0,at:!0,au:!0,aw:!0,ax:!0,az:!0,ba:!0,bb:!0,bd:!0,be:!0,bf:!0,bg:!0,bh:!0,bi:!0,bj:!0,bl:!0,bm:!0,bn:!0,bo:!0,bq:!0,br:!0,bs:!0,bt:!0,bv:!0,bw:!0,by:!0,bz:!0,ca:!0,cc:!0,cd:!0,cf:!0,cg:!0,ch:!0,ci:!0,ck:!0,cl:!0,cm:!0,cn:!0,co:!0,cr:!0,cu:!0,cv:!0,cw:!0,cx:!0,cy:!0,cz:!0,de:!0,dj:!0,dk:!0,dm:!0,do:!0,dz:!0,ec:!0,ee:!0,eg:!0,er:!0,es:!0,et:!0,fi:!0,fj:!0,fk:!0,fm:!0,fo:!0,fr:!0,ga:!0,"gb (.uk)":!0,gd:!0,ge:!0,gf:!0,gg:!0,gh:!0,gi:!0,gl:!0,gm:!0,gn:!0,gp:!0,gq:!0,gr:!0,gs:!0,gt:!0,gu:!0,gw:!0,gy:!0,hk:!0,hm:!0,hn:!0,hr:!0,ht:!0,hu:!0,id:!0,ie:!0,il:!0,im:!0,in:!0,io:!0,iq:!0,ir:!0,is:!0,it:!0,je:!0,jm:!0,jo:!0,jp:!0,ke:!0,kg:!0,kh:!0,ki:!0,km:!0,kn:!0,kp:!0,kr:!0,kw:!0,ky:!0,kz:!0,la:!0,lb:!0,lc:!0,li:!0,lk:!0,lr:!0,ls:!0,lt:!0,lu:!0,lv:!0,ly:!0,ma:!0,mc:!0,md:!0,me:!0,mf:!0,mg:!0,mh:!0,mk:!0,ml:!0,mm:!0,mn:!0,mo:!0,mp:!0,mq:!0,mr:!0,ms:!0,mt:!0,mu:!0,mv:!0,mw:!0,mx:!0,my:!0,mz:!0,na:!0,nc:!0,ne:!0,nf:!0,ng:!0,ni:!0,nl:!0,no:!0,np:!0,nr:!0,nu:!0,nz:!0,om:!0,pa:!0,pe:!0,pf:!0,pg:!0,ph:!0,pk:!0,pl:!0,pm:!0,pn:!0,pr:!0,ps:!0,pt:!0,pw:!0,py:!0,qa:!0,re:!0,ro:!0,rs:!0,ru:!0,rw:!0,sa:!0,sb:!0,sc:!0,sd:!0,se:!0,sg:!0,sh:!0,si:!0,sj:!0,sk:!0,sl:!0,sm:!0,sn:!0,so:!0,sr:!0,ss:!0,st:!0,sv:!0,sx:!0,sy:!0,sz:!0,tc:!0,td:!0,tf:!0,tg:!0,th:!0,tj:!0,tk:!0,tl:!0,tm:!0,tn:!0,to:!0,tr:!0,tt:!0,tv:!0,tw:!0,tz:!0,ua:!0,ug:!0,us:!0,uy:!0,uz:!0,va:!0,vc:!0,ve:!0,vg:!0,vi:!0,vn:!0,vu:!0,wf:!0,ws:!0,ye:!0,yt:!0,za:!0,zm:!0,zw:!0}});var qK=g((Qke,MK)=>{var HGe=require("punycode"),kGe=KK(),VGe=LK();MK.exports=function(t,n){if(typeof t!="string"||(n instanceof Object||(n={}),t=t.toLowerCase(),t.endsWith(".")&&(t=t.slice(0,t.length-1)),n.allowUnicode&&(t=HGe.toASCII(t)),t.length>253)||!/^([\u0E00-\u0E7Fa-z0-9-._*]+)$/g.test(t))return!1;if(n.topLevel&&VGe[t.replace(/\.$/,"")])return!0;let i=/(.*)\.(([\u0E00-\u0E7Fa-z0-9]+)(\.[a-z0-9]+))/,s=t.match(i),o=null,a=null;return s&&s.length>2&&kGe[s[2]]&&(o=s[2],a=s[1].split(".")),!a&&(a=t.split("."),a.length<=1||(o=a.pop(),!/^(?:xn--)?(?!^\d+$)[\u0E00-\u0E7Fa-z0-9]+$/gi.test(o)))||n.subdomain===!1&&a.length>1?!1:a.every(function(u,l){if(n.wildcard&&l===0&&u==="*"&&a.length>1)return!0;let d=/^([\u0E00-\u0E7Fa-zA-Z0-9-_]+)$/g;l===a.length-1&&(d=/^([\u0E00-\u0E7Fa-zA-Z0-9-]+)$/g);let p=(u.match(/--(--)?/g)||[]).length,m=(u.match(/xn--/g)||[]).length;return l===a.length-1&&p!==m?!1:d.test(u)&&u.length<64&&!u.startsWith("-")&&!u.endsWith("-")})}});var zK={};Ft(zK,{isRegistryModule:()=>Hv});function Hv(e){let t=e.split("/");return!(e.startsWith(".")||t.length<3||t.length>4||e.includes("github.com")||e.includes("bitbucket.org")||t.length===4&&!(0,PK.default)(t[0]))}var PK,kv=Xe(()=>{"use strict";PK=w(qK())});var rL=g(($ke,Vv)=>{"use strict";var YGe=/[\p{Lu}]/u,FGe=/[\p{Ll}]/u,jK=/^[\p{Lu}](?![\p{Lu}])/gu,eL=/([\p{Alpha}\p{N}_]|$)/u,tL=/[_.\- ]+/,xGe=new RegExp("^"+tL.source),QK=new RegExp(tL.source+eL.source,"gu"),$K=new RegExp("\\d+"+eL.source,"gu"),XGe=(e,t,n)=>{let r=!1,i=!1,s=!1;for(let o=0;o<e.length;o++){let a=e[o];r&&YGe.test(a)?(e=e.slice(0,o)+"-"+e.slice(o),r=!1,s=i,i=!0,o++):i&&s&&FGe.test(a)?(e=e.slice(0,o-1)+"-"+e.slice(o-1),s=i,i=!1,r=!0):(r=t(a)===a&&n(a)!==a,s=i,i=n(a)===a&&t(a)!==a)}return e},JGe=(e,t)=>(jK.lastIndex=0,e.replace(jK,n=>t(n))),DGe=(e,t)=>(QK.lastIndex=0,$K.lastIndex=0,e.replace(QK,(n,r)=>t(r)).replace($K,n=>t(n))),nL=(e,t)=>{if(!(typeof e=="string"||Array.isArray(e)))throw new TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},Array.isArray(e)?e=e.map(s=>s.trim()).filter(s=>s.length).join("-"):e=e.trim(),e.length===0)return"";let n=t.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(t.locale),r=t.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(t.locale);return e.length===1?t.pascalCase?r(e):n(e):(e!==n(e)&&(e=XGe(e,n,r)),e=e.replace(xGe,""),t.preserveConsecutiveUppercase?e=JGe(e,n):e=n(e),t.pascalCase&&(e=r(e.charAt(0))+e.slice(1)),DGe(e,r))};Vv.exports=nL;Vv.exports.default=nL});var sL=g((eVe,iL)=>{"use strict";var OGe=(e,t)=>(e=e.replace(/((?<![\p{Uppercase_Letter}\d])[\p{Uppercase_Letter}\d](?![\p{Uppercase_Letter}\d]))/gu,n=>n.toLowerCase()),e.replace(/(\p{Uppercase_Letter}+)(\p{Uppercase_Letter}\p{Lowercase_Letter}+)/gu,(n,r,i)=>r+t+i.toLowerCase()));iL.exports=(e,{separator:t="_",preserveConsecutiveUppercase:n=!1}={})=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("The `text` and `separator` arguments should be of type `string`");if(e.length<2)return n?e:e.toLowerCase();let r=`$1${t}$2`,i=e.replace(/([\p{Lowercase_Letter}\d])(\p{Uppercase_Letter})/gu,r);return n?OGe(i,t):i.replace(/(\p{Uppercase_Letter})(\p{Uppercase_Letter}\p{Lowercase_Letter}+)/gu,r).toLowerCase()}});var Yv=g(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.toSnakeCase=Pi.toPascalCase=Pi.toCamelCase=void 0;var oL=rL(),UGe=sL(),KGe=["KiB","MiB","GiB"];function LGe(...e){return oL(e)}Pi.toCamelCase=LGe;function MGe(...e){return oL(e,{pascalCase:!0})}Pi.toPascalCase=MGe;var qGe=new RegExp(`(^|[^A-Z])(${KGe.map(zGe).join("|")})($|[^a-z])`,"g");function PGe(e,t="_"){return e=e.replace(qGe,(r,i,s,o)=>i+n(s.toLowerCase())+o),UGe(e,{separator:t});function n(r){return r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()}}Pi.toSnakeCase=PGe;function zGe(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}});var Io=g(zi=>{"use strict";var aL=Q().fromCallback,kt=N(),jGe=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof kt[e]=="function");Object.assign(zi,kt);jGe.forEach(e=>{zi[e]=aL(kt[e])});zi.exists=function(e,t){return typeof t=="function"?kt.exists(e,t):new Promise(n=>kt.exists(e,n))};zi.read=function(e,t,n,r,i,s){return typeof s=="function"?kt.read(e,t,n,r,i,s):new Promise((o,a)=>{kt.read(e,t,n,r,i,(c,u,l)=>{if(c)return a(c);o({bytesRead:u,buffer:l})})})};zi.write=function(e,t,...n){return typeof n[n.length-1]=="function"?kt.write(e,t,...n):new Promise((r,i)=>{kt.write(e,t,...n,(s,o,a)=>{if(s)return i(s);r({bytesWritten:o,buffer:a})})})};typeof kt.writev=="function"&&(zi.writev=function(e,t,...n){return typeof n[n.length-1]=="function"?kt.writev(e,t,...n):new Promise((r,i)=>{kt.writev(e,t,...n,(s,o,a)=>{if(s)return i(s);r({bytesWritten:o,buffers:a})})})});typeof kt.realpath.native=="function"?zi.realpath.native=aL(kt.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var uL=g((rVe,cL)=>{"use strict";var QGe=require("path");cL.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(QGe.parse(t).root,""))){let r=new Error(`Path contains invalid characters: ${t}`);throw r.code="EINVAL",r}}});var pL=g((iVe,Fv)=>{"use strict";var lL=Io(),{checkPath:dL}=uL(),gL=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Fv.exports.makeDir=async(e,t)=>(dL(e),lL.mkdir(e,{mode:gL(t),recursive:!0}));Fv.exports.makeDirSync=(e,t)=>(dL(e),lL.mkdirSync(e,{mode:gL(t),recursive:!0}))});var Hn=g((sVe,mL)=>{"use strict";var $Ge=Q().fromPromise,{makeDir:eBe,makeDirSync:xv}=pL(),Xv=$Ge(eBe);mL.exports={mkdirs:Xv,mkdirsSync:xv,mkdirp:Xv,mkdirpSync:xv,ensureDir:Xv,ensureDirSync:xv}});var ji=g((oVe,hL)=>{"use strict";var tBe=Q().fromPromise,fL=Io();function nBe(e){return fL.access(e).then(()=>!0).catch(()=>!1)}hL.exports={pathExists:tBe(nBe),pathExistsSync:fL.existsSync}});var Jv=g((aVe,IL)=>{"use strict";var lc=N();function rBe(e,t,n,r){lc.open(e,"r+",(i,s)=>{if(i)return r(i);lc.futimes(s,t,n,o=>{lc.close(s,a=>{r&&r(o||a)})})})}function iBe(e,t,n){let r=lc.openSync(e,"r+");return lc.futimesSync(r,t,n),lc.closeSync(r)}IL.exports={utimesMillis:rBe,utimesMillisSync:iBe}});var Co=g((cVe,bL)=>{"use strict";var dc=Io(),xe=require("path"),sBe=require("util");function oBe(e,t,n){let r=n.dereference?i=>dc.stat(i,{bigint:!0}):i=>dc.lstat(i,{bigint:!0});return Promise.all([r(e),r(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}function aBe(e,t,n){let r,i=n.dereference?o=>dc.statSync(o,{bigint:!0}):o=>dc.lstatSync(o,{bigint:!0}),s=i(e);try{r=i(t)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:r}}function cBe(e,t,n,r,i){sBe.callbackify(oBe)(e,t,r,(s,o)=>{if(s)return i(s);let{srcStat:a,destStat:c}=o;if(c){if(ud(a,c)){let u=xe.basename(e),l=xe.basename(t);return n==="move"&&u!==l&&u.toLowerCase()===l.toLowerCase()?i(null,{srcStat:a,destStat:c,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!c.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!a.isDirectory()&&c.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return a.isDirectory()&&Dv(e,t)?i(new Error(xf(e,t,n))):i(null,{srcStat:a,destStat:c})})}function uBe(e,t,n,r){let{srcStat:i,destStat:s}=aBe(e,t,r);if(s){if(ud(i,s)){let o=xe.basename(e),a=xe.basename(t);if(n==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Dv(e,t))throw new Error(xf(e,t,n));return{srcStat:i,destStat:s}}function CL(e,t,n,r,i){let s=xe.resolve(xe.dirname(e)),o=xe.resolve(xe.dirname(n));if(o===s||o===xe.parse(o).root)return i();dc.stat(o,{bigint:!0},(a,c)=>a?a.code==="ENOENT"?i():i(a):ud(t,c)?i(new Error(xf(e,n,r))):CL(e,t,o,r,i))}function yL(e,t,n,r){let i=xe.resolve(xe.dirname(e)),s=xe.resolve(xe.dirname(n));if(s===i||s===xe.parse(s).root)return;let o;try{o=dc.statSync(s,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(ud(t,o))throw new Error(xf(e,n,r));return yL(e,t,s,r)}function ud(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Dv(e,t){let n=xe.resolve(e).split(xe.sep).filter(i=>i),r=xe.resolve(t).split(xe.sep).filter(i=>i);return n.reduce((i,s,o)=>i&&r[o]===s,!0)}function xf(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}bL.exports={checkPaths:cBe,checkPathsSync:uBe,checkParentPaths:CL,checkParentPathsSync:yL,isSrcSubdir:Dv,areIdentical:ud}});var EL=g((uVe,ZL)=>{"use strict";var Vt=N(),ld=require("path"),lBe=Hn().mkdirs,dBe=ji().pathExists,gBe=Jv().utimesMillis,dd=Co();function pBe(e,t,n,r){typeof n=="function"&&!r?(r=n,n={}):typeof n=="function"&&(n={filter:n}),r=r||function(){},n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),dd.checkPaths(e,t,"copy",n,(i,s)=>{if(i)return r(i);let{srcStat:o,destStat:a}=s;dd.checkParentPaths(e,o,t,"copy",c=>c?r(c):n.filter?SL(AL,a,e,t,n,r):AL(a,e,t,n,r))})}function AL(e,t,n,r,i){let s=ld.dirname(n);dBe(s,(o,a)=>{if(o)return i(o);if(a)return Xf(e,t,n,r,i);lBe(s,c=>c?i(c):Xf(e,t,n,r,i))})}function SL(e,t,n,r,i,s){Promise.resolve(i.filter(n,r)).then(o=>o?e(t,n,r,i,s):s(),o=>s(o))}function mBe(e,t,n,r,i){return r.filter?SL(Xf,e,t,n,r,i):Xf(e,t,n,r,i)}function Xf(e,t,n,r,i){(r.dereference?Vt.stat:Vt.lstat)(t,(o,a)=>o?i(o):a.isDirectory()?ABe(a,e,t,n,r,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?fBe(a,e,t,n,r,i):a.isSymbolicLink()?GBe(e,t,n,r,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function fBe(e,t,n,r,i,s){return t?hBe(e,n,r,i,s):GL(e,n,r,i,s)}function hBe(e,t,n,r,i){if(r.overwrite)Vt.unlink(n,s=>s?i(s):GL(e,t,n,r,i));else return r.errorOnExist?i(new Error(`'${n}' already exists`)):i()}function GL(e,t,n,r,i){Vt.copyFile(t,n,s=>s?i(s):r.preserveTimestamps?IBe(e.mode,t,n,i):Jf(n,e.mode,i))}function IBe(e,t,n,r){return CBe(e)?yBe(n,e,i=>i?r(i):_L(e,t,n,r)):_L(e,t,n,r)}function CBe(e){return(e&128)===0}function yBe(e,t,n){return Jf(e,t|128,n)}function _L(e,t,n,r){bBe(t,n,i=>i?r(i):Jf(n,e,r))}function Jf(e,t,n){return Vt.chmod(e,t,n)}function bBe(e,t,n){Vt.stat(e,(r,i)=>r?n(r):gBe(t,i.atime,i.mtime,n))}function ABe(e,t,n,r,i,s){return t?BL(n,r,i,s):_Be(e.mode,n,r,i,s)}function _Be(e,t,n,r,i){Vt.mkdir(n,s=>{if(s)return i(s);BL(t,n,r,o=>o?i(o):Jf(n,e,i))})}function BL(e,t,n,r){Vt.readdir(e,(i,s)=>i?r(i):vL(s,e,t,n,r))}function vL(e,t,n,r,i){let s=e.pop();return s?SBe(e,s,t,n,r,i):i()}function SBe(e,t,n,r,i,s){let o=ld.join(n,t),a=ld.join(r,t);dd.checkPaths(o,a,"copy",i,(c,u)=>{if(c)return s(c);let{destStat:l}=u;mBe(l,o,a,i,d=>d?s(d):vL(e,n,r,i,s))})}function GBe(e,t,n,r,i){Vt.readlink(t,(s,o)=>{if(s)return i(s);if(r.dereference&&(o=ld.resolve(process.cwd(),o)),e)Vt.readlink(n,(a,c)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?Vt.symlink(o,n,i):i(a):(r.dereference&&(c=ld.resolve(process.cwd(),c)),dd.isSrcSubdir(o,c)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${c}'.`)):e.isDirectory()&&dd.isSrcSubdir(c,o)?i(new Error(`Cannot overwrite '${c}' with '${o}'.`)):BBe(o,n,i)));else return Vt.symlink(o,n,i)})}function BBe(e,t,n){Vt.unlink(t,r=>r?n(r):Vt.symlink(e,t,n))}ZL.exports=pBe});var TL=g((lVe,NL)=>{"use strict";var ot=N(),gd=require("path"),vBe=Hn().mkdirsSync,ZBe=Jv().utimesMillisSync,pd=Co();function EBe(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:r,destStat:i}=pd.checkPathsSync(e,t,"copy",n);return pd.checkParentPathsSync(e,r,t,"copy"),RBe(i,e,t,n)}function RBe(e,t,n,r){if(r.filter&&!r.filter(t,n))return;let i=gd.dirname(n);return ot.existsSync(i)||vBe(i),RL(e,t,n,r)}function WBe(e,t,n,r){if(!(r.filter&&!r.filter(t,n)))return RL(e,t,n,r)}function RL(e,t,n,r){let s=(r.dereference?ot.statSync:ot.lstatSync)(t);if(s.isDirectory())return YBe(s,e,t,n,r);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return wBe(s,e,t,n,r);if(s.isSymbolicLink())return XBe(e,t,n,r);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function wBe(e,t,n,r,i){return t?NBe(e,n,r,i):WL(e,n,r,i)}function NBe(e,t,n,r){if(r.overwrite)return ot.unlinkSync(n),WL(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}function WL(e,t,n,r){return ot.copyFileSync(t,n),r.preserveTimestamps&&TBe(e.mode,t,n),Ov(n,e.mode)}function TBe(e,t,n){return HBe(e)&&kBe(n,e),VBe(t,n)}function HBe(e){return(e&128)===0}function kBe(e,t){return Ov(e,t|128)}function Ov(e,t){return ot.chmodSync(e,t)}function VBe(e,t){let n=ot.statSync(e);return ZBe(t,n.atime,n.mtime)}function YBe(e,t,n,r,i){return t?wL(n,r,i):FBe(e.mode,n,r,i)}function FBe(e,t,n,r){return ot.mkdirSync(n),wL(t,n,r),Ov(n,e)}function wL(e,t,n){ot.readdirSync(e).forEach(r=>xBe(r,e,t,n))}function xBe(e,t,n,r){let i=gd.join(t,e),s=gd.join(n,e),{destStat:o}=pd.checkPathsSync(i,s,"copy",r);return WBe(o,i,s,r)}function XBe(e,t,n,r){let i=ot.readlinkSync(t);if(r.dereference&&(i=gd.resolve(process.cwd(),i)),e){let s;try{s=ot.readlinkSync(n)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return ot.symlinkSync(i,n);throw o}if(r.dereference&&(s=gd.resolve(process.cwd(),s)),pd.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(ot.statSync(n).isDirectory()&&pd.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return JBe(i,n)}else return ot.symlinkSync(i,n)}function JBe(e,t){return ot.unlinkSync(t),ot.symlinkSync(e,t)}NL.exports=EBe});var Df=g((dVe,HL)=>{"use strict";var DBe=Q().fromCallback;HL.exports={copy:DBe(EL()),copySync:TL()}});var OL=g((gVe,DL)=>{"use strict";var kL=N(),xL=require("path"),te=require("assert"),md=process.platform==="win32";function XL(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{e[n]=e[n]||kL[n],n=n+"Sync",e[n]=e[n]||kL[n]}),e.maxBusyTries=e.maxBusyTries||3}function Uv(e,t,n){let r=0;typeof t=="function"&&(n=t,t={}),te(e,"rimraf: missing path"),te.strictEqual(typeof e,"string","rimraf: path should be a string"),te.strictEqual(typeof n,"function","rimraf: callback function required"),te(t,"rimraf: invalid options argument provided"),te.strictEqual(typeof t,"object","rimraf: options should be object"),XL(t),VL(e,t,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&r<t.maxBusyTries){r++;let o=r*100;return setTimeout(()=>VL(e,t,i),o)}s.code==="ENOENT"&&(s=null)}n(s)})}function VL(e,t,n){te(e),te(t),te(typeof n=="function"),t.lstat(e,(r,i)=>{if(r&&r.code==="ENOENT")return n(null);if(r&&r.code==="EPERM"&&md)return YL(e,t,r,n);if(i&&i.isDirectory())return Of(e,t,r,n);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return n(null);if(s.code==="EPERM")return md?YL(e,t,s,n):Of(e,t,s,n);if(s.code==="EISDIR")return Of(e,t,s,n)}return n(s)})})}function YL(e,t,n,r){te(e),te(t),te(typeof r=="function"),t.chmod(e,438,i=>{i?r(i.code==="ENOENT"?null:n):t.stat(e,(s,o)=>{s?r(s.code==="ENOENT"?null:n):o.isDirectory()?Of(e,t,n,r):t.unlink(e,r)})})}function FL(e,t,n){let r;te(e),te(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw n}try{r=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw n}r.isDirectory()?Uf(e,t,n):t.unlinkSync(e)}function Of(e,t,n,r){te(e),te(t),te(typeof r=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?OBe(e,t,r):i&&i.code==="ENOTDIR"?r(n):r(i)})}function OBe(e,t,n){te(e),te(t),te(typeof n=="function"),t.readdir(e,(r,i)=>{if(r)return n(r);let s=i.length,o;if(s===0)return t.rmdir(e,n);i.forEach(a=>{Uv(xL.join(e,a),t,c=>{if(!o){if(c)return n(o=c);--s===0&&t.rmdir(e,n)}})})})}function JL(e,t){let n;t=t||{},XL(t),te(e,"rimraf: missing path"),te.strictEqual(typeof e,"string","rimraf: path should be a string"),te(t,"rimraf: missing options"),te.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&md&&FL(e,t,r)}try{n&&n.isDirectory()?Uf(e,t,null):t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return md?FL(e,t,r):Uf(e,t,r);if(r.code!=="EISDIR")throw r;Uf(e,t,r)}}function Uf(e,t,n){te(e),te(t);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR")throw n;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")UBe(e,t);else if(r.code!=="ENOENT")throw r}}function UBe(e,t){if(te(e),te(t),t.readdirSync(e).forEach(n=>JL(xL.join(e,n),t)),md){let n=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-n<500)}else return t.rmdirSync(e,t)}DL.exports=Uv;Uv.sync=JL});var fd=g((pVe,KL)=>{"use strict";var Kf=N(),KBe=Q().fromCallback,UL=OL();function LBe(e,t){if(Kf.rm)return Kf.rm(e,{recursive:!0,force:!0},t);UL(e,t)}function MBe(e){if(Kf.rmSync)return Kf.rmSync(e,{recursive:!0,force:!0});UL.sync(e)}KL.exports={remove:KBe(LBe),removeSync:MBe}});var $L=g((mVe,QL)=>{"use strict";var qBe=Q().fromPromise,qL=Io(),PL=require("path"),zL=Hn(),jL=fd(),LL=qBe(async function(t){let n;try{n=await qL.readdir(t)}catch{return zL.mkdirs(t)}return Promise.all(n.map(r=>jL.remove(PL.join(t,r))))});function ML(e){let t;try{t=qL.readdirSync(e)}catch{return zL.mkdirsSync(e)}t.forEach(n=>{n=PL.join(e,n),jL.removeSync(n)})}QL.exports={emptyDirSync:ML,emptydirSync:ML,emptyDir:LL,emptydir:LL}});var rM=g((fVe,nM)=>{"use strict";var PBe=Q().fromCallback,eM=require("path"),Qi=N(),tM=Hn();function zBe(e,t){function n(){Qi.writeFile(e,"",r=>{if(r)return t(r);t()})}Qi.stat(e,(r,i)=>{if(!r&&i.isFile())return t();let s=eM.dirname(e);Qi.stat(s,(o,a)=>{if(o)return o.code==="ENOENT"?tM.mkdirs(s,c=>{if(c)return t(c);n()}):t(o);a.isDirectory()?n():Qi.readdir(s,c=>{if(c)return t(c)})})})}function jBe(e){let t;try{t=Qi.statSync(e)}catch{}if(t&&t.isFile())return;let n=eM.dirname(e);try{Qi.statSync(n).isDirectory()||Qi.readdirSync(n)}catch(r){if(r&&r.code==="ENOENT")tM.mkdirsSync(n);else throw r}Qi.writeFileSync(e,"")}nM.exports={createFile:PBe(zBe),createFileSync:jBe}});var cM=g((hVe,aM)=>{"use strict";var QBe=Q().fromCallback,iM=require("path"),$i=N(),sM=Hn(),$Be=ji().pathExists,{areIdentical:oM}=Co();function eve(e,t,n){function r(i,s){$i.link(i,s,o=>{if(o)return n(o);n(null)})}$i.lstat(t,(i,s)=>{$i.lstat(e,(o,a)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);if(s&&oM(a,s))return n(null);let c=iM.dirname(t);$Be(c,(u,l)=>{if(u)return n(u);if(l)return r(e,t);sM.mkdirs(c,d=>{if(d)return n(d);r(e,t)})})})})}function tve(e,t){let n;try{n=$i.lstatSync(t)}catch{}try{let s=$i.lstatSync(e);if(n&&oM(s,n))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let r=iM.dirname(t);return $i.existsSync(r)||sM.mkdirsSync(r),$i.linkSync(e,t)}aM.exports={createLink:QBe(eve),createLinkSync:tve}});var lM=g((IVe,uM)=>{"use strict";var es=require("path"),hd=N(),nve=ji().pathExists;function rve(e,t,n){if(es.isAbsolute(e))return hd.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),n(r)):n(null,{toCwd:e,toDst:e}));{let r=es.dirname(t),i=es.join(r,e);return nve(i,(s,o)=>s?n(s):o?n(null,{toCwd:i,toDst:e}):hd.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),n(a)):n(null,{toCwd:e,toDst:es.relative(r,e)})))}}function ive(e,t){let n;if(es.isAbsolute(e)){if(n=hd.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let r=es.dirname(t),i=es.join(r,e);if(n=hd.existsSync(i),n)return{toCwd:i,toDst:e};if(n=hd.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:es.relative(r,e)}}}uM.exports={symlinkPaths:rve,symlinkPathsSync:ive}});var pM=g((CVe,gM)=>{"use strict";var dM=N();function sve(e,t,n){if(n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,t)return n(null,t);dM.lstat(e,(r,i)=>{if(r)return n(null,"file");t=i&&i.isDirectory()?"dir":"file",n(null,t)})}function ove(e,t){let n;if(t)return t;try{n=dM.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}gM.exports={symlinkType:sve,symlinkTypeSync:ove}});var AM=g((yVe,bM)=>{"use strict";var ave=Q().fromCallback,fM=require("path"),kn=Io(),hM=Hn(),cve=hM.mkdirs,uve=hM.mkdirsSync,IM=lM(),lve=IM.symlinkPaths,dve=IM.symlinkPathsSync,CM=pM(),gve=CM.symlinkType,pve=CM.symlinkTypeSync,mve=ji().pathExists,{areIdentical:yM}=Co();function fve(e,t,n,r){r=typeof n=="function"?n:r,n=typeof n=="function"?!1:n,kn.lstat(t,(i,s)=>{!i&&s.isSymbolicLink()?Promise.all([kn.stat(e),kn.stat(t)]).then(([o,a])=>{if(yM(o,a))return r(null);mM(e,t,n,r)}):mM(e,t,n,r)})}function mM(e,t,n,r){lve(e,t,(i,s)=>{if(i)return r(i);e=s.toDst,gve(s.toCwd,n,(o,a)=>{if(o)return r(o);let c=fM.dirname(t);mve(c,(u,l)=>{if(u)return r(u);if(l)return kn.symlink(e,t,a,r);cve(c,d=>{if(d)return r(d);kn.symlink(e,t,a,r)})})})})}function hve(e,t,n){let r;try{r=kn.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){let a=kn.statSync(e),c=kn.statSync(t);if(yM(a,c))return}let i=dve(e,t);e=i.toDst,n=pve(i.toCwd,n);let s=fM.dirname(t);return kn.existsSync(s)||uve(s),kn.symlinkSync(e,t,n)}bM.exports={createSymlink:ave(fve),createSymlinkSync:hve}});var RM=g((bVe,EM)=>{"use strict";var{createFile:_M,createFileSync:SM}=rM(),{createLink:GM,createLinkSync:BM}=cM(),{createSymlink:vM,createSymlinkSync:ZM}=AM();EM.exports={createFile:_M,createFileSync:SM,ensureFile:_M,ensureFileSync:SM,createLink:GM,createLinkSync:BM,ensureLink:GM,ensureLinkSync:BM,createSymlink:vM,createSymlinkSync:ZM,ensureSymlink:vM,ensureSymlinkSync:ZM}});var wM=g((AVe,WM)=>{"use strict";var Lf=BA();WM.exports={readJson:Lf.readFile,readJsonSync:Lf.readFileSync,writeJson:Lf.writeFile,writeJsonSync:Lf.writeFileSync}});var Mf=g((_Ve,HM)=>{"use strict";var Ive=Q().fromCallback,Id=N(),NM=require("path"),TM=Hn(),Cve=ji().pathExists;function yve(e,t,n,r){typeof n=="function"&&(r=n,n="utf8");let i=NM.dirname(e);Cve(i,(s,o)=>{if(s)return r(s);if(o)return Id.writeFile(e,t,n,r);TM.mkdirs(i,a=>{if(a)return r(a);Id.writeFile(e,t,n,r)})})}function bve(e,...t){let n=NM.dirname(e);if(Id.existsSync(n))return Id.writeFileSync(e,...t);TM.mkdirsSync(n),Id.writeFileSync(e,...t)}HM.exports={outputFile:Ive(yve),outputFileSync:bve}});var VM=g((SVe,kM)=>{"use strict";var{stringify:Ave}=ya(),{outputFile:_ve}=Mf();async function Sve(e,t,n={}){let r=Ave(t,n);await _ve(e,r,n)}kM.exports=Sve});var FM=g((GVe,YM)=>{"use strict";var{stringify:Gve}=ya(),{outputFileSync:Bve}=Mf();function vve(e,t,n){let r=Gve(t,n);Bve(e,r,n)}YM.exports=vve});var XM=g((BVe,xM)=>{"use strict";var Zve=Q().fromPromise,At=wM();At.outputJson=Zve(VM());At.outputJsonSync=FM();At.outputJSON=At.outputJson;At.outputJSONSync=At.outputJsonSync;At.writeJSON=At.writeJson;At.writeJSONSync=At.writeJsonSync;At.readJSON=At.readJson;At.readJSONSync=At.readJsonSync;xM.exports=At});var KM=g((vVe,UM)=>{"use strict";var Eve=N(),Lv=require("path"),Rve=Df().copy,OM=fd().remove,Wve=Hn().mkdirp,wve=ji().pathExists,JM=Co();function Nve(e,t,n,r){typeof n=="function"&&(r=n,n={}),n=n||{};let i=n.overwrite||n.clobber||!1;JM.checkPaths(e,t,"move",n,(s,o)=>{if(s)return r(s);let{srcStat:a,isChangingCase:c=!1}=o;JM.checkParentPaths(e,a,t,"move",u=>{if(u)return r(u);if(Tve(t))return DM(e,t,i,c,r);Wve(Lv.dirname(t),l=>l?r(l):DM(e,t,i,c,r))})})}function Tve(e){let t=Lv.dirname(e);return Lv.parse(t).root===t}function DM(e,t,n,r,i){if(r)return Kv(e,t,n,i);if(n)return OM(t,s=>s?i(s):Kv(e,t,n,i));wve(t,(s,o)=>s?i(s):o?i(new Error("dest already exists.")):Kv(e,t,n,i))}function Kv(e,t,n,r){Eve.rename(e,t,i=>i?i.code!=="EXDEV"?r(i):Hve(e,t,n,r):r())}function Hve(e,t,n,r){Rve(e,t,{overwrite:n,errorOnExist:!0},s=>s?r(s):OM(e,r))}UM.exports=Nve});var zM=g((ZVe,PM)=>{"use strict";var MM=N(),qv=require("path"),kve=Df().copySync,qM=fd().removeSync,Vve=Hn().mkdirpSync,LM=Co();function Yve(e,t,n){n=n||{};let r=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:s=!1}=LM.checkPathsSync(e,t,"move",n);return LM.checkParentPathsSync(e,i,t,"move"),Fve(t)||Vve(qv.dirname(t)),xve(e,t,r,s)}function Fve(e){let t=qv.dirname(e);return qv.parse(t).root===t}function xve(e,t,n,r){if(r)return Mv(e,t,n);if(n)return qM(t),Mv(e,t,n);if(MM.existsSync(t))throw new Error("dest already exists.");return Mv(e,t,n)}function Mv(e,t,n){try{MM.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return Xve(e,t,n)}}function Xve(e,t,n){return kve(e,t,{overwrite:n,errorOnExist:!0}),qM(e)}PM.exports=Yve});var QM=g((EVe,jM)=>{"use strict";var Jve=Q().fromCallback;jM.exports={move:Jve(KM()),moveSync:zM()}});var eq=g((RVe,$M)=>{"use strict";$M.exports={...Io(),...Df(),...$L(),...RM(),...XM(),...Hn(),...QM(),...Mf(),...ji(),...fd()}});var nq=g(zv=>{"use strict";Object.defineProperty(zv,"__esModule",{value:!0});var tq=require("path"),Pv=class{constructor(t){this.buffer="",this.filePath=t}write(t){this.buffer+=t}async save(t){let n=eq(),r=tq.join(t,this.filePath);return await n.mkdirs(tq.dirname(r)),await n.writeFile(r,this.buffer),r}};zv.default=Pv});var rq=g(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.CodeMaker=void 0;var Dve=require("util"),jv=Yv(),Ove=nq(),Qv=class{constructor({indentationLevel:t=4,indentCharacter:n=" "}={}){this.currIndent=0,this.files=new Array,this.excludes=new Array,this.openBlockFormatter=r=>`${r} {`,this.closeBlockFormatter=()=>"}",this.indentation=t,this.indentCharacter=n}get currentIndentLength(){return this.currIndent*this.indentation}async save(t){let n=this.files.filter(r=>!this.excludes.includes(r.filePath)).map(r=>r.save(t));return(await Promise.all(n)).sort()}openFile(t){if(this.currentFile)throw new Error(`Cannot open file ${t} without closing the previous file ${this.currentFile.filePath}`);this.currentFile=new Ove.default(t)}closeFile(t){if(!this.currentFile)throw new Error(`Cannot close file ${t}. It was never opened`);if(this.currentFile.filePath!==t)throw new Error(`Cannot close file ${t}. The currently opened file is ${this.currentFile.filePath}`);this.files.push(this.currentFile),this.currentFile=void 0}line(t,...n){if(!this.currentFile)throw new Error("Cannot emit source lines without opening a file");t&&(t=this.makeIndent()+t,this.currentFile.write(Dve.format(t,...n))),this.currentFile.write(`
`)}indent(t){this.open(t)}unindent(t){this.close(t)}open(t){this.line(t),this.currIndent++}close(t){this.currIndent--,t!==!1&&this.line(t)}openBlock(t){this.open(this.openBlockFormatter(t))}closeBlock(t){this.close(this.closeBlockFormatter(t))}exclude(t){this.excludes.push(t)}toCamelCase(...t){return jv.toCamelCase(...t)}toPascalCase(...t){return jv.toPascalCase(...t)}toSnakeCase(t,n="_"){return jv.toSnakeCase(t,n)}getCurrentFilePath(){var t;return(t=this.currentFile)==null?void 0:t.filePath}makeIndent(){let t=this.currentIndentLength;return t<=0?"":this.indentCharacter.repeat(t)}};qf.CodeMaker=Qv});var sq=g(ts=>{"use strict";var Uve=ts&&ts.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),iq=ts&&ts.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Uve(t,e,n)};Object.defineProperty(ts,"__esModule",{value:!0});iq(rq(),ts);iq(Yv(),ts)});var rZ={};Ft(rZ,{CONFIG_DEFAULTS:()=>cq,LANGUAGES:()=>Kve,Language:()=>tZ,TerraformModuleConstraint:()=>yo,TerraformProviderConstraint:()=>zf,isLocalModule:()=>qve,logTimespan:()=>zve,parseConfig:()=>uq,readConfigSync:()=>nZ,shouldCheckCodeMakerOutput:()=>Pve});function Pf(e){return Array.isArray(e)&&e.length>0}function $v(e){return e.match(/^(\.\/|\.\.\/|\.\\\\|\.\.\\\\)(.*)/)}function qve(e){return $v(e)!==null}function nZ(e=eZ.join(process.cwd(),Mve)){let t;return jf.existsSync(e)&&(t=jf.readFileSync(e).toString()),uq(t)}function Pve(e){return Pf(e.terraformModules)||Pf(e.terraformProviders)}function zve(e){X.debug(`Start timer for ${e}...`);let t=Date.now();return function(){let i=Date.now()-t;X.debug(`${e} took ${i}ms`)}}var jf,eZ,oq,aq,tZ,Kve,Lve,Mve,cq,yo,zf,uq,Qf=Xe(()=>{"use strict";jf=w(Ks()),eZ=w(require("path"));bo();kv();oq=require("process"),aq=w(sq()),tZ=(s=>(s.TYPESCRIPT="typescript",s.PYTHON="python",s.CSHARP="csharp",s.JAVA="java",s.GO="go",s))(tZ||{}),Kve=["typescript","python","java","csharp","go"],Lve="CDKTF_CONTEXT_JSON",Mve="cdktf.json",cq={output:"cdktf.out",codeMakerOutput:".gen"};yo=class{constructor(t){if(typeof t=="string"){let r=this.parseDependencyConstraint(t);this.name=r.name,this.source=r.source,this.fqn=r.fqn,this.version=r.version,this.namespace=r.namespace}else this.source=t.source,this.name=t.name,this.fqn=t.name,this.version=t.version,this.namespace=t.namespace;$v(this.source)&&(this.localSourceAbsolutePath=eZ.join(process.cwd(),this.source))}get className(){return(0,aq.toPascalCase)(this.name.replace(/[-/.]/g,"_"))}get fileName(){return this.namespace?`${this.namespace}/${this.name}`:this.name}parseDependencyConstraint(t){let n=$v(t);if(n){let I=n[2],b=I.split("/"),R=b.pop()??I,W=b.pop();return{name:R,fqn:I,source:t,namespace:W}}let[r,i]=t.split("@"),s=r.split("//");if(Hv(s[0])){let I=s[0].split("/"),b=I.pop(),R=I.pop()??r,W=`${I.pop()}/${b}`;if(s.length>1){let F=s[1].split("/"),H=F.pop();W=`${W}/${R}/${F.join("/")}`,R=H??R}return{name:R,source:r,version:i,namespace:W,fqn:r.replace("//","/").replace(/\./g,"-")}}let o=t,a=o.match(/^([a-zA-Z0-9]*)::(.*)/);a&&(o=a[2]);let c=o.match(/^([a-zA-Z]*):\/\/(.*)/);c&&(o=c[2]),o=o.split(":").pop()??o;let l=o.match(/^[\d]*(.*)/);l&&(o=l[1]);let d=o.match(/[^/]*\.[^/]*\/(.*)/);d&&(o=d[1]);let p=o.match(/(.*)\?.*/);p&&(o=p[1]),o=o.replace(/\.git|\.hg|\.zip/,""),s=o.split("//");let m=s[0].split("/"),f=m.pop(),h=m.pop();if(!f)throw new Error(`Module name should be properly set in ${t}`);if(s.length>1){let I=s[1].split("/"),b=I.pop();h?h=`${h}/${f}/${I.join("/")}`:h=`${f}/${I.join("/")}`,f=b??f}return{name:f,source:t,fqn:o.replace("//","/"),namespace:h}}},zf=class{constructor(t){if(typeof t=="string"){let n=this.parseDependencyConstraint(t);this.name=n.name,this.fqn=n.fqn,this.source=n.fqn,this.version=n.version,this.namespace=n.namespace}else this.name=t.name,this.fqn=t.name,this.version=t.version,this.source=t.source,this.namespace=t.namespace}parseDependencyConstraint(t){let[n,r]=t.split("@"),i=n.split("/"),s=i.pop(),o=i.pop();if(!s)throw new Error(`Provider name should be properly set in ${t}`);return{name:s,source:n,version:r==="*"?void 0:r,fqn:n,namespace:o}}},uq=e=>{var n,r;let t={...cq,...JSON.parse(e||"{}")};return Pf(t.terraformModules)&&(t.terraformModules=(n=t.terraformModules)==null?void 0:n.map(i=>new yo(i))),Pf(t.terraformProviders)&&(t.terraformProviders=(r=t.terraformProviders)==null?void 0:r.map(i=>new zf(i))),t.context&&(oq.env[Lve]=JSON.stringify(t.context)),t}});var dq=g((kVe,lq)=>{"use strict";lq.exports=({onlyFirst:e=!1}={})=>{let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}});var pq=g((VVe,gq)=>{"use strict";var jve=dq();gq.exports=e=>typeof e=="string"?e.replace(jve(),""):e});var hq={};Ft(hq,{HttpError:()=>$f,downcaseFirst:()=>rZe,downloadFile:()=>iZe,ensureAllSettledBeforeThrowing:()=>sZe,exec:()=>_t,hasNoColorFlagOrEnv:()=>nh,mkdtemp:()=>eZe,readCDKTFManifest:()=>nZe,readCDKTFVersion:()=>tZe,shell:()=>Qve,withTempDir:()=>$ve});async function Qve(e,t=[],n={}){let r=new Array,i=new Array;try{return await _t(e,t,n,s=>{let o=n.noColor?(0,jr.default)(s.toLocaleString()):s.toLocaleString();i.push(o),console.log(o)},s=>{let o=n.noColor?(0,jr.default)(s.toLocaleString()):s.toLocaleString();r.push(o)})}catch(s){throw r.length>0&&(s.stderr=r.map(o=>o.toString()).join(""),n.noColor&&(s.stderr=(0,jr.default)(s.stderr))),i.length>0&&(s.stdout=i.join(""),n.noColor&&(s.stdout=(0,jr.default)(s.stdout))),s}}async function $ve(e,t){let n=process.cwd(),r=await Te.mkdtemp(gc.join(iZ.tmpdir(),"cdktf.")),i=gc.join(r,e);await Te.mkdirp(i);try{process.chdir(i),await t()}finally{process.chdir(n),await Te.remove(r)}}async function eZe(e){let t=await Te.mkdtemp(gc.join(iZ.tmpdir(),"cdktf."));try{await e(t)}finally{await Te.remove(t)}}async function tZe(e){let t=gc.join(e,"cdk.tf.json");if(Te.existsSync(t)){let n=Te.readFileSync(t,"utf8");return JSON.parse(n)["//"].metadata.version}return""}async function nZe(){let{output:e}=nZ(),t=await Te.readFile(gc.join(e,fq.Manifest.fileName));return JSON.parse(t.toString())}function rZe(e){return e===""?e:`${e[0].toLocaleLowerCase()}${e.slice(1)}`}async function iZe(e,t){let n=e.startsWith("http://")?th.http:th.https,r=Te.createWriteStream(t);return new Promise((i,s)=>{let o=n.get(e,a=>{if(a.statusCode!==200){s(new $f(`Failed to get '${e}' (${a.statusCode})`,a.statusCode));return}a.pipe(r)});r.on("finish",()=>i()),o.on("error",a=>{Te.unlink(t,()=>s(a))}),r.on("error",a=>{Te.unlink(t,()=>s(a))}),o.end()})}async function sZe(e,t){try{await e}catch(n){throw await Promise.allSettled(t),n}}function nh(){return oZe("no-color")||process.env.FORCE_COLOR==="0"}function oZe(e){let t=e.startsWith("-")?"":e.length===1?"-":"--",n=process.argv.indexOf(t+e),r=process.argv.indexOf("--");return n!==-1&&(r===-1||n<r)}var mq,Te,th,iZ,gc,fq,jr,_t,$f,mc=Xe(()=>{"use strict";mq=w(YK()),Te=w(Ks()),th=w(UK()),iZ=w(require("os")),gc=w(require("path"));bo();fq=require("cdktf");Qf();jr=w(pq());_t=async(e,t,n,r,i,s=!0)=>(typeof n.noColor!="boolean"&&nh()&&(n.noColor=!0),new Promise((o,a)=>{var d,p,m,f;let c=(0,mq.spawn)(e,t,n),u=new Array,l=new Array;r!==void 0?(d=c.stdout)==null||d.on("data",h=>{let I=n.noColor?(0,jr.default)(h.toLocaleString()):h.toLocaleString();eh(I),u.push(I),r(I)}):(p=c.stdout)==null||p.on("data",h=>{let I=n.noColor?(0,jr.default)(h.toLocaleString()):h.toLocaleString();eh(I),u.push(I)}),i!==void 0?(m=c.stderr)==null||m.on("data",h=>{let I=n.noColor?(0,jr.default)(h.toLocaleString()):h.toLocaleString();pc(I),s&&i(I),l.push(I)}):(f=c.stderr)==null||f.on("data",h=>{let I=n.noColor?(0,jr.default)(h.toLocaleString()):h.toLocaleString();pc(I),s&&process.stderr.write(I),l.push(I)}),c.once("error",h=>a(h)),c.once("close",h=>{if(h!==0){let I=new Error(`non-zero exit code ${h}`);return I.stderr=l.map(b=>b.toString()).join(""),a(I)}return o(u.join(""))})}));$f=class extends Error{constructor(n,r){super(n);this.statusCode=r;Object.setPrototypeOf(this,new.target.prototype)}}});var yq={};Ft(yq,{logFileName:()=>Cq,logger:()=>X,processLoggerDebug:()=>eh,processLoggerError:()=>pc});var Cd,rh,Iq,Ao,Qr,X,Cq,eh,pc,bo=Xe(()=>{"use strict";Cd=w(IF()),rh=w(Ks()),Iq=w(require("path")),Ao=w(gv());mc();Qr=(0,Cd.getLogger)(),X={trace(e,...t){Qr.trace(e,...t),Ao.addBreadcrumb({message:e,level:"debug"})},debug(e,...t){Qr.debug(e,...t),Ao.addBreadcrumb({message:e,level:"debug"})},info(e,...t){Qr.info(e,...t),Ao.addBreadcrumb({message:e,level:"info"})},warn(e,...t){Qr.warn(e,...t),Ao.addBreadcrumb({message:e,level:"warning"})},error(e,...t){Qr.error(e,...t),Ao.addBreadcrumb({message:e,level:"error"})},fatal(e,...t){Qr.fatal(e,...t),Ao.addBreadcrumb({message:e,level:"fatal"})},setLevel(e){Qr.level=e},useDefaultLevel(){Qr.level=process.env.CDKTF_LOG_LEVEL||"INFO"}};Qr.level=process.env.CDKTF_LOG_LEVEL||"INFO";Cq="cdktf.log";if(process.env.CDKTF_LOG_FILE_DIRECTORY&&rh.existsSync(process.env.CDKTF_LOG_FILE_DIRECTORY)&&rh.statSync(process.env.CDKTF_LOG_FILE_DIRECTORY).isDirectory())(0,Cd.configure)({appenders:{cdktf:{type:"file",filename:Iq.join(process.env.CDKTF_LOG_FILE_DIRECTORY,Cq)}},categories:{default:{appenders:["cdktf"],level:"debug"}}});else{let e=nh()?"basic":"colored";(0,Cd.configure)({appenders:{out:{type:"stdout",layout:{type:e}}},categories:{default:{appenders:["out"],level:"info"}}})}eh=e=>{X.debug(e.toString())},pc=e=>{X.error(e.toString())}});var bq=g((XVe,aZe)=>{aZe.exports={name:"@cdktf/commons",version:"0.20.0",publishConfig:{access:"public"},description:"CDK for Terraform Common utilities",scripts:{build:"tsc",watch:"tsc -w","watch-preserve-output":"tsc -w --preserveWatchOutput",lint:"eslint . --ext .ts,.tsx","lint:fix":"eslint . --ext .ts,.tsx --fix",pretest:"yarn build","pretest:ci":"yarn build",test:"yarn lint && jest","test:ci":"yarn lint && jest --ci","jest-watch":"jest --watch",package:"./package.sh","dist-clean":"rm -rf dist"},main:"src/index.js",types:"src/index.d.ts",repository:{type:"git",url:"git://github.com/hashicorp/terraform-cdk.git",directory:"packages/@cdktf/commons"},author:{name:"HashiCorp",url:"https://hashicorp.com"},keywords:["cdk","cdktf","terraform"],license:"MPL-2.0",dependencies:{"@sentry/node":"7.92.0",cdktf:"0.20.0","ci-info":"3.9.0",codemaker:"1.93.0","cross-spawn":"7.0.3","follow-redirects":"1.15.4","fs-extra":"11.2.0","is-valid-domain":"0.1.6",log4js:"6.9.1","strip-ansi":"6.0.1",uuid:"9.0.1"},devDependencies:{"@types/follow-redirects":"1.14.4","@types/fs-extra":"11.0.4","@types/uuid":"9.0.7","@typescript-eslint/eslint-plugin":"4.33.0","@typescript-eslint/parser":"4.33.0","eslint-config-prettier":"8.10.0","eslint-plugin-react":"7.33.2","eslint-plugin-react-hooks":"4.6.0",jest:"29.7.0","lint-staged":"13.3.0","ts-jest":"29.1.1",typescript:"5.1.6"},eslintConfig:{parser:"@typescript-eslint/parser",plugins:["@typescript-eslint"],settings:{react:{version:"detect"}},extends:["eslint:recommended","plugin:@typescript-eslint/eslint-recommended","plugin:@typescript-eslint/recommended","plugin:react/recommended","plugin:react-hooks/recommended","prettier"],rules:{"@typescript-eslint/no-explicit-any":0,"@typescript-eslint/explicit-function-return-type":0,"@typescript-eslint/no-use-before-define":0,"@typescript-eslint/explicit-module-boundary-types":0,"@typescript-eslint/no-var-requires":0,"react/no-unescaped-entities":0,"no-sequences":"error","no-irregular-whitespace":["error",{skipTemplates:!0}]},ignorePatterns:["node_modules","dist","coverage"]},"lint-staged":{"src/**/*.{ts,tsx}":"tsc-files ambient.d.ts --noEmit"}}});var Aq={};Ft(Aq,{DISPLAY_VERSION:()=>_o});function cZe(){return bq().version.replace(/\+[0-9a-f]+$/,"")}var _o,yd=Xe(()=>{"use strict";_o=`${cZe()}`});var Sq={};Ft(Sq,{CDKTF_DISABLE_PLUGIN_CACHE_ENV:()=>lZe,CHECKPOINT_DISABLE:()=>sZ,DISABLE_VERSION_CHECK:()=>uZe});function _q(e){return e==="true"||e==="1"}var uZe,sZ,lZe,oZ=Xe(()=>{"use strict";uZe=_q(process.env.DISABLE_VERSION_CHECK),sZ=Boolean(process.env.CHECKPOINT_DISABLE),lZe=_q(process.env.CDKTF_DISABLE_PLUGIN_CACHE_ENV)});var Rq={};Ft(Rq,{ReportRequest:()=>ih,getProjectId:()=>Zq,getUserId:()=>Eq,sendTelemetry:()=>hZe});function mZe(){return process.env.CDKTF_HOME?rs.resolve(process.env.CDKTF_HOME):rs.join((ns.userInfo().homedir??ns.homedir()).trim()||"/",".cdktf")}async function fZe(e,t){return new Promise((n,r)=>{let i=dZe.request((0,Bq.format)(e),{headers:{Accept:"application/json","Content-Length":t.length,"User-Agent":"HashiCorp/cdktf-cli"},method:"POST"},s=>{if(s.statusCode){let a=s.statusCode;if(!pZe.includes(a))return r(new Error(s.statusMessage))}let o=new Array;s.on("data",a=>o.push(a)),s.on("error",a=>r(a)),s.on("end",()=>n())});i.setTimeout(1e3,()=>r(new Error("request timeout"))),i.write(t),i.end(),i.on("error",s=>r(s))})}async function hZe(e,t){let n={command:e,product:"cdktf",version:`${_o}`,dateTime:new Date,language:t.language,payload:t};try{await ih(n)}catch(r){X.error(`Could not send telemetry data: ${r}`)}}function vq(e,t,n=!1,r){let i=wb(),s;try{s=require(e)}catch{if(n){let o={};r&&(o["//"]=r.replace(/\n/g," ")),o[t]=i,bd.ensureDirSync(rs.dirname(e)),bd.writeFileSync(e,JSON.stringify(o,null,2))}return i}return s[t]?s[t]:(bd.writeFileSync(e,JSON.stringify({...s,[t]:i},null,2)),i)}function Zq(e=process.cwd()){return vq(rs.resolve(e,"cdktf.json"),"projectId")}function Eq(){return vq(rs.resolve(mZe(),"config.json"),"userId",!0,`This signature is a randomly generated UUID used to anonymously differentiate users in telemetry data order to inform product direction.
This signature is random, it is not based on any personally identifiable information.
To create a new signature, you can simply delete this file at any time.
See https://cdk.tf/telemetry for more
information on how to disable it.`)}async function ih(e){if(sZ)return;e.runID||(e.runID=wb()),e.dateTime||(e.dateTime=new Date),e.arch||(e.arch=ns.arch()),e.os||(e.os=ns.platform());let t=aZ.default.isCI?aZ.default.name||"unknown":!1;!e.userId&&!t&&(e.userId=Eq()),t&&(e.ci=t),e.projectId=e.projectId||Zq();let n=JSON.stringify(e);if(n.length>Gq){X.warn(`Skipped sending telemetry as the request body size was ${n.length} bytes. The limit is ${Gq} bytes`);return}try{await fZe(`${gZe}telemetry/${e.product}`,n)}catch(r){pc(r.message)}}var Bq,ns,aZ,rs,bd,dZe,gZe,pZe,Gq,cZ=Xe(()=>{"use strict";Bq=require("url");iH();ns=w(require("os")),aZ=w(cH());bo();rs=w(require("path")),bd=w(Ks());yd();oZ();dZe=require("https"),gZe="https://checkpoint-api.hashicorp.com/v1/",pZe=[200,201],Gq=8192});var Wq={};Ft(Wq,{ConstructsMakerModuleTarget:()=>sh,ConstructsMakerProviderTarget:()=>oh,ConstructsMakerTarget:()=>Ad});var Ad,sh,oh,wq=Xe(()=>{"use strict";Qf();Ad=class{constructor(t,n){this.constraint=t;this.targetLanguage=n;this.constraint instanceof yo?this.fileName=`${this.typesPath(this.constraint.fileName)}.ts`:this.fileName=`${this.typesPath(this.constraint.name)}.ts`}static from(t,n){return t instanceof yo?new sh(t,n):new oh(t,n)}get version(){return this.constraint.version}get source(){return this.constraint.source}get name(){return this.constraint.name}get fqn(){return this.constraint.fqn}get namespace(){return this.constraint.namespace}get moduleKey(){return this.fqn.replace(/\//gi,"_")}},sh=class extends Ad{get isModule(){return!0}get isProvider(){return!1}get srcMakName(){switch(this.targetLanguage){case"go":return this.name.replace(/-/gi,"_");case"java":case"csharp":case"python":return this.simplifiedFqn;default:return this.simplifiedName}}get trackingPayload(){return{name:this.name,fullName:this.fqn,version:this.version,type:"module"}}typesPath(n){return`modules/${n}`}get simplifiedName(){var n;return((n=this.namespace)==null?void 0:n.replace(/\//gi,".").replace(/-/gi,"_"))??this.name}get simplifiedFqn(){return this.fqn.replace(/\//gi,".").replace(/-/gi,"_")}},oh=class extends Ad{get isModule(){return!1}get isProvider(){return!0}get srcMakName(){switch(this.targetLanguage){case"java":return this.isNullProvider?"nullprovider":this.simplifiedName;case"csharp":return this.isNullProvider?"Providers.Null":this.simplifiedName;case"python":return this.simplifiedName;case"go":return this.name.replace(/-/gi,"_");default:return this.constraint.fqn}}get trackingPayload(){return{name:this.name,fullName:this.source,version:this.version,type:"provider"}}typesPath(n){return`providers/${n}/index`}get isNullProvider(){return this.constraint.name==="null"}get simplifiedName(){return this.name.replace(/\//gi,".").replace(/-/gi,"_")}}});var Tq={};Ft(Tq,{Errors:()=>lZ,IsErrorType:()=>CZe});async function IZe(e,t){let n={command:e,product:"cdktf",version:`${_o}`,dateTime:new Date,payload:t};await ih(n)}function CZe(e,t){return e&&e.__type===t}function uZ(e,t){return(n,r=new Error,i)=>{IZe(t,{...i,message:n,type:e});let s=new Error(`${e} Error: ${n}`);return Object.entries(i||{}).forEach(([o,a])=>{s[o]=a}),s.__type=e,s.stack=r.stack,s}}var Nq,ah,lZ,dZ=Xe(()=>{"use strict";cZ();yd();Nq=w(gv());ah="unknown",lZ={Internal:uZ("Internal",ah),Usage:uZ("Usage",ah),External:uZ("External",ah),setScope(e){ah=e,Nq.configureScope(t=>t.setTransactionName(e))}}});var kq={};Ft(kq,{terraformBinaryName:()=>Hq,terraformVersion:()=>gZ});var Hq,gZ,pZ=Xe(()=>{"use strict";dZ();mc();Hq=process.env.TERRAFORM_BINARY_NAME||"terraform",gZ=_t(Hq,["version","-json"],{}).then(e=>JSON.parse(e).terraform_version).catch(e=>lZ.Usage(`Unknown: Error loading terraform version ${e}`,e))});var xq={};Ft(xq,{getDependencyInformationFromLine:()=>Yq,getGradleDependencies:()=>Vq,getGradlePackageVersion:()=>hZ,getGradlePackageVersionFromBuild:()=>Fq,isGradleProject:()=>fZ});function fZ(e){let t=mZ.default.join(e,"build.gradle");try{return _d.default.accessSync(t,_d.default.constants.R_OK|_d.default.constants.W_OK),!0}catch{return X.debug(`No build.gradle found at ${t}`),!1}}async function Vq(){let e;try{e=await _t("gradle",["dependencies","--console=plain"],{env:process.env})}catch(m){X.debug(`Unable to run 'gradle dependencies': ${m}`);return}let t=e.split(/\r\n|\r|\n/),n=t.findIndex(m=>m.includes("implementation - "));if(n===-1){X.debug(`Unable to find implementation section in output of 'gradle dependencies': ${e}`);return}let r=/^\s*$/,i=t.slice(n+1),s=i.findIndex(m=>r.test(m)),o=i.slice(0,s),a=t.findIndex(m=>m.includes("api - "));if(a===-1){X.debug(`Unable to find api section in output of 'gradle dependencies': ${e}`);return}let c=t.slice(a+1),u=c.findIndex(m=>r.test(m)),l=c.slice(0,u),d=/^\s*[+\\-]+\s*/,p=/\s+\([nc*]\)\s*$/;return[...o,...l].filter(m=>m!=="No dependencies").map(m=>m.replace(d,"").replace(p,""))}function Yq(e){let t=/^\s*([^:]+):([^:]+)(?::([^\s]+))?/,n=e.match(t);if(!n){X.debug("Unexpected format for gradle build. Please file an issue at https://cdk.tf/bug");return}return n[3]===void 0?{group:"",name:n[1],version:n[2]}:{group:n[1],name:n[2],version:n[3]}}async function hZ(e){let n={jsii:"jsii-runtime"}[e]||e;X.debug("Running 'gradle dependencies' to find package version",n);let r=await Vq();if(!r||r.length===0)return;for(let s of r)if(s.includes(`:${n}:`)){let o=Yq(s);return o?o.version:void 0}let i=await Fq(e);if(i)return i.version}async function Fq(e){let t=mZ.default.join(process.cwd(),"build.gradle"),r=(await _d.default.readFile(t,"utf-8")).split(/\r\n|\r|\n/),i=/^\s*dependencies\s*\{/i;if(r.findIndex(p=>i.test(p))===-1){X.debug("Unable to find dependencies section in output build.gradle");return}let o=r.findIndex(p=>p.includes(e));if(o===-1){X.debug(`Unable to find package ${e} in output build.gradle`);return}let a=r[o],u=new RegExp(`([^:]+):${e}(?::([^\\s]+))?`,"i").exec(a);if(u)return{group:u[1],name:e,version:u[2]||""};let d=new RegExp(`java/(.*)/${e}/([^/]+)/.*\\.jar`,"i").exec(a);if(d)return{group:d[1].replace(/\//g,"."),name:e,version:d[2]}}var mZ,_d,IZ=Xe(()=>{"use strict";mZ=w(require("path")),_d=w(Ks());bo();mc()});var Qq={};Ft(Qq,{collectDebugInformation:()=>ZZe,getDotnetVersion:()=>Oq,getGoVersion:()=>zq,getGradleVersion:()=>Lq,getJavaVersion:()=>Uq,getLanguage:()=>Dq,getMavenVersion:()=>Kq,getNodeVersion:()=>jq,getPackageVersion:()=>ch,getPipVersion:()=>qq,getPipenvVersion:()=>Pq,getPythonVersion:()=>Mq});function Dq(e=process.cwd()){try{return require(Xq.resolve(e,"cdktf.json")).language}catch{X.debug(`Unable to detect language in ${e}`);return}}async function fr(e,t){let n=()=>{};try{return(await _t(e,[t],{env:process.env,stdio:[void 0,void 0,"ignore"]},n,n)).trim().replace(/\r?\n|\r/g,"")}catch(r){X.debug(`Failed to run ${e} ${t}: ${r}`);return}}function Oq(){return fr("dotnet","--version")}function Uq(){return fr("java","-version")}function Kq(){return fr("mvn","--version")}function Lq(){return fr("gradle","--version")}async function Mq(){return await fr("python3","--version")||await fr("python","--version")}function qq(){return fr("pip","--version")}function Pq(){return fr("pipenv","--version")}function zq(){return fr("go","version")}function jq(){return fr("node","--version")}async function yZe(e){return await(0,Jq.pathExists)("pnpm-lock.yaml")?bZe(e):AZe(e)}async function bZe(e){var r,i,s;let t;try{t=await _t("pnpm",["list",e,"--json"],{env:{...process.env}})}catch(o){X.debug(`Unable to run 'pnpm list ${e} --json': ${o}`);return}let n;try{n=JSON.parse(t)}catch(o){X.debug(`Unable to parse output of 'pnpm list ${e} --json': ${o}`);return}if(!n||!Array.isArray(n)||n.length===0||!((s=(i=(r=n[0])==null?void 0:r.dependencies)==null?void 0:i[e])!=null&&s.version)){X.debug(`Unable to find '${e}' in 'pnpm list ${e} --json': ${t}`);return}return n[0].dependencies[e].version}async function AZe(e){let t;try{t=await _t("npm",["list",e,"--json"],{env:{...process.env}})}catch(r){X.debug(`Unable to run 'npm list ${e} --json': ${r}`);return}let n;try{n=JSON.parse(t)}catch(r){X.debug(`Unable to parse output of 'npm list ${e} --json': ${r}`);return}if(!n.dependencies||!n.dependencies[e]||!n.dependencies[e].version){X.debug(`Unable to find '${e}' in 'npm list ${e} --json': ${t}`);return}return n.dependencies[e].version}async function _Ze(e){let t;try{t=await _t("pipenv",["run","pip","show",e],{env:process.env})}catch(i){X.debug(`Unable to run 'pipenv run pip show ${e}': ${i}`)}if(!t)try{t=await _t("pip",["show",e],{env:process.env})}catch(i){X.debug(`Unable to run 'pip show ${e}': ${i}`)}if(!t)return;let n=t.split(/\r\n|\r|\n/).find(i=>i.startsWith("Version:"));if(!n){X.debug(`Unable to find version in output of 'pipenv run pip show ${e}' / 'pip show ${e}': ${t}`);return}return n.split(":")[1].trim()}async function SZe(e){let n={jsii:"Amazon.JSII.Runtime",constructs:"Constructs",cdktf:"HashiCorp.Cdktf"}[e]||e,r;try{r=await _t("dotnet",["list","package","--include-transitive"],{env:process.env})}catch(s){X.debug(`Unable to run 'dotnet list package --include-transitive': ${s}`);return}let i=r.split(/\r\n|\r|\n/).find(s=>s.includes(`> ${n}`));if(!i){X.debug(`Unable to find version for '${n}' in output of 'dotnet list package --include-transitive': ${r}`);return}return i.split(" ").reverse().find(s=>s!=="")}async function GZe(e){var s;let n={jsii:"jsii-runtime-go",cdktf:"github.com/hashicorp/terraform-cdk-go"}[e]||e,r;try{r=await _t("go",["list","-m","all"],{env:process.env})}catch(o){X.debug(`Unable to run 'go list -m all': ${o}`);return}let i=r.split(/\r\n|\r|\n/).find(o=>o.includes(n));if(!i){X.debug(`Unable to find version for '${n}' in output of 'go list -m all': ${r}`);return}return i.includes("=>")&&(X.debug(`Found local version for '${n}': ${i}`),i=i.split("=>")[0].trim()),(s=i.split(" ").pop())==null?void 0:s.replace("v","")}async function BZe(e){let n={jsii:"jsii-runtime"}[e]||e,r;try{r=await _t("mvn",["dependency:list"],{env:process.env})}catch(l){X.debug(`Unable to run 'mvn dependency:list': ${l}`);return}let i=r.split("The following files have been resolved")[1];if(!i){X.debug(`Unable to find resolution passage in output of 'mvn dependency:list': ${r}`);return}let s=i.split(/\r\n|\r|\n/).find(l=>l.includes(`${n}:`));if(!s){X.debug(`Unable to find version for '${n}' in output of 'mvn dependency:list': ${r}`);return}let o=`${n}:jar:`,a=s.indexOf(o)+o.length,c=":compile",u=s.indexOf(c);return s.substring(a,u)}async function vZe(e){return fZ("./")?hZ(e):BZe(e)}async function ch(e,t){let n=async()=>{};return await({typescript:yZe,python:_Ze,go:GZe,csharp:SZe,java:vZe}[e]||n)(t)??void 0}async function ZZe(){let e={},t=Dq();e.language=t??null,e["cdktf-cli"]=_o;let n=jq();if(e.node=await n??null,t){let r=ch(t,"cdktf"),i=ch(t,"constructs"),s=ch(t,"jsii");e.cdktf=await r??null,e.constructs=await i??null,e.jsii=await s??null}switch(e.terraform=await gZ,e.arch=fc.arch(),e.os=`${fc.platform()} ${fc.release()}`,t){case"python":{let r=Mq(),i=qq(),s=Pq();e.python=await r??null,e.pip=await i??null,e.pipenv=await s??null}break;case"java":{let r=Uq(),i=Kq(),s=Lq();e.java=await r??null,e.maven=await i??null,e.gradle=await s??null}break;case"csharp":e.dotnet=await Oq()??null;break;case"go":e.go=await zq()??null;break}return e}var Xq,fc,Jq,$q=Xe(()=>{"use strict";Xq=w(require("path")),fc=w(require("os"));bo();mc();pZ();yd();Jq=w(Ks());IZ()});var EZe={};var e9=Xe(()=>{"use strict"});var n9={};Ft(n9,{isAttributeNestedType:()=>t9,isNestedTypeAttribute:()=>RZe});function t9(e){return typeof e=="object"&&!Array.isArray(e)&&typeof e.nesting_mode=="string"&&(typeof e.attributes=="object"||typeof e.attributes>"u")}function RZe(e){return typeof e.nested_type<"u"&&t9(e.nested_type)}var r9=Xe(()=>{"use strict"});var me=g(Ge=>{"use strict";var WZe=Ge&&Ge.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Yt=Ge&&Ge.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&WZe(t,e,n)};Object.defineProperty(Ge,"__esModule",{value:!0});Yt((cZ(),St(Rq)),Ge);Yt((wq(),St(Wq)),Ge);Yt((Qf(),St(rZ)),Ge);Yt(($q(),St(Qq)),Ge);Yt((oZ(),St(Sq)),Ge);Yt((dZ(),St(Tq)),Ge);Yt((IZ(),St(xq)),Ge);Yt((bo(),St(yq)),Ge);Yt((e9(),St(EZe)),Ge);Yt((r9(),St(n9)),Ge);Yt((kv(),St(zK)),Ge);Yt((pZ(),St(kq)),Ge);Yt((mc(),St(hq)),Ge);Yt((yd(),St(Aq)),Ge)});var s9=g((oYe,CZ)=>{"use strict";var i9=require("fs");CZ.exports=e=>new Promise(t=>{i9.access(e,n=>{t(!n)})});CZ.exports.sync=e=>{try{return i9.accessSync(e),!0}catch{return!1}}});var a9=g((aYe,yZ)=>{"use strict";var o9=(e,...t)=>new Promise(n=>{n(e(...t))});yZ.exports=o9;yZ.exports.default=o9});var u9=g((cYe,bZ)=>{"use strict";var wZe=a9(),c9=e=>{if(!((Number.isInteger(e)||e===1/0)&&e>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));let t=[],n=0,r=()=>{n--,t.length>0&&t.shift()()},i=(a,c,...u)=>{n++;let l=wZe(a,...u);c(l),l.then(r,r)},s=(a,c,...u)=>{n<e?i(a,c,...u):t.push(i.bind(null,a,c,...u))},o=(a,...c)=>new Promise(u=>s(a,u,...c));return Object.defineProperties(o,{activeCount:{get:()=>n},pendingCount:{get:()=>t.length},clearQueue:{value:()=>{t.length=0}}}),o};bZ.exports=c9;bZ.exports.default=c9});var g9=g((uYe,d9)=>{"use strict";var l9=u9(),uh=class extends Error{constructor(t){super(),this.value=t}},NZe=(e,t)=>Promise.resolve(e).then(t),TZe=e=>Promise.all(e).then(t=>t[1]===!0&&Promise.reject(new uh(t[0])));d9.exports=(e,t,n)=>{n=Object.assign({concurrency:1/0,preserveOrder:!0},n);let r=l9(n.concurrency),i=[...e].map(o=>[o,r(NZe,o,t)]),s=l9(n.preserveOrder?1:1/0);return Promise.all(i.map(o=>s(TZe,o))).then(()=>{}).catch(o=>o instanceof uh?o.value:Promise.reject(o))}});var f9=g((lYe,AZ)=>{"use strict";var p9=require("path"),m9=s9(),HZe=g9();AZ.exports=(e,t)=>(t=Object.assign({cwd:process.cwd()},t),HZe(e,n=>m9(p9.resolve(t.cwd,n)),t));AZ.exports.sync=(e,t)=>{t=Object.assign({cwd:process.cwd()},t);for(let n of e)if(m9.sync(p9.resolve(t.cwd,n)))return n}});var I9=g((dYe,_Z)=>{"use strict";var is=require("path"),h9=f9();_Z.exports=(e,t={})=>{let n=is.resolve(t.cwd||""),{root:r}=is.parse(n),i=[].concat(e);return new Promise(s=>{(function o(a){h9(i,{cwd:a}).then(c=>{c?s(is.join(a,c)):a===r?s(null):o(is.dirname(a))})})(n)})};_Z.exports.sync=(e,t={})=>{let n=is.resolve(t.cwd||""),{root:r}=is.parse(n),i=[].concat(e);for(;;){let s=h9.sync(i,{cwd:n});if(s)return is.join(n,s);if(n===r)return null;n=is.dirname(n)}}});var y9=g((gYe,SZ)=>{"use strict";var C9=I9();SZ.exports=async({cwd:e}={})=>C9("package.json",{cwd:e});SZ.exports.sync=({cwd:e}={})=>C9.sync("package.json",{cwd:e})});var dh,lh,GZ,b9,kZe,$,at=Xe(()=>{"use strict";dh=w(Vd()),lh=w(require("path")),GZ=w(y9()),b9=()=>{let e=GZ.sync({cwd:__dirname});if(!e)throw new Error("unable to find package.json");return JSON.parse(dh.readFileSync(e,"utf-8"))},kZe=()=>{let e=GZ.sync({cwd:__dirname});if(!e)throw new Error("unable to find package.json");return lh.default.dirname(e)},$=()=>{let e=lh.default.join(__dirname,"..","handlers.js");return dh.existsSync(e)?require(e):require(lh.default.join(kZe(),"bundle","bin","cmds","handlers.js"))}});var q,ct=Xe(()=>{"use strict";q=class{constructor(){this.handler=async t=>{t.getYargsCompletions||await this.handleCommand(t)}}}});var S9=g((IYe,_9)=>{"use strict";at();var A9=w(me());ct();var VZe=b9(),BZ=class extends q{constructor(){super(...arguments);this.command="init";this.describe="Create a new cdktf project from a template.";this.builder=n=>n.showHelpOnFail(!0).option("template",{type:"string",desc:"The template to be used to create a new project. Either URL to zip file or one of the built-in templates."}).option("project-name",{type:"string",desc:"The name of the project."}).option("project-description",{type:"string",desc:"The description of the project."}).option("dist",{type:"string",desc:'Install dependencies from a "dist" directory (for development)'}).option("local",{type:"boolean",desc:"Use local state storage for generated Terraform.",default:!1}).option("cdktf-version",{type:"string",desc:"The cdktf version to use while creating a new project.",default:VZe.version}).option("from-terraform-project",{type:"string",desc:"Use a terraform project as the basis, CDK constructs will be generated based on the .tf files in the path"}).option("enable-crash-reporting",{type:"boolean",desc:"Enable crash reporting for the CLI, refer to https://cdk.tf/crash-reporting for more details"}).option("providers",{describe:"Providers to add to your project",type:"array",default:[]}).option("providers-force-local",{type:"boolean",desc:"Force local installation of provider specified in init"}).option("tfe-hostname",{type:"string",desc:"The hostname of the Terraform Enterprise instance to use for remote state storage"}).strict()}async handleCommand(n){A9.Errors.setScope("init"),await $().init(n)}};_9.exports=new BZ});var ZZ=g((bYe,v9)=>{"use strict";var gh=w(me());at();var B9=w(me());ct();var G9=(0,gh.readConfigSync)(),vZ=class extends q{constructor(){super(...arguments);this.command="get";this.describe="Generate CDK Constructs for Terraform providers and modules.";this.builder=n=>n.showHelpOnFail(!0).option("output",{default:G9.codeMakerOutput,type:"string",desc:"Output directory for generated Constructs",alias:"o"}).option("language",{default:G9.language,required:!0,type:"string",desc:"Output programming language",alias:"l",choices:gh.LANGUAGES}).option("force",{default:!1,type:"boolean",desc:"Regenerates all generated constructs"}).option("parallelism",{type:"number",required:!1,desc:"Number of concurrently generated provider / module bindings. Only applies for languages that are not Typescript (translated by JSII). Defaults to infinity, denoted by -1",default:-1}).option("show-performance-info",{type:"boolean",required:!1,desc:"Shows performance information after generation"})}async handleCommand(n){B9.Errors.setScope("get"),await $().get(n)}};v9.exports=new vZ});var w9=g((SYe,W9)=>{"use strict";var Z9=w(me());ct();at();var E9=w(require("path")),R9=w(Vd());function YZe(e=process.cwd()){try{let t=E9.join(e,"cdktf.json");return R9.readJsonSync(t)}catch{return}}var EZ=class extends q{constructor(){super(...arguments);this.command="convert";this.describe="Converts a single file of HCL configuration to CDK for Terraform. Takes the file to be converted on stdin.";this.builder=n=>{var r;return n.example("cat main.tf | cdktf convert  --provider integrations/github","Takes the HCL content of main.tf and converts it to CDK for Terraform content and prints it").example("cat main.tf | cdktf convert --provider hashicorp/aws > imported.ts","Takes the HCL content of main.tf and converts it to CDK for Terraform content in imported.ts").example("cat main.tf | cdktf convert --provider 'hashicorp/aws@ ~>3.62.0' 'integrations/github@ ~>4.16.0' --language python > imported.py","Takes the HCL content of main.tf and converts it to CDK for Terraform content in imported.py").option("language",{choices:["typescript","python","csharp","java","go"],default:((r=YZe())==null?void 0:r.language)||"typescript"}).option("provider",{describe:"The conversion needs to know which providers are used in addition to the ones in your cdktf.json file. We search for a cdktf.json below your current working directory.",type:"array",default:[]}).option("stack",{describe:"Wrap the generated code within a stack class",type:"boolean",default:!1}).showHelpOnFail(!0)}}async handleCommand(n){Z9.Errors.setScope("convert");let r=$();n.withProject!==void 0&&(n.language==="typescript"?n.withProject=!1:n.withProject=!0),await r.convert(n)}};W9.exports=new EZ});var V9=g((vYe,k9)=>{"use strict";var T9=w(me());at();var H9=w(me());ct();var N9=(0,T9.readConfigSync)(),RZ=class extends q{constructor(){super(...arguments);this.command="deploy [stacks...]";this.describe="Deploy the given stacks";this.aliases=["apply"];this.builder=n=>n.positional("stacks",{desc:"Deploy stacks matching the given ids. Required when more than one stack is present in the app",type:"string"}).option("app",{default:N9.app,required:!0,desc:"Command to use in order to execute cdktf app",alias:"a"}).option("output",{default:N9.output,required:!0,desc:"Output directory for the synthesized Terraform config",alias:"o"}).option("auto-approve",{type:"boolean",default:!1,required:!1,desc:"Auto approve"}).option("outputs-file",{type:"string",required:!1,desc:"Path to file where stack outputs will be written as JSON",requiresArg:!0}).option("outputs-file-include-sensitive-outputs",{type:"boolean",required:!1,desc:"Whether to include sensitive outputs in the output file",default:!1}).option("ignore-missing-stack-dependencies",{type:"boolean",required:!1,desc:"Don't check if all stacks specified in the command have their dependencies included as well",default:!1}).option("parallelism",{type:"number",required:!1,desc:"Number of concurrent CDKTF stacks to run. Defaults to infinity, denoted by -1",default:-1}).option("refresh-only",{default:!1,required:!1,boolean:!0,desc:'Select the "refresh only" planning mode, which checks whether remote objects still match the outcome of the most recent Terraform apply but does not propose any actions to undo any changes made outside of Terraform.'}).option("terraform-parallelism",{type:"number",required:!1,desc:"Forwards value as the `-parallelism` flag to Terraform. By default, the this flag is not forwarded to Terraform. Note: This flag is not supported by remote / cloud backend",default:-1}).option("no-color",{type:"boolean",default:process.env.FORCE_COLOR==="0",required:!1,desc:"Disables terminal formatting sequences in the output."}).option("migrate-state",{type:"boolean",default:!1,required:!1,desc:"Pass this flag after switching state backends to approve a state migration for all targeted stacks"}).option("var",{type:"array",default:[],required:!1,desc:"Set a value for one of the input variables in the stack or stacks to apply. Use this option more than once to set more than one variable."}).option("var-file",{type:"array",default:[],required:!1,desc:"Load variable values from the given file, in addition to the default files terraform.tfvars and *.auto.tfvars. Use this option more than once to include more than one variables file."}).option("skip-synth",{type:"boolean",default:!1,required:!1,desc:"Skip synthesis of the application, assume the synthesized Terraform code is already present and up to date"}).showHelpOnFail(!0)}async handleCommand(n){H9.Errors.setScope("deploy"),await $().deploy(n)}};k9.exports=new RZ});var J9=g((RYe,X9)=>{"use strict";var F9=w(me());at();var x9=w(me());ct();var Y9=(0,F9.readConfigSync)(),WZ=class extends q{constructor(){super(...arguments);this.command="destroy [stacks..]";this.describe="Destroy the given stacks";this.builder=n=>n.positional("stacks",{desc:"Destroy stacks matching the given ids. Required when more than one stack is present in the app",type:"string"}).option("app",{default:Y9.app,required:!0,desc:"Command to use in order to execute cdktf app",alias:"a"}).option("output",{default:Y9.output,required:!0,desc:"Output directory for the synthesized Terraform config",alias:"o"}).option("auto-approve",{type:"boolean",default:!1,required:!1,desc:"Auto approve"}).option("ignore-missing-stack-dependencies",{type:"boolean",required:!1,desc:"Don't check if all stacks specified in the command have their dependencies included as well",default:!1}).option("parallelism",{type:"number",required:!1,desc:"Number of concurrent CDKTF stacks to run. Defaults to infinity, denoted by -1",default:-1}).option("terraform-parallelism",{type:"number",required:!1,desc:"Forwards value as the `-parallelism` flag to Terraform. By default, the this flag is not forwarded to Terraform. Note: This flag is not supported by remote / cloud backend",default:-1}).option("var",{type:"array",default:[],required:!1,desc:"Set a value for one of the input variables in the stack or stacks to apply. Use this option more than once to set more than one variable."}).option("var-file",{type:"array",default:[],required:!1,desc:"Load variable values from the given file, in addition to the default files terraform.tfvars and *.auto.tfvars. Use this option more than once to include more than one variables file."}).option("no-color",{type:"boolean",default:process.env.FORCE_COLOR==="0",required:!1,desc:"Disables terminal formatting sequences in the output."}).option("migrate-state",{type:"boolean",default:!1,required:!1,desc:"Pass this flag after switching state backends to approve a state migration for all targeted stacks"}).option("skip-synth",{type:"boolean",default:!1,required:!1,desc:"Skip synthesis of the application, assume the synthesized Terraform code is already present and up to date"}).showHelpOnFail(!0)}async handleCommand(n){x9.Errors.setScope("destroy"),await $().destroy(n)}};X9.exports=new WZ});var L9=g((NYe,K9)=>{"use strict";var O9=w(me());at();var U9=w(me());ct();var D9=(0,O9.readConfigSync)(),wZ=class extends q{constructor(){super(...arguments);this.command="diff [stack]";this.describe="Perform a diff (terraform plan) for the given stack";this.aliases=["plan"];this.builder=n=>n.positional("stack",{desc:"Diff stack which matches the given id only. Required when more than one stack is present in the app",type:"string"}).option("app",{default:D9.app,required:!0,desc:"Command to use in order to execute cdktf app",alias:"a"}).option("output",{default:D9.output,required:!0,desc:"Output directory for the synthesized Terraform config",alias:"o"}).option("refresh-only",{default:!1,required:!1,boolean:!0,desc:'Select the "refresh only" planning mode, which checks whether remote objects still match the outcome of the most recent Terraform apply but does not propose any actions to undo any changes made outside of Terraform.'}).option("terraform-parallelism",{type:"number",required:!1,desc:"Forwards value as the `-parallelism` flag to Terraform. By default, the this flag is not forwarded to Terraform. Note: This flag is not supported by remote / cloud backend",default:-1}).option("var",{type:"array",default:[],required:!1,desc:"Set a value for one of the input variables in the stack. Use this option more than once to set more than one variable."}).option("var-file",{type:"array",default:[],required:!1,desc:"Load variable values from the given file, in addition to the default files terraform.tfvars and *.auto.tfvars. Use this option more than once to include more than one variables file."}).option("no-color",{type:"boolean",default:process.env.FORCE_COLOR==="0",required:!1,desc:"Disables terminal formatting sequences in the output."}).option("migrate-state",{type:"boolean",default:!1,required:!1,desc:"Pass this flag after switching state backends to approve a state migration for the targeted stack"}).option("skip-synth",{type:"boolean",default:!1,required:!1,desc:"Skip synthesis of the application, assume the synthesized Terraform code is already present and up to date"}).showHelpOnFail(!0)}async handleCommand(n){U9.Errors.setScope("diff"),await $().diff(n)}};K9.exports=new wZ});var P9=g((kYe,q9)=>{"use strict";at();var ph=w(me());ct();var M9=(0,ph.readConfigSync)(),NZ=class extends q{constructor(){super(...arguments);this.command="list";this.describe="List stacks in app.";this.builder=n=>n.option("app",{default:M9.app,desc:"Command to use in order to execute cdktf app",alias:"a"}).option("output",{default:M9.output,desc:"Output directory for the synthesized Terraform config",alias:"o"}).showHelpOnFail(!0)}async handleCommand(n){ph.Errors.setScope("list"),await $().list(n)}};q9.exports=new NZ});var Q9=g((FYe,j9)=>{"use strict";at();var z9=w(me());ct();var TZ=class extends q{constructor(){super(...arguments);this.command="login";this.describe="Retrieves an API token to connect to Terraform Cloud or Terraform Enterprise.";this.builder=n=>n.showHelpOnFail(!0).option("tfe-hostname",{string:!0,requiresArg:!0,describe:"The Terraform Enterprise hostname to authenticate against. If you use Terraform Cloud you can leave this on the default.",default:"app.terraform.io"}).example("cdktf login","Takes you through the interactive login process").example("cdktf login --tfe-hostname tfe.my-company.com","Takes you through the interactive login process on your companies Terraform Enterprise instance.").example("cat my-token.txt | cdktf login","Uses a locally stored token directly, instead of going through the interactive login process").strict()}async handleCommand(n){z9.Errors.setScope("login"),await $().login(n)}};j9.exports=new TZ});var e1=g((JYe,$9)=>{"use strict";var hc=w(me());at();ct();var HZ=(0,hc.readConfigSync)(),kZ=class extends q{constructor(){super(...arguments);this.command="synth";this.describe="Synthesizes Terraform code for the given app in a directory.";this.aliases=["synthesize"];this.builder=n=>n.option("app",{default:HZ.app,desc:"Command to use in order to execute cdktf app",alias:"a"}).option("output",{default:HZ.output,desc:"Output directory for the synthesized Terraform config",alias:"o"}).option("check-code-maker-output",{type:"boolean",desc:"Should `codeMakerOutput` existence check be performed? By default it will be checked if providers or modules are configured.",default:(0,hc.shouldCheckCodeMakerOutput)(HZ)}).option("hcl",{type:"boolean",desc:"Should the output be in HCL format?",default:!1}).showHelpOnFail(!0)}async handleCommand(n){hc.Errors.setScope("synth"),await $().synth(n)}};$9.exports=new kZ});var s1=g((UYe,i1)=>{"use strict";var n1=w(me());at();var r1=w(me());ct();var t1=(0,n1.readConfigSync)(),VZ=class extends q{constructor(){super(...arguments);this.command="watch [stacks..]";this.describe="[experimental] Watch for file changes and automatically trigger a deploy";this.builder=n=>n.positional("stacks",{desc:"Deploy stacks matching the given ids. Required when more than one stack is present in the app",type:"string"}).option("app",{default:t1.app,required:!0,desc:"Command to use in order to execute cdktf app",alias:"a"}).option("output",{default:t1.output,required:!0,desc:"Output directory for the synthesized Terraform config",alias:"o"}).option("auto-approve",{type:"boolean",default:!1,required:!1,desc:"Auto approve"}).option("parallelism",{type:"number",required:!1,desc:"Number of concurrent CDKTF stacks to run. Defaults to infinity, denoted by -1",default:-1}).option("terraform-parallelism",{type:"number",required:!1,desc:"Forwards value as the `-parallelism` flag to Terraform. By default, the this flag is not forwarded to Terraform. Note: This flag is not supported by remote / cloud backend",default:-1}).showHelpOnFail(!0)}async handleCommand(n){r1.Errors.setScope("watch"),await $().watch(n)}};i1.exports=new VZ});var c1=g((MYe,a1)=>{"use strict";var mh=w(me());at();ct();var o1=(0,mh.readConfigSync)(),YZ=class extends q{constructor(){super(...arguments);this.command="output [stacks..]";this.describe="Prints the output of stacks";this.aliases=["outputs"];this.builder=n=>n.positional("stacks",{desc:"Get outputs of the stacks matching the given ids. Required when more than one stack is present in the app",type:"string"}).option("app",{default:o1.app,required:!0,desc:"Command to use in order to execute cdktf app",alias:"a"}).option("output",{default:o1.output,required:!0,desc:"Output directory for the synthesized Terraform config",alias:"o"}).option("outputs-file",{type:"string",required:!1,desc:"Path to file where stack outputs will be written as JSON",requiresArg:!0}).option("outputs-file-include-sensitive-outputs",{type:"boolean",required:!1,desc:"Whether to include sensitive outputs in the output file",default:!1}).option("skip-synth",{type:"boolean",default:!1,required:!1,desc:"Skip synthesis of the application, assume the synthesized Terraform code is already present and up to date"}).showHelpOnFail(!0)}async handleCommand(n){mh.Errors.setScope("output"),await $().output(n)}};a1.exports=new YZ});var d1=g((zYe,l1)=>{"use strict";at();var u1=w(me());ct();var FZ=class extends q{constructor(){super(...arguments);this.command="debug";this.describe="Get debug information about the current project and environment";this.builder=n=>n.showHelpOnFail(!0).option("json",{default:!1,type:"boolean",desc:"If set, output will be in JSON format."})}async handleCommand(n){u1.Errors.setScope("debug"),await $().debug(n)}};l1.exports=new FZ});var m1=g(($Ye,p1)=>{"use strict";at();var g1=w(me());ct();var xZ=class extends q{constructor(){super(...arguments);this.command="add <provider...>";this.describe="Add one or more Terraform providers to your project.";this.builder=n=>n.showHelpOnFail(!0).positional("provider",{type:"string",desc:"Name of the provider to add. Can include a version constraint (e.g. aws@~>4.0).",required:!0}).option("force-local",{type:"boolean",desc:"force local provider installation, even if pre-built provider exists"})}async handleCommand(n){g1.Errors.setScope("provider add"),await $().providerAdd(n)}};p1.exports=new xZ});var I1=g((nFe,h1)=>{"use strict";at();var f1=w(me());ct();var XZ=class extends q{constructor(){super(...arguments);this.command="upgrade <provider...>";this.describe=`Upgrade one or more Terraform providers in your project to the newest version compatible with your CDKTF version.
    If your project has the associated pre-built provider already installed, CDKTF updates the pre-built provider. Otherwise, CDKTF adds the specified provider to the cdktf.json configuration file and generates local provider bindings.`;this.builder=n=>n.showHelpOnFail(!0).positional("provider",{type:"string",desc:"Name of the provider to upgrade. Can include a version constraint (e.g. aws@~>4.0).",required:!0})}async handleCommand(n){f1.Errors.setScope("provider upgrade"),await $().providerUpgrade(n)}};h1.exports=new XZ});var b1=g((sFe,y1)=>{"use strict";at();var C1=w(me());ct();var JZ=class extends q{constructor(){super(...arguments);this.command="list [flags]";this.describe="List installed providers";this.builder=n=>n.showHelpOnFail(!0).option("json",{type:"boolean",default:!1,desc:"get providers list as json"})}async handleCommand(n){C1.Errors.setScope("provider list"),await $().providerList(n)}};y1.exports=new JZ});var S1=g((oFe,_1)=>{"use strict";var A1=w(require("yargs")),DZ=class{constructor(){this.command="provider";this.describe="A set of subcommands that facilitates provider management";this.builder=t=>t.command(ZZ()).command(m1()).command(I1()).command(b1());this.handler=()=>{A1.default.showHelp()}}};_1.exports=new DZ});var ss=w(require("yargs")),G1=w(require("path")),B1=w(require("os")),fh=w(Vd()),v1=w(FT()),$r=w(me());process.env.NODE_ENV=process.env.NODE_ENV||"production";var FZe=()=>{let e=process.env.TF_PLUGIN_CACHE_DIR||G1.join(B1.homedir(),".terraform.d","plugin-cache");return fh.existsSync(e)||fh.mkdirpSync(e),e};$r.CDKTF_DISABLE_PLUGIN_CACHE_ENV||(process.env.TF_PLUGIN_CACHE_DIR=FZe());var xZe=function(e,t,n,r){t._.includes("diff")||t._.includes("deploy")||t._.includes("plan")||t._.includes("apply")?n(async(i,s)=>{let o=[];try{let a=await(0,$r.readCDKTFManifest)();o.push(...Object.values(a.stacks).map(c=>`${c.name}:target stack "${c.name}"`))}finally{r([...s,...o])}}):n()};ss.command(S9()).command(ZZ()).command(w9()).command(V9()).command(J9()).command(L9()).command(P9()).command(Q9()).command(e1()).command(s1()).command(c1()).command(d1()).command(S1()).recommendCommands().exitProcess(!1).wrap(ss.terminalWidth()).showHelpOnFail(!1).env("CDKTF").epilogue('Options can be specified via environment variables with the "CDKTF_" prefix (e.g. "CDKTF_OUTPUT")').help().alias("h","help").option("experimental-provider-schema-cache-path",{type:"string",default:!1,required:!1,desc:"An experimental schema cache that can be used to improve the speed of cdktf get and convert. Supported using the env CDKTF_EXPERIMENTAL_PROVIDER_SCHEMA_CACHE_PATH."}).option("disable-plugin-cache-env",{type:"boolean",default:!1,required:!1,desc:"Dont set TF_PLUGIN_CACHE_DIR automatically. This is useful when the plugin cache is configured differently. Supported using the env CDKTF_DISABLE_PLUGIN_CACHE_ENV."}).option("log-level",{type:"string",required:!1,desc:"Which log level should be written. Only supported via setting the env CDKTF_LOG_LEVEL"}).option("context-json",{required:!1,hidden:!0,desc:"Used internally for env variable"}).completion("completion",xZe).parserConfiguration({"boolean-negation":!1}).command({command:"*",handler:e=>{let t=e._[0];t!=="completion"&&(console.error(t?`Could not find command "${t}", here are all available ones:`:"Please pass a command to cdktf, here are all available ones:"),ss.showHelp(),process.exit(1))}}).fail(async(e,t)=>{if(ss.exit(1,t),e&&console.log(e),(0,$r.IsErrorType)(t,"Usage")||(0,$r.IsErrorType)(t,"External"))console.error(t.message);else if(t){console.error(t.message),console.error(t.stack),console.error("Collecting Debug Information...");let n=await(0,$r.collectDebugInformation)();console.error("Debug Information:"),Object.entries(n).forEach(([r,i])=>{console.log(`${r}: ${i===null?"null":i}`)})}await v1.close(4e3),process.exit(1)}).argv;
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*! (c) 2020 Andrea Giammarchi */
/*! @sentry/node 7.92.0 (30eddd5) | https://github.com/getsentry/sentry-javascript */
//# sourceMappingURL=cdktf.js.map
