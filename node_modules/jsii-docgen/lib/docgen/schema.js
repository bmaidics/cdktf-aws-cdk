"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CURRENT_SCHEMA_VERSION = void 0;
exports.extractDocs = extractDocs;
exports.submodulePath = submodulePath;
exports.filterUndefined = filterUndefined;
exports.CURRENT_SCHEMA_VERSION = '0.1';
function extractDocs(docs) {
    const links = [];
    const see = docs.docs.see; // @see
    if (see && see.length > 0) {
        links.push(see);
    }
    const link = docs.customTag('link'); // @link
    if (link && link.length > 0) {
        links.push(link);
    }
    return filterUndefined({
        // ignore defaults and empty strings to save space
        summary: docs.summary.length > 0 ? docs.summary : undefined,
        remarks: docs.remarks.length > 0 ? docs.remarks : undefined,
        example: docs.example.length > 0 ? docs.example : undefined,
        links: links.length > 0 ? links : undefined,
        deprecated: docs.deprecated === true ? true : undefined,
        deprecationReason: docs.deprecationReason,
    });
}
/**
 * Generates the name of the submodule.
 */
function submodulePath(module) {
    if (!module)
        return undefined;
    const path = module.fqn.split('.').splice(1).join('.');
    return path.length > 0 ? path : undefined;
}
function filterUndefined(obj) {
    const ret = {};
    for (const [k, v] of Object.entries(obj)) {
        if (v !== undefined) {
            ret[k] = v;
        }
    }
    return ret;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2RvY2dlbi9zY2hlbWEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBNmVBLGtDQW1CQztBQUtELHNDQUlDO0FBRUQsMENBUUM7QUFqaEJZLFFBQUEsc0JBQXNCLEdBQUcsS0FBSyxDQUFDO0FBMmU1QyxTQUFnQixXQUFXLENBQUMsSUFBa0I7SUFDNUMsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDO0lBQ2pCLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTztJQUNsQyxJQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQzFCLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbEIsQ0FBQztJQUNELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxRQUFRO0lBQzdDLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDNUIsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQixDQUFDO0lBQ0QsT0FBTyxlQUFlLENBQUM7UUFDckIsa0RBQWtEO1FBQ2xELE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVM7UUFDM0QsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsU0FBUztRQUMzRCxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTO1FBQzNELEtBQUssRUFBRSxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO1FBQzNDLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVSxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTO1FBQ3ZELGlCQUFpQixFQUFFLElBQUksQ0FBQyxpQkFBaUI7S0FDMUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVEOztHQUVHO0FBQ0gsU0FBZ0IsYUFBYSxDQUFDLE1BQTBCO0lBQ3RELElBQUksQ0FBQyxNQUFNO1FBQUUsT0FBTyxTQUFTLENBQUM7SUFDOUIsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2RCxPQUFPLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUM1QyxDQUFDO0FBRUQsU0FBZ0IsZUFBZSxDQUFtQixHQUFNO0lBQ3RELE1BQU0sR0FBRyxHQUFRLEVBQUUsQ0FBQztJQUNwQixLQUFLLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxLQUFLLFNBQVMsRUFBRSxDQUFDO1lBQ3BCLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDYixDQUFDO0lBQ0gsQ0FBQztJQUNELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHJlZmxlY3QgZnJvbSAnanNpaS1yZWZsZWN0JztcblxuZXhwb3J0IGNvbnN0IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04gPSAnMC4xJztcblxuLyoqXG4gKiBEZXNjcmliZXMgYW55IGtpbmQgb2YgdHlwZS4gVGhpcyBjb3VsZCBiZSBhIHByaW1pdGl2ZSwgYSB1c2VyLWRlZmluZWQgdHlwZVxuICogKGxpa2UgYEJ1Y2tldGApLCBvciBhIGNvbXBvc2l0aW9uIG9mIHR5cGVzIChsaWtlIGBNYXA8c3RyaW5nLCBCdWNrZXQ+W11gKS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUeXBlU2NoZW1hIHtcbiAgLyoqXG4gICAqIFRoZSBsYW5ndWFnZS1zcGVjaWZpYyBuYW1lIG9mIHRoZSB0eXBlLiBNYXkgY29udGFpbiBcIiVcIiBwbGFjZWhvbGRlclxuICAgKiB2YWx1ZXMgdG8gaW5kaWNhdGUgcmVmZXJlbmNlcyB0byB0eXBlcyBkZWZpbmVkIGluIHRoZSBcInR5cGVzXCIgZmllbGQuXG4gICAqXG4gICAqIEBleGFtcGxlIFwic3RyaW5nXCJcbiAgICogQGV4YW1wbGUgXCIlXCJcbiAgICogQGV4YW1wbGUgXCJ0eXBpbmcuTGlzdFslXVwiXG4gICAqIEBleGFtcGxlIFwiTWFwPCUsICU+XCJcbiAgICovXG4gIHJlYWRvbmx5IGZvcm1hdHRpbmdQYXR0ZXJuOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFR5cGVzIHJlZmVyZW5jZWQgd2l0aGluIHRoZSBcIm5hbWVcIiBmaWVsZC4gVGhlIG9yZGVyIG9mIHRoZXNlIGNvcnJlc3BvbmRzXG4gICAqIHRvIHRoZSBvcmRlciBvZiB0aGUgJSdzIGluIGBmb3JtYXR0aW5nUGF0dGVybmAuXG4gICAqL1xuICByZWFkb25seSB0eXBlcz86IChUeXBlU2NoZW1hIHwgSnNpaUVudGl0eSlbXTtcbn1cblxuLyoqXG4gKiBEZXNjcmliZXMgYSBzaW5nbGUgXCJlbnRpdHlcIiBpbiB0aGUganNpaSB0eXBlIHN5c3RlbS4gVGhpcyBtYXkgYmUgYSB0eXBlLFxuICogYnV0IGl0IGNvdWxkIGFsc28gYmUgYSBwcm9wZXJ0eSwgbWV0aG9kLCBwYXJhbWV0ZXIsIGVudW0gbWVtYmVyLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSnNpaUVudGl0eSBleHRlbmRzIEFzc2VtYmx5TWV0YWRhdGFTY2hlbWEge1xuICAvKipcbiAgICogQW4gaWQgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoaXMgdHlwZSBhbW9uZyBhbGwgZW50aXRpZXMgaW4gdGhlXG4gICAqIGRvY3VtZW50IGFuZCBpcyBzYW1lIGFjcm9zcyBsYW5ndWFnZXMuXG4gICAqL1xuICByZWFkb25seSBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZnJpZW5kbHkgbGFuZ3VhZ2Utc3BlY2lmaWMgbmFtZSBmb3IgdGhlIGVudGl0eS5cbiAgICovXG4gIHJlYWRvbmx5IGRpc3BsYXlOYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBsYW5ndWFnZS1zcGVjaWZpYyB0eXBlIEZRTi5cbiAgICovXG4gIHJlYWRvbmx5IGZxbjogc3RyaW5nO1xufVxuXG4vKipcbiAqIERlc2NyaWJlcyBhIHByb3BlcnR5LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFByb3BlcnR5U2NoZW1hIGV4dGVuZHMgVXNhZ2UsIE9wdGlvbmFsLCBEb2N1bWVudGFibGUge1xuICAvKipcbiAgICogQW4gaWQgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoaXMgcHJvcGVydHkgYW1vbmcgYWxsIGVudGl0aWVzIGluXG4gICAqIHRoZSBkb2N1bWVudCBhbmQgaXMgc2FtZSBhY3Jvc3MgbGFuZ3VhZ2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGZyaWVuZGx5IGxhbmd1YWdlLXNwZWNpZmljIG5hbWUgZm9yIHRoZSBwcm9wZXJ0eS5cbiAgICovXG4gIHJlYWRvbmx5IGRpc3BsYXlOYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBsYW5ndWFnZS1zcGVjaWZpYyBmcW4uXG4gICAqL1xuICByZWFkb25seSBmcW46IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHR5cGUgb2YgdGhlIHByb3BlcnR5LlxuICAgKi9cbiAgcmVhZG9ubHkgdHlwZTogVHlwZVNjaGVtYTtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgcHJvcGVydHkgaXMgYSBjb25zdGFudC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHJlYWRvbmx5IGNvbnN0PzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBEZXNjcmliZXMgYSBwYXJhbWV0ZXIuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFyYW1ldGVyU2NoZW1hIGV4dGVuZHMgT3B0aW9uYWwsIERvY3VtZW50YWJsZSB7XG4gIC8qKlxuICAgKiBBbiBpZCB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhpcyBwYXJhbWV0ZXIgYW1vbmcgYWxsIGVudGl0aWVzIGluXG4gICAqIHRoZSBkb2N1bWVudCBhbmQgaXMgc2FtZSBhY3Jvc3MgbGFuZ3VhZ2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGZyaWVuZGx5IGxhbmd1YWdlLXNwZWNpZmljIG5hbWUgZm9yIHRoZSBwYXJhbWV0ZXIuXG4gICAqL1xuICByZWFkb25seSBkaXNwbGF5TmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbGFuZ3VhZ2Utc3BlY2lmaWMgZnFuLlxuICAgKi9cbiAgcmVhZG9ubHkgZnFuOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIHRoZSBwYXJhbWV0ZXIuXG4gICAqL1xuICByZWFkb25seSB0eXBlOiBUeXBlU2NoZW1hO1xuXG59XG5cbi8qKlxuICogQ29tbW9uIHByb3BlcnRpZXMgb2YgYSBjYWxsYWJsZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsYWJsZVNjaGVtYSBleHRlbmRzIFVzYWdlIHtcbiAgLyoqXG4gICAqIEFuIGlkIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGlzIGNhbGxhYmxlIGFtb25nIGFsbCBlbnRpdGllcyBpblxuICAgKiB0aGUgZG9jdW1lbnQgYW5kIGlzIHNhbWUgYWNyb3NzIGxhbmd1YWdlcy5cbiAgICovXG4gIHJlYWRvbmx5IGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBmcmllbmRseSBsYW5ndWFnZS1zcGVjaWZpYyBuYW1lIGZvciB0aGUgY2FsbGFibGUuXG4gICAqL1xuICByZWFkb25seSBkaXNwbGF5TmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbGFuZ3VhZ2Utc3BlY2lmaWMgZnFuLlxuICAgKi9cbiAgcmVhZG9ubHkgZnFuOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFBhcmFtZXRlcnMgb2YgdGhlIGNhbGxhYmxlLlxuICAgKi9cbiAgcmVhZG9ubHkgcGFyYW1ldGVyczogUGFyYW1ldGVyU2NoZW1hW107XG59XG5cbi8qKlxuICogRGVzY3JpYmVzIGEgY29uc3RydWN0b3IuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdGlhbGl6ZXJTY2hlbWEgZXh0ZW5kcyBDYWxsYWJsZVNjaGVtYSB7fVxuXG4vKipcbiAqIERlc2NyaWJlcyBhIG1ldGhvZC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZXRob2RTY2hlbWEgZXh0ZW5kcyBDYWxsYWJsZVNjaGVtYSwgRG9jdW1lbnRhYmxlIHt9XG5cbi8qKlxuICogRGVzY3JpYmVzIGEgY2xhc3MuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2xhc3NTY2hlbWEgZXh0ZW5kcyBEb2N1bWVudGFibGUge1xuICAvKipcbiAgICogQW4gaWQgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoaXMgY2xhc3MgYW1vbmcgYWxsIGVudGl0aWVzIGluXG4gICAqIHRoZSBkb2N1bWVudCBhbmQgaXMgc2FtZSBhY3Jvc3MgbGFuZ3VhZ2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGZyaWVuZGx5IGxhbmd1YWdlLXNwZWNpZmljIG5hbWUgZm9yIHRoZSBjbGFzcy5cbiAgICovXG4gIHJlYWRvbmx5IGRpc3BsYXlOYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBsYW5ndWFnZS1zcGVjaWZpYyBmcW4uXG4gICAqL1xuICByZWFkb25seSBmcW46IHN0cmluZztcblxuICAvKipcbiAgICogSW50ZXJmYWNlcyB0aGlzIGNsYXNzIGltcGxlbWVudHMuXG4gICAqL1xuICByZWFkb25seSBpbnRlcmZhY2VzOiBKc2lpRW50aXR5W107XG5cbiAgLyoqXG4gICAqIENsYXNzIGluaXRpYWxpemVyLlxuICAgKi9cbiAgcmVhZG9ubHkgaW5pdGlhbGl6ZXI/OiBJbml0aWFsaXplclNjaGVtYTtcblxuICAvKipcbiAgICogSW5zdGFuY2UgbWV0aG9kcy5cbiAgICovXG4gIHJlYWRvbmx5IGluc3RhbmNlTWV0aG9kczogTWV0aG9kU2NoZW1hW107XG5cbiAgLyoqXG4gICAqIFN0YXRpYyBtZXRob2RzLlxuICAgKi9cbiAgcmVhZG9ubHkgc3RhdGljTWV0aG9kczogTWV0aG9kU2NoZW1hW107XG5cbiAgLyoqXG4gICAqIFByb3BlcnRpZXMuXG4gICAqL1xuICByZWFkb25seSBwcm9wZXJ0aWVzOiBQcm9wZXJ0eVNjaGVtYVtdO1xuXG4gIC8qKlxuICAgKiBDb25zdGFudHMuXG4gICAqL1xuICByZWFkb25seSBjb25zdGFudHM6IFByb3BlcnR5U2NoZW1hW107XG59XG5cbi8qKlxuICogRGVzY3JpYmVzIGEgY29uc3RydWN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbnN0cnVjdFNjaGVtYSBleHRlbmRzIENsYXNzU2NoZW1hIHt9XG5cbi8qKlxuICogRGVzY3JpYmVzIGEgc3RydWN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cnVjdFNjaGVtYSBleHRlbmRzIFVzYWdlLCBEb2N1bWVudGFibGUge1xuICAvKipcbiAgICogQW4gaWQgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoaXMgc3RydWN0IGFtb25nIGFsbCBlbnRpdGllcyBpblxuICAgKiB0aGUgZG9jdW1lbnQgYW5kIGlzIHNhbWUgYWNyb3NzIGxhbmd1YWdlcy5cbiAgICovXG4gIHJlYWRvbmx5IGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBmcmllbmRseSBsYW5ndWFnZS1zcGVjaWZpYyBuYW1lIGZvciB0aGUgc3RydWN0LlxuICAgKi9cbiAgcmVhZG9ubHkgZGlzcGxheU5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGxhbmd1YWdlLXNwZWNpZmljIGZxbi5cbiAgICovXG4gIHJlYWRvbmx5IGZxbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQcm9wZXJ0aWVzLlxuICAgKi9cbiAgcmVhZG9ubHkgcHJvcGVydGllczogUHJvcGVydHlTY2hlbWFbXTtcbn1cblxuLyoqXG4gKiBEZXNjcmliZXMgYSBiZWhhdmlvcmFsIGludGVyZmFjZSwgYWxzbyBzb21ldGltZXMga25vd24gYXMgYSBwcm90b2NvbC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJbnRlcmZhY2VTY2hlbWEgZXh0ZW5kcyBEb2N1bWVudGFibGUge1xuICAvKipcbiAgICogQW4gaWQgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoaXMgaW50ZXJmYWNlIGFtb25nIGFsbCBlbnRpdGllcyBpblxuICAgKiB0aGUgZG9jdW1lbnQgYW5kIGlzIHNhbWUgYWNyb3NzIGxhbmd1YWdlcy5cbiAgICovXG4gIHJlYWRvbmx5IGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBmcmllbmRseSBsYW5ndWFnZS1zcGVjaWZpYyBuYW1lIGZvciB0aGUgaW50ZXJmYWNlLlxuICAgKi9cbiAgcmVhZG9ubHkgZGlzcGxheU5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGxhbmd1YWdlLXNwZWNpZmljIGZxbi5cbiAgICovXG4gIHJlYWRvbmx5IGZxbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBJbnRlcmZhY2VzIHRoYXQgdGhpcyBpbnRlcmZhY2UgZXh0ZW5kcy5cbiAgICovXG4gIHJlYWRvbmx5IGludGVyZmFjZXM6IEpzaWlFbnRpdHlbXTtcblxuICAvKipcbiAgICogVHlwZXMgaW1wbGVtZW50aW5nIHRoaXMgaW50ZXJmYWNlLlxuICAgKi9cbiAgcmVhZG9ubHkgaW1wbGVtZW50YXRpb25zOiBKc2lpRW50aXR5W107XG5cbiAgLyoqXG4gICAqIE1ldGhvZHMuXG4gICAqL1xuICByZWFkb25seSBpbnN0YW5jZU1ldGhvZHM6IE1ldGhvZFNjaGVtYVtdO1xuXG4gIC8qKlxuICAgKiBQcm9wZXJ0aWVzLlxuICAgKi9cbiAgcmVhZG9ubHkgcHJvcGVydGllczogUHJvcGVydHlTY2hlbWFbXTtcbn1cblxuLyoqXG4gKiBEZXNjcmliZXMgYW4gZW51bSBtZW1iZXIuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRW51bU1lbWJlclNjaGVtYSBleHRlbmRzIERvY3VtZW50YWJsZSB7XG4gIC8qKlxuICAgKiBBbiBpZCB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhpcyBlbnVtIG1lbWJlciBhbW9uZyBhbGwgZW50aXRpZXMgaW5cbiAgICogdGhlIGRvY3VtZW50IGFuZCBpcyBzYW1lIGFjcm9zcyBsYW5ndWFnZXMuXG4gICAqL1xuICByZWFkb25seSBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZnJpZW5kbHkgbGFuZ3VhZ2Utc3BlY2lmaWMgbmFtZSBmb3IgdGhlIGVudW0gbWVtYmVyLlxuICAgKi9cbiAgcmVhZG9ubHkgZGlzcGxheU5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGxhbmd1YWdlLXNwZWNpZmljIGZxbi5cbiAgICovXG4gIHJlYWRvbmx5IGZxbjogc3RyaW5nO1xufVxuXG4vKipcbiAqIERlc2NyaWJlcyBhbiBlbnVtLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVudW1TY2hlbWEgZXh0ZW5kcyBEb2N1bWVudGFibGUge1xuICAvKipcbiAgICogQW4gaWQgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoaXMgZW51bSBhbW9uZyBhbGwgZW50aXRpZXMgaW5cbiAgICogdGhlIGRvY3VtZW50IGFuZCBpcyBzYW1lIGFjcm9zcyBsYW5ndWFnZXMuXG4gICAqL1xuICByZWFkb25seSBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZnJpZW5kbHkgbGFuZ3VhZ2Utc3BlY2lmaWMgbmFtZSBmb3IgdGhlIGVudW0uXG4gICAqL1xuICByZWFkb25seSBkaXNwbGF5TmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbGFuZ3VhZ2Utc3BlY2lmaWMgZnFuLlxuICAgKi9cbiAgcmVhZG9ubHkgZnFuOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEVudW0gbWVtYmVycy5cbiAgICovXG4gIHJlYWRvbmx5IG1lbWJlcnM6IEVudW1NZW1iZXJTY2hlbWFbXTtcbn1cblxuLyoqXG4gKiBEZXNjcmliZXMgdGhlIEFQSSBSZWZlcmVuY2UuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXBpUmVmZXJlbmNlU2NoZW1hIHtcblxuICAvKipcbiAgICogQ29uc3RydWN0cy5cbiAgICovXG4gIHJlYWRvbmx5IGNvbnN0cnVjdHM6IENvbnN0cnVjdFNjaGVtYVtdO1xuXG4gIC8qKlxuICAgKiBDbGFzc2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgY2xhc3NlczogQ2xhc3NTY2hlbWFbXTtcblxuICAvKipcbiAgICogU3RydWN0cy5cbiAgICovXG4gIHJlYWRvbmx5IHN0cnVjdHM6IFN0cnVjdFNjaGVtYVtdO1xuXG4gIC8qKlxuICAgKiBJbnRlcmZhY2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgaW50ZXJmYWNlczogSW50ZXJmYWNlU2NoZW1hW107XG5cbiAgLyoqXG4gICAqIEVudW1zLlxuICAgKi9cbiAgcmVhZG9ubHkgZW51bXM6IEVudW1TY2hlbWFbXTtcbn1cblxuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHBhcnRpY3VsYXIganNpaSBhc3NlbWJseS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBc3NlbWJseU1ldGFkYXRhU2NoZW1hIHtcbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIGpzaWkgYXNzZW1ibHkvcGFja2FnZS5cbiAgICovXG4gIHJlYWRvbmx5IHBhY2thZ2VOYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFZlcnNpb24gb2YgdGhlIGpzaWkgYXNzZW1ibHkvcGFja2FnZS5cbiAgICovXG4gIHJlYWRvbmx5IHBhY2thZ2VWZXJzaW9uOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIExhbmd1YWdlLWluZGVwZW5kZW50IG5hbWUgb2YgdGhlIGpzaWkgc3VibW9kdWxlLlxuICAgKiBpZiB1bmRlZmluZWQsIGl0IGlzIGltcGxpY2l0bHkgdGhlIHJvb3QgbW9kdWxlLlxuICAgKlxuICAgKiBAZXhhbXBsZSBgYXdzX3Nxc2BcbiAgICovXG4gIHJlYWRvbmx5IHN1Ym1vZHVsZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBEZXNjcmliZXMgdGhlIHRvcC1sZXZlbCBzY2hlbWEuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2NoZW1hIHtcbiAgLyoqXG4gICAqIFNjaGVtYSB2ZXJzaW9uIG51bWJlci5cbiAgICovXG4gIHJlYWRvbmx5IHZlcnNpb246IHN0cmluZztcblxuICAvKipcbiAgICogTGFuZ3VhZ2UgdGhhdCB0aGUgZG9jdW1lbnRhdGlvbiBoYXMgYmVlbiB0cmFuc2xpdGVyYXRlZCB0by5cbiAgICovXG4gIHJlYWRvbmx5IGxhbmd1YWdlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBkb2N1bWVudCByZXByZXNlbnRzIGRvY3VtZW50YXRpb24gZm9yIGFsbCBzdWJtb2R1bGVzXG4gICAqIChpbmNsdWRpbmcgdGhlIHJvb3QpLlxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgcmVhZG9ubHkgYWxsU3VibW9kdWxlcz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEFzc2VtYmx5IG1ldGFkYXRhLlxuICAgKi9cbiAgcmVhZG9ubHkgbWV0YWRhdGE6IEFzc2VtYmx5TWV0YWRhdGFTY2hlbWE7XG5cbiAgLyoqXG4gICAqIFJlYWRtZS5cbiAgICovXG4gIHJlYWRvbmx5IHJlYWRtZT86IHN0cmluZztcblxuICAvKipcbiAgICogQVBJIFJlZmVyZW5jZS5cbiAgICovXG4gIHJlYWRvbmx5IGFwaVJlZmVyZW5jZT86IEFwaVJlZmVyZW5jZVNjaGVtYTtcbn1cblxuXG4vL1xuLy8gU0hBUkVEIElOVEVSRkFDRVNcbi8vXG5cbi8qKlxuICogQW4gZW50aXR5IHRoYXQgY2FuIGhhdmUgYSBkb2Mgc3RyaW5nLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIERvY3VtZW50YWJsZSB7XG4gIC8qKlxuICAgKiBEb2Mgc3RyaW5nLlxuICAgKi9cbiAgcmVhZG9ubHkgZG9jczogRG9jc1NjaGVtYTtcbn1cblxuLyoqXG4gKiBEb2NzdHJpbmcgaW5mb3JtYXRpb24uXG4gKlxuICogQHNlZSBqc2lpLkRvY3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEb2NzU2NoZW1hIHtcbiAgLyoqXG4gICAqIFN1bW1hcnkgZG9jdW1lbnRhdGlvbiBmb3IgYW4gQVBJIGl0ZW0uXG4gICAqXG4gICAqIFRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBkb2N1bWVudGF0aW9uIGJlZm9yZSBoaXR0aW5nIGEgYEByZW1hcmtzYCB0YWdzLCBvclxuICAgKiB0aGUgZmlyc3QgbGluZSBvZiB0aGUgZG9jIGNvbW1lbnQgYmxvY2sgaWYgdGhlcmUgaXMgbm8gYEByZW1hcmtzYCB0YWcuXG4gICAqL1xuICByZWFkb25seSBzdW1tYXJ5Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBEZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBhbiBBUEkgaXRlbS5cbiAgICpcbiAgICogRWl0aGVyIHRoZSBleHBsaWNpdGx5IHRhZ2dlZCBgQHJlbWFya3NgIHNlY3Rpb24sIG90aGVyd2lzZSBldmVyeXRoaW5nXG4gICAqIHBhc3QgdGhlIGZpcnN0IHBhcmFncmFwaCBpZiB0aGVyZSBpcyBubyBgQHJlbWFya3NgIHRhZy5cbiAgICovXG4gIHJlYWRvbmx5IHJlbWFya3M/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIGBAc2VlYCBhbmQgYEBsaW5rYCBsaW5rcyB3aXRoIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqL1xuICByZWFkb25seSBsaW5rcz86IHN0cmluZ1tdO1xuXG4gIC8qKlxuICAgKiBDb2RlIHNuaXBwZXQgc2hvd2luZyBleGFtcGxlIHVzYWdlIG9mIGFuIEFQSSBpdGVtLCB0aGF0IGhhcyBiZWVuIHByb3ZpZGVkXG4gICAqIGJ5IHRoZSBjb25zdHJ1Y3QgbGlicmFyeSBhdXRob3JzLlxuICAgKi9cbiAgcmVhZG9ubHkgZXhhbXBsZT86IHN0cmluZztcblxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgaXQgaXMgZGVwcmVjYXRlZC5cbiAgICovXG4gIHJlYWRvbmx5IGRlcHJlY2F0ZWQ/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBEZXByZWNhdGlvbiByZWFzb24gKGlmIGFwcGxpY2FibGUpLlxuICAgKi9cbiAgcmVhZG9ubHkgZGVwcmVjYXRpb25SZWFzb24/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogQW4gZW50aXR5IHRoYXQgbWF5IGluY2x1ZGUgYSBjb2RlIHNuaXBwZXQgc2hvd2luZyBob3cgdG8gdXNlIGl0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVzYWdlIHtcbiAgLyoqXG4gICAqIENvZGUgc25pcHBldC5cbiAgICogQGRlZmF1bHQgLSBub25lXG4gICAqL1xuICByZWFkb25seSB1c2FnZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBBbiBlbnRpdHkgdGhhdCBtYXkgYmUgb3B0aW9uYWwuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uYWwge1xuICAvKipcbiAgICogV2hldGhlciBvciBub3QgaXQgaXMgb3B0aW9uYWwuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICByZWFkb25seSBvcHRpb25hbD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlLCBpZiBhcHBsaWNhYmxlLlxuICAgKiBAZGVmYXVsdCAtIG5vbmVcbiAgICovXG4gIHJlYWRvbmx5IGRlZmF1bHQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0RG9jcyhkb2NzOiByZWZsZWN0LkRvY3MpOiBEb2NzU2NoZW1hIHtcbiAgY29uc3QgbGlua3MgPSBbXTtcbiAgY29uc3Qgc2VlID0gZG9jcy5kb2NzLnNlZTsgLy8gQHNlZVxuICBpZiAoc2VlICYmIHNlZS5sZW5ndGggPiAwKSB7XG4gICAgbGlua3MucHVzaChzZWUpO1xuICB9XG4gIGNvbnN0IGxpbmsgPSBkb2NzLmN1c3RvbVRhZygnbGluaycpOyAvLyBAbGlua1xuICBpZiAobGluayAmJiBsaW5rLmxlbmd0aCA+IDApIHtcbiAgICBsaW5rcy5wdXNoKGxpbmspO1xuICB9XG4gIHJldHVybiBmaWx0ZXJVbmRlZmluZWQoe1xuICAgIC8vIGlnbm9yZSBkZWZhdWx0cyBhbmQgZW1wdHkgc3RyaW5ncyB0byBzYXZlIHNwYWNlXG4gICAgc3VtbWFyeTogZG9jcy5zdW1tYXJ5Lmxlbmd0aCA+IDAgPyBkb2NzLnN1bW1hcnkgOiB1bmRlZmluZWQsXG4gICAgcmVtYXJrczogZG9jcy5yZW1hcmtzLmxlbmd0aCA+IDAgPyBkb2NzLnJlbWFya3MgOiB1bmRlZmluZWQsXG4gICAgZXhhbXBsZTogZG9jcy5leGFtcGxlLmxlbmd0aCA+IDAgPyBkb2NzLmV4YW1wbGUgOiB1bmRlZmluZWQsXG4gICAgbGlua3M6IGxpbmtzLmxlbmd0aCA+IDAgPyBsaW5rcyA6IHVuZGVmaW5lZCxcbiAgICBkZXByZWNhdGVkOiBkb2NzLmRlcHJlY2F0ZWQgPT09IHRydWUgPyB0cnVlIDogdW5kZWZpbmVkLFxuICAgIGRlcHJlY2F0aW9uUmVhc29uOiBkb2NzLmRlcHJlY2F0aW9uUmVhc29uLFxuICB9KTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIG5hbWUgb2YgdGhlIHN1Ym1vZHVsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN1Ym1vZHVsZVBhdGgobW9kdWxlPzogcmVmbGVjdC5TdWJtb2R1bGUpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBpZiAoIW1vZHVsZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgY29uc3QgcGF0aCA9IG1vZHVsZS5mcW4uc3BsaXQoJy4nKS5zcGxpY2UoMSkuam9pbignLicpO1xuICByZXR1cm4gcGF0aC5sZW5ndGggPiAwID8gcGF0aCA6IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclVuZGVmaW5lZDxUIGV4dGVuZHMgb2JqZWN0PihvYmo6IFQpOiBUIHtcbiAgY29uc3QgcmV0OiBhbnkgPSB7fTtcbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkge1xuICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldFtrXSA9IHY7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXQ7XG59XG4iXX0=